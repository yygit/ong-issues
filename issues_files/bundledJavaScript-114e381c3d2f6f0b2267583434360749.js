var Webr={};

Webr.component={};

Webr.component.Underline=function(d){this.input=d};
Webr.component.Underline.prototype.underline=function(d,e,f){for(var f=f||0,i=null!=e?e.length:0,l=this.getRangesElement(),m=l.childNodes,j=m.length,n=$(this.input).position(),b=0;b<(j>i?j:i);++b){var a;b<j?a=m.item(b):(a=document.createElement("li"),l.appendChild(a));if(b<i&&-1!=e[b].start&&-1!=e[b].end){var c=e[b],g=this.getStringWidth(d,c.start),k=this.input.offsetWidth;if(g+f<k){var o=this.input.offsetTop+this.input.offsetHeight-2,h=this.getStringWidth(d,c.end)-g,h=c.start==c.end?10:this.getStringWidth(d,
c.end)-g;g+f+h>k&&(h=k-g-f);a.style.left=g+n.left+f+"px";a.style.width=h+"px";a.style.top=o+"px";a.className=null!=c.styleClass?c.styleClass:"type"+c.type;a.style.display="block"}else a.style.display="none"}else a.style.display="none"}};Webr.component.Underline.prototype.getStringWidth=function(d,e){return Webr.component.FontMetrics.stringWidth(this.input,d.substring(0,e))};
Webr.component.Underline.prototype.getRangesElement=function(){null==this.underliner&&(this.underliner=document.createElement("ul"),this.underliner.className="underline",$(this.input).after(this.underliner));return this.underliner};Webr.component.Range=function(){};

var WikiUtil={},WikiUtil=function(){};WikiUtil.prototype.pr_isIE=function(){var a=navigator&&navigator.userAgent&&/\bMSIE/.test(navigator.userAgent);this.pr_isIE=function(){return a};return a};WikiUtil.prototype.pr_isIE6=function(){var a=navigator&&navigator.userAgent&&/\bMSIE 6\./.test(navigator.userAgent);this.pr_isIE6=function(){return a};return a};
WikiUtil.wikiCollapse=function(a){a=$(a);a.toggleClass("wiki-minus");var a=a.next(),c=a.next(),b=c.next();$(a).toggleClass("wiki-hidden");$(c).toggleClass("wiki-hidden");$(b).toggleClass("wiki-hidden")};WikiUtil.showTooltip=function(a){window.setTimeout(WikiUtil.appear(a),400)};WikiUtil.hideTooltip=function(a){var c=a.nextSibling,b=c.childNodes;if(null!=b.length&&0<b.length){for(var d in b)a.parentNode.nextSibling.appendChild(d);c.style.display="none"}};
WikiUtil.IEFix=function(){if((void 0).pr_isIE()||(void 0).pr_isIE6()){var a=(void 0).pr_isIE6()?"\r":"\r\n";$(".wiki.text br").replaceWith(a)}};WikiUtil.appear=function(a){a.onmousemove="";for(var c=a.parentNode.nextSibling.childNodes,b=a.nextSibling,d=1;d<c.length;d+=1)b.appendChild(c.item(d));b.style.left=a.style.left;b.style.top=a.style.top+a.style.height;b.style.display=""};

Webr.event={};

Webr.event.RefreshListener=function(){};Webr.event.RefreshListener.prototype.afterRefresh=function(){};Webr.event.RefreshListener.prototype.beforeRefresh=function(){};

Webr.component.ComponentRegistry=function(){Webr.component.ComponentRegistry.superclass.constructor.call(this);this.templates={};this.ash=this.addServerSideHandler;this.ach=this.addClientSideHandler};var F=new Function;F.prototype=Webr.event.RefreshListener.prototype;Webr.component.ComponentRegistry.prototype=new F;Webr.component.ComponentRegistry.prototype.constructor=Webr.component.ComponentRegistry;Webr.component.ComponentRegistry.superclass=Webr.event.RefreshListener.prototype;
Webr.component.ComponentRegistry.prototype.onDocumentLoad=function(){info("onDocumentLoad");this.bindHandlers();this.executeOnLoad()};Webr.component.ComponentRegistry.prototype.onTemplateRefresh=function(a){info("onTemplateRefresh");time("onTemplateRefresh");this.clearCaches();this.bindHandlers(a);this.executeOnLoad();timeEnd("onTemplateRefresh")};Webr.component.ComponentRegistry.prototype.clearCaches=function(){this.lastLoadedTemplates=this.component2elements=null};
Webr.component.ComponentRegistry.prototype.bindHandlers=function(a){this.registerComponents(a);time("bindHandlers");if(this.component2elements)for(var b in this.templates)if(a=this.templates[b],a.paths&&a.bind)for(var c=0;c<a.paths.length;c+=1)a.bind(a.paths[c]);timeEnd("bindHandlers")};
Webr.component.ComponentRegistry.prototype.executeOnLoad=function(){if(this.lastLoadedTemplates){var a=this;jQuery.each(this.lastLoadedTemplates,function(){var b=a.templates[this.name];if(b.onLoad)if(b.paths&&1<b.paths.length)window.alert("Can't execute on load handlers if more then one instance of template ["+b.name+"] present.");else b.onLoad(b.paths[0])})}};
Webr.component.ComponentRegistry.prototype.addClientSideHandler=function(a,b,c,d){this.forEach(a,b,function(a){$(this).bind(c,{realPath:a},d)})};Webr.component.ComponentRegistry.prototype.addServerSideHandler=function(a,b,c,d){var e=this;this.forEach(a,b,function(){$(this).bind(c,{config:d,eventName:c,it:this},e.serverHandler)},function(a){return a.noServerSideEvent(c)})};
Webr.component.ComponentRegistry.prototype.forEach=function(a,b,c,d){this.forEachBundle(a,b,function(a){a.each(function(){c.call(this,a.realPath)})},d)};Webr.component.ComponentRegistry.prototype.forEachBundle=function(a,b,c,d){(a=this.findComponents(a,b))&&(!d||d(a))&&c.call(this,a)};Webr.component.ComponentRegistry.prototype.registerComponent=function(a){var b=a.getAttribute("cn"),c=this.component2elements[b];c||(c=new Webr.component.ElementsBundle,this.component2elements[b]=c);c.elements.push(a)};
Webr.component.ComponentRegistry.prototype.registerComponents=function(a){time("registerComponents");var b=$("[cn]",a);a&&a.getAttribute("cn")&&(b[b.length]=a,b.length+=1);var c=this;0<b.length&&(this.component2elements={},b.each(function(){c.registerComponent(this)}),Webr.util.Util.isIE&&b.each(function(){c.applyExtension(this)}));timeEnd("registerComponents");info("total components: "+b.length)};
Webr.component.ComponentRegistry.prototype.findComponents=function(a,b){if(this.component2elements){var c=this.component2elements[a.path+"."+b];if(!c)return;c.realPath=a.path;return c}return null};Webr.component.ComponentRegistry.prototype.afterRefresh=function(a){this.onTemplateRefresh(a)};Webr.component.ComponentRegistry.prototype.setTemplateBind=function(a,b){cr.getTemplate(a).bind=b};Webr.component.ComponentRegistry.prototype.setTemplateOnLoad=function(a,b){cr.getTemplate(a).onLoad=b};
Webr.component.ComponentRegistry.prototype.setTemplatePaths=function(a){this.lastLoadedTemplates=a;jQuery.each(a,function(){cr.getTemplate(this.name).paths=this.paths})};Webr.component.ComponentRegistry.prototype.getTemplate=function(a){var b=this.templates[a];b||(b=new Webr.component.Template(a),this.templates[a]=b);return b};
Webr.component.ComponentRegistry.prototype.createServerEventConfig=function(a,b,c){b=Webr.event.ServerEventConfig.createCopy(b,{collectFormElements:!0,sync:!1,eventParameters:{}});b.eventParameters.__COMPONENT_PARAMS__=this.getComponentParameters(a);b.eventParameters.__COMPONENT_SOURCE__=this.getComponentSource(a);b.eventName=this.getComponentName(a)+":"+c;return b};
Webr.component.ComponentRegistry.prototype.getComponentParameters=function(a){for(var b=[],c=0,d=a.getAttribute("p"+c),c=c+1;d;)b.push(d),d=a.getAttribute("p"+c),c+=1;return b};Webr.component.ComponentRegistry.prototype.getComponentSource=function(a){for(var b=this.getComponentName(a),a=this.getComponentParameters(a),c=0;c<a.length;c+=1)b+="_"+a[c];return this._normalize(b)};
Webr.component.ComponentRegistry.prototype.getComponentName=function(a){var b=a.getAttribute("cname");if(b)return b;if(b=a.getAttribute("cn")){for(var c=b.split("."),b="",d=0;d<c.length;d+=1){var b=b+c[d],e=a.getAttribute("tp"+d);e&&(b+="_"+e);d!=c.length-1&&(b+=".")}b=this._normalize(b);a.setAttribute("cname",b);return b}};
Webr.component.ComponentRegistry.prototype.serverHandler=function(a,b){var c=a.data.config,c=cr.createServerEventConfig(cr.getTarget(a),c,a.data.eventName);if(b){c.eventParameters=c.eventParameters||{};for(var d in b)c.eventParameters[d]=b[d]}Webr.Event.post(c);return!0};Webr.component.ComponentRegistry.prototype.getTarget=function(a){var b=a.data.it;if(b)return b;for(b=a.target;!b.getAttribute("cn");)b=b.parentNode;return b};
Webr.component.ComponentRegistry.prototype.serverMethodCallInHandler=function(a,b,c,d){a=Webr.event.ServerEventConfig.createCopy(d,{sync:!1,preventDoubleSubmit:!1,processRecentOnly:!1,collectFormElements:!0,eventName:this.getEventNameForMethodCall(this.addTemplateParams(a.data.realPath,this.getTarget(a))+b),eventParameters:c});Webr.Event.post(a)};Webr.component.ComponentRegistry.prototype.getEventNameForMethodCall=function(a){var b=a.lastIndexOf(".");return a.substring(0,b)+":"+a.substring(b+1)};
Webr.component.ComponentRegistry.prototype.serverEventCallInHandler=function(a,b){b.eventSource=this.getTemplateName(this.getTarget(a));Webr.Event.post(b)};Webr.component.ComponentRegistry.prototype.findGlobal=function(a,b){for(var c=0;c<b.length;c+=1)a+="_"+b[c];return this.findById(this._normalize("id_"+a))};Webr.component.ComponentRegistry.prototype._normalize=function(a){return a.replaceAll("-","_")};
Webr.component.ComponentRegistry.prototype.findById=function(a){a=document.getElementById(a);if(!a)return null;var b=$(a);return(b=this.getComponentInstance(b))?b:a};Webr.component.ComponentRegistry.prototype.getComponentInstance=function(a){return a.data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE)};
Webr.component.ComponentRegistry.prototype.addTemplateParams=function(a,b){for(var c=a.split("."),d="",e=0;e<c.length;e+=1){var d=d+c[e],f=b.getAttribute("tp"+e);f&&(d+="_"+f);e<c.length-1&&(d+=".")}return this._normalize(d)};Webr.component.ComponentRegistry.prototype.findInHandler=function(a,b,c){return this.findGlobal(this.addTemplateParams(a.data.realPath,this.getTarget(a))+b,c)};
Webr.component.ComponentRegistry.prototype.findInGlobalHandler=function(a,b,c){b.startsWith(".")&&(b=b.substring(1));var d=this.findComponents(a,b),a=d?this.getTemplateName(d.elements[0]):a.path;return this.findGlobal(a+"."+b,c)};Webr.component.ComponentRegistry.prototype.getTemplateName=function(a){a=this.getComponentName(a);return a.substring(0,a.lastIndexOf("."))};
Webr.component.ComponentRegistry.prototype.registerExtension=function(a,b){if(null==window[b]){null==this.elementPrototypes&&(this.elementPrototypes={});var c=new Function;window[b]=c;this.elementPrototypes[a.toLowerCase()]=c}};Webr.component.ComponentRegistry.prototype.applyExtension=function(a){if(null!=this.elementPrototypes&&null!=this.elementPrototypes[a.tagName.toLowerCase()]){var b=this.elementPrototypes[a.tagName.toLowerCase()],c;for(c in b.prototype)try{a[c]=b.prototype[c]}catch(d){}}};
Webr.component.ComponentRegistry.COMPONENT_INSTANCE="_instance_";Webr.component.ComponentRegistry.instance=new Webr.component.ComponentRegistry;Webr.component.ComponentRegistry.get=function(){return Webr.component.ComponentRegistry.instance};Webr.component.Template=function(a,b){this.name=a;this.paths=b};Webr.component.TemplatePath=function(){};Webr.component.ElementsBundle=function(){this.dataValue={};this.elements=[]};
Webr.component.ElementsBundle.prototype.each=function(a){jQuery.each(this.elements,a)};Webr.component.ElementsBundle.prototype.data=function(a,b){if(!b)return this.dataValue[a];this.dataValue[a]=b};Webr.component.ElementsBundle.prototype.__getEventsHolder=function(){this.__eventsHolder||(this.__eventsHolder=$(this.elements[0]));return this.__eventsHolder};Webr.component.ElementsBundle.prototype.__bind=function(a,b,c){this.__getEventsHolder().bind(a,b,c)};
Webr.component.ElementsBundle.prototype.__fire=function(a,b,c){this.__getEventsHolder().trigger(b,c)};Webr.component.ElementsBundle.prototype.noServerSideEvent=function(a){a+="$$";return!this.data(a)?(this.data(a,!0),!0):!1};var cr=Webr.component.ComponentRegistry.get();

cr.setTemplateBind("Votes",function(a){cr.ash(a,"poll","click",{preventDoubleSubmit:!0})});

var charisma={smartui:{}};

Webr.HashSet=function(){this._size=0;this.numberField="_KEY_IN_SET_"+Webr.HashSet.instanceCount;Webr.HashSet.instanceCount+=1};Webr.HashSet.prototype.add=function(a){if(null==a)throw"Can't add undefined item.";this.items||(this.items={},this._key=0);this.contains(a)||(this.items[this._key]=a,a[this.numberField]=this._key,this._key+=1,this._size+=1)};
Webr.HashSet.prototype.remove=function(a){if(null==a[this.numberField])throw"Item ["+a+"] not from this set.";delete this.items[a[this.numberField]];delete a[this.numberField];this._size-=1};Webr.HashSet.prototype.contains=function(a){return a[this.numberField]};Webr.HashSet.prototype.size=function(){return this._size};Webr.HashSet.prototype.forEach=function(a){for(var b in this.items)if(!a(this.items[b]))return!1;return!0};
Webr.HashSet.prototype.toString=function(a){var b=!0,c="";this.forEach(function(d){b||(c+=",");c+=a(d);b=!1});return c};Webr.HashSet.instanceCount=0;Webr.NumberSet=function(a){Webr.NumberSet.superclass.constructor.call(this);this.throwExIfNotContains=!0;!1===a&&(this.throwExIfNotContains=!1)};var F=new Function;F.prototype=Webr.HashSet.prototype;Webr.NumberSet.prototype=new F;Webr.NumberSet.prototype.constructor=Webr.NumberSet;Webr.NumberSet.superclass=Webr.HashSet.prototype;
Webr.NumberSet.prototype.add=function(a){if(null==a)throw"Can't add undefined item.";this.items||(this.items={});this.contains(a)||(this.items[a]=!0,this._size+=1)};Webr.NumberSet.prototype.remove=function(a){if(null==this.items||null==this.items[a]){if(this.throwExIfNotContains)throw Webr.component.Debug.dumpStackTrace(),"Item ["+a+"] not from this set.";}else delete this.items[a],this._size-=1};Webr.NumberSet.prototype.contains=function(a){return this.items[a]};
Webr.NumberSet.prototype.forEach=function(a){for(var b in this.items)if(!a(b))return!1;return!0};

Webr.component.Component=function(){this.listeners=new Webr.HashSet};Webr.component.Component.prototype.addListener=function(a){this.listeners.add(a)};Webr.component.Component.prototype.removeListener=function(a){this.listeners.remove(a)};Webr.component.Component.prototype.fireKeyPressed=function(a){var c=this;return this.fire(function(b){return b.keyPressed?b.keyPressed(c,a):!0})};
Webr.component.Component.prototype.fireKeyDown=function(a){var c=this;return this.fire(function(b){return b.keyDown?b.keyDown(c,a):!0})};Webr.component.Component.prototype.fire=function(a){return this.listeners.forEach(a)};Webr.component.ComponentListener=function(){};Webr.component.ComponentListener.prototype.keyPressed=function(){return!0};Webr.component.ComponentListener.prototype.keyDown=function(){return!0};

Webr.component.Suggest=function(a,b){Webr.component.Suggest.superclass.constructor.call(this);this.suggestDivPosition="absolute";this.selectedIndex=-1;this.current_state=null;this.input=a;this.config=b||{baseSuggestOffset:-5};this.initHandlers();this.current_state=Webr.component.Suggest.state_UNFOCUSED};var F=new Function;F.prototype=Webr.component.Component.prototype;Webr.component.Suggest.prototype=new F;Webr.component.Suggest.prototype.constructor=Webr.component.Suggest;
Webr.component.Suggest.superclass=Webr.component.Component.prototype;Webr.component.Suggest.prototype.initHandlers=function(){var a=this,b=$(this.input);$(Webr.util.Util.isIE?document.body:document).mousedown(function(c){null!=a.suggestDiv&&!$(a.suggestDiv).ancestorOf(c.target,!0)&&!b.ancestorOf(c.target,!0)&&a.blur()});b.blur(function(){a.inputBlur()});b.focus(function(){a.focus()});b.keyrepeatable(function(b){a.keyPressed(b);return b.isPropagationStopped()?!1:a.fireKeyDown(b)})};
Webr.component.Suggest.prototype.show=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"show",arguments)};Webr.component.Suggest.prototype.inputBlur=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"inputBlur",arguments)};Webr.component.Suggest.prototype.focus=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"focus",arguments)};Webr.component.Suggest.prototype.blur=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"blur",arguments)};
Webr.component.Suggest.prototype.keyPressed=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"keyPressed",arguments)};Webr.component.Suggest.prototype.mouseMove=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseMove",arguments)};Webr.component.Suggest.prototype.mouseClicked=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseClicked",arguments)};
Webr.component.Suggest.prototype.getSelectedItem=function(){var a=this.selectedIndex;return this.isEmpty()||0>a||a>=this.data.items.length?null:this.data.items[a]};Webr.component.Suggest.prototype.isEmpty=function(){return null==this.data||0>=this.data.items.length};
Webr.component.Suggest.prototype.select=function(a,b){Webr.component.SuggestItem.select(this.getSelectedItem(),Webr.component.SuggestItem.SELECT_NONE);this.selectedIndex=a;var c=this.getSelectedItem();this.selectedOption=null!=c?c.o:null;Webr.component.SuggestItem.select(c,b?Webr.component.SuggestItem.SELECT_IMPLICIT:Webr.component.SuggestItem.SELECT_EXPLCIT)};Webr.component.Suggest.prototype.hide=function(){this.setVisible(!1)};
Webr.component.Suggest.prototype.setVisible=function(a){null!=this.suggestDiv&&(this.suggestDiv.style.display=a?"block":"none")};Webr.component.Suggest.prototype.findSelectedOption=function(){var a=-1;if(null!=this.selectedOption)for(var b=this.data.items.length,c=0;c<b;++c)if(this.data.items[c].o==this.selectedOption){a=c;break}return a};Webr.component.Suggest.prototype.getPrevious=function(){return 0<this.selectedIndex?this.selectedIndex-1:this.data.items.length-1};
Webr.component.Suggest.prototype.getNext=function(){return this.selectedIndex+1<this.data.items.length?this.selectedIndex+1:0};Webr.component.Suggest.prototype.getFirst=function(){return this.data.items[0]};Webr.component.Suggest.prototype.needStopPropagationOnImplicit=function(){return this.config.propogateImplicitComplete&&this.getFirst().c?!1:!0};Webr.component.Suggest.prototype.beforeSuggest=function(){};
Webr.component.Suggest.prototype.create=function(){null==this.suggestDiv&&(this.suggestDiv=document.createElement("div"),this.suggestDiv.className="suggest",this.suggestDivPosition&&(this.suggestDiv.style.position=this.suggestDivPosition),this.commentDiv=document.createElement("div"),this.commentDiv.className="comment",this.config.propogateImplicitComplete&&(this.moveNextFieldCompleteComment=document.createTextNode(l10n('Use {0} to move on to the next field',Webr.util.Util.isMac?"\u21e5":
"Tab"))),this.implicitCompleteComment=document.createTextNode(l10n('Use {0} to complete first item',Webr.util.Util.isMac?"\u21e5":"Tab")),this.explicitCompleteComment=document.createTextNode(l10n('Use {0} to complete selected item',Webr.util.Util.isMac?"\u23ce":"Enter")),this.commentDiv.appendChild(this.implicitCompleteComment),this.suggestDiv.appendChild(this.commentDiv),document.body.appendChild(this.suggestDiv))};
Webr.component.Suggest.prototype.suggest=function(a){this.beforeSuggest();this.data=a;var b=[];this.create();var c=document.createDocumentFragment(),e=document.createElement("ul");c.appendChild(e);for(var d=0,f=0;f<a.items.length;f+=1){var g;a.items[f].sep?g=Webr.component.SuggestItem.createSeparator(a.items[f]):(g="option",-1==this.selectedIndex&&0==d&&(g+=" defaultCurrent"),this.selectedIndex==d&&(g+=" current"),g=Webr.component.SuggestItem.createLi(a.items[f],g),$(g).bind("mousemove",{suggest:this,
optionIndex:d},Webr.component.Suggest.optionMouseMove).bind("click",{suggest:this,optionIndex:d},Webr.component.Suggest.optionClick),b.push(a.items[f]),++d);e.appendChild(g)}this.data.items=b;b=this.suggestDiv.getElementsByTagName("ul").item(0);null==b?this.suggestDiv.insertBefore(c,this.commentDiv):$(b).replaceWith(c);this.isEmpty()||this.setPosition(a);this.show(0>=this.data.items.length)};
Webr.component.Suggest.prototype.setPosition=function(a){var a=a.items[0].cs,b=this.input.value,a=0<=a?b.substring(0,a):"",c=Webr.component.FontMetrics.stringWidth(this.input,a)+this.config.baseSuggestOffset,a=this.getInputPosition();this.suggestDiv.style.left="-5000px";$(this.suggestDiv).width();b=document.body.offsetWidth;c=Math.min(a.left+c,Math.max(a.left+this.input.offsetWidth-4,0));this.suggestDiv.style.top=a.top+this.input.offsetHeight+"px";this.suggestDiv.style.left=c+"px";this.suggestDiv.style.maxWidth=
b-c-6+"px"};Webr.component.Suggest.prototype.getInputPosition=function(){return $(this.input).offset()};Webr.component.Suggest.prototype.setComment=function(a){var b=this.commentDiv.childNodes.item(0),a=a?this.implicitCompleteComment:this.explicitCompleteComment;b!=a&&this.commentDiv.replaceChild(a,b)};
Webr.component.Suggest.prototype.setMoveCommentInImplicit=function(){if(this.moveNextFieldCompleteComment){var a=this.commentDiv.childNodes.item(0);a!=this.moveNextFieldCompleteComment&&this.getFirst().c?this.commentDiv.replaceChild(this.moveNextFieldCompleteComment,a):this.setComment(!0)}};Webr.component.Suggest.prototype.isSuggestCompatible=function(){return this.data.query==this.input.value};
Webr.component.Suggest.prototype.complete=function(a,b){var c=this.data.items[a],e=this.data.query,d=e.substring(0,c.cs);null!=c.pre&&(d+=c.pre);e=e.substring(b?c.ce:this.data.caret);null!=c.suf&&(e=c.suf+e);d=d+c.o+e;this.input.value=d;this.input.setCaretPosition(null!=c.cp?c.cp:d.length-e.length)};Webr.component.Suggest.CLIENT_MOUSE_COORDS=null;
Webr.component.Suggest.state_UNFOCUSED={name:"UNFOCUSED",focus:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_HIDDEN_FOCUS);return Webr.component.Suggest.state_HIDDEN_FOCUS},keyPressed:function(){return Webr.component.Suggest.state_HIDDEN_KEYBOARD}};
Webr.component.Suggest.state_HIDDEN={name:"HIDDEN",inputBlur:function(){return Webr.component.Suggest.state_UNFOCUSED},show:function(a){return!1==a?(this.setVisible(!0),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_NOTHING_SELECTED),Webr.component.Suggest.state_NOTHING_SELECTED):!1}};Webr.component.Suggest.state_HIDDEN_FOCUS={name:"HIDDEN_FOCUS",parentState:Webr.component.Suggest.state_HIDDEN,onenter:function(){this.select(-1,!1)}};
Webr.component.Suggest.state_HIDDEN_KEYBOARD={name:"HIDDEN_KEYBOARD",parentState:Webr.component.Suggest.state_HIDDEN};
Webr.component.Suggest.state_VISIBLE={name:"VISIBLE",show:function(a){return!0==a?(this.setVisible(!1),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_HIDDEN_FOCUS),Webr.component.Suggest.state_HIDDEN_FOCUS):!1},blur:function(){this.setVisible(!1);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_HIDDEN_FOCUS);return Webr.component.Suggest.state_HIDDEN_FOCUS},keyPressed:function(a){return Webr.util.Key.isApplicable(a,SuggestKeyStrokes.Close)?
(this.setVisible(!1),a.stopPropagation(),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_HIDDEN_FOCUS),Webr.component.Suggest.state_HIDDEN_FOCUS):!1},mouseClicked:function(a,b){$(this.input).focus();this.complete(b,!1);this.setVisible(!1);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_HIDDEN_FOCUS);return Webr.component.Suggest.state_HIDDEN_FOCUS}};
Webr.component.Suggest.state_NOTHING_SELECTED={name:"NOTHING_SELECTED",parentState:Webr.component.Suggest.state_VISIBLE,onenter:function(){this.setComment(!0)},keyPressed:function(a){if(Webr.util.Key.isApplicable(a,SuggestKeyStrokes.ImplicitComplete)&&this.isSuggestCompatible())return this.complete(0,!0),this.setVisible(!1),this.needStopPropagationOnImplicit()&&a.stopPropagation(),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_HIDDEN_FOCUS),Webr.component.Suggest.state_HIDDEN_FOCUS;
if(Webr.util.Key.isApplicable(a,SuggestKeyStrokes.ImplicitComplete)&&!this.isSuggestCompatible())this.needStopPropagationOnImplicit()&&a.stopPropagation();else return Webr.util.Key.isApplicable(a,SuggestKeyStrokes.PreviousItem)?(this.select(this.data.items.length-1,!1),a.stopPropagation(),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_SELECTED_WITH_KEYBOARD),Webr.component.Suggest.state_SELECTED_WITH_KEYBOARD):Webr.util.Key.isApplicable(a,SuggestKeyStrokes.NextItem)?
(this.select(0,!1),a.stopPropagation(),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_SELECTED_WITH_KEYBOARD),Webr.component.Suggest.state_SELECTED_WITH_KEYBOARD):!1},show:function(a){if(!1==a)this.setMoveCommentInImplicit(),this.setVisible(!0);else return!1},mouseMove:function(a,b){this.select(b,!0);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_SELECTED_WITH_MOUSE);return Webr.component.Suggest.state_SELECTED_WITH_MOUSE}};
Webr.component.Suggest.state_ITEM_SELECTED={name:"ITEM_SELECTED",parentState:Webr.component.Suggest.state_VISIBLE,keyPressed:function(a){return Webr.util.Key.isApplicable(a,SuggestKeyStrokes.PreviousItem)?(this.select(this.getPrevious(),!1),a.stopPropagation(),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_SELECTED_WITH_KEYBOARD),Webr.component.Suggest.state_SELECTED_WITH_KEYBOARD):Webr.util.Key.isApplicable(a,SuggestKeyStrokes.NextItem)?(this.select(this.getNext(),
!1),a.stopPropagation(),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_SELECTED_WITH_KEYBOARD),Webr.component.Suggest.state_SELECTED_WITH_KEYBOARD):!1}};
Webr.component.Suggest.state_SELECTED_WITH_MOUSE={name:"SELECTED_WITH_MOUSE",parentState:Webr.component.Suggest.state_ITEM_SELECTED,onenter:function(){this.setComment(!0)},keyPressed:function(a){return Webr.util.Key.isApplicable(a,SuggestKeyStrokes.ImplicitComplete)?(this.complete(0,!0),this.setVisible(!1),this.needStopPropagationOnImplicit()&&a.stopPropagation(),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_HIDDEN_FOCUS),Webr.component.Suggest.state_HIDDEN_FOCUS):
!1},show:function(a){return!1==a?(this.setMoveCommentInImplicit(),this.select(-1,!1),this.setVisible(!0),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_NOTHING_SELECTED),Webr.component.Suggest.state_NOTHING_SELECTED):!1},mouseMove:function(a,b){if(b!=this.selectedIndex)this.select(b,!0);else return!1}};
Webr.component.Suggest.state_SELECTED_WITH_KEYBOARD={name:"SELECTED_WITH_KEYBOARD",parentState:Webr.component.Suggest.state_ITEM_SELECTED,onenter:function(){this.setComment(!1)},keyPressed:function(a){return Webr.util.Key.isApplicable(a,SuggestKeyStrokes.ExplicitComplete)||Webr.util.Key.isApplicable(a,SuggestKeyStrokes.SpaceComplete)?(this.complete(this.selectedIndex,!1),this.setVisible(!1),a.stopPropagation(),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_HIDDEN_FOCUS),
Webr.component.Suggest.state_HIDDEN_FOCUS):Webr.util.Key.isApplicable(a,SuggestKeyStrokes.ImplicitComplete)?(this.complete(this.selectedIndex,!0),this.setVisible(!1),a.stopPropagation(),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_HIDDEN_FOCUS),Webr.component.Suggest.state_HIDDEN_FOCUS):!1},show:function(a){if(!1==a&&!1==a&&-1==this.findSelectedOption())return this.select(-1,!1),this.setVisible(!0),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Suggest.state_NOTHING_SELECTED),
Webr.component.Suggest.state_NOTHING_SELECTED;if(!1==a&&!1==a&&-1!=this.findSelectedOption())this.select(this.findSelectedOption(),!1),this.setVisible(!0);else return!1},mouseMove:function(a,b){if(b!=this.selectedIndex)this.select(b,!1);else return!1}};Webr.component.Suggest.optionMouseMove=function(a){Webr.component.Suggest.checkClientCoords(a.clientX,a.clientY)&&a.data.suggest.mouseMove(a,a.data.optionIndex)};
Webr.component.Suggest.checkClientCoords=function(a,b){return!Webr.component.Suggest.CLIENT_MOUSE_COORDS?(Webr.component.Suggest.CLIENT_MOUSE_COORDS={left:a,top:b},!1):Webr.component.Suggest.CLIENT_MOUSE_COORDS.top!==b||Webr.component.Suggest.CLIENT_MOUSE_COORDS.left!==a?(Webr.component.Suggest.CLIENT_MOUSE_COORDS.top=b,Webr.component.Suggest.CLIENT_MOUSE_COORDS.left=a,!0):!1};Webr.component.Suggest.optionClick=function(a){a.data.suggest.mouseClicked(a,a.data.optionIndex)};
Webr.component.SuggestConfig=function(){};Webr.component.SuggestData=function(){};Webr.component.SuggestItem=function(){};Webr.component.SuggestItem.SELECT_NONE=0;Webr.component.SuggestItem.SELECT_EXPLCIT=1;Webr.component.SuggestItem.SELECT_IMPLICIT=2;
Webr.component.SuggestItem.select=function(a,b){null!=a&&null!=a.li&&(b==Webr.component.SuggestItem.SELECT_NONE&&$(a.li).removeClass("current"),b==Webr.component.SuggestItem.SELECT_IMPLICIT&&$(a.li).addClass("current"),b==Webr.component.SuggestItem.SELECT_EXPLCIT&&$(a.li).addClass("current"))};
Webr.component.SuggestItem.createLi=function(a,b){var c=document.createElement("li");c.className=b;var e=document.createElement("span");e.className="option optionType"+a.t;if(null!=a.pre&&0<a.pre.length){var d=document.createElement("span");d.className="prefix";d.appendChild(document.createTextNode(a.pre));e.appendChild(d)}d=0<=a.ms&&a.ms<a.o.length?a.ms:-1;if(0<=d){0<d&&e.appendChild(document.createTextNode(a.o.substring(0,d)));var f=document.createElement("span");f.className="match";f.appendChild(document.createTextNode(a.o.substring(d,
a.me)));e.appendChild(f);a.me<a.o.length&&e.appendChild(document.createTextNode(a.o.substring(a.me)))}else e.appendChild(document.createTextNode(a.o));c.appendChild(e);null!=a.suf&&0<a.suf.length&&(d=document.createElement("span"),d.className="suffix",d.appendChild(document.createTextNode(a.suf)),e.appendChild(d));e=document.createElement("span");e.className="description";d=a.ms>=a.o.length?a.ms-a.o.length:-1;0<=d?(0<d&&e.appendChild(document.createTextNode(a.d.substring(0,d))),f=document.createElement("span"),
f.className="match",f.appendChild(document.createTextNode(a.d.substring(d,a.me-a.o.length))),e.appendChild(f),a.me-a.o.length<a.d.length&&e.appendChild(document.createTextNode(a.d.substring(a.me-a.o.length)))):a.hd?e.innerHTML=a.d:e.appendChild(document.createTextNode(a.d));c.appendChild(e);return a.li=c};
Webr.component.SuggestItem.createSeparator=function(a){var b=document.createElement("li");b.className="separator";var c=document.createElement("span");c.className="description";c.appendChild(document.createTextNode(a.d));b.appendChild(c);return b};

charisma.UsernameSuggest=function(a){"TEXTAREA"!==a.tagName&&(a=$(a).find("textarea").first().get(0));if(a){if("rtl"===$(a).css("direction"))return;charisma.UsernameSuggest.superclass.constructor.call(this,a);this.config.propogateImplicitComplete=!1;this.input.suggester=this;this.input.setAutoComplete(!1)}this.decorator=function(){$(this.suggestDiv).addClass("username-suggester")}};var F=new Function;F.prototype=Webr.component.Suggest.prototype;charisma.UsernameSuggest.prototype=new F;
charisma.UsernameSuggest.prototype.constructor=charisma.UsernameSuggest;charisma.UsernameSuggest.superclass=Webr.component.Suggest.prototype;charisma.UsernameSuggest.prototype.create=function(){charisma.UsernameSuggest.superclass.create.call(this);this.decorator&&(this.decorator(),delete this.decorator)};charisma.UsernameSuggest.prototype.beforeSuggest=function(){this.focus()};
charisma.UsernameSuggest.prototype.initHandlers=function(){var a=this,b,d=$(this.input);this.handleEsc=function(b){if(Webr.util.Key.isApplicable(b,SuggestKeyStrokes.Close)&&a.visible)return a.blur(),!1};charisma.UsernameSuggest.superclass.initHandlers.call(this);d.bind("valuechange.usernameSuggest mouseup.usernameSuggest",function(){a.trySuggest()}).blur(function(){a.clone&&a.clone.empty()}).on("keydown.usernameSuggest",function(c){window.clearTimeout(b);if(Webr.util.Key.isApplicable(c,SmartUIShortCuts.Submit))return a.blur(),
!0;Webr.util.Key.isApplicable(c,SuggestKeyStrokes.Close)||(b=window.setTimeout(function(){a.trySuggest()},50))})};
charisma.UsernameSuggest.prototype.setPosition=function(){var a=$(this.input);this.clone||(this.clone=$(document.createElement("div")).css({"font-size":a.css("font-size"),"font-family":a.css("font-family"),"line-height":a.css("line-height"),"font-weight":a.css("font-weight"),"font-variant":a.css("font-variant"),"text-align":a.css("text-align"),"letter-spacing":a.css("letter-spacing"),margin:a.css("margin"),padding:a.css("padding"),width:a.width()}).addClass("username-suggest__clone"),a.after(this.clone));
(this.position=this.getPosition())&&$(this.suggestDiv).css("top",Math.ceil(this.position.top)).css("left",this.position.left).css("maxWidth",$(window).width()-this.position.left)};
charisma.UsernameSuggest.prototype.getPosition=function(){if(void 0!=this.userName){var a,b;b=this.input.getCaretPosition();a=$(this.input);b=[this.input.value.substr(0,b-this.userName.length-1),this.input.value.substr(b,this.input.value.length)];b=charisma.UsernameSuggest.eliminateXSSDangerousSymbols(b[0])+"<span>"+charisma.UsernameSuggest.KEY+charisma.UsernameSuggest.eliminateXSSDangerousSymbols(this.userName)+"</span>"+charisma.UsernameSuggest.eliminateXSSDangerousSymbols(b[1]);this.clone.html(b);
this.clone.height(a.height()).width(a.width()).offset(a.offset());a=this.clone.find("span");b=a.offset();var d=$(this.input);return{top:b.top+a.height()-d.scrollTop(),left:b.left-d.scrollLeft()}}return null};
charisma.UsernameSuggest.prototype.complete=function(a,b){var d=this.data.items[a],c=this.input.value,e=this.input.getCaretPosition(),h=c.substr(0,e-this.data.query.length),c=c.substr(e);if(b){var e=c.indexOf(" "),g=c.indexOf("\n"),f=Math.min(e,g);-1==e?f=g:-1==g&&(f=e);c=0<=f?c.substr(f,c.length):" "}else c=" "+c;d=h+d.o;this.input.value=d+c;this.input.setCaretPosition(d.length+1)};
charisma.UsernameSuggest.prototype.trySuggest=function(){var a=this.input.value.substring(0,this.input.getCaretPosition()).split("\n").pop();if(0==a.length)this.blur();else if(this.userName=this.getUserName(a),null!==this.userName){var b=this;charisma.Rest.get("comment/reply/suggest",{optionsLimit:10,prefix:b.userName,issueIds:charisma.smartui.IssueId.encodeIssueIds(commonController.getSelectedIssuesIds())},function(a){a.items=a.items||[];$(b.input).is(":focus")&&(b.suggest(a),this.userName=null)},
charisma.RestMethods.id(this.input))}else this.blur()};charisma.UsernameSuggest.prototype.getUserName=function(a){for(var b="",d,c;;){c=a.lastIndexOf(charisma.UsernameSuggest.KEY);if(-1!=c&&" "!==a.slice(-1))d=a.substr(c+1,a.length)+b;else{d=null;break}if(this.isSuggestRequired(a,c,d))break;b+=a.substr(c,a.length);a=a.substr(0,c)}return d};charisma.UsernameSuggest.prototype.isSuggestRequired=function(a,b,d){return-1==b||" "===d||0!=b&&(a=a.charAt(b-1),/^A-Za-z0-9_\$\+\.\|-=@/.test(a))?!1:!0};
charisma.UsernameSuggest.prototype.isSuggestCompatible=function(){return!0};charisma.UsernameSuggest.prototype.targetVisible=function(){var a=$(this.input),b=a.offset().top;return this.position.top>b&&this.position.top<b+a.outerHeight()};charisma.UsernameSuggest.prototype.setVisible=function(a){a&&!this.targetVisible()&&(a=!1);charisma.UsernameSuggest.superclass.setVisible.call(this,a);this.handleScrollResizeAndEsc(a);this.visible=a};charisma.UsernameSuggest.prototype.isBinded=function(){return $(this.input).hasClass("username-suggest-bind")};
charisma.UsernameSuggest.prototype.handleScrollResizeAndEsc=function(a){var b=this;a?($(window).bind("resize.usernameSuggest",function(){b.blur()}),this.isBinded()&&$(window).bind("scroll.usernameSuggest",function(){b.blur()}),$(this.input).bind("scroll.usernameSuggest",function(){b.blur()}).bind("keydown.usernameSuggest",b.handleEsc)):($(this.input).unbind("scroll.usernameSuggest keydown.usernameSuggest"),$(window).unbind("resize.usernameSuggest scroll.usernameSuggest"))};
charisma.UsernameSuggest.KEY="@";charisma.UsernameSuggest.attach=function(){$(document).delegate(".username-suggest, .username-suggest-bind","focus",function(){var a=$(this).attr("id");void 0!==a&&(a="usernameSuggest-"+a,!0!==$(this).data(a)?(new charisma.UsernameSuggest(this),$(this).data(a,!0)):$(this).trigger("valuechange.usernameSuggest"))})};charisma.UsernameSuggest.eliminateXSSDangerousSymbols=function(a){return(a||"").replace(RegExp("[<>'\"]","g"),"\u25a1")};

var l10n=function(a,e,f,g,h,i,j,k,l,m){var b=arguments;return a.replace(RegExp("{(\\d+)}","g"),function(a,d){var c=parseInt(d)+1;return"undefined"!=typeof b[c]?b[c]:a})};

cr.registerExtension("input","HTMLInputElement");cr.registerExtension("textarea","HTMLTextAreaElement");HTMLInputElement.prototype.highlight=function(a){this.unHighlight();Webr.ErrorHighlighter.highlightErrorInput(this,a)};HTMLInputElement.prototype.showError=function(a){if(null==this.errorDiv){var b=document.createElement("div");this.errorDiv=$(b).text(a);this.errorDiv.addClass("error-message").insertAfter(this)}};
HTMLInputElement.prototype.unHighlight=function(){this.highliter&&(this.highliter.destroy(),this.highliter=null)};HTMLInputElement.prototype.createHighlighter=function(a){return this.highliter=new Webr.ErrorHighlighter(this,a)};HTMLInputElement.prototype.getValueToCaretPos=function(){return this.value.substring(0,this.getCaretPosition())};
HTMLInputElement.prototype.attachWatcher=function(a){if(!this.watcherAttached){this.watcherAttached=!0;this.watcher=new Webr.component.HTMLInputElementWatcher;this.watcher.attach(this,a);var b=this;$(this).keydown(this.onKeyFunction=function(a){b.onkey(a)})}};HTMLInputElement.prototype.detachWatcher=function(){this.watcherAttached&&(this.watcherAttached=!1,this.watcher.detach(),this.watcher=null,$(this).unbind("keydown",this.onKeyFunction))};
HTMLInputElement.prototype.setWatcherDelay=function(a){this.watcher&&(this.watcher.eventRaiserDelay=a)};HTMLInputElement.prototype.setValueNoEvents=function(a){this.value=a;this.watcher&&this.watcher.resetOldValue(a)};
HTMLInputElement.prototype.getCaretPosition=function(){try{var a=this.value,b=a.length;if(void 0!==this.selectionStart)b=this.selectionStart;else if(Webr.util.Util.isIE&&void 0!==document.selection)if("textarea"==this.tagName.toLowerCase()){var c=document.selection.createRange(),d=c.duplicate();d.moveToElementText(this);d.setEndPoint("EndToEnd",c);b=d.text.length}else{var e=document.selection.createRange().duplicate();e.moveEnd("character",a.length);b=""==e.text?a.length:a.lastIndexOf(e.text)}return b}catch(f){return 0}};
HTMLInputElement.prototype.setCaretPosition=function(a){this.setSelectionRange(a,a)};HTMLInputElement.prototype.setSelectionRange=function(a,b){if(null!=this.selectionStart)this.selectionStart=a,this.selectionEnd=b;else if(this.createTextRange){var c=this.createTextRange();c.moveStart("character",a);c.moveEnd("character",b);c.select()}};HTMLInputElement.prototype.onvaluechange=function(){};HTMLInputElement.prototype.fireValueChange=function(a,b){$(this).trigger("valuechange",{caretPos:a,value:b})};
HTMLInputElement.prototype.oncaretmove=function(){};HTMLInputElement.prototype.fireCaretMove=function(a,b){$(this).trigger("caretmove",{caretPos:a,value:b})};HTMLInputElement.prototype.onkey=function(a){a.isKey(Webr.util.Key.ENTER)?$(this).trigger("enter"):a.isKey(Webr.util.Key.ESC)&&$(this).trigger("esc")};HTMLInputElement.prototype.onenter=function(){};HTMLInputElement.prototype.onesc=function(){};
HTMLInputElement.prototype.underline=function(a,b,c){null==this.underliner&&(null!=b&&0<b.length)&&(this.underliner=new Webr.component.Underline(this));null!=this.underliner&&(this.setSpellCheck(!1),this.underliner.underline(a,b,c))};HTMLInputElement.prototype.suggest=function(a){this.getSuggest().suggest(a)};HTMLInputElement.prototype.getSuggest=function(a){null==this.suggester&&(this.suggester=new Webr.component.Suggest(this,a),this.setAutoComplete(!1));return this.suggester};
HTMLInputElement.prototype.setSpellCheck=function(a){this.setAttribute("spellcheck",a)};HTMLInputElement.prototype.setAutoComplete=function(a){this.setAttribute("autocomplete",a?"on":"off")};HTMLInputElement.prototype.hasChanged=function(){return this.value!=this.defaultValue};HTMLInputElement.dismissOnValueChange=function(a){a.target.unHighlight()};HTMLTextAreaElement.prototype.highlight=HTMLInputElement.prototype.highlight;HTMLTextAreaElement.prototype.showError=HTMLInputElement.prototype.showError;
HTMLTextAreaElement.prototype.unHighlight=HTMLInputElement.prototype.unHighlight;HTMLTextAreaElement.prototype.createHighlighter=HTMLInputElement.prototype.createHighlighter;HTMLTextAreaElement.prototype.getValueToCaretPos=HTMLInputElement.prototype.getValueToCaretPos;HTMLTextAreaElement.prototype.attachWatcher=HTMLInputElement.prototype.attachWatcher;HTMLTextAreaElement.prototype.detachWatcher=HTMLInputElement.prototype.detachWatcher;HTMLTextAreaElement.prototype.setWatcherDelay=HTMLInputElement.prototype.setWatcherDelay;
HTMLTextAreaElement.prototype.setValueNoEvents=HTMLInputElement.prototype.setValueNoEvents;HTMLTextAreaElement.prototype.getCaretPosition=HTMLInputElement.prototype.getCaretPosition;HTMLTextAreaElement.prototype.setCaretPosition=HTMLInputElement.prototype.setCaretPosition;HTMLTextAreaElement.prototype.setSelectionRange=HTMLInputElement.prototype.setSelectionRange;HTMLTextAreaElement.prototype.onvaluechange=HTMLInputElement.prototype.onvaluechange;HTMLTextAreaElement.prototype.fireValueChange=HTMLInputElement.prototype.fireValueChange;
HTMLTextAreaElement.prototype.oncaretmove=HTMLInputElement.prototype.oncaretmove;HTMLTextAreaElement.prototype.fireCaretMove=HTMLInputElement.prototype.fireCaretMove;HTMLTextAreaElement.prototype.onkey=HTMLInputElement.prototype.onkey;HTMLTextAreaElement.prototype.onenter=HTMLInputElement.prototype.onenter;HTMLTextAreaElement.prototype.onesc=HTMLInputElement.prototype.onesc;HTMLTextAreaElement.prototype.underline=HTMLInputElement.prototype.underline;HTMLTextAreaElement.prototype.suggest=HTMLInputElement.prototype.suggest;
HTMLTextAreaElement.prototype.getSuggest=HTMLInputElement.prototype.getSuggest;HTMLTextAreaElement.prototype.setSpellCheck=HTMLInputElement.prototype.setSpellCheck;HTMLTextAreaElement.prototype.setAutoComplete=HTMLInputElement.prototype.setAutoComplete;HTMLTextAreaElement.prototype.hasChanged=HTMLInputElement.prototype.hasChanged;HTMLTextAreaElement.dismissOnValueChange=HTMLInputElement.prototype.dismissOnValueChange;

var AttachActionsUtils={},AttachActionsUtils=function(){};
AttachActionsUtils.saveBase64=function(a){var b=AttachActionsUtils.getRestClient();void 0!==a.commentId?b.resource({p:["comment"]}).method("post",{p:["comment",a.issueId,AttachActionsUtils.getCommentId(a),"base64img"]}).call({p:["comment",null,null,"base64img"],e:Webr.rest.Entity.json({name:a.defaultFileName,value:a.content,userIds:a.permittedUserIds,groupIds:a.permittedGroupIds})}).done(function(b){a.success&&a.success(b,a.issueId)}):b.resource({p:["issue"]}).method("post",{p:["issue",a.issueId,
"base64img"],q:{window_id:a.windowId}}).call({p:["issue",null,"base64img"],e:Webr.rest.Entity.json({name:a.defaultFileName,value:a.content,groupIds:a.permittedGroupIds,userIds:a.permittedUserIds})}).done(function(b){a.success&&a.success(b,a.issueId)})};AttachActionsUtils.getCommentId=function(a){return a.commentId||"new"};
AttachActionsUtils.saveFiles=function(a){var b=AttachActionsUtils.getRestClient(),e=function(b){a.error&&a.error(b)},f=function(){a.success&&a.success()};if(window.FormData){if(a.content instanceof FormData)b=a.content;else{var b=new FormData,c=a.content;c[0]&&(c=c[0]);for(var d=0;d<c.files.length;++d)b.append(c.files[d].name,c.files[d])}c=AttachActionsUtils.getSaveFilesUrl(a);jQuery.ajax({url:c,type:"POST",processData:!1,contentType:!1,data:b,success:f,error:e})}else e={success:f,error:e,timeout:18E4},
void 0!==a.commentId?b.resource({p:["comment"]}).method("post",{p:["comment",null,null,"attachment"]}).call({p:["comment",a.issueId,AttachActionsUtils.getCommentId(a),"attachment"],q:{group:a.permittedGroup,groupIds:a.permittedGroupIds,userIds:a.permittedUserIds},f:a.content,u:e}):b.resource({p:["issue"]}).method("post",{p:["issue",null,"attachment"]}).call({p:["issue",a.issueId,"attachment"],q:{group:a.permittedGroup,groupIds:a.permittedGroupIds,userIds:a.permittedUserIds,window_id:a.windowId},f:a.content,
u:e})};
AttachActionsUtils.getSaveFilesUrl=function(a){var b=AttachActionsUtils.getRestClient();return void 0!==a.commentId?b.resource({p:["comment"]}).method("post",{p:["comment",a.issueId,AttachActionsUtils.getCommentId(a),"attachment"],q:{name:a.defaultFileName,group:a.permittedGroup,groupIds:a.permittedGroupIds,userIds:a.permittedUserIds}}).getUrl():b.resource({p:["issue"]}).method("post",{p:["issue",a.issueId,"attachment"],q:{name:a.defaultFileName,window_id:a.windowId,group:a.permittedGroup,groupIds:a.permittedGroupIds,
userIds:a.permittedUserIds}}).getUrl()};AttachActionsUtils.getRestClient=function(){AttachActionsUtils.restClient||(AttachActionsUtils.restClient=new Webr.rest.Client(Webr.Event.rootUrl,{error:Ajax.onError}));return AttachActionsUtils.restClient};
AttachActionsUtils.insertImageNameToTextarea=function(a,b,e){var f=function(a,b){var c;c=e?"![]("+(a||"image.png")+")":"!"+(a||"image.png")+"!";return(b&&" "!==b&&"\\n"!==b?" ":"")+c},c=b.value||"",d=b.getCaretPosition();c&&c.length&&d<c.length?(a=f(a,c.charAt(d)),b.value=c.substring(0,d)+a+c.substring(d),b.setCaretPosition(d+a.length)):b.value=c+f(a,null)};var AttachActionsErrors={},AttachActionsErrors=function(){};AttachActionsErrors.CANNOT_UPLOAD=l10n('Browser error: unable to load file from clipboard. Try attaching it from file');
AttachActionsErrors.UNSUPPORTED_FILE_TYPE=l10n('Unsupported file type. Expected: png, jpeg, jpg, bmp');var AttachmentUrlParameters={},AttachmentUrlParameters=function(){};

cr.setTemplateBind("IssueAttachment",function(b){cr.ach(b,"previewAttachedFiles","mouseover",function(a){if(cr.findInHandler(a,".attachedFilesPopup",[]))return cr.findInHandler(a,".attachedFilesPopup",[]).load(function(){cr.serverMethodCallInHandler(a,".methodCall_showPopup",{})},cr.findInHandler(a,".previewAttachedFiles",[])),!1});regPC(b,"attachedFilesPopup")});

charisma.smartui.DragInsertWikifiedImageFileName=function(){this.bind()};
charisma.smartui.DragInsertWikifiedImageFileName.prototype.bind=function(){var b=this;$(document).delegate(".attach-lnk, .sb-issue-edit-attach-link","dragstart",null,function(c){b.target=c.target}).delegate(".accept-wikified-image","drop",null,function(c){if(b.target&&b.target.href){var d,a;"object"===typeof this&&(a="TEXTAREA"!==this.tagName?$(this).find("textarea"):$(this));d=a.val();"string"===typeof d&&(c.preventDefault(),c=b.target.href.split("/_persistent/").pop().split("?file")[0],a.val(d+
(0<d.length&&" "!=d.slice(-1)?" ":"")+"!"+decodeURIComponent(c)+"! ").trigger("valuechange",{value:a.val()}),window.setTimeout(function(){a.focus();a[0].setCaretPosition(a.val().length)},20),b.target=null)}})};

/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery-1.10.2.min.map
*/
(function(e,t){var n,r,i=typeof t,o=e.location,a=e.document,s=a.documentElement,l=e.jQuery,u=e.$,c={},p=[],f="1.10.2",d=p.concat,h=p.push,g=p.slice,m=p.indexOf,y=c.toString,v=c.hasOwnProperty,b=f.trim,x=function(e,t){return new x.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=/\S+/g,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,k=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^[\],:{}\s]*$/,S=/(?:^|:|,)(?:\s*\[)+/g,A=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,j=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,D=/^-ms-/,L=/-([\da-z])/gi,H=function(e,t){return t.toUpperCase()},q=function(e){(a.addEventListener||"load"===e.type||"complete"===a.readyState)&&(_(),x.ready())},_=function(){a.addEventListener?(a.removeEventListener("DOMContentLoaded",q,!1),e.removeEventListener("load",q,!1)):(a.detachEvent("onreadystatechange",q),e.detachEvent("onload",q))};x.fn=x.prototype={jquery:f,constructor:x,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof x?n[0]:n,x.merge(this,x.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:a,!0)),k.test(i[1])&&x.isPlainObject(n))for(i in n)x.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=a.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=a,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||x.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(x.isPlainObject(r)||(n=x.isArray(r)))?(n?(n=!1,a=e&&x.isArray(e)?e:[]):a=e&&x.isPlainObject(e)?e:{},s[i]=x.extend(c,a,r)):r!==t&&(s[i]=r));return s},x.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=l),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){if(e===!0?!--x.readyWait:!x.isReady){if(!a.body)return setTimeout(x.ready);x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(a,[x]),x.fn.trigger&&x(a).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray||function(e){return"array"===x.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[y.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,"constructor")&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(x.support.ownLast)for(n in e)return v.call(e,n);for(n in e);return n===t||v.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||a;var r=k.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=x.trim(n),n&&E.test(n.replace(A,"@").replace(j,"]").replace(S,"")))?Function("return "+n)():(x.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&x.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(L,H)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call("\ufeff\u00a0")?function(e){return null==e?"":b.call(e)}:function(e){return null==e?"":(e+"").replace(C,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return d.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),x.isFunction(e)?(r=g.call(arguments,2),i=function(){return e.apply(n||this,r.concat(g.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):t},access:function(e,n,r,i,o,a,s){var l=0,u=e.length,c=null==r;if("object"===x.type(r)){o=!0;for(l in r)x.access(e,n,l,r[l],!0,a,s)}else if(i!==t&&(o=!0,x.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(x(e),n)})),n))for(;u>l;l++)n(e[l],r,s?i:i.call(e[l],l,n(e[l],r)));return o?e:c?n.call(e):u?n(e[0],r):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),x.ready.promise=function(t){if(!n)if(n=x.Deferred(),"complete"===a.readyState)setTimeout(x.ready);else if(a.addEventListener)a.addEventListener("DOMContentLoaded",q,!1),e.addEventListener("load",q,!1);else{a.attachEvent("onreadystatechange",q),e.attachEvent("onload",q);var r=!1;try{r=null==e.frameElement&&a.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!x.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}_(),x.ready()}}()}return n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=x(a),function(e,t){var n,r,i,o,a,s,l,u,c,p,f,d,h,g,m,y,v,b="sizzle"+-new Date,w=e.document,T=0,C=0,N=st(),k=st(),E=st(),S=!1,A=function(e,t){return e===t?(S=!0,0):0},j=typeof t,D=1<<31,L={}.hasOwnProperty,H=[],q=H.pop,_=H.push,M=H.push,O=H.slice,F=H.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",W=R.replace("w","w#"),$="\\["+P+"*("+R+")"+P+"*(?:([*^$|!~]?=)"+P+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+W+")|)|)"+P+"*\\]",I=":("+R+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+$.replace(3,8)+")*)|.*)\\)|)",z=RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),X=RegExp("^"+P+"*,"+P+"*"),U=RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),V=RegExp(P+"*[+~]"),Y=RegExp("="+P+"*([^\\]'\"]*)"+P+"*\\]","g"),J=RegExp(I),G=RegExp("^"+W+"$"),Q={ID:RegExp("^#("+R+")"),CLASS:RegExp("^\\.("+R+")"),TAG:RegExp("^("+R.replace("w","w*")+")"),ATTR:RegExp("^"+$),PSEUDO:RegExp("^"+I),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:RegExp("^(?:"+B+")$","i"),needsContext:RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{M.apply(H=O.call(w.childNodes),w.childNodes),H[w.childNodes.length].nodeType}catch(ot){M={apply:H.length?function(e,t){_.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function at(e,t,n,i){var o,a,s,l,u,c,d,m,y,x;if((t?t.ownerDocument||t:w)!==f&&p(t),t=t||f,n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=t.nodeType)&&9!==l)return[];if(h&&!i){if(o=Z.exec(e))if(s=o[1]){if(9===l){if(a=t.getElementById(s),!a||!a.parentNode)return n;if(a.id===s)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&v(t,a)&&a.id===s)return n.push(a),n}else{if(o[2])return M.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&r.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&(!g||!g.test(e))){if(m=d=b,y=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){c=mt(e),(d=t.getAttribute("id"))?m=d.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",u=c.length;while(u--)c[u]=m+yt(c[u]);y=V.test(e)&&t.parentNode||t,x=c.join(",")}if(x)try{return M.apply(n,y.querySelectorAll(x)),n}catch(T){}finally{d||t.removeAttribute("id")}}}return kt(e.replace(z,"$1"),t,n,i)}function st(){var e=[];function t(n,r){return e.push(n+=" ")>o.cacheLength&&delete t[e.shift()],t[n]=r}return t}function lt(e){return e[b]=!0,e}function ut(e){var t=f.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ct(e,t){var n=e.split("|"),r=e.length;while(r--)o.attrHandle[n[r]]=t}function pt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function dt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ht(e){return lt(function(t){return t=+t,lt(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}s=at.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=at.support={},p=at.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.defaultView;return n!==f&&9===n.nodeType&&n.documentElement?(f=n,d=n.documentElement,h=!s(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){p()}),r.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ut(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ut(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ut(function(e){return d.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(o.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete o.find.ID,o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode("id");return n&&n.value===t}}),o.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==j?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},o.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==j&&h?n.getElementsByClassName(e):t},m=[],g=[],(r.qsa=K.test(n.querySelectorAll))&&(ut(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||g.push("\\["+P+"*(?:value|"+B+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),ut(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&g.push("[*^$]="+P+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(r.matchesSelector=K.test(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){r.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),m.push("!=",I)}),g=g.length&&RegExp(g.join("|")),m=m.length&&RegExp(m.join("|")),v=K.test(d.contains)||d.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},A=d.compareDocumentPosition?function(e,t){if(e===t)return S=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||v(w,e)?-1:t===n||v(w,t)?1:c?F.call(c,e)-F.call(c,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return S=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:c?F.call(c,e)-F.call(c,t):0;if(o===a)return pt(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?pt(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},n):f},at.matches=function(e,t){return at(e,null,null,t)},at.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(Y,"='$1']"),!(!r.matchesSelector||!h||m&&m.test(t)||g&&g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return at(t,f,null,[e]).length>0},at.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),v(e,t)},at.attr=function(e,n){(e.ownerDocument||e)!==f&&p(e);var i=o.attrHandle[n.toLowerCase()],a=i&&L.call(o.attrHandle,n.toLowerCase())?i(e,n,!h):t;return a===t?r.attributes||!h?e.getAttribute(n):(a=e.getAttributeNode(n))&&a.specified?a.value:null:a},at.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},at.uniqueSort=function(e){var t,n=[],i=0,o=0;if(S=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(A),S){while(t=e[o++])t===e[o]&&(i=n.push(o));while(i--)e.splice(n[i],1)}return e},a=at.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=a(t);return n},o=at.selectors={cacheLength:50,createPseudo:lt,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||at.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&at.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&J.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&N(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=at.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[b]||(m[b]={}),u=c[e]||[],d=u[0]===T&&u[1],f=u[0]===T&&u[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[T,d,f];break}}else if(v&&(u=(t[b]||(t[b]={}))[e])&&u[0]===T)f=u[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[b]||(p[b]={}))[e]=[T,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||at.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],o.setFilters.hasOwnProperty(e.toLowerCase())?lt(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=F.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:lt(function(e){var t=[],n=[],r=l(e.replace(z,"$1"));return r[b]?lt(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:lt(function(e){return function(t){return at(e,t).length>0}}),contains:lt(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:lt(function(e){return G.test(e||"")||at.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[0>n?n+t:n]}),even:ht(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:ht(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},o.pseudos.nth=o.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})o.pseudos[n]=dt(n);function gt(){}gt.prototype=o.filters=o.pseudos,o.setFilters=new gt;function mt(e,t){var n,r,i,a,s,l,u,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,l=[],u=o.preFilter;while(s){(!n||(r=X.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=U.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z," ")}),s=s.slice(n.length));for(a in o.filter)!(r=Q[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?at.error(e):k(e,l).slice(0)}function yt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function vt(e,t,n){var r=t.dir,o=n&&"parentNode"===r,a=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,s){var l,u,c,p=T+" "+a;if(s){while(t=t[r])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[r])if(1===t.nodeType||o)if(c=t[b]||(t[b]={}),(u=c[r])&&u[0]===p){if((l=u[1])===!0||l===i)return l===!0}else if(u=c[r]=[p],u[1]=e(t,n,s)||i,u[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xt(e,t,n,r,i){var o,a=[],s=0,l=e.length,u=null!=t;for(;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function wt(e,t,n,r,i,o){return r&&!r[b]&&(r=wt(r)),i&&!i[b]&&(i=wt(i,o)),lt(function(o,a,s,l){var u,c,p,f=[],d=[],h=a.length,g=o||Nt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:xt(g,f,e,s,l),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,l),r){u=xt(y,d),r(u,[],s,l),c=u.length;while(c--)(p=u[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){u=[],c=y.length;while(c--)(p=y[c])&&u.push(m[c]=p);i(null,y=[],u,l)}c=y.length;while(c--)(p=y[c])&&(u=i?F.call(o,p):f[c])>-1&&(o[u]=!(a[u]=p))}}else y=xt(y===a?y.splice(h,y.length):y),i?i(null,a,y,l):M.apply(a,y)})}function Tt(e){var t,n,r,i=e.length,a=o.relative[e[0].type],s=a||o.relative[" "],l=a?1:0,c=vt(function(e){return e===t},s,!0),p=vt(function(e){return F.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;i>l;l++)if(n=o.relative[e[l].type])f=[vt(bt(f),n)];else{if(n=o.filter[e[l].type].apply(null,e[l].matches),n[b]){for(r=++l;i>r;r++)if(o.relative[e[r].type])break;return wt(l>1&&bt(f),l>1&&yt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,r>l&&Tt(e.slice(l,r)),i>r&&Tt(e=e.slice(r)),i>r&&yt(e))}f.push(n)}return bt(f)}function Ct(e,t){var n=0,r=t.length>0,a=e.length>0,s=function(s,l,c,p,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,C=u,N=s||a&&o.find.TAG("*",d&&l.parentNode||l),k=T+=null==C?1:Math.random()||.1;for(w&&(u=l!==f&&l,i=n);null!=(h=N[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,l,c)){p.push(h);break}w&&(T=k,i=++n)}r&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,r&&b!==v){g=0;while(m=t[g++])m(x,y,l,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=q.call(p));y=xt(y)}M.apply(p,y),w&&!s&&y.length>0&&v+t.length>1&&at.uniqueSort(p)}return w&&(T=k,u=C),x};return r?lt(s):s}l=at.compile=function(e,t){var n,r=[],i=[],o=E[e+" "];if(!o){t||(t=mt(e)),n=t.length;while(n--)o=Tt(t[n]),o[b]?r.push(o):i.push(o);o=E(e,Ct(i,r))}return o};function Nt(e,t,n){var r=0,i=t.length;for(;i>r;r++)at(e,t[r],n);return n}function kt(e,t,n,i){var a,s,u,c,p,f=mt(e);if(!i&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(u=s[0]).type&&r.getById&&9===t.nodeType&&h&&o.relative[s[1].type]){if(t=(o.find.ID(u.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}a=Q.needsContext.test(e)?0:s.length;while(a--){if(u=s[a],o.relative[c=u.type])break;if((p=o.find[c])&&(i=p(u.matches[0].replace(rt,it),V.test(s[0].type)&&t.parentNode||t))){if(s.splice(a,1),e=i.length&&yt(s),!e)return M.apply(n,i),n;break}}}return l(e,f)(i,t,!h,n,V.test(e)),n}r.sortStable=b.split("").sort(A).join("")===b,r.detectDuplicates=S,p(),r.sortDetached=ut(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),ut(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ct("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ct("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ut(function(e){return null==e.getAttribute("disabled")})||ct(B,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),x.find=at,x.expr=at.selectors,x.expr[":"]=x.expr.pseudos,x.unique=at.uniqueSort,x.text=at.getText,x.isXMLDoc=at.isXML,x.contains=at.contains}(e);var O={};function F(e){var t=O[e]={};return x.each(e.match(T)||[],function(e,n){t[n]=!0}),t}x.Callbacks=function(e){e="string"==typeof e?O[e]||F(e):x.extend({},e);var n,r,i,o,a,s,l=[],u=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):r?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;(function i(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=l.length:r&&(s=t,c(r))}return this},remove:function(){return l&&x.each(arguments,function(e,t){var r;while((r=x.inArray(t,l,r))>-1)l.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?x.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=r=t,this},disabled:function(){return!l},lock:function(){return u=t,r||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var a=o[0],s=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=g.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?g.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,l,u;if(r>1)for(s=Array(r),l=Array(r),u=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}}),x.support=function(t){var n,r,o,s,l,u,c,p,f,d=a.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],r=d.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;s=a.createElement("select"),u=s.appendChild(a.createElement("option")),o=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!o.value,t.optSelected=u.selected,t.enctype=!!a.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==a.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}o=a.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),l=a.createDocumentFragment(),l.appendChild(o),t.appendChecked=o.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(f in x(t))break;return t.ownLast="0"!==f,x(function(){var n,r,o,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=a.getElementsByTagName("body")[0];l&&(n=a.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=d.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=p&&0===o[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",x.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(a.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=d=o=r=null)}),n=s=l=u=r=o=null,t
}({});var B=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;function R(e,n,r,i){if(x.acceptData(e)){var o,a,s=x.expando,l=e.nodeType,u=l?x.cache:e,c=l?e[s]:e[s]&&s;if(c&&u[c]&&(i||u[c].data)||r!==t||"string"!=typeof n)return c||(c=l?e[s]=p.pop()||x.guid++:s),u[c]||(u[c]=l?{}:{toJSON:x.noop}),("object"==typeof n||"function"==typeof n)&&(i?u[c]=x.extend(u[c],n):u[c].data=x.extend(u[c].data,n)),a=u[c],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[x.camelCase(n)]=r),"string"==typeof n?(o=a[n],null==o&&(o=a[x.camelCase(n)])):o=a,o}}function W(e,t,n){if(x.acceptData(e)){var r,i,o=e.nodeType,a=o?x.cache:e,s=o?e[x.expando]:x.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){x.isArray(t)?t=t.concat(x.map(t,x.camelCase)):t in r?t=[t]:(t=x.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!I(r):!x.isEmptyObject(r))return}(n||(delete a[s].data,I(a[s])))&&(o?x.cleanData([e],!0):x.support.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}x.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?x.cache[e[x.expando]]:e[x.expando],!!e&&!I(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&x.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),x.fn.extend({data:function(e,n){var r,i,o=null,a=0,s=this[0];if(e===t){if(this.length&&(o=x.data(s),1===s.nodeType&&!x._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>a;a++)i=r[a].name,0===i.indexOf("data-")&&(i=x.camelCase(i.slice(5)),$(s,i,o[i]));x._data(s,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){x.data(this,e)}):arguments.length>1?this.each(function(){x.data(this,e,n)}):s?$(s,e,x.data(s,e)):null},removeData:function(e){return this.each(function(){x.removeData(this,e)})}});function $(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(P,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:B.test(r)?x.parseJSON(r):r}catch(o){}x.data(e,n,r)}else r=t}return r}function I(e){var t;for(t in e)if(("data"!==t||!x.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}x.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=x._data(e,n),r&&(!i||x.isArray(r)?i=x._data(e,n,x.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),a=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return x._data(e,n)||x._data(e,n,{empty:x.Callbacks("once memory").add(function(){x._removeData(e,t+"queue"),x._removeData(e,n)})})}}),x.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?x.queue(this[0],e):n===t?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=x.Deferred(),a=this,s=this.length,l=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=x._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var z,X,U=/[\t\r\n\f]/g,V=/\r/g,Y=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Q=x.support.getSetAttribute,K=x.support.input;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return e=x.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,l="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(U," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var t,r=0,o=x(this),a=e.match(T)||[];while(t=a[r++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else(n===i||"boolean"===n)&&(this.className&&x._data(this,"__className__",this.className),this.className=this.className||e===!1?"":x._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(U," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=x.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,x(this).val()):e,null==o?o="":"number"==typeof o?o+="":x.isArray(o)&&(o=x.map(o,function(e){return null==e?"":e+""})),r=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(V,""):null==n?"":n)}}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;for(;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n,r,i=e.options,o=x.makeArray(t),a=i.length;while(a--)r=i[a],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===i?x.prop(e,n,r):(1===s&&x.isXMLDoc(e)||(n=n.toLowerCase(),o=x.attrHooks[n]||(x.expr.match.bool.test(n)?X:z)),r===t?o&&"get"in o&&null!==(a=o.get(e,n))?a:(a=x.find.attr(e,n),null==a?t:a):null!==r?o&&"set"in o&&(a=o.set(e,r,n))!==t?a:(e.setAttribute(n,r+""),r):(x.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(T);if(o&&1===e.nodeType)while(n=o[i++])r=x.propFix[n]||n,x.expr.match.bool.test(n)?K&&Q||!G.test(n)?e[r]=!1:e[x.camelCase("default-"+n)]=e[r]=!1:x.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!x.isXMLDoc(e),a&&(n=x.propFix[n]||n,o=x.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):Y.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?x.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&x.propFix[n]||n,n):e[x.camelCase("default-"+n)]=e[n]=!0,n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,n){var r=x.expr.attrHandle[n]||x.find.attr;x.expr.attrHandle[n]=K&&Q||!G.test(n)?function(e,n,i){var o=x.expr.attrHandle[n],a=i?t:(x.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return x.expr.attrHandle[n]=o,a}:function(e,n,r){return r?t:e[x.camelCase("default-"+n)]?n.toLowerCase():null}}),K&&Q||(x.attrHooks.value={set:function(e,n,r){return x.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),Q||(z={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},x.expr.attrHandle.id=x.expr.attrHandle.name=x.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},x.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:z.set},x.attrHooks.contenteditable={set:function(e,t,n){z.set(e,""===t?!1:t,n)}},x.each(["width","height"],function(e,n){x.attrHooks[n]={set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}}})),x.support.hrefNormalized||x.each(["href","src"],function(e,t){x.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),x.support.style||(x.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.support.enctype||(x.propFix.enctype="encoding"),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,n){return x.isArray(n)?e.checked=x.inArray(x(e).val(),n)>=0:t}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}function at(){try{return a.activeElement}catch(e){}}x.event={global:{},add:function(e,n,r,o,a){var s,l,u,c,p,f,d,h,g,m,y,v=x._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=x.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof x===i||e&&x.event.triggered===e.type?t:x.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(T)||[""],u=n.length;while(u--)s=rt.exec(n[u])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),g&&(p=x.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=x.event.special[g]||{},d=x.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&x.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=l[g])||(h=l[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),x.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,d,h,g,m=x.hasData(e)&&x._data(e);if(m&&(c=m.events)){t=(t||"").match(T)||[""],u=t.length;while(u--)if(s=rt.exec(t[u])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=x.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));l&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||x.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)x.event.remove(e,d+t[u],n,r,!0);x.isEmptyObject(c)&&(delete m.handle,x._removeData(e,"events"))}},trigger:function(n,r,i,o){var s,l,u,c,p,f,d,h=[i||a],g=v.call(n,"type")?n.type:n,m=v.call(n,"namespace")?n.namespace.split("."):[];if(u=f=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+x.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),l=0>g.indexOf(":")&&"on"+g,n=n[x.expando]?n:new x.Event(g,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:x.makeArray(r,[n]),p=x.event.special[g]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!x.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(u=u.parentNode);u;u=u.parentNode)h.push(u),f=u;f===(i.ownerDocument||a)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((u=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(x._data(u,"events")||{})[n.type]&&x._data(u,"handle"),s&&s.apply(u,r),s=l&&u[l],s&&x.acceptData(u)&&s.apply&&s.apply(u,r)===!1&&n.preventDefault();if(n.type=g,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(h.pop(),r)===!1)&&x.acceptData(i)&&l&&i[g]&&!x.isWindow(i)){f=i[l],f&&(i[l]=null),x.event.triggered=g;try{i[g]()}catch(y){}x.event.triggered=t,f&&(i[l]=f)}return n.result}},dispatch:function(e){e=x.event.fix(e);var n,r,i,o,a,s=[],l=g.call(arguments),u=(x._data(this,"events")||{})[e.type]||[],c=x.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=x.event.handlers.call(this,e,u),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(o=[],a=0;l>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?x(r,this).index(u)>=0:x.find(r,this,null,[u]).length),o[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new x.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||a),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,s=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||a,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==at()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===at()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return x.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=a.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},x.Event=function(e,n){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&x.extend(this,n),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,t):new x.Event(e,n)},x.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.submitBubbles||(x.event.special.submit={setup:function(){return x.nodeName(this,"form")?!1:(x.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=x.nodeName(n,"input")||x.nodeName(n,"button")?n.form:t;r&&!x._data(r,"submitBubbles")&&(x.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),x._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&x.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return x.nodeName(this,"form")?!1:(x.event.remove(this,"._submit"),t)}}),x.support.changeBubbles||(x.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(x.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),x.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),x.event.simulate("change",this,e,!0)})),!1):(x.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!x._data(t,"changeBubbles")&&(x.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||x.event.simulate("change",this.parentNode,e,!0)}),x._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return x.event.remove(this,"._change"),!Z.test(this.nodeName)}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&a.addEventListener(e,r,!0)},teardown:function(){0===--n&&a.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return x().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){x.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?x.event.trigger(e,n,r,!0):t}});var st=/^.[^:#\[\.,]*$/,lt=/^(?:parents|prev(?:Until|All))/,ut=x.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=x(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(x.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e||[],!0))},filter:function(e){return this.pushStack(ft(this,e||[],!1))},is:function(e){return!!ft(this,"string"==typeof e&&ut.test(e)?x(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,o=[],a=ut.test(e)||"string"!=typeof e?x(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?"string"==typeof e?x.inArray(this[0],x(e)):x.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return x.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(ct[e]||(i=x.unique(i)),lt.test(e)&&(i=i.reverse())),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!x(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(st.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return x.inArray(e,t)>=0!==n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Ct=/^(?:checkbox|radio)$/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:x.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(a),Dt=jt.appendChild(a.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||a).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?x.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(Ft(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&_t(Ft(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&x.cleanData(Ft(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&x.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!x.support.htmlSerialize&&mt.test(e)||!x.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(x.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,o,a,s,l,u=0,c=this.length,p=this,f=c-1,h=e[0],g=x.isFunction(h);if(g||!(1>=c||"string"!=typeof h||x.support.checkClone)&&Nt.test(h))return this.each(function(r){var i=p.eq(r);g&&(e[0]=h.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(l=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=l.firstChild,1===l.childNodes.length&&(l=r),r)){for(a=x.map(Ft(l,"script"),Ht),o=a.length;c>u;u++)i=l,u!==f&&(i=x.clone(i,!0,!0),o&&x.merge(a,Ft(i,"script"))),t.call(this[u],i,u);if(o)for(s=a[a.length-1].ownerDocument,x.map(a,qt),u=0;o>u;u++)i=a[u],kt.test(i.type||"")&&!x._data(i,"globalEval")&&x.contains(s,i)&&(i.src?x._evalUrl(i.src):x.globalEval((i.text||i.textContent||i.innerHTML||"").replace(St,"")));l=r=null}return this}});function Lt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Ht(e){return e.type=(null!==x.find.attr(e,"type"))+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _t(e,t){var n,r=0;for(;null!=(n=e[r]);r++)x._data(n,"globalEval",!t||x._data(t[r],"globalEval"))}function Mt(e,t){if(1===t.nodeType&&x.hasData(e)){var n,r,i,o=x._data(e),a=x._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)x.event.add(t,n,s[n][r])}a.data&&(a.data=x.extend({},a.data))}}function Ot(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!x.support.noCloneEvent&&t[x.expando]){i=x._data(t);for(r in i.events)x.removeEvent(t,r,i.handle);t.removeAttribute(x.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),x.support.html5Clone&&e.innerHTML&&!x.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ct.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){var n,r=0,i=[],o=x(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),x(o[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}});function Ft(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||x.nodeName(o,n)?s.push(o):x.merge(s,Ft(o,n));return n===t||n&&x.nodeName(e,n)?x.merge([e],s):s}function Bt(e){Ct.test(e.type)&&(e.defaultChecked=e.checked)}x.extend({clone:function(e,t,n){var r,i,o,a,s,l=x.contains(e.ownerDocument,e);if(x.support.html5Clone||x.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(r=Ft(o),s=Ft(e),a=0;null!=(i=s[a]);++a)r[a]&&Ot(i,r[a]);if(t)if(n)for(s=s||Ft(e),r=r||Ft(o),a=0;null!=(i=s[a]);a++)Mt(i,r[a]);else Mt(e,o);return r=Ft(o,"script"),r.length>0&&_t(r,!l&&Ft(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,l,u,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===x.type(o))x.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),l=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[l]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!x.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!x.support.tbody){o="table"!==l||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)x.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u)}x.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),x.support.appendChecked||x.grep(Ft(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===x.inArray(o,r))&&(a=x.contains(o.ownerDocument,o),s=Ft(f.appendChild(o),"script"),a&&_t(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,l=x.expando,u=x.cache,c=x.support.deleteExpando,f=x.event.special;for(;null!=(n=e[s]);s++)if((t||x.acceptData(n))&&(o=n[l],a=o&&u[o])){if(a.events)for(r in a.events)f[r]?x.event.remove(n,r):x.removeEvent(n,r,a.handle);
u[o]&&(delete u[o],c?delete n[l]:typeof n.removeAttribute!==i?n.removeAttribute(l):n[l]=null,p.push(o))}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),x.fn.extend({wrapAll:function(e){if(x.isFunction(e))return this.each(function(t){x(this).wrapAll(e.call(this,t))});if(this[0]){var t=x(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+w+")(.*)$","i"),Yt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+w+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=x._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=x._data(r,"olddisplay",ln(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&x._data(r,"olddisplay",i?n:x.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}x.fn.extend({css:function(e,n){return x.access(this,function(e,n,r){var i,o,a={},s=0;if(x.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=x.css(e,n[s],!1,o);return a}return r!==t?x.style(e,n,r):x.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){nn(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":x.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=x.camelCase(n),u=e.style;if(n=x.cssProps[l]||(x.cssProps[l]=tn(u,l)),s=x.cssHooks[n]||x.cssHooks[l],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:u[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(x.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||x.cssNumber[l]||(r+="px"),x.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(u[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,l=x.camelCase(n);return n=x.cssProps[l]||(x.cssProps[l]=tn(e.style,l)),s=x.cssHooks[n]||x.cssHooks[l],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||x.isNumeric(o)?o||0:a):a}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s.getPropertyValue(n)||s[n]:t,u=e.style;return s&&(""!==l||x.contains(e.ownerDocument,e)||(l=x.style(e,n)),Yt.test(l)&&Ut.test(n)&&(i=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=i,u.minWidth=o,u.maxWidth=a)),l}):a.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),Yt.test(l)&&!zt.test(n)&&(i=u.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=i,a&&(o.left=a)),""===l?"auto":l});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=x.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=x.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=x.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=x.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=x.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function ln(e){var t=a,n=Gt[e];return n||(n=un(e,t),"none"!==n&&n||(Pt=(Pt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=un(e,t),Pt.detach()),Gt[e]=n),n}function un(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}x.each(["height","width"],function(e,n){x.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(x.css(e,"display"))?x.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x.support.opacity||(x.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=x.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===x.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,n){return n?x.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,n){x.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?x(e).position()[n]+"px":r):t}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!x.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||x.css(e,"display"))},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(x.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),x.param=function(e,n){var r,i=[],o=function(e,t){t=x.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,yn,vn=x.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=x.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=o.href}catch(Ln){yn=a.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(T)||[];if(x.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(l){var u;return o[l]=!0,x.each(e[l]||[],function(e,l){var c=l(n,r,i);return"string"!=typeof c||a||o[c]?a?!(u=c):t:(n.dataTypes.unshift(c),s(c),!1)}),u}return s(n.dataTypes[0])||!o["*"]&&s("*")}function _n(e,n){var r,i,o=x.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&x.extend(!0,e,r),e}x.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,l=e.indexOf(" ");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),x.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&x.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Cn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,x.ajaxSettings),t):_n(x.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,l,u,c,p=x.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?x(f):x.event,h=x.Deferred(),g=x.Callbacks("once memory"),m=p.statusCode||{},y={},v={},b=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),k(0,t),this}};if(h.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=x.trim(p.dataType||"*").toLowerCase().match(T)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(mn[3]||("http:"===mn[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),qn(An,p,n,C),2===b)return C;l=p.global,l&&0===x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(x.lastModified[o]&&C.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&C.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)C.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,C,p)===!1||2===b))return C.abort();w="abort";for(i in{success:1,error:1,complete:1})C[i](p[i]);if(u=qn(jn,p,n,C)){C.readyState=1,l&&d.trigger("ajaxSend",[C,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){C.abort("timeout")},p.timeout));try{b=1,u.send(y,k)}catch(N){if(!(2>b))throw N;k(-1,N)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,N=n;2!==b&&(b=2,s&&clearTimeout(s),u=t,a=i||"",C.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=Mn(p,C,r)),w=On(p,w,C,c),c?(p.ifModified&&(T=C.getResponseHeader("Last-Modified"),T&&(x.lastModified[o]=T),T=C.getResponseHeader("etag"),T&&(x.etag[o]=T)),204===e||"HEAD"===p.type?N="nocontent":304===e?N="notmodified":(N=w.state,y=w.data,v=w.error,c=!v)):(v=N,(e||!N)&&(N="error",0>e&&(e=0))),C.status=e,C.statusText=(n||N)+"",c?h.resolveWith(f,[y,N,C]):h.rejectWith(f,[C,N,v]),C.statusCode(m),m=t,l&&d.trigger(c?"ajaxSuccess":"ajaxError",[C,p,c?y:v]),g.fireWith(f,[C,N]),l&&(d.trigger("ajaxComplete",[C,p]),--x.active||x.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,n){return x.get(e,t,n,"script")}}),x.each(["get","post"],function(e,n){x[n]=function(e,r,i,o){return x.isFunction(r)&&(o=o||i,i=r,r=t),x.ajax({url:e,type:n,dataType:o,data:r,success:i})}});function Mn(e,n,r){var i,o,a,s,l=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){u.unshift(s);break}if(u[0]in r)a=u[0];else{for(s in r){if(!u[0]||e.converters[s+" "+u[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==u[0]&&u.unshift(a),r[a]):t}function On(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(p){return{state:"parsererror",error:a?p:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),x.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=a.head||x("head")[0]||a.documentElement;return{send:function(t,i){n=a.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Fn=[],Bn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fn.pop()||x.expando+"_"+vn++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,l=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=x.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||x.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Fn.push(o)),s&&x.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}x.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=x.ajaxSettings.xhr(),x.support.cors=!!Rn&&"withCredentials"in Rn,Rn=x.support.ajax=!!Rn,Rn&&x.ajaxTransport(function(n){if(!n.crossDomain||x.support.cors){var r;return{send:function(i,o){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)l.setRequestHeader(s,i[s])}catch(u){}l.send(n.hasContent&&n.data||null),r=function(e,i){var s,u,c,p;try{if(r&&(i||4===l.readyState))if(r=t,a&&(l.onreadystatechange=x.noop,$n&&delete Pn[a]),i)4!==l.readyState&&l.abort();else{p={},s=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(p.text=l.responseText);try{c=l.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,u)},n.async?4===l.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},x(e).unload($n)),Pn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Yn.exec(t),o=i&&i[3]||(x.cssNumber[e]?"":"px"),a=(x.cssNumber[e]||"px"!==o&&+r)&&Yn.exec(x.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,x.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=x.now()}function Zn(e,t,n){var r,i=(Qn[t]||[]).concat(Qn["*"]),o=0,a=i.length;for(;a>o;o++)if(r=i[o].call(n,t,e))return r}function er(e,t,n){var r,i,o=0,a=Gn.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;for(;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(tr(c,u.opts.specialEasing);a>o;o++)if(r=Gn[o].call(u,e,c,u.opts))return r;return x.map(c,Zn,u),x.isFunction(u.opts.start)&&u.opts.start.call(e,u),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function tr(e,t){var n,r,i,o,a;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=x.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}x.Animation=x.extend(er,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,l,u=this,c={},p=e.style,f=e.nodeType&&nn(e),d=x._data(e,"fxshow");n.queue||(s=x._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,x.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(x.support.inlineBlockNeedsLayout&&"inline"!==ln(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",x.support.shrinkWrapBlocks||u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Vn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(f?"hide":"show"))continue;c[r]=d&&d[r]||x.style(e,r)}if(!x.isEmptyObject(c)){d?"hidden"in d&&(f=d.hidden):d=x._data(e,"fxshow",{}),o&&(d.hidden=!f),f?x(e).show():u.done(function(){x(e).hide()}),u.done(function(){var t;x._removeData(e,"fxshow");for(t in c)x.style(e,t,c[t])});for(r in c)a=Zn(f?d[r]:0,r,u),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}x.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=er(this,x.extend({},e),o);(i||x._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=x.timers,a=x._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=x._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}x.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=rr.prototype.init,x.fx.tick=function(){var e,n=x.timers,r=0;for(Xn=x.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||x.fx.stop(),Xn=t},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){Un||(Un=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(Un),Un=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){x.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,x.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},x.offset={setOffset:function(e,t,n){var r=x.css(e,"position");"static"===r&&(e.style.position="relative");var i=x(e),o=i.offset(),a=x.css(e,"top"),s=x.css(e,"left"),l=("absolute"===r||"fixed"===r)&&x.inArray("auto",[a,s])>-1,u={},c={},p,f;l?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),x.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(u.top=t.top-o.top+p),null!=t.left&&(u.left=t.left-o.left+f),"using"in t?t.using.call(e,u):i.css(u)}},x.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===x.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(n=e.offset()),n.top+=x.css(e[0],"borderTopWidth",!0),n.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-x.css(r,"marginTop",!0),left:t.left-n.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s;while(e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position"))e=e.offsetParent;return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);x.fn[e]=function(i){return x.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?x(a).scrollLeft():o,r?o:x(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return x.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}x.each({Height:"height",Width:"width"},function(e,n){x.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){x.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return x.access(this,function(n,r,i){var o;return x.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?x.css(n,r,s):x.style(n,r,i,s)},n,a?i:t,a,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:(e.jQuery=e.$=x,"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}))})(window);

Webr.component.BaseComboRenderer=function(a){this.rootElement=$(document.body);this.loading=$(document.createElement("div")).addClass("combobox-loading").hide();this.drawn=!1;this.config={minListHeight:100,maxListHeight:1E3,containerClass:""};this.mainElement=$(a)};Webr.component.BaseComboRenderer.prototype.setLayouter=function(a){this.layouter=a};Webr.component.BaseComboRenderer.prototype.getMainElement=function(){return this.mainElement};
Webr.component.BaseComboRenderer.prototype.getInputElement=function(){this.inputElement||(this.inputElement=this.mainElement.find("input"));return this.inputElement};Webr.component.BaseComboRenderer.prototype.getHeight=function(){return this.comboContainer.outerHeight(!0)};
Webr.component.BaseComboRenderer.prototype.setComboContainerPositionAndHeight=function(a,b,c){this.getContainer().css({top:a});b=b<this.config.minListHeight?this.config.minListHeight:b>this.config.maxListHeight?this.config.maxListHeight:b;c>b?this.listContainer.css({"max-height":b-this.getMainElement().outerHeight(!0)-(this.extraContainer?this.extraContainer.height():0),"overflow-y":"scroll"}):this.listContainer.css({"max-height":"","overflow-y":""})};
Webr.component.BaseComboRenderer.prototype.setExtraContentPosition=function(){this.extraContainer&&this.extraContainer.css({bottom:this.listContainer.height()})};Webr.component.BaseComboRenderer.prototype.setConfig=function(a){this.config.containerClass=a.containerClass||this.config.containerClass;this.config.maxListHeight=a.maxListHeight||this.config.maxListHeight;this.config.minListHeight=a.minListHeight||this.config.minListHeight};
Webr.component.BaseComboRenderer.prototype.setRootElement=function(a){this.rootElement=$(a)};Webr.component.BaseComboRenderer.prototype.getContainer=function(){return this.comboContainer};Webr.component.BaseComboRenderer.prototype.addExtraContent=function(a){this.extraContents||(this.extraContents=new Webr.util.Set);this.extraContents.add(a)};Webr.component.BaseComboRenderer.prototype.removeExtraContent=function(a){this.extraContents&&this.extraContents.remove(a)};
Webr.component.BaseComboRenderer.prototype.countPosition=function(){return{top:this.getMainElement().offset().top,left:this.getMainElement().offset().left}};Webr.component.BaseComboRenderer.prototype.isAncestorOf=function(a){return this.getMainElement().ancestorOf(a)||this.getContainer().ancestorOf(a)};Webr.component.BaseComboRenderer.prototype.getLoadingElement=function(){this.drawn||this.mainElement.find("input").after(this.loading);return this.loading};
Webr.component.BaseComboRenderer.prototype.showLoading=function(a){if(a){var b=this;this.loadingTimer=window.setTimeout(function(){b.showLoading()},a)}else this.getLoadingElement().show()};Webr.component.BaseComboRenderer.prototype.hideLoading=function(){this.loadingTimer&&(window.clearTimeout(this.loadingTimer),this.loadingTimer=null);this.getLoadingElement().hide()};Webr.component.BaseComboRenderer.prototype.destroy=function(){this.getMainElement().remove()};
Webr.component.BaseComboRenderer.prototype.move=function(){};Webr.component.BaseComboRenderer.prototype.reset=function(){};Webr.component.BaseComboRenderer.prototype.draw=function(){};Webr.component.BaseComboRenderer.prototype.hide=function(){this.shadow.hide();this.comboContainer.hide();this.layouter.reset()};Webr.component.BaseComboRenderer.prototype.show=function(){this.comboContainer.show();this.shadow.show();this.layouter.fix(this.comboContainer.width(),this.getHeight());this.shadow.setHeight(this.getShadowHeight())};
Webr.component.BaseComboRenderer.prototype.repaint=function(){};Webr.component.BaseComboRenderer.prototype.getShadowHeight=function(){return(this.listContainer?Math.max(this.getContainer().outerHeight(),this.listContainer.outerHeight()):this.getContainer().outerHeight())-Webr.component.Shadow.SHADOW_DELTA};Webr.component.RenderConfig=function(){this.containerClass="customCss";this.maxListHeight=1E3;this.minListHeight=100};

Webr.component.ComboRenderer=function(c,a){Webr.component.ComboRenderer.superclass.constructor.call(this,c);this.setLayouter(new Webr.component.VerticalLayouter(this.getLayouterConfig()));this.setRootElement($(a))};var F=new Function;F.prototype=Webr.component.BaseComboRenderer.prototype;Webr.component.ComboRenderer.prototype=new F;Webr.component.ComboRenderer.prototype.constructor=Webr.component.ComboRenderer;Webr.component.ComboRenderer.superclass=Webr.component.BaseComboRenderer.prototype;
Webr.component.ComboRenderer.prototype.getLayouterConfig=function(){return{anchor:this.mainElement,move:jQuery.proxy(this.move,this),reset:jQuery.proxy(this.reset,this)}};
Webr.component.ComboRenderer.prototype.createComboContainer=function(){if(this.comboContainer)return this.comboContainer;var c=this.countPosition();this.comboContainer=$(document.createElement("div")).addClass("contentWrapper").addClass(this.config.containerClass).css("left",c.left).css("width",this.mainElement.width()).hide();this.comboContainer.attr("_cn_",this.mainElement.get(0).id);return this.comboContainer};
Webr.component.ComboRenderer.prototype.countPosition=function(){var c=this.getMainElement().offset().top-this.rootElement.offset().top,a=this.getMainElement().offset().left-this.rootElement.offset().left;return{top:c+this.getMainElement().outerHeight(!0),left:a}};Webr.component.ComboRenderer.prototype.getList=function(){return this.listContainer?this.listContainer:this.listContainer=$(document.createElement("ul")).addClass("comboboxList")};
Webr.component.ComboRenderer.prototype.createExtraContainer=function(){return this.extraContainer?this.extraContainer:this.extraContainer=$(document.createElement("div")).addClass("extraContent").css("width",this.mainElement.width())};
Webr.component.ComboRenderer.prototype.draw=function(c){var a=this.getList();if(this.drawn)a.children().remove();else{var d=this.createComboContainer();d.append(a);if(this.extraContents){var b=this.createExtraContainer();this.extraContents.forEach(function(a){b.append(a)});d.append(b)}this.rootElement.append(d);this.drawn=!0;this.shadow=Webr.component.Shadow.getShadow(d,"ie-combo-shadow");this.shadow.setTop(d.offset().top)}c.forEach(function(b){a.append(b.getElement())})};
Webr.component.ComboRenderer.prototype.repaint=function(){this.shadow.setHeight(this.createComboContainer().outerHeight())};
Webr.component.ComboRenderer.prototype.move=function(c,a,d){var b=this.countPosition(),e=Webr.component.Shadow.SHADOW_DELTA;switch(c){case Webr.component.Layouter.UP:this.getContainer().addClass("reversal");this.shadow.relayout(!0);b.top-=this.getMainElement().outerHeight(!0);this.setComboContainerPositionAndHeight(b.top,a,d);e=this.listContainer.outerHeight(!0)+Webr.component.Shadow.SHADOW_DELTA;this.setExtraContentPosition();break;case Webr.component.Layouter.DOWN:this.setComboContainerPositionAndHeight(b.top,
a,d),this.setExtraContentPosition()}this.comboContainer.css("left",b.left);this.shadow.setTop(b.top-e);this.shadow.setLeft(b.left)};Webr.component.ComboRenderer.prototype.reset=function(){this.comboContainer.removeClass("reversal").css("top",this.countPosition().top);this.listContainer.css("max-height","").css("overflow-y","")};

cr.setTemplateBind("StateMachineEventSelector",function(a){cr.ash(a,"eventSelect","change",null);cr.ash(a,"eventSelect","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

cr.setTemplateBind("EditOrCreateWorkItem",function(b){cr.ach(b,"duration","keydown",function(a){a.handleEnterEsc(function(){cr.serverMethodCallInHandler(a,".methodCall_save",{})},function(){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})})});cr.ach(b,"itemDescription","keydown",function(a){return Webr.util.Key.isApplicable(a,SmartUIShortCuts.Submit)?(cr.serverMethodCallInHandler(a,".methodCall_save",{}),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.Dismiss)?(cr.serverMethodCallInHandler(a,
".methodCall_cancel",{}),!1):!0});cr.ach(b,"submitWorkItem","click",function(a){cr.findInHandler(a,".submitWorkItem",[]).disabled=!0;cr.findInHandler(a,".itemDescription",[]).detachWatcher();cr.serverMethodCallInHandler(a,".methodCall_save",{},{preventDoubleSubmit:!0})});cr.ash(b,"duration","valuechange",null);cr.ash(b,"itemDay","DateSelected",null);cr.ash(b,"itemDay","DateSelected",null);cr.forEach(b,"duration",function(){this.attachWatcher(!1)});regC(b,"itemDay");cr.forEach(b,"itemDescription",
function(){Webr.component.ElementExpander.addExpandListener(this,200)})});

Webr.component.ElementExpander=function(){};
Webr.component.ElementExpander.addExpandListener=function(a,b,c){b&&(a.expandMaxHeight=b,$(a).keyup(Webr.component.ElementExpander.verticalExpandListener),a.firstVerticalExpandTimer=window.setInterval(jQuery.proxy(Webr.component.ElementExpander.verticalExpandListener,a),250));c&&(a.expandMaxWidth=c,$(a).keyup(Webr.component.ElementExpander.horizontalExpandListener),a.firstHorizontalExpandTimer=window.setInterval(jQuery.proxy(Webr.component.ElementExpander.horizontalExpandListener,a),250))};
Webr.component.ElementExpander.verticalExpandListener=function(){0<this.offsetHeight&&window.clearInterval(this.firstVerticalExpandTimer);this.offsetHeight<this.expandMaxHeight&&(this.style.overflowY="hidden",this.offsetHeight<this.scrollHeight&&(this.style.height=this.scrollHeight+5+"px"));this.offsetHeight>=this.expandMaxHeight&&(this.style.overflowY="auto",this.style.height=this.expandMaxHeight+"px");return!0};
Webr.component.ElementExpander.horizontalExpandListener=function(){0<this.offsetWidth&&window.clearInterval(this.firstHorizontalExpandTimer);this.offsetWidth<this.expandMaxWidth&&(this.style.overflowX="hidden",this.offsetWidth<this.scrollWidth&&(this.style.width=this.scrollWidth+5+"px"));this.offsetWidth>=this.expandMaxWidth&&(this.style.overflowX="auto",this.style.width=this.expandMaxWidth+"px");return!0};

cr.setTemplateBind("SingleUserSelectorEditor",function(a){cr.ash(a,"singleSelector","change",null);cr.ash(a,"singleSelectorClientFilter","change",null);cr.ash(a,"singleSelectorClientFilter","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});cr.ash(a,"singleSelector","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

Webr.component.HTMLInputElementWatcher=function(){this.current_state=null;var a=this;this.focusHandler=function(){a.focus()};this.blurHandler=function(){a.blur()};this.current_state=Webr.component.HTMLInputElementWatcher.state_HAS_NO_FOCUS};Webr.component.HTMLInputElementWatcher.prototype.attach=function(a,b){this.textField=a;this.valueChangeCheckPeriod=150;this.eventRaiserDelay=500;$(this.textField).focus(this.focusHandler);$(this.textField).blur(this.blurHandler);!0==b&&this.focus()};
Webr.component.HTMLInputElementWatcher.prototype.detach=function(){this.valueChangeCheckPeriod=150;this.eventRaiserDelay=500;this.blur();$(this.textField).unbind("focus",this.focusHandler);$(this.textField).unbind("blur",this.blurHandler);this.textField=null};Webr.component.HTMLInputElementWatcher.prototype.resetOldValue=function(a){this.oldValue=a};
Webr.component.HTMLInputElementWatcher.prototype.startWatching=function(){null!=this.valueChangeCheckId&&window.clearInterval(this.valueChangeCheckId);var a=this;this.oldValue=this.textField.value;this.oldCaret=this.textField.getCaretPosition();this.valueChangeCheckId=window.setInterval(function(){a.checkChangeTick(a.textField.value,a.textField.getCaretPosition())},this.valueChangeCheckPeriod)};
Webr.component.HTMLInputElementWatcher.prototype.stopWatching=function(){null!=this.valueChangeCheckId&&(window.clearInterval(this.valueChangeCheckId),this.valueChangeCheckId=null);this.dismissEventRaise();this.prevCheckValue=this.prevCheckCaret=void 0};Webr.component.HTMLInputElementWatcher.prototype.isValueChanged=function(){return this.oldValue!=this.textField.value};Webr.component.HTMLInputElementWatcher.prototype.isCaretChanged=function(){return this.oldCaret!=this.textField.getCaretPosition()};
Webr.component.HTMLInputElementWatcher.prototype.scheduleEventRaise=function(a,b){if(this.prevCheckCaret!=b||this.prevCheckValue!=a)this.prevCheckValue=a,this.prevCheckCaret=b,this.rescheduleEventRaise(a,b)};
Webr.component.HTMLInputElementWatcher.prototype.rescheduleEventRaise=function(a,b){this.eventRaiserId&&(window.clearTimeout(this.eventRaiserId),this.eventRaiserId=null);var c=this;this.eventRaiserId=window.setTimeout(function(){c.delayFinished(a,b)},0<this.eventRaiserDelay?this.eventRaiserDelay:10)};Webr.component.HTMLInputElementWatcher.prototype.dismissEventRaise=function(){this.eventRaiserId&&(window.clearTimeout(this.eventRaiserId),this.eventRaiserId=null)};
Webr.component.HTMLInputElementWatcher.prototype.fireValueChanged=function(a,b){this.oldValue=a;this.oldCaret=b;this.textField.fireValueChange(b,a)};Webr.component.HTMLInputElementWatcher.prototype.fireCaretMoved=function(a,b){this.oldValue=a;this.oldCaret=b;this.textField.fireCaretMove(b,a)};Webr.component.HTMLInputElementWatcher.prototype.focus=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"focus",arguments)};
Webr.component.HTMLInputElementWatcher.prototype.blur=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"blur",arguments)};Webr.component.HTMLInputElementWatcher.prototype.checkChangeTick=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"checkChangeTick",arguments)};Webr.component.HTMLInputElementWatcher.prototype.delayFinished=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"delayFinished",arguments)};
Webr.component.HTMLInputElementWatcher.state_HAS_NO_FOCUS={name:"HAS_NO_FOCUS",focus:function(){this.startWatching();return Webr.component.HTMLInputElementWatcher.state_NO_ACTIVITY}};Webr.component.HTMLInputElementWatcher.state_HAS_FOCUS={name:"HAS_FOCUS",blur:function(){this.stopWatching();this.dismissEventRaise();return Webr.component.HTMLInputElementWatcher.state_HAS_NO_FOCUS}};
Webr.component.HTMLInputElementWatcher.state_NO_ACTIVITY={name:"NO_ACTIVITY",parentState:Webr.component.HTMLInputElementWatcher.state_HAS_FOCUS,checkChangeTick:function(a,b){return this.isValueChanged()?(this.scheduleEventRaise(a,b),Webr.component.HTMLInputElementWatcher.state_TYPING):this.isCaretChanged()?(this.scheduleEventRaise(a,b),Webr.component.HTMLInputElementWatcher.state_MOVING_CARET):!1}};
Webr.component.HTMLInputElementWatcher.state_TYPING={name:"TYPING",parentState:Webr.component.HTMLInputElementWatcher.state_HAS_FOCUS,checkChangeTick:function(a,b){if(this.isValueChanged())this.scheduleEventRaise(a,b);else{if(this.isCaretChanged())return this.scheduleEventRaise(a,b),Webr.component.HTMLInputElementWatcher.state_MOVING_CARET;this.dismissEventRaise();return Webr.component.HTMLInputElementWatcher.state_NO_ACTIVITY}},delayFinished:function(a,b){this.fireValueChanged(a,b);return Webr.component.HTMLInputElementWatcher.state_NO_ACTIVITY}};
Webr.component.HTMLInputElementWatcher.state_MOVING_CARET={name:"MOVING_CARET",parentState:Webr.component.HTMLInputElementWatcher.state_HAS_FOCUS,checkChangeTick:function(a,b){if(this.isValueChanged())return this.scheduleEventRaise(a,b),Webr.component.HTMLInputElementWatcher.state_TYPING;if(this.isCaretChanged())this.scheduleEventRaise(a,b);else return this.dismissEventRaise(),Webr.component.HTMLInputElementWatcher.state_NO_ACTIVITY},delayFinished:function(a,b){this.fireCaretMoved(a,b);return Webr.component.HTMLInputElementWatcher.state_NO_ACTIVITY}};

cr.setTemplateBind("DateEditor",function(a){cr.ash(a,"dateChooser","DateSelected",null);cr.ash(a,"clearValue","click",null);cr.ash(a,"dateChooser","DateSelected",null);regC(a,"dateChooser")});

Webr.component.ComboOption=function(){this.checked=!1};Webr.component.ComboOption.NO_MATCH_ID="nomatch";Webr.component.ComboOption.NEW_OPTION_ID="newoption";

cr.setTemplateBind("Watcher",function(a){cr.ash(a,"user","mouseover",null);cr.ash(a,"user","mouseout",null);cr.ash(a,"star","mouseover",null);cr.ash(a,"star","mouseout",null);cr.ash(a,"star","click",null);regPC(a,"watchersListPopup")});

Webr.ErrorMessage=function(a,b,c,d){this.message=a;this.inputName=c;this.severity=b;this.propertyName=d};Webr.ErrorMessage.prototype.createHighlighter=function(){this.errorHighlighter=Webr.ErrorHighlighter.highlightError(this.inputName,this.message)};Webr.ErrorMessage.prototype.clear=function(){this.errorHighlighter&&this.errorHighlighter.destroy()};Webr.ErrorMessage.ERROR="error";Webr.ErrorMessage.INFO="info";Webr.ErrorMessage.errorMessages=[];
Webr.ErrorMessage.addMessage=function(a,b,c,d){a=new Webr.ErrorMessage(a,b,c,d);Webr.ErrorMessage.errorMessages.push(a);c?a.createHighlighter():Webr.ErrorMessage.showErrorAlert()};Webr.ErrorMessage.clearErrorMessages=function(){for(var a=Webr.ErrorMessage.errorMessages,b=0;b<a.length;b+=1)a[b].clear();Webr.ErrorMessage.errorMessages=[]};Webr.ErrorMessage.closePopup=function(){Webr.ErrorMessage.POPUP&&Webr.ErrorMessage.POPUP.hide();Webr.event.PopupMessage.ERROR.hide()};
Webr.ErrorMessage.createErrorMessageHtml=function(){for(var a="",b=0;b<Webr.ErrorMessage.errorMessages.length;b+=1){var c="";Webr.ErrorMessage.errorMessages[b].propertyName&&(c=": <b>"+Webr.ErrorMessage.errorMessages[b].propertyName+"</b>");a+='<li class="'+Webr.ErrorMessage.errorMessages[b].severity+'">'+Webr.ErrorMessage.errorMessages[b].message+c+"</li>"}return a};
Webr.ErrorMessage.showErrorAlert=function(){var a=Webr.ErrorMessage.createErrorMessageHtml();Webr.ErrorMessage.POPUP||(Webr.ErrorMessage.POPUP=new Webr.event.PopupMessage({styleClass:"error",closable:!0,onClose:Webr.ErrorMessage.clearErrorMessages}));Webr.ErrorMessage.POPUP.show(a)};
Webr.ErrorHighlighter=function(a,b){"input"===a.tagName.toLowerCase()?(this.input=a,this.elementType=this.input.type.toLowerCase(),this.label=cr.findById(this.input.id+"Label")):"select"===a.tagName.toLowerCase()&&(this.select=a,this.elementType="select");this.message=b;var c=this;this.dismissHandler=function(){c.destroy()}};
Webr.ErrorHighlighter.prototype.create=function(){var a;"select"!==this.elementType?("checkbox"===this.elementType?$(this.label).addClass(Webr.ErrorHighlighter.LABEL_ERROR_STYLE_CLASS):$(this.input).addClass(Webr.ErrorHighlighter.INPUT_ERROR_STYLE_CLASS).focus(),this.registerInputEvents(),a=this.input):($(this.select).addClass(Webr.ErrorHighlighter.LABEL_ERROR_STYLE_CLASS),this.registerSelectEvents(),a=this.select);this.tooltip=new Webr.component.ErrorTooltip(a,this.message)};
Webr.ErrorHighlighter.prototype.destroy=function(){"select"!==this.elementType?("checkbox"===this.elementType?$(this.label).removeClass(Webr.ErrorHighlighter.LABEL_ERROR_STYLE_CLASS):$(this.input).removeClass(Webr.ErrorHighlighter.INPUT_ERROR_STYLE_CLASS).focus(),this.unregisterInputEvents()):($(this.select).removeClass(Webr.ErrorHighlighter.LABEL_ERROR_STYLE_CLASS),this.unregisterSelectEvents());Webr.component.ErrorTooltip.destroy(this.tooltip)};
Webr.ErrorHighlighter.prototype.registerInputEvents=function(){$(this.input).one("keydown click",this.dismissHandler)};Webr.ErrorHighlighter.prototype.registerSelectEvents=function(){$(this.select).one("change click blur",this.dismissHandler)};Webr.ErrorHighlighter.prototype.unregisterInputEvents=function(){var a=$(this.input);"file"!=this.elementType?a.unbind("keydown",this.dismissHandler):a.unbind("click",this.dismissHandler)};
Webr.ErrorHighlighter.prototype.unregisterSelectEvents=function(){$(this.select).unbind("change click blur",this.dismissHandler)};Webr.ErrorHighlighter.INPUT_ERROR_STYLE_CLASS="form-has-error";Webr.ErrorHighlighter.TOOLTIP_ANCHOR_STYLE_CLASS="error-bulb2";Webr.ErrorHighlighter.LABEL_ERROR_STYLE_CLASS="has-error";Webr.ErrorHighlighter.highlightError=function(a,b){return a?Webr.ErrorHighlighter.highlightErrorInput($("input[name='"+a+"']").get(0),b):null};
Webr.ErrorHighlighter.highlightErrorInput=function(a,b){if(a){var c=a.createHighlighter(b);c.create();return c}return null};Webr.ErrorHighlighter.highlightErrorElement=function(a,b){if(a){var c=a.tagName.toLowerCase(),d;"input"===c?(d=a.createHighlighter(b),d.create()):"select"===c&&(d=a.createHighlighter(b));return d}};Webr.component.ErrorTooltip=function(a,b){this.createAnchor(a);this.createMessageContainer(b);this._show()};
Webr.component.ErrorTooltip.prototype.createAnchor=function(a){this.tooltipAnchor=this.createDivElement(Webr.component.ErrorTooltip.ANCHOR_STYLE_CLASS);var b=$(a).closest(".jt-dialog");(b.get(0)?b:$(document.body)).append(this.tooltipAnchor);this.setAnchorPosition(a,b.get(0))};
Webr.component.ErrorTooltip.prototype.setAnchorPosition=function(a,b){var c=b?this.getPositionInsideDialog(b,a):$(a).offset(),d=$(a).closest("div.combobox"),d=d.get(0)?d.outerWidth():$(a).outerWidth(),e=($(a).outerHeight(!0)-$(this.tooltipAnchor).height())/2;$(this.tooltipAnchor).css({top:c.top+e,left:c.left+d})};Webr.component.ErrorTooltip.prototype.getPositionInsideDialog=function(a,b){var c=$(a).offset(),d=$(b).offset();return{top:d.top-c.top,left:d.left-c.left}};
Webr.component.ErrorTooltip.prototype.createMessageContainer=function(a){this.tooltipContainer=this.createDivElement("error-tooltip");$(this.tooltipContainer).text(a);this.tooltip=new Webr.component.ToolTip($(this.tooltipAnchor),this.tooltipContainer,!1,!1)};Webr.component.ErrorTooltip.prototype.createDivElement=function(a){var b=document.createElement("div");a&&$(b).addClass(a);return b};Webr.component.ErrorTooltip.prototype._show=function(){$(this.tooltipAnchor).show()};
Webr.component.ErrorTooltip.ANCHOR_STYLE_CLASS="error-bulb2";Webr.component.ErrorTooltip.destroy=function(a){Webr.component.ToolTip.destroy(a.tooltip);$(a.tooltipAnchor).remove();$(a.tooltipContainer).remove();delete a};

Webr.component.BaseComboboxHighlighter=function(a,b){Webr.component.BaseComboboxHighlighter.superclass.constructor.call(this,a.inputElement,b);this.combo=a};var F=new Function;F.prototype=Webr.ErrorHighlighter.prototype;Webr.component.BaseComboboxHighlighter.prototype=new F;Webr.component.BaseComboboxHighlighter.prototype.constructor=Webr.component.BaseComboboxHighlighter;Webr.component.BaseComboboxHighlighter.superclass=Webr.ErrorHighlighter.prototype;
Webr.component.BaseComboboxHighlighter.prototype._register=function(){this.combo.mainElement.one("change",this.dismissHandler);this.combo.jQinputElement.one("keydown",this.dismissHandler)};Webr.component.BaseComboboxHighlighter.prototype._unregister=function(){null!=this.combo&&(this.combo.mainElement.unbind("change",this.dismissHandler),this.combo.jQinputElement.unbind("keydown",this.dismissHandler),this.combo=this.combo.errorHighlighter=null)};

Webr.component.MultiBoxHighlighter=function(a,b){Webr.component.MultiBoxHighlighter.superclass.constructor.call(this,a,b);this.combo=a};var F=new Function;F.prototype=Webr.component.BaseComboboxHighlighter.prototype;Webr.component.MultiBoxHighlighter.prototype=new F;Webr.component.MultiBoxHighlighter.prototype.constructor=Webr.component.MultiBoxHighlighter;Webr.component.MultiBoxHighlighter.superclass=Webr.component.BaseComboboxHighlighter.prototype;
Webr.component.MultiBoxHighlighter.prototype._register=function(){this.combo.mainElement.one("select unselect",this.dismissHandler)};Webr.component.MultiBoxHighlighter.prototype._unregister=function(){this.combo.mainElement.unbind("select unselect",this.dismissHandler);this.combo=null};

Webr.component.Shadow=function(){};Webr.component.Shadow.prototype.setHeight=function(){};Webr.component.Shadow.prototype.setWidth=function(){};Webr.component.Shadow.prototype.setTop=function(){};Webr.component.Shadow.prototype.setLeft=function(){};Webr.component.Shadow.prototype.show=function(){};Webr.component.Shadow.prototype.hide=function(){};Webr.component.Shadow.prototype.relayout=function(){};Webr.component.Shadow.prototype.remove=function(){};Webr.component.Shadow.EMPTY_SHADOW=new Webr.component.Shadow;
Webr.component.Shadow.SHADOW_DELTA=6;Webr.component.Shadow.getShadow=function(a,b){var c=Webr.component.Shadow.EMPTY_SHADOW;Webr.util.Util.isIE&&9>Webr.util.Util.browserVersion&&(c=new Webr.component.IEShadow(a,b));return c};Webr.component.IEShadow=function(a,b){Webr.component.IEShadow.superclass.constructor.call(this);this.current_state=null;this.context=a;this.createElement(b);this.attachShadow();this.current_state=Webr.component.IEShadow.state_HIDDEN};var F=new Function;F.prototype=Webr.component.Shadow.prototype;
Webr.component.IEShadow.prototype=new F;Webr.component.IEShadow.prototype.constructor=Webr.component.IEShadow;Webr.component.IEShadow.superclass=Webr.component.Shadow.prototype;
Webr.component.IEShadow.prototype.attachShadow=function(){if(this.context.hasClass("jt-dialog"))this.context.children().first().before(this.container.css("z-index",-1));else if("static"==this.context.css("position").toLowerCase())this.context.before(this.container.css("z-index",0));else{var a=this.context.css("z-index");this.context.after(this.container.css("z-index","auto"!=a?a-1:a))}};
Webr.component.IEShadow.prototype.createElement=function(a){this.container=$(document.createElement("div")).addClass(a).css({left:this.context.css("left"),top:this.context.position().top});this.container.html("&nbsp;")};Webr.component.IEShadow.prototype.relayout=function(a){a?this.container.addClass("reversal"):this.container.removeClass("reversal")};Webr.component.IEShadow.prototype.setHeight=function(a){this.container.css({height:a})};Webr.component.IEShadow.prototype.setWidth=function(a){this.container.css({width:a})};
Webr.component.IEShadow.prototype.setTop=function(a){this.container.css({top:a})};Webr.component.IEShadow.prototype.setLeft=function(a){this.container.css({left:a})};Webr.component.IEShadow.prototype._show=function(a){this.container&&(a?(this.container.css({width:this.context.outerWidth()}),this.container.show()):this.container.hide())};Webr.component.IEShadow.prototype.remove=function(){this.container.remove();delete this.context};
Webr.component.IEShadow.prototype.show=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"show",arguments)};Webr.component.IEShadow.prototype.hide=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"hide",arguments)};Webr.component.IEShadow.state_HIDDEN={name:"HIDDEN",show:function(a){this._show(a?a:!0);return Webr.component.IEShadow.state_SHOWN}};
Webr.component.IEShadow.state_SHOWN={name:"SHOWN",parentState:Webr.component.IEShadow.state_HIDDEN,hide:function(){this._show(!1);return Webr.component.IEShadow.state_SHOWN}};

charisma.smartui.IEShadowController=function(a,b){charisma.smartui.IEShadowController.superclass.constructor.call(this,a,b)};var F=new Function;F.prototype=Webr.component.IEShadow.prototype;charisma.smartui.IEShadowController.prototype=new F;charisma.smartui.IEShadowController.prototype.constructor=charisma.smartui.IEShadowController;charisma.smartui.IEShadowController.superclass=Webr.component.IEShadow.prototype;
charisma.smartui.IEShadowController.prototype._show=function(a){this.container&&(a?this.context.addClass("ie-shadow"):this.context.removeClass("ie-shadow"))};

cr.setTemplateBind("AddFileMenu",function(a){regmn(a,"addFileMenu")});

Webr.component.Calendar=function(a,b,c){this.container=this.table=null;this.parent=$(document.body);this.constants={clearButton:l10n('Clear'),todayLabel:l10n('Today'),monthNames:[l10n('Jan'),l10n('Feb'),l10n('Mar'),l10n('Apr'),l10n('May'),l10n('Jun'),l10n('Jul'),
l10n('Aug'),l10n('Sep'),l10n('Oct'),l10n('Nov'),l10n('Dec')],weekDaysShortNames:[l10n('Mo'),l10n('Tu'),l10n('We'),l10n('Th'),l10n('Fr'),l10n('Sa'),l10n('Su')],
firstDayOfWeek:0};this.config={dateFormat:"%Y-%m-%d",maxYear:2100,minYear:1900,popup:!0};this.date=new Date;this.current_state=null;var d=this;this.element=a;(b=$(a).attr("valueId"))&&this.date.setTime(b);if(c)try{c=eval("("+c+")"),this.config={dateFormat:c.dateFormat||this.config.dateFormat,maxYear:c.maxYear||this.config.maxYear,minYear:c.minYear||this.config.minYear,popup:c.popup&&this.config.popup}}catch(e){}this.mainElement=$(a);this.mainElement.data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE,
this);this.mouseHandler=function(a){d.mup(a)};this.keyboardHandler=function(a){if(a.isKey(Webr.util.Key.ESC))return d.kesc(),!1};this.current_state=Webr.component.Calendar.state_HIDDEN};
Webr.component.Calendar.prototype.createCalendar=function(){var a=$(document.createElement("thead")),b=$(document.createElement("table"));b.addClass("calendar").append(a);a.append($(document.createElement("tr")).append($(document.createElement("td")).attr("colSpan","7").addClass("title")));a.append($(document.createElement("tr")).addClass("navigation").append(this.createNavButton(1,"&laquo;",this.prevYear)).append(this.createNavButton(1,"&lsaquo;",this.prevMonth)).append(this.createNavButton(3,this.constants.todayLabel,
this.today)).append(this.createNavButton(1,"&rsaquo;",this.nextMonth)).append(this.createNavButton(1,"&raquo;",this.nextYear)));a.append(a=$(document.createElement("tr")).addClass("daysOfWeek"));for(var c=0;7>c;++c)a.append($(document.createElement("td")).html(this.constants.weekDaysShortNames[(c+this.constants.firstDayOfWeek)%7]));var d;b.append(d=$(document.createElement("tbody")));for(c=0;6>c;++c){d.append(a=$(document.createElement("tr")).addClass("days"));for(var e=0;7>e;++e)a.append(document.createElement("td"))}this.table=
b;this.container=$(document.createElement("div"));this.container.append(b).addClass("calendar-container");this.update(this.date);this.parent.append(this.container);this.parent.data(Webr.component.Calendar.CALENDAR_CONTAINER,this.container)};Webr.component.Calendar.prototype.fixLayout=function(){this.layouter.fix(this.container.width(),this.container.outerHeight(!0))};Webr.component.Calendar.prototype.resetLayout=function(){this.layouter.reset()};
Webr.component.Calendar.prototype.collectCalendar=function(){this.table=this.container.find("table.calendar");this.update(this.date)};Webr.component.Calendar.prototype.elementClicked=function(a){var b=$(a);void 0!==a.navAction?a.navAction.call(this):b.data("date")&&this.changeDate(b.data("date"))};
Webr.component.Calendar.prototype.dateSelected=function(a){a.setUTCHours(12,0,0,0);this.date=a;var b=this.dateToString(a);this.mainElement.is("div")&&this.mainElement.html(b);this.update();this.mainElement.attr("valueId",a.getTime());this.onDateSelected(a)};Webr.component.Calendar.prototype.dateToString=function(a){return a?a.getDate()+"."+(a.getMonth()+1)+"."+a.getFullYear():""};Webr.component.Calendar.prototype.setValue=function(a){this.element.value=a};
Webr.component.Calendar.prototype.update=function(a){var a=a?new Date(a):new Date(this.date),b=this,c=a.getMonth(),d=a.getFullYear(),e=a.getDate(),h=new Date;a.getFullYear()<this.config.minYear&&a.setFullYear(this.config.minYear);a.getFullYear()>this.config.maxYear&&a.setFullYear(this.config.maxYear);a=new Date(a);a.setDate(1);var f=((a.getDay()+6)%7+7-b.constants.firstDayOfWeek)%7;a.setDate(-f+1);this.table.find("tbody tr").each(function(d,g){var f=!1;$(g).children().each(function(d,g){var i=$(g),
j=a.getDate(),l=(a.getDay()+6)%7,k=a.getMonth()==c;i.removeClass().html(j);i.data("date",new Date(a));k?f=!0:i.addClass("otherDays");k&&j==e&&(b.currentDateEl=i.addClass("selected"));a.getFullYear()==h.getFullYear()&&(a.getMonth()==h.getMonth()&&a.getDate()==h.getDate())&&i.addClass("today");-1!==jQuery.inArray(l,[5,6])&&i.addClass("weekend");a.setDate(j+1)});f?$(g).show():$(g).hide()});this.table.find("td.title").html(this.constants.monthNames[c]+" "+d)};
Webr.component.Calendar.prototype.handleEvents=function(){$(document).bind("mouseup",this.mouseHandler);$(document).bind("keydown",this.keyboardHandler);this.onCalendarIsShown()};Webr.component.Calendar.prototype.unhandleEvents=function(){$(document).unbind("mouseup",this.mouseHandler);$(document).unbind("keydown",this.keyboardHandler);this.onCalendarIsHidden()};
Webr.component.Calendar.prototype.init=function(a){(this.container=$(document.body).data(Webr.component.Calendar.CALENDAR_CONTAINER))?this.collectCalendar():this.createCalendar();var b=this;this.config.popup?this.container.addClass("popup"):this.container.removeClass("popup");this.layouter=new Webr.component.FullLayouter({anchor:$(a?a:b.mainElement),move:function(c){switch(c){case Webr.component.Layouter.UP:c=b.container.outerHeight(!0);b.container.css("top",this.anchor.offset().top-c);break;case Webr.component.Layouter.DOWN:b.container.css("top",
this.anchor.offset().top+this.anchor.outerHeight(!0));break;case Webr.component.Layouter.LEFT:c=a?$(a):b.mainElement;b.container.css({left:c.offset().left-b.container.outerWidth()+c.outerWidth()});break;case Webr.component.Layouter.RIGHT:c=a?$(a):b.mainElement,b.container.css({left:c.offset().left})}},reset:function(){}})};
Webr.component.Calendar.prototype.createNavButton=function(a,b,c){var d=document.createElement("td"),e=document.createElement("div");d.colSpan=a;d.className="button";e.className="push";d.appendChild(e);e.innerHTML=b;e.navAction=c;return $(d)};Webr.component.Calendar.prototype.show=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"show",arguments)};Webr.component.Calendar.prototype.hide=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"hide",arguments)};
Webr.component.Calendar.prototype.mup=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mup",arguments)};Webr.component.Calendar.prototype.nextYear=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"nextYear",arguments)};Webr.component.Calendar.prototype.nextMonth=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"nextMonth",arguments)};
Webr.component.Calendar.prototype.reset=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"reset",arguments)};Webr.component.Calendar.prototype.today=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"today",arguments)};Webr.component.Calendar.prototype.prevMonth=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"prevMonth",arguments)};
Webr.component.Calendar.prototype.prevYear=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"prevYear",arguments)};Webr.component.Calendar.prototype.changeDate=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"changeDate",arguments)};Webr.component.Calendar.prototype.kesc=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"kesc",arguments)};
Webr.component.Calendar.prototype.onDateSelected=function(a){a?this.mainElement.trigger("DateSelected",{value:a.getTime()}):this.mainElement.trigger("DateSelected",{value:null})};Webr.component.Calendar.prototype.onCalendarIsShown=function(){this.mainElement.trigger("CalendarIsShown")};Webr.component.Calendar.prototype.onCalendarIsHidden=function(){this.mainElement.trigger("CalendarIsHidden")};Webr.component.Calendar.CALENDAR_CONTAINER="_webrCalendar_";
Webr.component.Calendar.state_HIDDEN={name:"HIDDEN",show:function(a){this.init(a);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Calendar.state_SHOWN);return Webr.component.Calendar.state_SHOWN}};
Webr.component.Calendar.state_SHOWN={name:"SHOWN",onenter:function(){this.handleEvents();this.container.show();this.fixLayout()},onexit:function(){this.unhandleEvents();this.container.hide();this.resetLayout()},kesc:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Calendar.state_SHOWN);return Webr.component.Calendar.state_HIDDEN},mup:function(a){if(!this.container.ancestorOf(a.target))return Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Calendar.state_SHOWN),
Webr.component.Calendar.state_HIDDEN;this.elementClicked(a.target)},changeDate:function(a){this.dateSelected(a);Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Calendar.state_SHOWN);return Webr.component.Calendar.state_HIDDEN},prevYear:function(){if(this.date.getFullYear()>this.config.minYear)this.date.setFullYear(this.date.getFullYear()-1),this.update();else return!1},nextYear:function(){if(this.date.getFullYear()<this.config.maxYear)this.date.setFullYear(this.date.getFullYear()+
1),this.update();else return!1},today:function(){this.changeDate(new Date)},reset:function(){this.changeDate(null)},prevMonth:function(){var a=this.date.getMonth();0<a?(this.date.setMonth(a-1),this.update()):(this.date.setMonth(11),this.prevYear())},nextMonth:function(){var a=this.date.getMonth();11>a?(this.date.setMonth(a+1),this.update()):(this.date.setMonth(0),this.nextYear())}};
Webr.component.Calendar.register=function(a,b){cr.forEach(a,b,function(){var a=$(this),b=document.getElementById(a.attr("bid")),e,h=function(){if(!e){var f=a.attr("config"),g=a.attr("lang");e=new Webr.component.Calendar(a.get(0),g,f)}e.show(b)},f=b?b:a.siblings("a").get(0);f?$(f).click(h):a.click(h)})};Webr.component.Calendar.safeSetValue=function(a,b){a.setValue?a.setValue(b):a.value=b};Webr.component.CalendarConstants=function(){};
Webr.component.CalendarConfig=function(){this.minYear=1900;this.maxYear=2100;this.dateFormat="%Y-%m-%d";this.popup=!0};var regC=Webr.component.Calendar.register;

cr.setTemplateBind("CommandsToolbarActionsSubpart",function(b){cr.ach(b,"commandItemInstant","click",function(a){commandDialog.execute(cr.getTarget(a).getAttribute("p0"));cr.serverMethodCallInHandler(a,".methodCall_refreshActions",{})})});

Webr.util={};

Webr.util.Set=function(){Webr.util.Set.superclass.constructor.call(this)};var F=new Function;F.prototype=Webr.HashSet.prototype;Webr.util.Set.prototype=new F;Webr.util.Set.prototype.constructor=Webr.util.Set;Webr.util.Set.superclass=Webr.HashSet.prototype;

Webr.event.ServerEvent=function(a){this.config=a;this.config.pollInterval=this.config.pollInterval||Webr.event.ServerEvent.DEFAULT_POLL_INTERVAL};
Webr.event.ServerEvent.prototype.send=function(){this.config.headers=this.config.headers||{};this.config.headers["X-Requested-With"]="XMLHttpRequest";this.xmlHttpRequest=this.newXmlHttpRequest();this.xmlHttpRequest.open(this.config.method,this.config.handlerUrl,!this.config.sync);for(var a in this.config.headers)this.xmlHttpRequest.setRequestHeader(a,this.config.headers[a]);this.setupPollingAndTimeout();a=this.config.body||this.getParameters();this.xmlHttpRequest.send(a)};
Webr.event.ServerEvent.prototype.abort=function(a){var b=!1;this.inProgress()&&(this.xmlHttpRequest.abort(),this.clearPollingAndTimeout(),this.handleResponse(!0,a),b=!0);return b};Webr.event.ServerEvent.prototype.inProgress=function(){var a=!1;this.xmlHttpRequest&&(a=this.xmlHttpRequest.readyState,a=4!=a&&0!=a);return a};Webr.event.ServerEvent.prototype.fireSuccess=function(a){if(this.config.listeners)for(var b=0;b<this.config.listeners.length;++b)this.config.listeners[b].onSuccess(this,a)};
Webr.event.ServerEvent.prototype.fireFailure=function(a){if(this.config.listeners)for(var b=0;b<this.config.listeners.length;++b)this.config.listeners[b].onFailure(this,a)};Webr.event.ServerEvent.prototype.fireException=function(a){if(this.config.listeners)for(var b=0;b<this.config.listeners.length;++b)this.config.listeners[b].onException(this,a)};
Webr.event.ServerEvent.prototype.firePoll=function(a){if(this.config.listeners)for(var b=0;b<this.config.listeners.length;++b)this.config.listeners[b].onPoll(this,a)};
Webr.event.ServerEvent.prototype.getParameters=function(){var a=new Webr.event.ParamBuilder;a.addParamPair("X-Requested-With","XMLHttpRequest");a.addParamPair("http_session_id",Webr.Event.sessionId);this.config.eventSource&&a.addParamPair("event_source",this.config.eventSource);this.config.eventName&&a.addParamPair("event_",this.config.eventName);if(this.config.collectFormElements){var b=new Webr.event.InputCollector(this.config.rootElement);b.collect(a);delete b}this.config.eventParameters&&a.addParamObject(this.config.eventParameters);
b=a.toParameterString();delete a;this.config.eventParametersAsString&&(b+=this.config.eventParametersAsString);return b};Webr.event.ServerEvent.prototype.newXmlHttpRequest=function(){var a=null;try{a=new XMLHttpRequest}catch(b){for(var e=0;e<Webr.event.ServerEvent.IE_ACTIVE_X.length;++e){var d=Webr.event.ServerEvent.IE_ACTIVE_X[e];try{a=new ActiveXObject(d);break}catch(f){}}}return a};
Webr.event.ServerEvent.prototype.releaseXmlHttpRequest=function(){delete this.xmlHttpRequest;this.xmlHttpRequest=null};Webr.event.ServerEvent.prototype.setupPollingAndTimeout=function(){var a=this;null!=this.config.timeout&&(this.timeoutHandle=window.setTimeout(function(){a.abort(!0)},this.config.timeout));var b=0;this.pollHandle=window.setInterval(function(){if(a.xmlHttpRequest&&a.xmlHttpRequest.readyState==4){a.clearPollingAndTimeout();a.handleResponse(false,false)}else a.firePoll(++b)},this.config.pollInterval)};
Webr.event.ServerEvent.prototype.clearPollingAndTimeout=function(a){null!=this.pollHandle&&(window.clearInterval(this.pollHandle),delete this.pollHandle);null!=this.timeoutHandle&&(a||window.clearTimeout(this.timeoutHandle),delete this.timeoutHandle)};
Webr.event.ServerEvent.prototype.handleResponse=function(a,b){if(a)c=new Webr.event.ExceptionObject(a,b),this.fireException(c);else{try{c=void 0!==this.xmlHttpRequest.status&&0!=this.xmlHttpRequest.status?this.xmlHttpRequest.status:Webr.event.ServerEvent.STATE_ERROR}catch(e){c=Webr.event.ServerEvent.STATE_ERROR}if(200<=c&&300>c)c=new Webr.event.ResponseObject(this.xmlHttpRequest),this.fireSuccess(c);else{for(var d=Webr.event.ServerEvent.EXCEPTION_CODES,f=!1,g=0;g<d.length;++g)if(c==d[g]){f=!0;break}if(f){var c=
new Webr.event.ExceptionObject(a,b);this.fireException(c)}else c=new Webr.event.ResponseObject(this.xmlHttpRequest),this.fireFailure(c)}}this.releaseXmlHttpRequest()};Webr.event.ServerEvent.prototype.getHttpStatus=function(){var a;try{a=void 0!==this.xmlHttpRequest.status&&0!=this.xmlHttpRequest.status?this.xmlHttpRequest.status:Webr.event.ServerEvent.STATE_ERROR}catch(b){a=Webr.event.ServerEvent.STATE_ERROR}return a};Webr.event.ServerEvent.IE_ACTIVE_X=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];
Webr.event.ServerEvent.DEFAULT_POLL_INTERVAL=50;Webr.event.ServerEvent.STATE_ERROR=13030;Webr.event.ServerEvent.EXCEPTION_CODES=[12002,12029,12030,12031,12152,13030];Webr.event.ServerEventConfig=function(){this.rootElement=document.body;this.collectFileElements=this.collectFormElements=!1;this.timeout=null;this.processRecentOnly=this.preventDoubleSubmit=this.sync=!1;this.pollInterval=Webr.event.ServerEvent.DEFAULT_POLL_INTERVAL};
Webr.event.ServerEventConfig.createCopy=function(a,b){var e={};if(null!=b)for(var d in b)e[d]=b[d];if(null!=a)for(d in a)e[d]=a[d];return e};Webr.event.ServerEventListener=function(){};Webr.event.ServerEventListener.prototype.onSuccess=function(a){this.onFinish(a,!0)};Webr.event.ServerEventListener.prototype.onFailure=function(a){this.onFinish(a,!1)};Webr.event.ServerEventListener.prototype.onException=function(a,b){this.onFinish(a,!1,b)};Webr.event.ServerEventListener.prototype.onFinish=function(){};
Webr.event.ServerEventListener.prototype.onPoll=function(){};

Webr.event.PopupMessage=function(a){this.config=a;this.visible=!1};Webr.event.PopupMessage.prototype.show=function(a,b){this.createPopup();this.message.html(this.getMessage(a));this.popup.fadeIn(this.fadeTicks());this.visible=!0;if(b){var c=this;this.autoHideHandle=window.setTimeout(function(){c.autoHideHandle=null;c.hide()},b)}};Webr.event.PopupMessage.prototype.showWithCloseListener=function(a,b){this.show(a);this.popup.find("a").click(function(){b()})};
Webr.event.PopupMessage.prototype.getMessage=function(a){return 0==a.indexOf("<li>")?a:"<li>"+a+"</li>"};Webr.event.PopupMessage.prototype.hide=function(){this.popup&&(null!=this.autoHideHandle&&(window.clearTimeout(this.autoHideHandle),this.autoHideHandle=null),this.popup.fadeOut(this.fadeTicks()),this.visible=!1);this.fireClosed()};
Webr.event.PopupMessage.prototype.createPopup=function(){if(!this.popup){var a='<div class="message ',b=this.config;b.closable||(a+="small ");b.inline&&(a+="head-message ");b.styleClass&&(a+=b.styleClass);var c=this.getId(),a=a+'" id="'+c+'"><table><tr><td class="err">!</td><td><ul></ul></td>';!0==b.closable&&(a+='<td class="controls"><a title="'+l10n('close')+'" class="close" href="javascript: void(0)">'+l10n('close')+"</a></td>");a+="</tr></table></div>";
b.inline?$(document.body).prepend(a):$(document.body).append(a);this.popup=$("#"+c);this.message=this.popup.find("ul");var d=this;this.popup.find("a").click(function(){d.hide()})}};Webr.event.PopupMessage.prototype.getId=function(){Webr.event.PopupMessage.nextId+=1;return"__popup__"+Webr.event.PopupMessage.nextId};Webr.event.PopupMessage.prototype.fireClosed=function(){if(this.config.onClose)this.config.onClose()};
Webr.event.PopupMessage.prototype.fadeTicks=function(){return this.config.inline?250:100};Webr.event.PopupMessage.nextId=0;Webr.event.PopupMessage.SYSTEM=new Webr.event.PopupMessage({styleClass:"",closable:!0});Webr.event.PopupMessage.ERROR=new Webr.event.PopupMessage({styleClass:"error",closable:!0});Webr.event.PopupMessage.SMALL_INFO=new Webr.event.PopupMessage({styleClass:""});Webr.event.PopupMessage.SMALL_ERROR=new Webr.event.PopupMessage({styleClass:"error"});
Webr.event.PopupMessage.INLINE_SYSTEM=new Webr.event.PopupMessage({styleClass:"",closable:!0,inline:!0});Webr.event.PopupMessage.INLINE_ERROR=new Webr.event.PopupMessage({styleClass:"error",closable:!0,inline:!0});Webr.event.PopupMessageConfig=function(){};

Webr.event.LoadingServerEventListener=function(){Webr.event.LoadingServerEventListener.superclass.constructor.call(this);this.loadingMessage="Loading ...";this.uploadingFileMessage="Uploading ...";this.pollsToShow=12;this.message=Webr.event.PopupMessage.SMALL_INFO;this.isMessageShown=!1};var F=new Function;F.prototype=Webr.event.ServerEventListener.prototype;Webr.event.LoadingServerEventListener.prototype=new F;Webr.event.LoadingServerEventListener.prototype.constructor=Webr.event.LoadingServerEventListener;
Webr.event.LoadingServerEventListener.superclass=Webr.event.ServerEventListener.prototype;Webr.event.LoadingServerEventListener.prototype.onFinish=function(){this.message.hide();this.isMessageShown=!1};
Webr.event.LoadingServerEventListener.prototype.onPoll=function(a,b){if(!this.isMessageShown&&(a.config.loadingPopupPollsCount&&b>=a.config.loadingPopupPollsCount||!a.config.loadingPopupPollsCount&&b>=this.pollsToShow))a instanceof Webr.event.UploadEvent?this.message.show(this.uploadingFileMessage):this.message.show(this.loadingMessage),this.isMessageShown=!0};

Webr.Event=function(){};Webr.Event.loadingListener=new Webr.event.LoadingServerEventListener;Webr.Event.DEFAULT_REQUEST_TIMEOUT=36E4;
Webr.Event.send=function(a){if(!Webr.event.ResponseServerEventListener.SYNC_CALL_IN_PROGRESS&&Webr.event.InProgressEventListener.get().checkDoubleSubmit(a)){a=Webr.event.ServerEventConfig.createCopy(a);a.timeout=a.timeout||Webr.Event.DEFAULT_REQUEST_TIMEOUT;a.listeners=a.listeners||[];a.listeners.push(new Webr.event.ResponseServerEventListener(a.sync));a.sync=!1;a.hideLoadingPopup||a.listeners.push(Webr.Event.loadingListener);a.handlerUrl=a.handlerUrl||Webr.Event.handlerUrl;a.method=a.method||"POST";
if((!a.fileInput||0>=a.fileInput.length)&&a.collectFormElements&&a.collectFileElements){var b=Webr.event.UploadEvent.findNonemptyFileInputs(a.rootElement);0<b.length&&(a.fileInput=b)}a=a.fileInput&&0<a.fileInput.length?new Webr.event.UploadEvent(a):new Webr.event.ServerEvent(a);Webr.event.InProgressEventListener.get().rememberEvent(a);a.send()}};Webr.Event.post=function(a){a.method="POST";a.headers=a.headers||{};a.headers["Content-Type"]="application/x-www-form-urlencoded";Webr.Event.send(a)};
Webr.Event.get=function(a){a.method="GET";Webr.Event.send(a)};Webr.Event.put=function(a){a.method="PUT";Webr.Event.send(a)};Webr.Event.sendDelete=function(a){a.method="DELETE";Webr.Event.send(a)};Webr.Event.callMethod=function(a,b,c){a=Webr.event.ServerEventConfig.createCopy(c,{sync:!1,preventDoubleSubmit:!1,processRecentOnly:!1,collectFormElements:!0,eventName:a,eventParameters:b});Webr.Event.post(a)};
Webr.Event.redirect=function(a){Webr.event.ResponseServerEventListener.PAGE_CHANGED=!0;if(Webr.event.UploadEvent.IS_IE){var b=document.createElement("a");b.href=a;document.body.appendChild(b);b.click()}else window.location=a};Webr.Event.reload=function(){Webr.event.ResponseServerEventListener.PAGE_CHANGED=!0;window.location.reload()};Webr.Event.reloadInternal=function(a,b){jQuery.ajax({url:Webr.Event.internalReloadUrl||window.location.href,timeout:Webr.Event.DEFAULT_REQUEST_TIMEOUT}).done(a).fail(b)};
Webr.Event.registerFileInput=function(a,b){var c=document.getElementById(a);b.fileInput=[c];c.onchange=function(){Webr.Event.post(b)}};Webr.Event.getUrlParam=function(a){var b=window.$getUrlParam$;b||(b={},window.location.href.replace(RegExp("[?&]+([^=&]+)=([^&]*)","gi"),function(a,d,e){b[d]=e}),window.$getUrlParam$=b);return b[a]};

Webr.event.ResponseServerEventListener=function(a){Webr.event.ResponseServerEventListener.superclass.constructor.call(this);if(this.syncCall=a)Webr.event.ResponseServerEventListener.SYNC_CALL_IN_PROGRESS=!0};var F=new Function;F.prototype=Webr.event.ServerEventListener.prototype;Webr.event.ResponseServerEventListener.prototype=new F;Webr.event.ResponseServerEventListener.prototype.constructor=Webr.event.ResponseServerEventListener;Webr.event.ResponseServerEventListener.superclass=Webr.event.ServerEventListener.prototype;
Webr.event.ResponseServerEventListener.prototype.onSuccess=function(a,b){b.responseXML&&b.responseXML.firstChild?(Webr.event.ResponseServerEventListener.connected(),Webr.event.ResponseServerEventListener.processXmlResponse(b.responseXML)):Webr.event.ResponseServerEventListener.error("Incorrect response structure");this.syncCall&&(Webr.event.ResponseServerEventListener.SYNC_CALL_IN_PROGRESS=!1)};
Webr.event.ResponseServerEventListener.prototype.onFinish=function(a,b,c){b||(null!=c&&(c.isTimeout()||c.isCommunication()?Webr.event.ResponseServerEventListener.disconnected():Webr.event.ResponseServerEventListener.error(c.statusText)),this.syncCall&&(Webr.event.ResponseServerEventListener.SYNC_CALL_IN_PROGRESS=!1))};Webr.event.ResponseServerEventListener.SYNC_CALL_IN_PROGRESS=!1;Webr.event.ResponseServerEventListener.DISCONNECTED=!1;Webr.event.ResponseServerEventListener.DISCONNECTED_POPUP=Webr.event.PopupMessage.SMALL_ERROR;
Webr.event.ResponseServerEventListener.PAGE_CHANGED=!1;Webr.event.ResponseServerEventListener.connected=function(){Webr.event.ResponseServerEventListener.DISCONNECTED&&!Webr.event.ResponseServerEventListener.RELOAD_INTERVAL&&(Webr.event.ResponseServerEventListener.DISCONNECTED=!1,Webr.event.ResponseServerEventListener.DISCONNECTED_POPUP.hide())};
Webr.event.ResponseServerEventListener.disconnected=function(){!Webr.event.ResponseServerEventListener.DISCONNECTED&&!Webr.event.ResponseServerEventListener.PAGE_CHANGED&&(Webr.event.ResponseServerEventListener.abortReload(),Webr.event.ResponseServerEventListener.disconnectedMessage(l10n('Connection Lost')),Webr.event.InProgressEventListener.get().eventsInProgress=[],Webr.event.ResponseServerEventListener.DISCONNECTED=!0)};
Webr.event.ResponseServerEventListener.reloadDelayed=function(a){Webr.event.ResponseServerEventListener.RELOAD_INTERVAL||(Webr.event.ResponseServerEventListener.TIME_TO_RELOAD=a,Webr.event.ResponseServerEventListener.RELOAD_INTERVAL=window.setInterval(Webr.event.ResponseServerEventListener.waitReloadTick,1E3))};
Webr.event.ResponseServerEventListener.waitReloadTick=function(){0<Webr.event.ResponseServerEventListener.TIME_TO_RELOAD?(Webr.event.ResponseServerEventListener.disconnectedMessage(l10n('Connection Restored. {0} ({1})','<a href="javascript:reload();">'+l10n('Reload')+"</a>",Webr.event.ResponseServerEventListener.TIME_TO_RELOAD)),--Webr.event.ResponseServerEventListener.TIME_TO_RELOAD):(Webr.event.ResponseServerEventListener.abortReload(),
Webr.Event.reloadInternal(function(){Webr.Event.reload()},function(a,b,c){Webr.event.ResponseServerEventListener.internalReloadError(b,c)}))};
Webr.event.ResponseServerEventListener.callInternalReload=function(){Webr.event.ResponseServerEventListener.abortReload();Webr.event.ResponseServerEventListener.disconnectedMessage(l10n('Reloading...'));Webr.Event.reloadInternal(function(a){var b=a.indexOf("<head"),c=a.substring(b,a.indexOf("</head>",b)+7),b=a.indexOf("<body"),d=a.substring(b,a.indexOf("</body>",b)+7);trace("Stop all active timers and intervals!");Webr.TimerUtil.clearAll();trace("Replacing head...");
Webr.event.ResponseServerEventListener.processHead(c,function(){trace("Replacing body...");time("Set body");Webr.event.RefreshCommandProcessor.setContentToElement(document.body,d);timeEnd("Set body");Webr.event.ResponseServerEventListener.abortReload()})},function(a,b,c){Webr.event.ResponseServerEventListener.abortReload();Webr.event.ResponseServerEventListener.internalReloadError(b,c)})};
Webr.event.ResponseServerEventListener.internalReloadError=function(a,b){Webr.event.ResponseServerEventListener.disconnected();Webr.event.ResponseServerEventListener.disconnectedMessage(b&&0<b.length?l10n('Connection {0}: {1}.',a,b):l10n('Connection {0}.',a))};
Webr.event.ResponseServerEventListener.abortReload=function(){Webr.event.ResponseServerEventListener.RELOAD_INTERVAL&&(window.clearInterval(Webr.event.ResponseServerEventListener.RELOAD_INTERVAL),Webr.event.ResponseServerEventListener.RELOAD_INTERVAL=null)};
Webr.event.ResponseServerEventListener.processHead=function(a,b){trace("Loading CSSes...");Webr.event.RefreshCommandProcessor.loadCSS(a,function(){trace("Unbind everything from document!");$(document).unbind();trace("Loading JSes...");Webr.event.RefreshCommandProcessor.executeScripts(a,b)})};Webr.event.ResponseServerEventListener.disconnectedMessage=function(a){Webr.event.ResponseServerEventListener.DISCONNECTED_POPUP.show(a)};Webr.event.ResponseServerEventListener.error=function(){};
Webr.event.ResponseServerEventListener.processXmlResponse=function(a){time("processXmlResponse");if("commands"==a.firstChild.nodeName)a=a.firstChild.childNodes;else if("command"==a.firstChild.nodeName)a=a.childNodes;else{Webr.event.PopupMessage.SYSTEM.show("Unexpected response: "+a.firstChild.nodeName,1E4);return}var b=Webr.event.CommandProcessor.commandProcessors,c=new Webr.event.ProcessingContext;c.queue();for(var d=0;d<a.length;d+=1){var f=a.item(d);if(1==f.nodeType)for(var e=0;e<b.length;e+=1)try{if(b[e].processCommand(f,
c))break}catch(g){throw g;}}c.release();timeEnd("processXmlResponse")};var reload=Webr.Event.reload;

Webr.component.Layouter=function(a){this.config=a};Webr.component.Layouter.prototype.fix=function(){};Webr.component.Layouter.prototype.reset=function(){};Webr.component.Layouter.UP={};Webr.component.Layouter.DOWN={};Webr.component.Layouter.LEFT={};Webr.component.Layouter.RIGHT={};Webr.component.LayouterConfig=function(){};Webr.component.LayouterConfig.prototype.move=function(){};Webr.component.LayouterConfig.prototype.reset=function(){};Webr.component.Direction=function(){};
Webr.component.FullLayouter=function(a){Webr.component.FullLayouter.superclass.constructor.call(this,a);this.verticalLayouter=new Webr.component.VerticalLayouter(a);this.horizontalLayouter=new Webr.component.HorizontalLayouter(a)};var F=new Function;F.prototype=Webr.component.Layouter.prototype;Webr.component.FullLayouter.prototype=new F;Webr.component.FullLayouter.prototype.constructor=Webr.component.FullLayouter;Webr.component.FullLayouter.superclass=Webr.component.Layouter.prototype;
Webr.component.FullLayouter.prototype.fix=function(a,b){this.verticalLayouter.fix(a,b);this.horizontalLayouter.fix(a,b)};Webr.component.FullLayouter.prototype.reset=function(){this.verticalLayouter.reset();this.horizontalLayouter.reset()};Webr.component.HorizontalLayouter=function(a){this.current_state=null;Webr.component.HorizontalLayouter.superclass.constructor.call(this,a);this.current_state=Webr.component.HorizontalLayouter.state_INITIAL};F=new Function;F.prototype=Webr.component.Layouter.prototype;
Webr.component.HorizontalLayouter.prototype=new F;Webr.component.HorizontalLayouter.prototype.constructor=Webr.component.HorizontalLayouter;Webr.component.HorizontalLayouter.superclass=Webr.component.Layouter.prototype;Webr.component.HorizontalLayouter.prototype.checkHorizontalOrientation=function(a){var b=this.config.anchor;$(window).width()<b.offset().left+a?this.toleft():this.toright()};Webr.component.HorizontalLayouter.prototype._reset=function(){this.config.reset()};
Webr.component.HorizontalLayouter.prototype.toleft=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"toleft",arguments)};Webr.component.HorizontalLayouter.prototype.toright=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"toright",arguments)};Webr.component.HorizontalLayouter.prototype.reset=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"reset",arguments)};
Webr.component.HorizontalLayouter.prototype.fix=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"fix",arguments)};Webr.component.HorizontalLayouter.state_INITIAL={name:"INITIAL",fix:function(a){this.checkHorizontalOrientation(a)},toleft:function(){this.config.move(Webr.component.Layouter.LEFT,null);return Webr.component.HorizontalLayouter.state_OPEN_LEFT},toright:function(){this.config.move(Webr.component.Layouter.RIGHT,null);return Webr.component.HorizontalLayouter.state_OPEN_RIGHT}};
Webr.component.HorizontalLayouter.state_OPEN_LEFT={name:"OPEN_LEFT",reset:function(){this._reset();return Webr.component.HorizontalLayouter.state_INITIAL}};Webr.component.HorizontalLayouter.state_OPEN_RIGHT={name:"OPEN_RIGHT",reset:function(){this._reset();return Webr.component.HorizontalLayouter.state_INITIAL}};Webr.component.VerticalLayouter=function(a){this.current_state=null;Webr.component.VerticalLayouter.superclass.constructor.call(this,a);this.current_state=Webr.component.VerticalLayouter.state_INITIAL};
F=new Function;F.prototype=Webr.component.Layouter.prototype;Webr.component.VerticalLayouter.prototype=new F;Webr.component.VerticalLayouter.prototype.constructor=Webr.component.VerticalLayouter;Webr.component.VerticalLayouter.superclass=Webr.component.Layouter.prototype;Webr.component.VerticalLayouter.prototype._reset=function(){this.config.reset()};
Webr.component.VerticalLayouter.prototype.checkOrientation=function(a){var b=this.getMaxVisibleHeight(!1);if(0>b-a){var c=this.getMaxVisibleHeight(!0);c<a?b<c?this.toup(c,a):this.todown(b,a):this.toup(c,a)}else this.todown(b,a)};Webr.component.VerticalLayouter.prototype.getMaxVisibleHeight=function(a){var b=this.config.anchor,c=b.offset().top-$(window).scrollTop();a||(c=$(window).height()-b.outerHeight(!0)-c);return Math.max(0,c)};
Webr.component.VerticalLayouter.prototype.reset=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"reset",arguments)};Webr.component.VerticalLayouter.prototype.fix=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"fix",arguments)};Webr.component.VerticalLayouter.prototype.toup=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"toup",arguments)};
Webr.component.VerticalLayouter.prototype.todown=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"todown",arguments)};Webr.component.VerticalLayouter.state_INITIAL={name:"INITIAL",fix:function(a,b){this.checkOrientation(b)},todown:function(a,b){this.config.move(Webr.component.Layouter.DOWN,a,b);return Webr.component.VerticalLayouter.state_OPEN_DOWN},toup:function(a,b){this.config.move(Webr.component.Layouter.UP,a,b);return Webr.component.VerticalLayouter.state_OPEN_UP}};
Webr.component.VerticalLayouter.state_OPEN_DOWN={name:"OPEN_DOWN",reset:function(){this._reset();return Webr.component.VerticalLayouter.state_INITIAL}};Webr.component.VerticalLayouter.state_OPEN_UP={name:"OPEN_UP",reset:function(){this._reset();return Webr.component.VerticalLayouter.state_INITIAL}};

Webr.component.BindedComboRenderer=function(a,c,b){Webr.component.BindedComboRenderer.superclass.constructor.call(this,a,b);this.setLayouter(new Webr.component.FullLayouter(this.getLayouterConfig()));this.anchorElement=$(a);this.mainElement=this.createMainElement($(c),$(b));this.setRootElement(this.mainElement)};var F=new Function;F.prototype=Webr.component.ComboRenderer.prototype;Webr.component.BindedComboRenderer.prototype=new F;Webr.component.BindedComboRenderer.prototype.constructor=Webr.component.BindedComboRenderer;
Webr.component.BindedComboRenderer.superclass=Webr.component.ComboRenderer.prototype;Webr.component.BindedComboRenderer.prototype.getContainer=function(){return this.mainElement};
Webr.component.BindedComboRenderer.prototype.createMainElement=function(a,c){var b=$(document.createElement("div")).addClass("inputWrapper"),e=$(document.createElement("div")).attr({"class":a.attr("class"),style:a.attr("style"),_cn_:a.attr("id")}).append(b),d=document.createElement("input");d.name=a.get(0).id.substring(3);d.setAttribute("valueId",a.attr("_valueId"));b.append(d).append(this.loading);this.inputElement=$(d);b=this.bindedPosition();e.css("left",b.left).css("top",b.top).hide().appendTo(c);
return e};Webr.component.BindedComboRenderer.prototype.bindedPosition=function(){var a=this.anchorElement.offset().top-this.rootElement.offset().top,c=this.anchorElement.offset().left-this.rootElement.offset().left;return{top:a+this.anchorElement.outerHeight(!0),left:c-this.getContainer().outerWidth()+this.anchorElement.outerWidth()}};Webr.component.BindedComboRenderer.prototype.countPosition=function(){return{left:0,top:0}};Webr.component.BindedComboRenderer.prototype.isAncestorOf=function(a){return this.getContainer().ancestorOf(a)};
Webr.component.BindedComboRenderer.prototype.getHeight=function(){return this.mainElement.outerHeight(!0)+this.comboContainer.outerHeight(!0)};Webr.component.BindedComboRenderer.prototype.hide=function(){this.mainElement.hide();Webr.component.BindedComboRenderer.superclass.hide.call(this)};Webr.component.BindedComboRenderer.prototype.show=function(){this.mainElement.show();Webr.component.BindedComboRenderer.superclass.show.call(this);this.shadow.setTop(this.createComboContainer().position().top)};
Webr.component.BindedComboRenderer.prototype.getLoadingElement=function(){return this.loading};Webr.component.BindedComboRenderer.prototype.showLoading=function(){Webr.component.BindedComboRenderer.superclass.showLoading.call(this);this.mainElement.show();this.inputElement.focus()};Webr.component.BindedComboRenderer.prototype.hideLoading=function(){this.mainElement.hide();Webr.component.BindedComboRenderer.superclass.hideLoading.call(this)};
Webr.component.BindedComboRenderer.prototype.destroy=function(){this.mainElement.remove();this.anchorElement.remove()};
Webr.component.BindedComboRenderer.prototype.move=function(a,c,b){switch(a){case Webr.component.Layouter.UP:this.getContainer().addClass("reversal");this.shadow.relayout(!0);this.setComboContainerPositionAndHeight(this.anchorElement.offset().top-this.getContainer().outerHeight(!0),c,b);this.setExtraContentPosition();break;case Webr.component.Layouter.LEFT:this.getContainer().css({left:this.anchorElement.offset().left-this.getContainer().outerWidth()+this.anchorElement.outerWidth()});break;case Webr.component.Layouter.RIGHT:this.getContainer().css({left:this.anchorElement.offset().left})}};
Webr.component.BindedComboRenderer.prototype.reset=function(){this.getContainer().removeClass("reversal").css("top",this.anchorElement.offset().top+this.anchorElement.outerHeight(!0));this.shadow.relayout(!1);this.listContainer.css("max-height","").css("overflow-y","")};

charisma.smartui.CommonController=function(){charisma.smartui.CommonController.superclass.constructor.call(this);this.changeListeners=new Webr.util.Set;this.editMode=!1;var a=this;$(document).keydown(function(b){if(Webr.component.panel.Dialog.isModalVisible()||charisma.smartui.ViewImageAttachment.isVisible())return!0;if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.NewIssue)&&!a.newIssueHandler()||Webr.util.Key.isApplicable(b,SmartUIShortCuts.NewSubtask)&&!a.newSubtask())return!1;if(Webr.util.Key.isApplicable(b,
SmartUIShortCuts.ExpandCollapseExceptions_IDEA)||Webr.util.Key.isApplicable(b,SmartUIShortCuts.ExpandCollapseExceptions))return a.togglerExceptionsView(),!1;if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.AddComment))return a.onAddComment(),!1});this.reduceIeShadow();this.setNewInlineIssue();charisma.UsernameSuggest.attach();new charisma.smartui.DragInsertWikifiedImageFileName};var F=new Function;F.prototype=Webr.component.ComponentListener.prototype;charisma.smartui.CommonController.prototype=new F;
charisma.smartui.CommonController.prototype.constructor=charisma.smartui.CommonController;charisma.smartui.CommonController.superclass=Webr.component.ComponentListener.prototype;charisma.smartui.CommonController.prototype.allFoundIssuesAreSelected=function(){return!1};charisma.smartui.CommonController.prototype.newIssueHandler=function(){this.newInlineIssue.mouseup();return!1};
charisma.smartui.CommonController.prototype.onAddComment=function(){if(this.commandDialog)return this.commandDialog.show(this.commentCommand,!0),!1};charisma.smartui.CommonController.prototype.getQuery=function(){return this.searchField.value};charisma.smartui.CommonController.prototype.setSearchQuery=function(a){this.searchField.focus();this.searchField.value=a};charisma.smartui.CommonController.prototype.getSelectedIssuesIds=function(){return[]};
charisma.smartui.CommonController.prototype.getSelectedIssuesCount=function(){return 1};charisma.smartui.CommonController.prototype.getFocusedIssueId=function(){return null};charisma.smartui.CommonController.prototype.getFocusedPresentationIssueId=function(){return null};charisma.smartui.CommonController.prototype.setSearchUrl=function(a){this.searchUrl=a};charisma.smartui.CommonController.prototype.setCommandDialog=function(a){this.setComponent("commandDialog",a)};
charisma.smartui.CommonController.prototype.doSearchRequest=function(){var a=this.searchUrl;if(this.getQuery()&&0<this.getQuery().length)var b=encodeURIComponent(this.getQuery()),b=b.replaceAll("%20","+"),b=b.replaceAll("{","%7B"),b=b.replaceAll("}","%7D"),a=a+("?q="+b);Webr.Event.redirect(a)};charisma.smartui.CommonController.prototype.setSearchField=function(a,b){this.searchField=a;var c=a.getSuggest();this.setComponent("searchSuggest",c);this.forceComplete=b;this.hideAutocompleteOnMobileScrollOrTap(c)};
charisma.smartui.CommonController.prototype.hideAutocompleteOnMobileScrollOrTap=function(a){if(Webr.util.Util.isMobile)$(document).on("touchstart tap",function(b){$("#spContainer").removeClass("showRecentSearch");$(a.suggestDiv).ancestorOf(b.target)||a.blur()})};charisma.smartui.CommonController.prototype.setRecentSearches=function(a){this.recentSearchesList=a};
charisma.smartui.CommonController.prototype.setNewIssueId=function(a){charisma.smartui.TextCopier.hideCopier(!0);this.newIssueId=!a||""==a?null:a;this.fireNewIssueIsShown(this.newIssueId);charisma.smartui.NewIssueSwitcher.instance.change(a)};charisma.smartui.CommonController.prototype.newSubtask=function(){return!0};charisma.smartui.CommonController.prototype.setNewSubtaskHandler=function(a){this.newSubtask=function(){charisma.smartui.NewIssueSwitcher.instance.isVisible()||a();return!1}};
charisma.smartui.CommonController.prototype.setNewInlineIssue=function(){var a=window.setInterval(function(){this.newInlineIssue=$(".yt-header__create-btn");this.newInlineIssue[0]&&(window.clearInterval(a),charisma.smartui.NewIssueSwitcher.init(this.newInlineIssue))}.bind(this),500)};charisma.smartui.CommonController.prototype.fireNewIssueIsShown=function(a){this.changeListeners.forEach(function(b){b.newIssueIsShown(a);return!0});a||$(window).trigger("resize")};
charisma.smartui.CommonController.prototype.focusSearchField=function(){this.searchField&&this.searchField.focus()};charisma.smartui.CommonController.prototype.getSearchField=function(){return this.searchField};charisma.smartui.CommonController.prototype.setComponent=function(a,b){this[a]&&this[a].removeListener(this);this[a]=b;b.addListener(this)};charisma.smartui.CommonController.prototype.setExceptionStateToggler=function(a){this.exceptionStateToggler=a};
charisma.smartui.CommonController.prototype.togglerExceptionsView=function(){};charisma.smartui.CommonController.prototype.focusIssue=function(){return!1};charisma.smartui.CommonController.prototype.selectIssue=function(){};charisma.smartui.CommonController.prototype.toggleEditMode=function(a){a?$(".sb-edit-ico").parent().addClass("sb-btn-pressed"):$(".sb-edit-ico").parent().removeClass("sb-btn-pressed")};charisma.smartui.CommonController.prototype.finishIssueEdit=function(){};
charisma.smartui.CommonController.prototype.addChangeListener=function(){};charisma.smartui.CommonController.prototype.removeChangeListener=function(){};charisma.smartui.CommonController.prototype.commentsLoaded=function(){};charisma.smartui.CommonController.prototype.commentsRefreshed=function(){};charisma.smartui.CommonController.prototype.workItemsLoaded=function(){};charisma.smartui.CommonController.prototype.workItemsRefreshed=function(){};
charisma.smartui.CommonController.prototype.issueRedrawn=function(){};charisma.smartui.CommonController.prototype.commandsHide=function(){};charisma.smartui.CommonController.prototype.keyPressed=function(a,b){switch(a){case this.searchSuggest:return this.searchSuggestKeyEvent(b)}return!0};charisma.smartui.CommonController.prototype.keyDown=function(a,b){switch(a){case this.searchSuggest:return this.searchSuggestKeyEvent(b)}return!0};
charisma.smartui.CommonController.prototype.searchSuggestKeyEvent=function(a){return a.isKey(Webr.util.Key.TAB)?!1:Webr.util.Key.isApplicable(a,SmartUIShortCuts.SubmitSearchField)?(this.doSearchRequest(),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.ForceComplete)?(this.forceComplete(),!1):!0};charisma.smartui.CommonController.prototype.getToolbar=function(){return null};charisma.smartui.CommonController.prototype.getCommentList=function(){return null};
charisma.smartui.CommonController.prototype.initDragUpload=function(a,b,c){new charisma.smartui.AttachFileRest(c||".newIssueContainer .issueContainer__fsi:visible,  .edit-content__block:visible, .issueContainer",a,b)};charisma.smartui.CommonController.prototype.reduceIeShadow=function(){Webr.component.Shadow.getShadow=function(a,b){var c=Webr.component.Shadow.EMPTY_SHADOW;Webr.util.Util.isIE&&9>Webr.util.Util.browserVersion&&(c=new charisma.smartui.IEShadowController(a,b));return c}};
charisma.smartui.CommonController.prototype.underlineSearchQuery=function(a){var b=0,c;c=window.setInterval(function(){$(".ring-header")[0]||45<b?(window.clearInterval(c),charisma.RestMethods.$(a).underline(3)):++b},200)};var commonController;charisma.smartui.IssueChangeListener=function(){};charisma.smartui.IssueChangeListener.prototype.checkedItemsUpdated=function(){};charisma.smartui.IssueChangeListener.prototype.newIssueIsShown=function(){};charisma.smartui.requestLogger=function(){};
charisma.smartui.requestLogger.SWITCH_ON_TRACE_KEY="youtrack.feature.xmlhttprequestlog";charisma.smartui.requestLogger.LOGGING_ENABLED=!1;charisma.smartui.requestLogger.init=function(){var a=window.localStorage;charisma.smartui.requestLogger.LOGGING_ENABLED=!a||!a.getItem?!1:"true"===a.getItem(charisma.smartui.requestLogger.SWITCH_ON_TRACE_KEY)};charisma.smartui.requestLogger.isEnabled=function(){return charisma.smartui.requestLogger.LOGGING_ENABLED};
charisma.smartui.requestLogger.getDateTime=function(){var a=new Date;return[a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()].join(":")};charisma.smartui.requestLogger.trace=function(a,b){if(charisma.smartui.requestLogger.isEnabled()){var c=new Date,c=[c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()].join(":")+": "+(a||"")+" ";b?window.console.log(c,b):window.console.log(c)}};charisma.smartui.requestLogger.init();
var __responseServerEventListenerPrototype=Webr.event.ResponseServerEventListener.prototype,responseServerEventListenerOnFinish=__responseServerEventListenerPrototype.onFinish,responseServerEventListenerInstrumentedOnFinish=function(a,b,c){if(!b){if(null!=c){var a=c.isTimeout(),b=c.isCommunication(),d;a&&(d={exceptionStatus:c.status,exceptionText:c.statusText});b&&(d={communicationFailureStatus:c.status,communicationFailureText:c.statusText});charisma.smartui.requestLogger.trace("ResponseServerEventListener(onFinish) ",
d);a||b?(Webr.event.ResponseServerEventListener.disconnected(),charisma.smartui.requestLogger.trace("go Disconnected")):Webr.event.ResponseServerEventListener.error(c.statusText)}this.syncCall&&(Webr.event.ResponseServerEventListener.SYNC_CALL_IN_PROGRESS=!1)}};__responseServerEventListenerPrototype.onFinish=function(a,b,c){charisma.smartui.requestLogger.isEnabled()?responseServerEventListenerInstrumentedOnFinish.call(this,a,b,c):responseServerEventListenerOnFinish.call(this,a,b,c)};
var instrumentResponseServerEventListenerReloadStaticMethods=function(){Webr.event.ResponseServerEventListener.reloadDelayed=function(a){Webr.event.ResponseServerEventListener.RELOAD_INTERVAL||(Webr.event.ResponseServerEventListener.TIME_TO_RELOAD=a,charisma.smartui.requestLogger.trace("ResponseServerEventListener(reloadDelayed) after [processRequest] method with interval",a),Webr.event.ResponseServerEventListener.RELOAD_INTERVAL=window.setInterval(Webr.event.ResponseServerEventListener.waitReloadTick,
1E3))};Webr.event.ResponseServerEventListener.waitReloadTick=function(){0<Webr.event.ResponseServerEventListener.TIME_TO_RELOAD?(charisma.smartui.requestLogger.trace("ResponseServerEventListener(waitReloadTick)",Webr.event.ResponseServerEventListener.TIME_TO_RELOAD),Webr.event.ResponseServerEventListener.disconnectedMessage(l10n('Connection Restored. {0} ({1})','<a href="javascript:reload();">'+l10n('Reload')+"</a>",Webr.event.ResponseServerEventListener.TIME_TO_RELOAD)),
--Webr.event.ResponseServerEventListener.TIME_TO_RELOAD):(Webr.event.ResponseServerEventListener.abortReload(),Webr.Event.reloadInternal(function(){Webr.Event.reload()},function(a,b,c){charisma.smartui.requestLogger.trace("ResponseServerEventListener(waitReloadTick) fail to relad branch",c);Webr.event.ResponseServerEventListener.internalReloadError(b,c)}))};Webr.event.ResponseServerEventListener.callInternalReload=function(){charisma.smartui.requestLogger.trace("ResponseServerEventListener(callInternalReload)");
Webr.event.ResponseServerEventListener.abortReload();Webr.event.ResponseServerEventListener.disconnectedMessage(l10n('Reloading...'));Webr.Event.reloadInternal(function(a){charisma.smartui.requestLogger.trace("ResponseServerEventListener(callInternalReload): success, replacing");var b=a.indexOf("<head"),c=a.substring(b,a.indexOf("</head>",b)+7),b=a.indexOf("<body"),d=a.substring(b,a.indexOf("</body>",b)+7);trace("Stop all active timers and intervals!");Webr.TimerUtil.clearAll();
trace("Replacing head...");Webr.event.ResponseServerEventListener.processHead(c,function(){trace("Replacing body...");time("Set body");Webr.event.RefreshCommandProcessor.setContentToElement(document.body,d);timeEnd("Set body");Webr.event.ResponseServerEventListener.abortReload()})},function(a,b,c){charisma.smartui.requestLogger.trace("ResponseServerEventListener(callInternalReload): fail",c);Webr.event.ResponseServerEventListener.abortReload();Webr.event.ResponseServerEventListener.internalReloadError(b,
c)})}};charisma.smartui.requestLogger.isEnabled()&&instrumentResponseServerEventListenerReloadStaticMethods();
var __serverEventPrototype=Webr.event.ServerEvent.prototype,serverEventHandleResponse=__serverEventPrototype.handleResponse,serverEventInstrumentedHandleResponse=function(a,b){if(a){var c=new Webr.event.ExceptionObject(a,b);charisma.smartui.requestLogger.trace("ServerEvent(handleResponse) aborted with exception ",c);this.fireException(c)}else{var d=this.xmlHttpRequest.status;try{c=void 0!==d&&0!=d?d:Webr.event.ServerEvent.STATE_ERROR}catch(f){c=Webr.event.ServerEvent.STATE_ERROR}if(200<=c&&300>c)c=
new Webr.event.ResponseObject(this.xmlHttpRequest),this.fireSuccess(c);else{for(var d=Webr.event.ServerEvent.EXCEPTION_CODES,g=!1,e=0;e<d.length;++e)if(c==d[e]){g=!0;charisma.smartui.requestLogger.trace("ServerEvent(handleResponse) status code is out of 200-300: ",d[e]);break}g?(c=new Webr.event.ExceptionObject(a,b),this.fireException(c)):(c=new Webr.event.ResponseObject(this.xmlHttpRequest),this.fireFailure(c));charisma.smartui.requestLogger.trace("ServerEvent(handleResponse) not aborted with exception ",
c)}}this.releaseXmlHttpRequest()};__serverEventPrototype.handleResponse=function(a,b){charisma.smartui.requestLogger.isEnabled()?serverEventInstrumentedHandleResponse.call(this,a,b):serverEventHandleResponse.call(this,a,b)};
var serverEventSend=__serverEventPrototype.send,serverEventSendInstrumented=function(){var a=this;a.config.headers=a.config.headers||{};a.config.headers["X-Requested-With"]="XMLHttpRequest";a.xmlHttpRequest=a.newXmlHttpRequest();a.xmlHttpRequest.open(a.config.method,a.config.handlerUrl,!a.config.sync);for(var b in a.config.headers)a.xmlHttpRequest.setRequestHeader(b,a.config.headers[b]);a.setupPollingAndTimeout();b=a.config.body||this.getParameters();a.xmlHttpRequest.onreadystatechange=function(){charisma.smartui.requestLogger.trace("ServerEvent(send) ",
{sessionId:Webr.Event.sessionId,eventName:a.config.eventName,requestStatus:a.xmlHttpRequest.status,responseText:a.xmlHttpRequest.responseText})};a.xmlHttpRequest.send(b)};__serverEventPrototype.send=function(){charisma.smartui.requestLogger.isEnabled()?serverEventSendInstrumented.call(this):serverEventSend.call(this)};var verticalComboLayouter=Webr.component.VerticalLayouter.prototype;
verticalComboLayouter.getMaxVisibleHeight=function(a){var b=this.config.anchor,c=b.offset().top-$(window).scrollTop();a||(c=$(window).height()-b.outerHeight(!0)-c);return Math.max(0,c)};var bindedComboRenderer=Webr.component.BindedComboRenderer.prototype;
bindedComboRenderer.move=function(a,b,c){switch(a){case Webr.component.Layouter.UP:this.getContainer().addClass("reversal");this.shadow.relayout(!0);this.setComboContainerPositionAndHeight(this.anchorElement.offset().top-this.getContainer().outerHeight(!0),b,c);this.setExtraContentPosition();break;case Webr.component.Layouter.DOWN:this.setComboContainerPositionAndHeight(this.anchorElement.offset().top+this.anchorElement.outerHeight(!0),b,c);this.setExtraContentPosition();break;case Webr.component.Layouter.LEFT:this.getContainer().css({left:this.anchorElement.offset().left-
this.getContainer().outerWidth()+this.anchorElement.outerWidth()});break;case Webr.component.Layouter.RIGHT:this.getContainer().css({left:this.anchorElement.offset().left})}};
bindedComboRenderer.setComboContainerPositionAndHeight=function(a,b,c){this.getContainer().css({top:a});b<this.config.minListHeight?b=this.config.minListHeight:b>this.config.maxListHeight&&(b=this.config.maxListHeight);c>=b?(b=b-this.getMainElement().outerHeight(!0)-(this.extraContainer?this.extraContainer.outerHeight():0),this.listContainer.css({"max-height":b-40,"overflow-y":"scroll"})):this.listContainer.css({"max-height":"","overflow-y":""})};var comboRenderer=Webr.component.ComboRenderer.prototype;
bindedComboRenderer.draw=function(a){var b=this.getList();if(this.drawn)b.children().remove();else{var c=this.createComboContainer();c.append(b);if(this.extraContents){var d=this.createExtraContainer();this.extraContents.forEach(function(a){d.append(a)});c.append(d)}this.rootElement.append(c);this.drawn=!0;this.shadow=Webr.component.Shadow.getShadow(c,"ie-combo-shadow");this.shadow.setTop(c.offset().top)}a.forEach(function(a){b.append(a.getElement())});if(this.listContainer.is(":visible")){this.listContainer.outerHeight();
this.inputElement.outerHeight();var c=this.layouter.verticalLayouter,a=c.getMaxVisibleHeight(!1),f=c.getMaxVisibleHeight(!0);a>=f?c=Webr.component.Layouter.DOWN:(c=Webr.component.Layouter.UP,a=f);this.move(c,a,a)}};

charisma.smartui.IssuesSupport=function(){this.changeListeners=new Webr.util.Set;charisma.smartui.IssuesSupport.superclass.constructor.call(this);commonController=this;var a=this;$(document).keydown(function(b){if(Webr.component.panel.Dialog.isModalVisible()||charisma.smartui.ViewImageAttachment.isVisible())return!0;if(!b.targetIsInput()&&Webr.util.Key.isApplicable(b,SmartUIShortCuts.ToggleSearchField)&&(!a.issuesList||!a.issuesList.focused))return $(a.searchField).focus(),!1;if(Webr.util.Key.isApplicable(b,
SmartUIShortCuts.IncreaseIssueVisibility))return a.changeDetailLevel(!0),!1;if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.DecreaseIssueVisibility))return a.changeDetailLevel(!1),!1;if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.CollapseExpandSidebar))return a.sidebarToggler.click(),analytics.trackEvent("sideBar","keyboardToggle"),!1});trace("App created")};var F=new Function;F.prototype=charisma.smartui.CommonController.prototype;charisma.smartui.IssuesSupport.prototype=new F;
charisma.smartui.IssuesSupport.prototype.constructor=charisma.smartui.IssuesSupport;charisma.smartui.IssuesSupport.superclass=charisma.smartui.CommonController.prototype;charisma.smartui.IssuesSupport.prototype.togglerExceptionsView=function(){var a;if(this.issuesList){var b=this.issuesList.getFocusedIssue();this.issuesList.isIssueExpanded(b)&&(a=b.find("pre.wiki-exception-title").prev());a&&a.get(0)&&a.click()&&this.exceptionStateToggler()}};
charisma.smartui.IssuesSupport.prototype.changeDetailLevel=function(a){var b=$(".view_active"),e=$(".view"),c=[];e.add(b).map(function(){c.push(parseInt($(this).data("view-ord")))});c.sort(function(a,b){return a-b});var d=parseInt(b.data("view-ord"))+(a?10:-10);d<Math.min.apply(Math,c)?d=c[c.length-1]:d>Math.max.apply(Math,c)&&(d=c[0]);e.each(function(){$(this).attr("data-view-ord")==d&&$(this).click()})};
charisma.smartui.IssuesSupport.prototype.addChangeListener=function(a){this.changeListeners.add(a);this.issuesList&&this.issuesList.addListListener(a)};charisma.smartui.IssuesSupport.prototype.removeChangeListener=function(a){this.changeListeners.remove(a);this.issuesList&&this.issuesList.removeListListener(a)};
charisma.smartui.IssuesSupport.prototype.updateIssueList=function(a){var b=this.issuesList;b?(trace("Update issue list"),b.init(a)):(trace("Create new issue list"),b=new charisma.smartui.IssueList(a),this.setComponent("issuesList",b),b.hasFocusedIssue()||b.select());this.sortController=new charisma.smartui.SortController(a)};charisma.smartui.IssuesSupport.prototype.createSidebarToggler=function(a,b,e){this.sidebarToggler=new charisma.smartui.SidebarToggler(a,b,e)};
charisma.smartui.IssuesSupport.prototype.toggleSidebar=function(a){this.sidebarToggler&&(this.sidebarToggler.setVisible(a),this.updateToolBarDimentionsAndFocus())};charisma.smartui.IssuesSupport.prototype.updateSidebarTogglerPositionAndHeight=function(){this.sidebarToggler&&this.sidebarToggler.updatePositionAndHeight(this.issuesList.content)};
charisma.smartui.IssuesSupport.prototype.updateToolBarDimentionsAndFocus=function(){this.getToolbar().updateWidth();this.issuesList.focused?this.issuesList.focus():this.searchField.focus()};charisma.smartui.IssuesSupport.prototype.keyPressed=function(a,b){switch(a){case this.searchSuggest:return this.searchSuggestKeyEvent(b);case this.issuesList:return this.issueListKeyPressed(b)}return!0};charisma.smartui.IssuesSupport.prototype.commandsHide=function(){this.issuesList&&this.issuesList.focus()};
charisma.smartui.IssuesSupport.prototype.searchSuggestKeyEvent=function(a){var b=charisma.smartui.IssuesSupport.superclass.searchSuggestKeyEvent.call(this,a);if(b){if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.ToggleSearchField)&&this.issuesList)return this.issuesList.focus(),!1;if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.MoveToIssueListFromSearchField)&&this.issuesList)return this.issuesList.blur(),this.issuesList.focus(),!1}return b};
charisma.smartui.IssuesSupport.prototype.issueListKeyPressed=function(a){return Webr.util.Key.isApplicable(a,SmartUIShortCuts.ToggleSearchField)||Webr.util.Key.isApplicable(a,SmartUIShortCuts.MoveToSearchFieldFromIssueList)?(this.issuesList.blur(),this.searchField.focus(),!1):!0};charisma.smartui.IssuesSupport.prototype.getSelectedIssuesIds=function(){trace("getSelectedIssuesIds");var a=[];this.newIssueId?a.push(this.newIssueId):this.issuesList&&(a=this.issuesList.getSelectedIssuesIds());return a};
charisma.smartui.IssuesSupport.prototype.getSelectedIssuesCount=function(){return this.newIssueId?1:this.issuesList?this.issuesList.getCheckedCount():0};charisma.smartui.IssuesSupport.prototype.initLastCommentPopup=function(a){this.lastCommentPopup=a;this.lastCommentPopup.checkIfTheSameAnchor=!1};
charisma.smartui.IssuesSupport.prototype.getFocusedIssueId=function(){return this.newIssueId?this.newIssueId:this.issuesList&&this.issuesList.hasFocusedIssue()?this.issuesList.getIssueId(this.issuesList.getFocusedIssue()):null};charisma.smartui.IssuesSupport.prototype.getFocusedPresentationIssueId=function(){return this.newIssueId?'draft':this.issuesList&&this.issuesList.hasFocusedIssue()?this.issuesList.getVisibleIssueId(this.issuesList.getFocusedIssue()):null};
charisma.smartui.IssuesSupport.prototype.focusIssue=function(){this.issuesList?this.issuesList.focus():this.searchField.focus();return!0};charisma.smartui.IssuesSupport.prototype.selectIssue=function(a){issues.issuesList.unselectIssue(issues.issuesList.getFocusedIssue());issues.issuesList.selectIssue(issues.issuesList.getIssueById(a))};
charisma.smartui.IssuesSupport.prototype.commentsLoaded=function(a){var b=this;window.setTimeout(function(){b.issuesList.setComments(b.issuesList.getFocusedIssue(),a);b.issuesList.blur();a&&a.focus()},10)};charisma.smartui.IssuesSupport.prototype.commentsRefreshed=function(a){window.setTimeout(function(){this.issuesList.getComments(this.issuesList.getFocusedIssue()).getSelected().refresh(a)}.bind(this),150)};
charisma.smartui.IssuesSupport.prototype.issueRedrawn=function(a,b){this.issuesList.issueRedrawn(a,b)};charisma.smartui.IssuesSupport.prototype.setSearchField=function(a,b){charisma.smartui.IssuesSupport.superclass.setSearchField.call(this,a,b);this.focusSearchField()};charisma.smartui.IssuesSupport.prototype.getToolbar=function(){if(this.issuesList)return this.issuesList.toolbar};
charisma.smartui.IssuesSupport.prototype.toggleEditMode=function(a){var b=(this.editMode=a)?"hide":"show",e=this.issuesList.getFocusedIssue(),c=this.issuesList.getIssues().not(".popupComponent").not(e),d=$(".issues-sidebar");$(".issues-toolbar_r").find(".ring-btn").not(".edit-issue-btn").attr("disabled",a);$(".selectAll, .jt-player, .search-south, .reset-order")[b]();charisma.smartui.IssuesSupport.superclass.toggleEditMode.call(this,a);d.next().toggleClass("issues-center_edit");a?($("body").addClass("issue-inline-edit-mode"),
c.hide(),$(".sidebar-toggler").hide(),0===$(".noSidebar").length&&d.hide(),$(".default-layout").toggleClass("edit-mode"),$(".editMode").show(),e.show()):($("body").removeClass("issue-inline-edit-mode"),$(".editMode").hide(),$(".default-layout").toggleClass("edit-mode"),0===$(".noSidebar").length&&d.show(),$(".sidebar-toggler").show(),c.show(),$(this.issuesList.getFocusedIssue().scrollTo()));b=this.getToolbar();a?(b.container.data("originalDimensions",b.originalDimensions[0]),b.originalDimensions[0]=
$(".editMode .center").outerWidth()):b.originalDimensions[0]=b.container.data("originalDimensions");b.container.css("width",b.originalDimensions[0])};charisma.smartui.IssuesSupport.prototype.finishIssueEdit=function(){this.editMode&&this.issuesList.edit()};charisma.smartui.IssuesSupport.prototype.allFoundIssuesAreSelected=function(){return this.issuesList&&this.issuesList.allFoundIssuesAreSelected};charisma.smartui.IssuesSupport.prototype.getCommentList=function(){return this.issuesList.getFocusedIssue().data("commentList")};
charisma.smartui.IssuesSupport.prototype.initDragUpload=function(a,b){charisma.smartui.IssuesSupport.superclass.initDragUpload.call(this,a,b,".issueContainer:visible, .newIssueContainer .issueContainer__fsi:visible,  .edit-content__block:visible, .listEditIssue .issueContainer__fsi")};var issues;

Webr.event.ResponseObject=function(a){this.status=a.status;this.statusText=a.statusText;this.responseText=a.responseText;this.responseXML=a.responseXML};
Webr.event.ExceptionObject=function(a,b){b?(this.status=Webr.event.ExceptionObject.TIMEOUT_ERROR_CODE,this.statusText=Webr.event.ExceptionObject.TIMEOUT_ERROR_TEXT):a?(this.status=Webr.event.ExceptionObject.ABORT_ERROR_CODE,this.statusText=Webr.event.ExceptionObject.ABORT_ERROR_TEXT):(this.status=Webr.event.ExceptionObject.COMMUNICATION_ERROR_CODE,this.statusText=Webr.event.ExceptionObject.COMMUNICATION_ERROR_TEXT)};Webr.event.ExceptionObject.prototype.isAborted=function(){return this.status==Webr.event.ExceptionObject.ABORT_ERROR_CODE};
Webr.event.ExceptionObject.prototype.isTimeout=function(){return this.status==Webr.event.ExceptionObject.TIMEOUT_ERROR_CODE};Webr.event.ExceptionObject.prototype.isCommunication=function(){return this.status==Webr.event.ExceptionObject.COMMUNICATION_ERROR_CODE};Webr.event.ExceptionObject.COMMUNICATION_ERROR_CODE=0;Webr.event.ExceptionObject.COMMUNICATION_ERROR_TEXT="Communication failure";Webr.event.ExceptionObject.ABORT_ERROR_CODE=-1;Webr.event.ExceptionObject.ABORT_ERROR_TEXT="Transaction aborted";
Webr.event.ExceptionObject.TIMEOUT_ERROR_CODE=-2;Webr.event.ExceptionObject.TIMEOUT_ERROR_TEXT="Transaction timed out";

cr.setTemplateBind("IssuesContent",function(a){cr.ach(a,"tb.editIssueLink","click",function(b){charisma.smartui.TextCopier.hideCopier(!0);cr.serverMethodCallInHandler(b,".methodCall_toggleEditMode",{__param__issue:issues.getFocusedIssueId()})});cr.ach(a,"tb.selectAllCheckbox","click",function(b){$(cr.findInHandler(b,".tb.selectAllCheckbox",[])).trigger("clickSelectAll",null)});cr.ach(a,"findGlobal","click",function(b){cr.serverMethodCallInHandler(b,".methodCall_searchInEverything",{},{preventDoubleSubmit:!0})});
cr.ach(a,"tb.vm.detailLevelLink","click",function(b){var a=issues.sortController.issueMoved;issues.sortController.issueMoved=!1;cr.serverMethodCallInHandler(b,".methodCall_changeDetailLevel",{__param__level:cr.getTarget(b).getAttribute("p0"),__param__shouldForceRefresh:a})});cr.ash(a,"tb.vm.showHierarchy","click",null);cr.ash(a,"bb.issuesPerPage","change",null)});

Webr.component.Ticker=function(a){this.wasStarted=!1;this.init(a)};Webr.component.Ticker.prototype.registerListeners=function(){var a=this;this.refreshListener=function(){a.jTicker.unbind();a.stop();info("Ticker stopped");a.jTicker.removeData(Webr.component.ComponentRegistry.COMPONENT_INSTANCE);a.jTicker=null;a.refreshListener=null};this.jTicker.addRefreshListener(this.refreshListener)};
Webr.component.Ticker.prototype.init=function(a){this.jTicker=a;this.resetCounter();(a=this.jTicker.attr("interval"))&&this.start(parseInt(a));this.registerListeners();this.jTicker.data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE,this)};Webr.component.Ticker.prototype.start=function(a){this.wasStarted=!0;null!=this.handler&&window.clearInterval(this.handler);var c=this;this.handler=window.setInterval(function(){c.ontick(++c.tickCount)},a)};
Webr.component.Ticker.prototype.stop=function(){null!=this.handler&&(window.clearInterval(this.handler),this.handler=null)};Webr.component.Ticker.prototype.ontick=function(){this.jTicker.trigger("tick",{config:{hideLoadingPopup:!0},tickCount:this.tickCount})};Webr.component.Ticker.prototype.resetCounter=function(){this.tickCount=0};
Webr.component.Ticker.register=function(a,c){void 0==Webr.component.Ticker.tickers&&(Webr.component.Ticker.tickers=new Webr.util.Map);cr.forEach(a,c,function(){var a=$(this).attr("id"),b=Webr.component.Ticker.tickers.get(a);if(b==void 0||b==null)Webr.component.Ticker.tickers.put(a,new Webr.component.Ticker($(this)));else{b.stop();b.refreshListener&&b.refreshListener();b.init($(this))}})};var regT=Webr.component.Ticker.register;

Webr.event.UploadEvent=function(a){Webr.event.UploadEvent.superclass.constructor.call(this,a)};var F=new Function;F.prototype=Webr.event.ServerEvent.prototype;Webr.event.UploadEvent.prototype=new F;Webr.event.UploadEvent.prototype.constructor=Webr.event.UploadEvent;Webr.event.UploadEvent.superclass=Webr.event.ServerEvent.prototype;
Webr.event.UploadEvent.prototype.send=function(){this.createFrame();this.setupPollingAndTimeout();this.addParameters();try{for(var a=0;a<this.config.fileInput.length;++a)this.moveFileInput(this.config.fileInput[a]);document.body.appendChild(this.form);this.form.submit();document.body.removeChild(this.form)}catch(b){this.releaseFrame(),this.clearPollingAndTimeout(),this.fireException(new Webr.event.ExceptionObject(!1,!1))}};
Webr.event.UploadEvent.prototype.moveFileInput=function(a){var b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);this.form.appendChild(a)};Webr.event.UploadEvent.prototype.abort=function(a){this.releaseFrame();this.clearPollingAndTimeout(a);this.fireException(new Webr.event.ExceptionObject(!0,a))};
Webr.event.UploadEvent.prototype.addParameters=function(){var a=new Webr.event.FormBuilder(this.form);this.config.eventSource&&a.addParamPair("event_source",this.config.eventSource);this.config.eventName&&a.addParamPair("event_",this.config.eventName);if(this.config.collectFormElements){var b=new Webr.event.InputCollector(this.config.rootElement);b.collect(a);delete b}this.config.eventParameters&&a.addParamObject(this.config.eventParameters);delete a};
Webr.event.UploadEvent.prototype.createFrame=function(){++Webr.event.UploadEvent.FRAME_ID_COUNTER;var a="frame"+Webr.event.UploadEvent.FRAME_ID_COUNTER;this.frame=document.createElement("iframe");this.frame.id=a;this.frame.name=a;this.frame.style.position="absolute";this.frame.style.left="-10000px";this.frame.style.top="-10000px";Webr.event.UploadEvent.IS_IE&&(this.frame.src="javascript:false");document.body.appendChild(this.frame);Webr.event.UploadEvent.IS_IE&&(document.frames[a].name=a);this.form=
document.createElement("form");this.form.target=a;this.form.method="POST";this.form.enctype=this.form.encoding="multipart/form-data";this.form.action=this.config.handlerUrl+"&X-Requested-With=XMLHttpRequest";var b=this,a=function(){b.clearPollingAndTimeout();b.tryHandleAndRelease()};Webr.event.UploadEvent.IS_IE?this.frame.attachEvent("onload",a):this.frame.addEventListener("load",a,!1)};
Webr.event.UploadEvent.prototype.tryHandleAndRelease=function(){var a=this.getFrameDocument();if(a){var b={status:200,statusText:"OK",responseText:"",responseXML:null};a.body&&(b.responseText=a.body.innerHTML);if(a.XMLDocument)b.responseXML=a.XMLDocument;else{if("HTML"==a.firstChild.nodeName){if(0<--Webr.event.UploadEvent.DOM_CHECK_COUNTER){var c=this;window.setTimeout(function(){c.tryHandleAndRelease()},10)}else this.fireException(new Webr.event.ExceptionObject(!0,!1)),this.releaseFrame();return}b.responseXML=
a}this.fireSuccess(b)}else this.fireException({status:Webr.event.ExceptionObject.COMMUNICATION_ERROR_CODE,statusText:"Can't reach server or uploads are permitted. Contact your system administrator."});this.releaseFrame()};Webr.event.UploadEvent.prototype.fireException=function(a){Webr.event.PopupMessage.ERROR.show(a.statusText);Webr.event.UploadEvent.superclass.fireException.call(this,a)};
Webr.event.UploadEvent.prototype.releaseFrame=function(){var a=this;window.setTimeout(function(){document.body.removeChild(a.frame);a.frame=null;a.form=null},100)};Webr.event.UploadEvent.prototype.setupPollingAndTimeout=function(){var a=this;null!=this.config.timeout&&(this.timeoutHandle=window.setTimeout(function(){a.abort(!0)},this.config.timeout));var b=0;this.pollHandle=window.setInterval(function(){a.firePoll(++b)},this.config.pollInterval)};
Webr.event.UploadEvent.prototype.getFrameDocument=function(){var a=null;return a=Webr.event.UploadEvent.IS_IE?this.frame.contentWindow.document:this.frame.contentDocument||window.frames[this.frame.id].document};Webr.event.UploadEvent.FRAME_ID_COUNTER=0;Webr.event.UploadEvent.DOM_CHECK_COUNTER=100;Webr.event.UploadEvent.IS_IE=-1<navigator.userAgent.toLowerCase().indexOf("msie");
Webr.event.UploadEvent.findNonemptyFileInputs=function(a){for(var b=[],a=a||document.body,a=a.getElementsByTagName("input"),c=0;c<a.length;++c){var d=a[c];d.type&&("file"==d.type.toLowerCase()&&d.value)&&b.push(d)}return b};

/*! jQuery UI - v1.10.3 - 2013-10-20
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

(function(e,t){function i(t,i){var s,n,r,o=t.nodeName.toLowerCase();return"area"===o?(s=t.parentNode,n=s.name,t.href&&n&&"map"===s.nodeName.toLowerCase()?(r=e("img[usemap=#"+n+"]")[0],!!r&&a(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&a(t)}function a(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,a){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),a&&a.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var a,s,n=e(this[0]);n.length&&n[0]!==document;){if(a=n.css("position"),("absolute"===a||"relative"===a||"fixed"===a)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,a){return!!e.data(t,a[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var a=e.attr(t,"tabindex"),s=isNaN(a);return(s||a>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,a){function s(t,i,a,s){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,a&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===a?["Left","Right"]:["Top","Bottom"],r=a.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+a]=function(i){return i===t?o["inner"+a].call(this):this.each(function(){e(this).css(r,s(this,i)+"px")})},e.fn["outer"+a]=function(t,i){return"number"!=typeof t?o["outer"+a].call(this,t):this.each(function(){e(this).css(r,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,a){var s,n=e.ui[t].prototype;for(s in a)n.plugins[s]=n.plugins[s]||[],n.plugins[s].push([i,a[s]])},call:function(e,t,i){var a,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(a=0;s.length>a;a++)e.options[s[a][0]]&&s[a][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var a=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[a]>0?!0:(t[a]=1,s=t[a]>0,t[a]=0,s)}})})(jQuery);
/*! jQuery UI - v1.10.3 - 2013-10-20
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

(function(e,t){var i=0,s=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(n){}a(t)},e.widget=function(i,s,a){var n,r,o,h,l={},u=i.split(".")[0];i=i.split(".")[1],n=u+"-"+i,a||(a=s,s=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:a.version,_proto:e.extend({},a),_childConstructors:[]}),h=new s,h.options=e.widget.extend({},h.options),e.each(a,function(i,a){return e.isFunction(a)?(l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,n=this._superApply;return this._super=e,this._superApply=t,i=a.apply(this,arguments),this._super=s,this._superApply=n,i}}(),t):(l[i]=a,t)}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r?h.widgetEventPrefix:i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:n}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var a,n,r=s.call(arguments,1),o=0,h=r.length;h>o;o++)for(a in r[o])n=r[o][a],r[o].hasOwnProperty(a)&&n!==t&&(i[a]=e.isPlainObject(n)?e.isPlainObject(i[a])?e.widget.extend({},i[a],n):e.widget.extend({},n):n);return i},e.widget.bridge=function(i,a){var n=a.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,h=s.call(arguments,1),l=this;return r=!o&&h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,a=e.data(this,n);return a?e.isFunction(a[r])&&"_"!==r.charAt(0)?(s=a[r].apply(a,h),s!==a&&s!==t?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,n);t?t.option(r||{})._init():e.data(this,n,new a(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var a,n,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},a=i.split("."),i=a.shift(),a.length){for(n=o[i]=e.widget.extend({},this.options[i]),r=0;a.length-1>r;r++)n[a[r]]=n[a[r]]||{},n=n[a[r]];if(i=a.pop(),s===t)return n[i]===t?null:n[i];n[i]=s}else{if(s===t)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,a){var n,r=this;"boolean"!=typeof i&&(a=s,s=i,i=!1),a?(s=n=e(s),this.bindings=this.bindings.add(s)):(a=s,s=this.element,n=this.widget()),e.each(a,function(a,o){function h(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):t}"string"!=typeof o&&(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=a.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?n.delegate(c,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var a,n,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,a,n){"string"==typeof a&&(a={effect:a});var r,o=a?a===!0||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),r=!e.isEmptyObject(a),a.complete=n,a.delay&&s.delay(a.delay),r&&e.effects&&e.effects.effect[o]?s[t](a):o!==t&&s[o]?s[o](a.duration,a.easing,n):s.queue(function(i){e(this)[t](),n&&n.call(s[0]),i()})}})})(jQuery);
/*! jQuery UI - v1.10.3 - 2013-10-20
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

(function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,a=1===i.which,n="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return a&&!n&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
/*! jQuery UI - v1.10.3 - 2013-10-20
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

(function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var s=null,a=!1,n=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")===n?(s=e(this),!1):undefined}),e.data(t.target,n.widgetName+"-item")===n&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(a=!0)}),a)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var a,n,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(n)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,a,n,r=this.options,o=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-e(document).scrollTop()<r.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed)),t.pageX-e(document).scrollLeft()<r.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))),o!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],a=s.item[0],n=this._intersectsWithPointer(s),n&&s.instance===this.currentContainer&&a!==this.currentItem[0]&&this.placeholder[1===n?"next":"prev"]()[0]!==a&&!e.contains(this.placeholder[0],a)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],a):!0)){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,a=this.placeholder.offset(),n=this.options.axis,r={};n&&"x"!==n||(r.left=a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(r.top=a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,a=s+this.helperProportions.height,n=e.left,r=n+e.width,o=e.top,h=o+e.height,l=this.offset.click.top,u=this.offset.click.left,c="x"===this.options.axis||s+l>o&&h>s+l,d="y"===this.options.axis||t+u>n&&r>t+u,p=c&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>n&&r>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>o&&h>a-this.helperProportions.height/2},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),s="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),a=i&&s,n=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return a?this.floating?r&&"right"===r||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),s=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),a=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&s||"left"===n&&!s:a&&("down"===a&&i||"up"===a&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,s,a,n,r=[],o=[],h=this._connectWith();if(h&&t)for(i=h.length-1;i>=0;i--)for(a=e(h[i]),s=a.length-1;s>=0;s--)n=e.data(a[s],this.widgetFullName),n&&n!==this&&!n.options.disabled&&o.push([e.isFunction(n.options.items)?n.options.items.call(n.element):e(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n]);for(o.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=o.length-1;i>=0;i--)o[i][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,a,n,r,o,h,l,u=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(a=e(d[i]),s=a.length-1;s>=0;s--)n=e.data(a[s],this.widgetFullName),n&&n!==this&&!n.options.disabled&&(c.push([e.isFunction(n.options.items)?n.options.items.call(n.element[0],t,{item:this.currentItem}):e(n.options.items,n.element),n]),this.containers.push(n));for(i=c.length-1;i>=0;i--)for(r=c[i][1],o=c[i][0],s=0,l=o.length;l>s;s++)h=e(o[s]),h.data(this.widgetName+"-item",r),u.push({item:h,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,a,n;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(a=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=a.outerWidth(),s.height=a.outerHeight()),n=a.offset(),s.left=n.left,s.top=n.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)n=this.containers[i].element.offset(),this.containers[i].containerCache.left=n.left,this.containers[i].containerCache.top=n.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),a=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(a)}):"img"===s&&a.attr("src",t.currentItem.attr("src")),i||a.css("visibility","hidden"),a},update:function(e,a){(!i||s.forcePlaceholderSize)&&(a.height()||a.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_contactContainers:function(s){var a,n,r,o,h,l,u,c,d,p,f=null,m=null;for(a=this.containers.length-1;a>=0;a--)if(!e.contains(this.currentItem[0],this.containers[a].element[0]))if(this._intersectsWith(this.containers[a].containerCache)){if(f&&e.contains(this.containers[a].element[0],f.element[0]))continue;f=this.containers[a],m=a}else this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",s,this._uiHash(this)),this.containers[a].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",s,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(r=1e4,o=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",u=this.positionAbs[h]+this.offset.click[h],n=this.items.length-1;n>=0;n--)e.contains(this.containers[m].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[n].top,this.items[n].height))&&(c=this.items[n].item.offset()[h],d=!1,Math.abs(c-u)>Math.abs(c+this.items[n][l]-u)&&(d=!0,c+=this.items[n][l]),r>Math.abs(c-u)&&(r=Math.abs(c-u),o=this.items[n],this.direction=d?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;o?this._rearrange(s,o,null,!0):this._rearrange(s,null,this.containers[m].element,!0),this._trigger("change",s,this._uiHash()),this.containers[m]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",s,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode),("document"===a.containment||"window"===a.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(a.containment)||(t=e(a.containment)[0],i=e(a.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:a.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:a.scrollLeft())*s}},_generatePosition:function(t){var i,s,a=this.options,n=t.pageX,r=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),a.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/a.grid[1])*a.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-a.grid[1]:i+a.grid[1]:i,s=this.originalPageX+Math.round((n-this.originalPageX)/a.grid[0])*a.grid[0],n=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-a.grid[0]:s+a.grid[0]:s)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:o.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:o.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){a===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&s.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||s.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(s.push(function(e){this._trigger("remove",e,this._uiHash())}),s.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||s.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;s.length>i;i++)s[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;s.length>i;i++)s[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})})(jQuery);
Webr.rest={};Webr.rest.Client=function(a,b){this.baseUrl=a;this.defautAjaxSettings=b};Webr.rest.Client.prototype.resource=function(a){return new Webr.rest.RootResource(this,a)};Webr.rest.Entity=function(){};Webr.rest.Entity.json=function(a){return{t:"application/json",v:jQuery.toJSON(a)}};Webr.rest.PreventDoubleSubmit=function(){};Webr.rest.InProgress=function(){this.requestsInProgress=[]};
Webr.rest.InProgress.prototype.checkDoubleSubmit=function(a,b){var c=!0;if(a&&!a.recentOnly&&null!=this.requestsInProgress[a.requestId||b])c=!1;return c};Webr.rest.InProgress.prototype.rememberEvent=function(a,b,c){b&&(c=b.requestId||c,b.recentOnly&&(b=this.requestsInProgress[c],null!=b&&b.abort()),this.requestsInProgress[c]=a,a.inProgressRequestId=c,a.complete(Webr.rest.InProgress.onComplete))};
Webr.rest.InProgress.prototype.isInFlight=function(){var a=0,b=this.requestsInProgress,c;for(c in b)++a;return 0<a};Webr.rest.InProgress.WEBR_AJAX_LISTENER="_WEBR_REST_LISTENER_";Webr.rest.InProgress.get=function(){null==Webr.rest.InProgress.instance&&(Webr.rest.InProgress.instance=new Webr.rest.InProgress,window[Webr.rest.InProgress.WEBR_AJAX_LISTENER]=Webr.rest.InProgress.instance);return Webr.rest.InProgress.instance};
Webr.rest.InProgress.onComplete=function(a){a=a.inProgressRequestId;null!=Webr.rest.InProgress.get().requestsInProgress[a]&&delete Webr.rest.InProgress.get().requestsInProgress[a]};Webr.rest.RestConfig=function(){};Webr.rest.Resource=function(a){this.config=a};Webr.rest.Resource.prototype.subresource=function(a){return new Webr.rest.Subresource(this,a)};Webr.rest.Resource.prototype.method=function(a,b){return new Webr.rest.Method(this,a,b)};Webr.rest.Resource.prototype.getClient=function(){};
Webr.rest.Resource.prototype.collectConfigs=function(){};Webr.rest.RootResource=function(a,b){Webr.rest.RootResource.superclass.constructor.call(this,b);this.client=a};var F=new Function;F.prototype=Webr.rest.Resource.prototype;Webr.rest.RootResource.prototype=new F;Webr.rest.RootResource.prototype.constructor=Webr.rest.RootResource;Webr.rest.RootResource.superclass=Webr.rest.Resource.prototype;Webr.rest.RootResource.prototype.getClient=function(){return this.client};
Webr.rest.RootResource.prototype.collectConfigs=function(a){this.client.defautAjaxSettings&&a.push({x:this.client.defautAjaxSettings});a.push(this.config)};Webr.rest.Subresource=function(a,b){Webr.rest.Subresource.superclass.constructor.call(this,b);this.parentResource=a};F=new Function;F.prototype=Webr.rest.Resource.prototype;Webr.rest.Subresource.prototype=new F;Webr.rest.Subresource.prototype.constructor=Webr.rest.Subresource;Webr.rest.Subresource.superclass=Webr.rest.Resource.prototype;
Webr.rest.Subresource.prototype.getClient=function(){return this.parentResource.getClient()};Webr.rest.Subresource.prototype.collectConfigs=function(a){this.parentResource.collectConfigs(a);a.push(this.config)};Webr.rest.Method=function(a,b,c){this.resource=a;this.method=b;this.methodConfig=c};
Webr.rest.Method.prototype.call=function(a){var b=this.collectConfigs(a),c=[];this.appendBaseUrl(c);Webr.rest.Method.appendPath(c,b);for(var f=c.join(""),e,d=b.length-1;0<=d;--d)e=e||b[d].d;d=Webr.rest.Method.EMPTY_DEFERRED;Webr.rest.InProgress.get().checkDoubleSubmit(e,f)&&((d=Webr.rest.Method.mergeConfigProperty(b,"f"))?(b=Webr.rest.Method.mergeConfigProperty(b,"u",{url:c.join(""),params:Webr.rest.Method.mergeConfigProperty(b,"q")}),d=Webr.rest.FileUploader.upload(d,b),Webr.rest.InProgress.get().rememberEvent(b,
e,f)):(Webr.rest.Method.appendQueryParameters(c,b),a=(d=a.e||this.methodConfig.e)&&d.t,d=d&&d.v,b=Webr.rest.Method.mergeConfigProperty(b,"x",{url:c.join(""),type:this.method,contentType:a,data:d}),d=jQuery.ajax(b),Webr.rest.InProgress.get().rememberEvent(d,e,f)));return d};Webr.rest.Method.prototype.getUrl=function(){var a=this.collectConfigs(),b=[];this.appendBaseUrl(b);Webr.rest.Method.appendPath(b,a);Webr.rest.Method.appendQueryParameters(b,a);return b.join("")};
Webr.rest.Method.prototype.appendBaseUrl=function(a){a.push(this.resource.getClient().baseUrl,"rest")};Webr.rest.Method.prototype.collectConfigs=function(a){var b=[];this.resource.collectConfigs(b);b.push(this.methodConfig);a&&b.push(a);return b};Webr.rest.Method.EMPTY_DEFERRED={done:function(){return this},error:function(){return this},fail:function(){return this},success:function(){return this},then:function(){return this}};
Webr.rest.Method.appendPath=function(a,b){for(var c=b[b.length-1],c=c.p?c.p.length:0,f=0;f<c;++f){for(var e=null,d=b.length-1;0<=d;--d)e=e||b[d].p&&b[d].p[f];a.push("/",encodeURIComponent(e))}};Webr.rest.Method.appendQueryParameters=function(a,b){var c=Webr.rest.Method.mergeConfigProperty(b,"q");c&&(c=jQuery.param(c),a.push("?",c))};Webr.rest.Method.mergeConfigProperty=function(a,b,c){for(var f=0;f<a.length;++f){var e=a[f][b];if(e){var c=c||{},d;for(d in e)null!=e[d]&&(c[d]=e[d])}}return c};

charisma.BaseDialog=function(a,b){a&&this.init(a);this.returnFocus=b;this.documentHandlerOnKeyRepeatable=jQuery.proxy(this.onkeyrepeatable,this);this.documentHandlerOnKeyDown=jQuery.proxy(this.onkeydown,this)};charisma.BaseDialog.prototype.onkeyrepeatable=function(a){return Webr.util.Key.isApplicable(a,SuggestKeyStrokes.Close)?(this.close(),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.Submit)?(this.submit(),!1):!0};charisma.BaseDialog.prototype.onkeydown=function(){return!0};
charisma.BaseDialog.prototype.show=function(){this.dialog.isVisible()||this.dialog.setVisible(!0);this.handleKeyboard()};charisma.BaseDialog.prototype.handleKeyboard=function(){$(document).keyrepeatable(this.documentHandlerOnKeyRepeatable);$(document).keydown(this.documentHandlerOnKeyDown)};
charisma.BaseDialog.prototype.unhandleKeyboard=function(){$(document).unbind("keydown",this.documentHandlerOnKeyDown);Webr.util.Util.isIE||Webr.util.Util.isWebkit?$(document).unbind("keydown",this.documentHandlerOnKeyRepeatable):$(document).unbind("keypress",this.documentHandlerOnKeyRepeatable)};charisma.BaseDialog.prototype.close=function(){this.unhandleKeyboard();this.dialog.setVisible(!1);this.returnFocus&&(this.returnFocus instanceof Function?this.returnFocus():$(this.returnFocus).focus())};
charisma.BaseDialog.prototype.init=function(a){a=$(a);this.dialog=new Webr.component.panel.Dialog(a);a.find(".yt-btn-submit, .sb-btn-submit").click(jQuery.proxy(this.submit,this));a.find(".sb-btn-default, .sb-dlg-close, .jt-dialog-close, .yt-btn-close").click(jQuery.proxy(this.close,this));this.fixDrag()};charisma.BaseDialog.prototype.fixDrag=function(){this.dialog.panel.draggable({handle:".sb-dlg-handler"})};charisma.BaseDialog.prototype.submit=function(){this.close()};

cr.setTemplateBind("Comments",function(a){cr.ash(a,"loadMore","click",null)});

Webr.component.panel={};

Webr.component.panel.AbstractPanel=function(a){Webr.component.panel.AbstractPanel.superclass.constructor.call(this);this.panel=a;this.panel.data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE,this);this.init();var b=this;Webr.util.HistoryDispatcher.getInstance().addListener({key:this.panel.attr("watchState"),historyChanged:function(a){b.historyChanged(a)}})};var F=new Function;F.prototype=Webr.component.Component.prototype;Webr.component.panel.AbstractPanel.prototype=new F;
Webr.component.panel.AbstractPanel.prototype.constructor=Webr.component.panel.AbstractPanel;Webr.component.panel.AbstractPanel.superclass=Webr.component.Component.prototype;Webr.component.panel.AbstractPanel.prototype.init=function(){};Webr.component.panel.AbstractPanel.prototype.setVisible=function(a){(this.visible=a)?this.panel.show():this.panel.hide()};Webr.component.panel.AbstractPanel.prototype.isVisible=function(){return this.visible};
Webr.component.panel.AbstractPanel.prototype.onhistorychanged=function(a){this.panel.trigger("historychanged",a)};Webr.component.panel.AbstractPanel.prototype.historyChanged=function(){this.onhistorychanged()};Webr.component.panel.AbstractPanel.prototype.onkeydown=function(){};

Webr.component.panel.Panel=function(a){Webr.component.panel.Panel.superclass.constructor.call(this,a)};var F=new Function;F.prototype=Webr.component.panel.AbstractPanel.prototype;Webr.component.panel.Panel.prototype=new F;Webr.component.panel.Panel.prototype.constructor=Webr.component.panel.Panel;Webr.component.panel.Panel.superclass=Webr.component.panel.AbstractPanel.prototype;

Webr.component.panel.Dialog=function(a){this.visible=!1;Webr.component.panel.Dialog.superclass.constructor.call(this,a);this.initConstants();this.setIeShadow();this.focusGetter=a.find(".jt-dialog-close");var b=a.children(".jt-panel-title").first();a.draggable({containment:"window",handle:b,start:jQuery.proxy(this.onstartdrag,this),stop:jQuery.proxy(this.onstopdrag,this)})};var F=new Function;F.prototype=Webr.component.panel.Panel.prototype;Webr.component.panel.Dialog.prototype=new F;
Webr.component.panel.Dialog.prototype.constructor=Webr.component.panel.Dialog;Webr.component.panel.Dialog.superclass=Webr.component.panel.Panel.prototype;Webr.component.panel.Dialog.prototype.initConstants=function(){this.constants={vpWidth:$(window).width(),vpHeight:$(window).height(),scrollLeft:$(document).scrollLeft(),scrollTop:$(document).scrollTop()}};Webr.component.panel.Dialog.prototype.setIeShadow=function(){Webr.util.Util.isIE&&9>Webr.util.Util.browserVersion&&this.panel.addClass("jt-dialog-ie")};
Webr.component.panel.Dialog.prototype._setVisible=function(a){Webr.component.panel.Dialog.superclass.setVisible.call(this,a)};Webr.component.panel.Dialog.prototype.getPanelBorders=function(){var a=this.calculatePosition();return{top:a.top+"px",left:a.left+"px",width:this.panel.width()+"px",height:this.panel.height()+"px"}};Webr.component.panel.Dialog.prototype.getBorders=function(a){a=$(a);return{top:a.offset().top+"px",left:a.offset().left+"px",width:a.width()+"px",height:a.height()+"px"}};
Webr.component.panel.Dialog.prototype.setVisible=function(a){this.visible==a?a||Webr.component.panel.Dialog.setVisibleModalDiv(!1):(Webr.component.panel.Dialog.VISIBLE_DIALOGS+=a?1:-1,Webr.component.panel.Dialog.setVisibleModalDiv(a),a&&this.centerDialog(),Webr.component.panel.Dialog.superclass.setVisible.call(this,a),this.focusGetter.focus(),a||this.clearMessages(),this.visible=a)};Webr.component.panel.Dialog.prototype.clearMessages=function(){Webr.ErrorMessage.closePopup()};
Webr.component.panel.Dialog.prototype.centerDialog=function(){var a=this.calculatePosition();this.panel.css({top:a.top,left:a.left})};Webr.component.panel.Dialog.prototype.calculatePosition=function(){var a=(this.constants.vpHeight-this.panel.height())/3,b=(this.constants.vpWidth-this.panel.width())/2;return{top:Math.max(0,a),left:Math.max(0,b)}};Webr.component.panel.Dialog.prototype.onstartdrag=function(){this.panel.trigger("startdrag")};Webr.component.panel.Dialog.prototype.onstopdrag=function(){this.panel.trigger("stopdrag")};
Webr.component.panel.Dialog.prototype.historyChanged=function(a){if(this.visible)this.onhistorychanged(a)};Webr.component.panel.Dialog.ANIMATION_SPEED=150;Webr.component.panel.Dialog.MODAL_DIV_VISIBLE=!1;Webr.component.panel.Dialog.VISIBLE_DIALOGS=0;
Webr.component.panel.Dialog.setVisibleModalDiv=function(a){if(a||Webr.component.panel.Dialog.MODAL_DIV_VISIBLE&&!(0<Webr.component.panel.Dialog.VISIBLE_DIALOGS)){if(null==Webr.component.panel.Dialog.MODAL_DIV){var b=document.createElement("div");$(b).addClass("jt-dialog-mask");Webr.component.panel.Dialog.MODAL_DIV=b}a?document.body.appendChild(Webr.component.panel.Dialog.MODAL_DIV):document.body.removeChild(Webr.component.panel.Dialog.MODAL_DIV);Webr.component.panel.Dialog.MODAL_DIV_VISIBLE=a}};
Webr.component.panel.Dialog.setVisibleDialog=function(a,b){a&&a.setVisible?a.setVisible(b):b||(Webr.component.panel.Dialog.VISIBLE_DIALOGS-=1);Webr.component.panel.Dialog.setVisibleModalDiv(b)};Webr.component.panel.Dialog.registerDialog=function(a,b){cr.forEach(a,b,function(){new Webr.component.panel.Dialog($(this))})};Webr.component.panel.Dialog.isModalVisible=function(){return Webr.component.panel.Dialog.MODAL_DIV_VISIBLE};Webr.component.DialogConstants=function(){};var regdlg=Webr.component.panel.Dialog.registerDialog;

cr.setTemplateBind("Watches",function(a){cr.ach(a,"watch","click",function(){return!1});cr.ash(a,"watch","click",{preventDoubleSubmit:!0})});

Webr.component.DataList=function(a){Webr.component.DataList.superclass.constructor.call(this);this.options=[];this.visibleOptions=0;this.currentIndex=-1;this.noMatchOption=null;this.config={currentSyleName:"active",circle:!0,hideNotMatched:!0,elementRenderer:Webr.component.DataListItem.defaultItemRenderer};this.mergeConfig(a);this.currenStyleName=this.config.currentSyleName};var F=new Function;F.prototype=Webr.component.Component.prototype;Webr.component.DataList.prototype=new F;
Webr.component.DataList.prototype.constructor=Webr.component.DataList;Webr.component.DataList.superclass=Webr.component.Component.prototype;Webr.component.DataList.prototype.addDataListItem=function(a,b){a.option.id!==Webr.component.ComboOption.NO_MATCH_ID?(this.options.push(a),this.visibleOptions=this.options.length,this.registerMouseOver(this.options.length-1),b&&(this.currentIndex=this.options.length-1,a.getElement().addClass(this.currenStyleName))):this.addNoMatchOption(a)};
Webr.component.DataList.prototype.addNoMatchOption=function(a){this.noMatchOption=a};Webr.component.DataList.prototype.clear=function(){this.options=[];this.currentIndex=-1;this.visibleOptions=0};
Webr.component.DataList.prototype.update=function(a,b,c){this.clear();if(0==a.length)this.noMatchOption.show();else for(var d=0;d<a.length;d+=1){var e=a[d],f=b(e);c&&c==e.id?this.addDataListItem(f,!0):this.addDataListItem(f)}this.config.clickHandler&&this.registerClickHandler(this.config.clickHandler);this.config.checkHandler&&this.registerCheckHandler(this.config.checkHandler)};Webr.component.DataList.prototype.mergeConfig=function(a){for(var b in a){var c=a[b];void 0!==c&&(this.config[b]=c)}};
Webr.component.DataList.prototype.setHideNotMatched=function(a){this.config.hideNotMatched=a};Webr.component.DataList.prototype.isHideNotMatched=function(){return this.config.hideNotMatched};Webr.component.DataList.prototype.isEmpty=function(){return 0>=this.options.length};Webr.component.DataList.prototype.hasVisible=function(){return!this.isEmpty()&&0<this.visibleOptions};Webr.component.DataList.prototype.hasCurrent=function(){return 0<=this.currentIndex&&this.currentIndex<this.options.length};
Webr.component.DataList.prototype.unselectCurrent=function(a){this.hasCurrent()&&(this.options[this.currentIndex].unselect(this.currenStyleName),a&&(this.currentIndex=-1))};Webr.component.DataList.prototype.selectCurrent=function(){this.hasCurrent()&&(this.options[this.currentIndex].select(this.currenStyleName),this.options[this.currentIndex].scroll(),this.fire(function(a){a.selectionChanged()}))};
Webr.component.DataList.prototype.silentSelectCurrent=function(){this.hasCurrent()&&(this.options[this.currentIndex].select(this.currenStyleName),this.options[this.currentIndex].scroll())};
Webr.component.DataList.prototype.select_next=function(){if(this.hasVisible()){-1!=this.currentIndex&&this.unselectCurrent(!1);for(var a=1;a<=this.options.length;++a){var b=(this.currentIndex+a)%this.options.length;if(!this.config.circle&&b<this.currentIndex)break;if(this.options[b].visible){this.currentIndex=b;break}}this.selectCurrent()}};
Webr.component.DataList.prototype.select_prev=function(){if(this.hasVisible()){-1==this.currentIndex?this.currentIndex=this.options.length:this.unselectCurrent(!1);for(var a=this.options.length-1;0<=a;--a){var b=(this.currentIndex+a)%this.options.length;if(!this.config.circle&&b>this.currentIndex)break;if(this.options[b].visible){this.currentIndex=b;break}}this.selectCurrent()}};Webr.component.DataList.prototype.select_first=function(){this.hasVisible()&&(this.unselectCurrent(!0),this.select_next())};
Webr.component.DataList.prototype.select_last=function(){this.hasVisible()&&(this.unselectCurrent(!0),this.select_prev())};Webr.component.DataList.prototype.getCurrentName=function(){var a=this.getCurrentOption();return null!=a?a.text:""};Webr.component.DataList.prototype.getCurrentId=function(){var a=this.getCurrentOption();return null!=a?a.id:""};Webr.component.DataList.prototype.getCurrentItem=function(){var a=null;this.hasCurrent()&&(a=this.options[this.currentIndex]);return a};
Webr.component.DataList.prototype.getCurrentOption=function(){var a=null;this.hasCurrent()&&(a=this.options[this.currentIndex].option);return a};Webr.component.DataList.prototype.setCurrentOption=function(a){if(this.getCurrentOption()!=a){var b=this;this.unselectCurrent(!1);jQuery.each(this.options,function(c,d){if(d.option===a)return b.currentIndex=c,!1;b.currentIndex=-1});this.silentSelectCurrent()}};
Webr.component.DataList.prototype.resize=function(a){this.visibleOptions=0;this.noMatchOption.hide();for(var b=0;b<this.options.length;++b){var c=this.options[b].filter(a,this.config.elementRenderer);c.match||!this.config.hideNotMatched?(c.show(),this.visibleOptions+=1):c.hide()}this.findAndSelectCurrent();this.hasVisible()||(this.noMatchOption.show(),this.hasCurrent()&&this.getCurrentItem().unselect(this.currenStyleName),this.currentIndex=-1)};
Webr.component.DataList.prototype.findAndSelectCurrent=function(){if(!this.config.hideNotMatched||!this.hasCurrent()||!this.getCurrentItem().visible){var a=this.hasCurrent()?this.getCurrentItem().match:!1;if(!a&&this.hasVisible()){-1==this.currentIndex?this.currentIndex=0:this.options[this.currentIndex].unselect(this.currenStyleName);for(var b=1;b<this.options.length;++b){var c=(this.currentIndex+b)%this.options.length;if(this.options[c].visible&&this.options[c].match){a=!0;this.currentIndex=c;break}}a?
this.options[this.currentIndex].select(this.currenStyleName):this.currentIndex=-1}}};Webr.component.DataList.prototype.narrow=function(){};Webr.component.DataList.prototype.forEach=function(a){for(var b=0;b<this.options.length;++b)a(this.options[b]);this.noMatchOption&&a(this.noMatchOption)};Webr.component.DataList.prototype.mouseOver=function(a){this.hasCurrent()&&this.getCurrentItem().unselect(this.currenStyleName);this.currentIndex=a;this.getCurrentItem().select(this.currenStyleName)};
Webr.component.DataList.prototype.registerClickHandler=function(a){for(var b=this.options.length,c=0;c<b;++c)this.options[c].registerClickHandler(a)};Webr.component.DataList.prototype.registerCheckHandler=function(a){for(var b=this.options.length,c=0;c<b;++c)this.options[c].registerCheckHandler(a)};Webr.component.DataList.prototype.registerMouseOver=function(a){var b=this;this.options[a].getElement().mouseover(function(){b.mouseOver(a)})};
Webr.component.RemoteDataList=function(a,b){Webr.component.RemoteDataList.superclass.constructor.call(this,b);this.comboBase=a};F=new Function;F.prototype=Webr.component.DataList.prototype;Webr.component.RemoteDataList.prototype=new F;Webr.component.RemoteDataList.prototype.constructor=Webr.component.RemoteDataList;Webr.component.RemoteDataList.superclass=Webr.component.DataList.prototype;Webr.component.RemoteDataList.prototype.narrow=function(a){this.comboBase.reload(a.toLowerCase())};
Webr.component.RemoteDataList.prototype.update=function(a,b,c){this.noMatchOption.hide();Webr.component.RemoteDataList.superclass.update.call(this,a,b,c);this.hasCurrent()||(""==this.comboBase.inputElement.value||this.comboBase.jQinputElement.hasClass("empty")?this.selectFirst():this.selectFirstNotEmpty())};Webr.component.RemoteDataList.prototype.selectFirstNotEmpty=function(){0<this.visibleOptions&&(this.currentIndex=0,this.options[1]&&this.options[0].option.empty&&(this.currentIndex=1),this.options[this.currentIndex].select(this.currenStyleName))};
Webr.component.RemoteDataList.prototype.selectFirst=function(){this.options[0]&&(this.currentIndex=0,this.options[this.currentIndex].select(this.currenStyleName))};Webr.component.MemoryDataList=function(a){Webr.component.MemoryDataList.superclass.constructor.call(this,a)};F=new Function;F.prototype=Webr.component.DataList.prototype;Webr.component.MemoryDataList.prototype=new F;Webr.component.MemoryDataList.prototype.constructor=Webr.component.MemoryDataList;
Webr.component.MemoryDataList.superclass=Webr.component.DataList.prototype;Webr.component.MemoryDataList.prototype.narrow=function(a){this.resize(a.toLowerCase());this.hasCurrent()&&this.getCurrentItem().scroll()};Webr.component.DataListConfig=function(){this.currentSyleName="active";this.hideNotMatched=this.circle=!0};Webr.component.DataListItem=function(a){this.visible=!0;this.match=!1;this.el=null;this.option=a;this.createElement()};Webr.component.DataListItem.prototype.createElement=function(){};
Webr.component.DataListItem.prototype.select=function(a){this.el.addClass(a)};Webr.component.DataListItem.prototype.unselect=function(a){this.el.removeClass(a)};Webr.component.DataListItem.prototype.scroll=function(){};Webr.component.DataListItem.prototype.show=function(){this.visible=!0;this.el.show()};Webr.component.DataListItem.prototype.hide=function(){this.visible=!1;this.el.hide()};Webr.component.DataListItem.prototype.getElement=function(){return this.el};
Webr.component.DataListItem.prototype.getTextElement=function(){return this.el};Webr.component.DataListItem.prototype.filter=function(a,b){var c=this.option,d=c.text.toLowerCase().indexOf(a),e=0==a.length||-1<d;$(document.createTextNode(c.text));c=0==a.length||-1==d?{nm:!0}:{pre:c.text.substring(0,d),m:c.text.substring(d,d+a.length),suf:c.text.substring(d+a.length)};this.match=e;this.getTextElement().html(b(this,c));return this};Webr.component.DataListItem.prototype.check=function(){};
Webr.component.DataListItem.prototype.registerClickHandler=function(){};Webr.component.DataListItem.prototype.registerCheckHandler=function(){};
Webr.component.DataListItem.defaultItemRenderer=function(a,b){var c=document.createElement("span"),d=a.option;d.h?c.innerHTML=d.text:b.nm?c.appendChild(document.createTextNode(d.text)):(c.appendChild(document.createTextNode(b.pre)),d=document.createElement("span"),d.className="match",d.appendChild(document.createTextNode(b.m)),c.appendChild(d),c.appendChild(document.createTextNode(b.suf)));return c.innerHTML};Webr.component.MatchData=function(){};Webr.component.SelectionListener=function(){Webr.component.SelectionListener.superclass.constructor.call(this)};
F=new Function;F.prototype=Webr.component.ComponentListener.prototype;Webr.component.SelectionListener.prototype=new F;Webr.component.SelectionListener.prototype.constructor=Webr.component.SelectionListener;Webr.component.SelectionListener.superclass=Webr.component.ComponentListener.prototype;Webr.component.SelectionListener.prototype.selectionChanged=function(){};

Webr.component.ComboComponentBase=function(a,b){Webr.component.ComboComponentBase.superclass.constructor.call(this);this.mainElement=this.jQinputElement=this.inputElement=null;this.onInitValueChanged=this.inited=this.local=!1;this.current_state=null;this.renderer=b;var c=b.getInputElement().get(0);cr.applyExtension(c);this.inputElement=c;this.jQinputElement=$(c);this.mainElement=$(a);this.mainElement.data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE,this);this.componentName=a.id.substring(3);
this.registerTemplateRefreshAndHihlighter();this.local=this.mainElement.attr("local");Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITIAL);this.current_state=Webr.component.ComboComponentBase.state_INITIAL};var F=new Function;F.prototype=Webr.component.Component.prototype;Webr.component.ComboComponentBase.prototype=new F;Webr.component.ComboComponentBase.prototype.constructor=Webr.component.ComboComponentBase;
Webr.component.ComboComponentBase.superclass=Webr.component.Component.prototype;
Webr.component.ComboComponentBase.prototype.init=function(){if(!this.inited){this.jQinputElement.unbind("focus");this.inputElement.attachWatcher(!1);this.inputElement.setWatcherDelay(0);var a=this;this.jQinputElement.bind("valuechange",function(){a.valueChange()});this.jQinputElement.focus(function(){a.focus();a.jQinputElement.select()});this.jQinputElement.click(function(){a.jQinputElement.select();a.showRequested();return!1});this.jQinputElement.blur(function(){a.inputBlur()});Webr.util.Util.addKeyHandler(this.jQinputElement,
function(b){return a.handleKeys(b)});this.mouseDownFunction=function(b){return a.mdown(b)};this.keyDownFunction=function(b){b.isKey(Webr.util.Key.TAB)&&a.ktab(b);b.isShift(Webr.util.Key.TAB)&&a.blur()};this.inited=!0}};
Webr.component.ComboComponentBase.prototype.registerTemplateRefreshAndHihlighter=function(){var a=this;this.refreshListener={beforeRefresh:function(b){0==a.componentName.indexOf(b)&&a.finalize()}};Webr.event.RefreshCommandProcessor.addListener(this.refreshListener);this.inputElement.unHighlight();this.inputElement.createHighlighter=function(b){return a.errorHighlighter=a.createHighlighter(b)}};
Webr.component.ComboComponentBase.prototype.createHighlighter=function(a){return new Webr.component.BaseComboboxHighlighter(this,a)};Webr.component.ComboComponentBase.prototype.finalize=function(){this.errorHighlighter&&(this.errorHighlighter.destroy(),this.errorHighlighter=null);this.beforeDestroy();this.renderer.destroy();Webr.event.RefreshCommandProcessor.removeListener(this.refreshListener);this.refreshListener=null;delete this.refreshListener};
Webr.component.ComboComponentBase.prototype.handleBlur=function(){var a=$(Webr.util.Util.isIE?document.body:document);a.mousedown(this.mouseDownFunction);Webr.util.Util.addKeyHandler(a,this.keyDownFunction)};Webr.component.ComboComponentBase.prototype.unhandleBlur=function(){var a=$(Webr.util.Util.isIE?document.body:document);a.unbind("mousedown",this.mouseDownFunction);Webr.util.Util.removeKeyHandler(a,this.keyDownFunction)};Webr.component.ComboComponentBase.prototype.highlight=function(a){this.inputElement.highlight(a)};
Webr.component.ComboComponentBase.prototype.setFocusNoEvents=function(){this.inputElement.focus()};Webr.component.ComboComponentBase.prototype.handleKeys=function(a){a.isKey(Webr.util.Key.ENTER)&&this.kenter(a);a.isKey(Webr.util.Key.ESC)&&this.kesc(a);return a.isKey(Webr.util.Key.DOWN)?(this.kdown(),!1):a.isKey(Webr.util.Key.UP)?(this.kup(),!1):a.isKey(Webr.util.Key.PAGEDOWN)?(this.dataList.select_last(),!1):a.isKey(Webr.util.Key.PAGEUP)?(this.dataList.select_first(),!1):this.fireKeyDown(a)};
Webr.component.ComboComponentBase.prototype.loadRequired=function(){};Webr.component.ComboComponentBase.prototype.makeVisible=function(){};Webr.component.ComboComponentBase.prototype.getCurentOption=function(){};Webr.component.ComboComponentBase.prototype.makeHidden=function(){};Webr.component.ComboComponentBase.prototype.sync=function(){};Webr.component.ComboComponentBase.prototype.setSearchContext=function(){};Webr.component.ComboComponentBase.prototype.update=function(){};
Webr.component.ComboComponentBase.prototype.submit=function(){};Webr.component.ComboComponentBase.prototype.callLoading=function(){};Webr.component.ComboComponentBase.prototype.renderList=function(){};Webr.component.ComboComponentBase.prototype.createListWrapper=function(){};Webr.component.ComboComponentBase.prototype.showLoading=function(){this.renderer.showLoading(500)};Webr.component.ComboComponentBase.prototype.hideLoading=function(){this.renderer.hideLoading()};
Webr.component.ComboComponentBase.prototype.showRequested=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"showRequested",arguments)};Webr.component.ComboComponentBase.prototype.focus=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"focus",arguments)};Webr.component.ComboComponentBase.prototype.blur=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"blur",arguments)};
Webr.component.ComboComponentBase.prototype.toggle=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"toggle",arguments)};Webr.component.ComboComponentBase.prototype.inputBlur=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"inputBlur",arguments)};Webr.component.ComboComponentBase.prototype.valueChange=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"valueChange",arguments)};
Webr.component.ComboComponentBase.prototype.loaded=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"loaded",arguments)};Webr.component.ComboComponentBase.prototype.reload=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"reload",arguments)};Webr.component.ComboComponentBase.prototype.mdown=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mdown",arguments)};
Webr.component.ComboComponentBase.prototype.keydown=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"keydown",arguments)};Webr.component.ComboComponentBase.prototype.kdown=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"kdown",arguments)};Webr.component.ComboComponentBase.prototype.kup=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"kup",arguments)};
Webr.component.ComboComponentBase.prototype.kesc=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"kesc",arguments)};Webr.component.ComboComponentBase.prototype.kenter=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"kenter",arguments)};Webr.component.ComboComponentBase.prototype.ktab=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"ktab",arguments)};
Webr.component.ComboComponentBase.prototype.drop=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"drop",arguments)};Webr.component.ComboComponentBase.prototype.mOptionClicked=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mOptionClicked",arguments)};Webr.component.ComboComponentBase.prototype.applyButtonClicked=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"applyButtonClicked",arguments)};
Webr.component.ComboComponentBase.prototype.beforeDestroy=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"beforeDestroy",arguments)};
Webr.component.ComboComponentBase.state_INITIAL={name:"INITIAL",onenter:function(){this.init()},focus:function(){this.inputElement.watcher.focus();return Webr.component.ComboComponentBase.state_NOT_INITED_FOCUSED},showRequested:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_LOADING);return Webr.component.ComboComponentBase.state_INITED_LOADING},toggle:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_LOADING);
return Webr.component.ComboComponentBase.state_INITED_LOADING}};
Webr.component.ComboComponentBase.state_NOT_INITED_FOCUSED={name:"NOT_INITED_FOCUSED",showRequested:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_LOADING);return Webr.component.ComboComponentBase.state_INITED_LOADING},inputBlur:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITIAL);return Webr.component.ComboComponentBase.state_INITIAL},kdown:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,
Webr.component.ComboComponentBase.state_INITED_LOADING);return Webr.component.ComboComponentBase.state_INITED_LOADING},kup:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_LOADING);return Webr.component.ComboComponentBase.state_INITED_LOADING},valueChange:function(){this.onInitValueChanged=!0;Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_LOADING);return Webr.component.ComboComponentBase.state_INITED_LOADING},
toggle:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_LOADING);return Webr.component.ComboComponentBase.state_INITED_LOADING}};Webr.component.ComboComponentBase.state_INITED={name:"INITED"};
Webr.component.ComboComponentBase.state_INITED_LOADING={name:"INITED_LOADING",parentState:Webr.component.ComboComponentBase.state_INITED,onenter:function(){this.showLoading(this.jQinputElement);this.callLoading()},onexit:function(){this.hideLoading()},beforeDestroy:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_LOADING);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITIAL);return Webr.component.ComboComponentBase.state_INITIAL},
inputBlur:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_LOADING);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITIAL);return Webr.component.ComboComponentBase.state_INITIAL},toggle:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_LOADING);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITIAL);
return Webr.component.ComboComponentBase.state_INITIAL},valueChange:function(){this.onInitValueChanged=!0;this.callLoading()},loaded:function(){this.fire(function(a){a.updated()});this.onInitValueChanged&&(this.setSearchContext(this.inputElement.value),this.onInitValueChanged=!1);Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_LOADING);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_SHOWN);
return Webr.component.ComboComponentBase.state_INITED_SHOWN}};
Webr.component.ComboComponentBase.state_INITED_HIDDEN={name:"INITED_HIDDEN",parentState:Webr.component.ComboComponentBase.state_INITED,focus:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_FOCUSED);return Webr.component.ComboComponentBase.state_INITED_FOCUSED},showRequested:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_SHOWN);return Webr.component.ComboComponentBase.state_INITED_SHOWN},
drop:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITIAL);return Webr.component.ComboComponentBase.state_INITIAL},toggle:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_SHOWN);return Webr.component.ComboComponentBase.state_INITED_SHOWN}};
Webr.component.ComboComponentBase.state_INITED_FOCUSED={name:"INITED_FOCUSED",parentState:Webr.component.ComboComponentBase.state_INITED,onenter:function(){this.fire(function(a){a.focus()})},showRequested:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_SHOWN);return Webr.component.ComboComponentBase.state_INITED_SHOWN},kdown:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_SHOWN);
return Webr.component.ComboComponentBase.state_INITED_SHOWN},kup:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_SHOWN);return Webr.component.ComboComponentBase.state_INITED_SHOWN},reload:function(a){this.callLoading(a)},valueChange:function(){this.setSearchContext(this.inputElement.value);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_SHOWN);return Webr.component.ComboComponentBase.state_INITED_SHOWN},
inputBlur:function(){return Webr.component.ComboComponentBase.state_INITED_HIDDEN},toggle:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_SHOWN);return Webr.component.ComboComponentBase.state_INITED_SHOWN}};
Webr.component.ComboComponentBase.state_INITED_SHOWN={name:"INITED_SHOWN",parentState:Webr.component.ComboComponentBase.state_INITED,onenter:function(){this.handleBlur();this.makeVisible();this.fire(function(a){a.show()})},onexit:function(){this.fire(function(a){a.hide()});this.unhandleBlur();this.makeHidden();this.sync()},mdown:function(a){this.renderer.isAncestorOf(a.target)?this.setFocusNoEvents():this.blur()},valueChange:function(){this.setSearchContext(this.inputElement.value)},kenter:function(a){return!this.loadRequired()?
(this.submit(this.dataList.getCurrentOption()),a.preventDefault(),a.stopImmediatePropagation(),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_FOCUSED),Webr.component.ComboComponentBase.state_INITED_FOCUSED):this.loadRequired()?(this.submit(this.dataList.getCurrentOption()),a.preventDefault(),a.stopImmediatePropagation(),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,
Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.component.ComboComponentBase.state_NOT_INITED_FOCUSED):!1},ktab:function(){return!this.loadRequired()?(this.submit(this.dataList.getCurrentOption()),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.component.ComboComponentBase.state_INITED_HIDDEN):this.loadRequired()?(this.submit(this.dataList.getCurrentOption()),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),
Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITIAL),Webr.component.ComboComponentBase.state_INITIAL):!1},kdown:function(){this.dataList.select_next()},kup:function(){this.dataList.select_prev()},kesc:function(a){return!this.loadRequired()?(a.preventDefault(),a.stopImmediatePropagation(),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,
Webr.component.ComboComponentBase.state_INITED_FOCUSED),Webr.component.ComboComponentBase.state_INITED_FOCUSED):this.loadRequired()?(a.preventDefault(),a.stopImmediatePropagation(),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.component.ComboComponentBase.state_NOT_INITED_FOCUSED):!1},loaded:function(){this.setFocusNoEvents()},reload:function(a){this.callLoading(a)},beforeDestroy:function(){return!this.loadRequired()?(Webr.stateMachine.stateMachineRuntime.handleOnExit(this,
Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_FOCUSED),Webr.component.ComboComponentBase.state_INITED_FOCUSED):this.loadRequired()?(Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.component.ComboComponentBase.state_NOT_INITED_FOCUSED):!1},blur:function(){return!this.loadRequired()?(this.fire(function(a){a.blur()}),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,
Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.component.ComboComponentBase.state_INITED_HIDDEN):this.loadRequired()?(this.fire(function(a){a.blur()}),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITIAL),Webr.component.ComboComponentBase.state_INITIAL):!1},toggle:function(){return!this.loadRequired()?(Webr.stateMachine.stateMachineRuntime.handleOnExit(this,
Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_FOCUSED),Webr.component.ComboComponentBase.state_INITED_FOCUSED):this.loadRequired()?(Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.component.ComboComponentBase.state_NOT_INITED_FOCUSED):!1},mOptionClicked:function(a){return!this.loadRequired()?(this.submit(a),this.setFocusNoEvents(),
Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_FOCUSED),Webr.component.ComboComponentBase.state_INITED_FOCUSED):this.loadRequired()?(this.submit(a),this.setFocusNoEvents(),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.component.ComboComponentBase.state_NOT_INITED_FOCUSED):
!1},applyButtonClicked:function(){return!this.loadRequired()?(this.submit(null),this.setFocusNoEvents(),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBase.state_INITED_FOCUSED),Webr.component.ComboComponentBase.state_INITED_FOCUSED):this.loadRequired()?(this.submit(null),this.setFocusNoEvents(),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,
Webr.component.ComboComponentBase.state_INITED_SHOWN),Webr.component.ComboComponentBase.state_NOT_INITED_FOCUSED):!1}};Webr.component.ComboComponentBase.findRoot=function(a){return $(a).closest("div.jt-dialog").get(0)||document.body};
Webr.component.ComboComponentBase.safeHighlight=function(a,b){var c;c=a.finalize?a.jQinputElement:$(a).find("input").focus();if((c=c.get(0))&&c.highlight)c.highlight(b);else{c=$(a);var e=c.prev().get(0),d=e.highlighter;d&&d.destroy();d=new Webr.component.ElementHighlighter(e,b);d.create();c.addRefreshListener(function(){d&&d.destroy()})}};Webr.component.ComboComponentListener=function(){Webr.component.ComboComponentListener.superclass.constructor.call(this)};F=new Function;F.prototype=Webr.component.ComponentListener.prototype;
Webr.component.ComboComponentListener.prototype=new F;Webr.component.ComboComponentListener.prototype.constructor=Webr.component.ComboComponentListener;Webr.component.ComboComponentListener.superclass=Webr.component.ComponentListener.prototype;Webr.component.ComboComponentListener.prototype.show=function(){};Webr.component.ComboComponentListener.prototype.hide=function(){};Webr.component.ComboComponentListener.prototype.blur=function(){};Webr.component.ComboComponentListener.prototype.focus=function(){};
Webr.component.ComboComponentListener.prototype.updated=function(){};Webr.component.ComboComponentListener.prototype.submitted=function(){};

Webr.component.ComboComponentBaseBind=function(a,b){Webr.component.ComboComponentBaseBind.superclass.constructor.call(this);this.shown=!1;this.current_state=null;this.comboComponent=a;this.bindedToElement=b;this.jQbindedElement=$(b);var c=this;this.comboComponent.addListener(this);this.jQbindedElement.click(function(a){if(!(a.targetIs(["A","IMG"])&&a.target!=c.bindedToElement))return c.toggle(),!1});this.jQbindedElement.mousedown(function(a){c.jQbindedElement.ancestorOf(a.target,!0)&&c.comboComponent.unhandleBlur()});
this.overrideBaseFunctions();this.current_state=Webr.component.ComboComponentBaseBind.state_HIDDN};var F=new Function;F.prototype=Webr.component.ComboComponentListener.prototype;Webr.component.ComboComponentBaseBind.prototype=new F;Webr.component.ComboComponentBaseBind.prototype.constructor=Webr.component.ComboComponentBaseBind;Webr.component.ComboComponentBaseBind.superclass=Webr.component.ComboComponentListener.prototype;Webr.component.ComboComponentBaseBind.prototype.makeVisible=function(){};
Webr.component.ComboComponentBaseBind.prototype.makeHidden=function(){};Webr.component.ComboComponentBaseBind.prototype.submitted=function(){};Webr.component.ComboComponentBaseBind.prototype.focusBindedElement=function(){var a=this;window.setTimeout(function(){a.jQbindedElement.focus()},1)};Webr.component.ComboComponentBaseBind.prototype.overrideBaseFunctions=function(){var a=this;this.comboComponent.createHighlighter=function(b){return new Webr.component.BindedComboBoxHighlighter(a,b)}};
Webr.component.ComboComponentBaseBind.prototype.show=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"show",arguments)};Webr.component.ComboComponentBaseBind.prototype.toggle=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"toggle",arguments)};Webr.component.ComboComponentBaseBind.prototype.hide=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"hide",arguments)};
Webr.component.ComboComponentBaseBind.state_HIDDN={name:"HIDDN",toggle:function(){this.comboComponent.showRequested()},show:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ComboComponentBaseBind.state_SHWN);return Webr.component.ComboComponentBaseBind.state_SHWN}};
Webr.component.ComboComponentBaseBind.state_SHWN={name:"SHWN",onenter:function(){this.shown=!0;this.makeVisible()},onexit:function(){this.shown=!1;this.makeHidden()},hide:function(){this.comboComponent.inputElement.watcher.blur();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ComboComponentBaseBind.state_SHWN);return Webr.component.ComboComponentBaseBind.state_HIDDN},toggle:function(){this.comboComponent.blur()}};

Webr.component.ComboBoxComponentBind=function(a,b){var c=new Webr.component.BindedComboRenderer(b,a,Webr.component.ComboComponentBase.findRoot(a));Webr.component.ComboBoxComponentBind.superclass.constructor.call(this,new Webr.component.ComboBoxComponent(a,c),b)};var F=new Function;F.prototype=Webr.component.ComboComponentBaseBind.prototype;Webr.component.ComboBoxComponentBind.prototype=new F;Webr.component.ComboBoxComponentBind.prototype.constructor=Webr.component.ComboBoxComponentBind;
Webr.component.ComboBoxComponentBind.superclass=Webr.component.ComboComponentBaseBind.prototype;Webr.component.ComboBoxComponentBind.prototype.makeHidden=function(){this.comboComponent.inputElement.setValueNoEvents("");this.focusBindedElement()};Webr.component.ComboBoxComponentBind.prototype.makeVisible=function(){this.comboComponent.setFocusNoEvents()};
Webr.component.ComboBoxComponentBind.prototype.submitted=function(a){if(a){if(this.comboComponent.defaultOption){this.jQbindedElement.removeClass(this.comboComponent.defaultOption.styleClass||"");var a=this.jQbindedElement.get(0),b=this.replaceWithCurrent(a.innerHTML);a.innerHTML=b;b=this.replaceWithCurrent(a.title);a.title=b;this.comboComponent.defaultOption=this.comboComponent.dataList.getCurrentOption()}this.jQbindedElement.addClass(this.comboComponent.dataList.getCurrentOption().styleClass||"")}};
Webr.component.ComboBoxComponentBind.prototype.replaceWithCurrent=function(a){return a.replace(this.comboComponent.defaultOption.text,this.comboComponent.dataList.getCurrentOption().text)};

Webr.HeartBeat=function(){};Webr.HeartBeat.init=function(){return window.setInterval(function(){Webr.Event.post({collectFormElements:!1,eventName:"_heart_beat",handlerUrl:Webr.Event.handlerUrl,hideLoadingPopup:!0,preventDoubleSubmit:!0,timeout:3E5})},4E4)};

cr.setTemplateBind("WatchFoldersSideBar",function(a){cr.ach(a,"watchFolderSideBarTitle","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_toggle",{},{collectFormElements:!1})});cr.ach(a,"showAll","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_toggleShowAll",{},{collectFormElements:!1})});cr.ach(a,"createTag","click",function(){return!1})});

Webr.util.Util=function(){};Webr.util.Util.AGENT=navigator.userAgent.toLowerCase();Webr.util.Util.isWindows=-1!=Webr.util.Util.AGENT.indexOf("windows")||-1!=Webr.util.Util.AGENT.indexOf("win32");Webr.util.Util.isMac=-1!=Webr.util.Util.AGENT.indexOf("macintosh")||-1!=Webr.util.Util.AGENT.indexOf("mac os x");Webr.util.Util.isAir=-1!=Webr.util.Util.AGENT.indexOf("adobeair");Webr.util.Util.isLinux=-1!=Webr.util.Util.AGENT.indexOf("linux");Webr.util.Util.isWebkit=-1!=Webr.util.Util.AGENT.indexOf("webkit");
Webr.util.Util.isGecko=!Webr.util.Util.isWebkit&&(-1!=Webr.util.Util.AGENT.indexOf("gecko")||-1!=Webr.util.Util.AGENT.indexOf("goanna"));Webr.util.Util.isIE=-1!=Webr.util.Util.AGENT.indexOf("msie")||/trident.*rv:*/.test(Webr.util.Util.AGENT);Webr.util.Util.isChrome=-1!=Webr.util.Util.AGENT.indexOf("chrome");Webr.util.Util.isSafari=!Webr.util.Util.isChrome&&-1!=Webr.util.Util.AGENT.indexOf("safari");Webr.util.Util.isOpera=-1!=Webr.util.Util.AGENT.indexOf("opera");Webr.util.Util.isMobile=/.*(android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino).*/.test(Webr.util.Util.AGENT);
Webr.util.Util.isSearchBot=/.*(googlebot|yandexbot|bingbot|yahoo! slurp|msnbot|slackbot-linkexpanding|facebookexternalhit|twitterbot).*/.test(Webr.util.Util.AGENT);Webr.util.Util.browserVersion=parseFloat((Webr.util.Util.AGENT.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1]);Webr.util.Util.handlers={};Webr.util.Util.isInput=function(a){return"INPUT"==a.tagName||"TEXTAREA"==a.tagName};Webr.util.Util.targetIsInput=function(a){return Webr.util.Util.isInput(a.target)};
Webr.util.Util.targetIs=function(a,b){for(var c=0;c<b.length;c+=1)if(a.target.tagName==b[c])return!0;return!1};Webr.util.Util.addKeyHandler=function(a,b){Webr.util.Util.handlers[a]=b;Webr.util.Util.isIE||Webr.util.Util.isWebkit||Webr.util.Util.isOpera?$(a).keydown(b):$(a).keypress(b)};Webr.util.Util.removeKeyHandler=function(a,b){delete Webr.util.Util.handlers[a];Webr.util.Util.isIE||Webr.util.Util.isWebkit||Webr.util.Util.isOpera?$(a).unbind("keydown",b):$(a).unbind("keypress",b)};
Webr.util.Util.stopEvent=function(){return!1};Webr.util.Util.vpWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth};Webr.util.Util.vpHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight};Webr.util.Util.getSelection=function(){var a;window.getSelection?a=""+window.getSelection():document.selection&&(a=document.selection.createRange().text);return a};
Webr.util.Util.isKnownBrowser=function(){return Webr.util.Util.isGecko||Webr.util.Util.isWebkit||Webr.util.Util.isIE||Webr.util.Util.isOpera};Webr.util.Util.isAgent=function(a){return-1!=Webr.util.Util.AGENT.toLowerCase().indexOf(a)};Webr.util.Util.checkBrowser=function(a){var b=!0;if(a)for(var b=!1,c=0;c<a.length;++c)Webr.util.Util.isAgent(a[c])&&(b=!0);return b};Webr.util.Util.checkOS=function(a){var b=!0;if(a)for(var b=!1,c=0;c<a.length;++c)Webr.util.Util.isAgent(a[c])&&(b=!0);return b};
Webr.util.Util.getKeyStroke=function(a){for(var b=0;b<a.length;++b)if(Webr.util.Util.checkBrowser(a[b].browser)&&Webr.util.Util.checkOS(a[b].os))return a[b].keyStroke;return null};

charisma.smartui.Pager=function(a,c){this.first=a.firstPageHref?$(a.firstPageHref):null;this.prev=a.prevPageHref?$(a.prevPageHref):null;this.next=a.nextPageHref?$(a.nextPageHref):null;this.last=a.lastPageHref?$(a.lastPageHref):null;if(!c){var b=this;$(document).keydown(function(a){if(!a.targetIsInput()){if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.PrevPage)&&b.prev)return b.prev.click(),!1;if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.NextPage)&&b.next)return b.next.click(),!1;Webr.util.Key.isApplicable(a,
SmartUIShortCuts.FirstPage)&&b.first.click();Webr.util.Key.isApplicable(a,SmartUIShortCuts.LastPage)&&b.last&&b.last.click()}return!0})}};charisma.smartui.PagerConfig=function(){};

cr.setTemplateBind("MultiUserSelectorEditor",function(a){cr.ash(a,"multiSelector","change",null);cr.ash(a,"multiSelector","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

cr.setTemplateBind("EditStateDialog",function(b){cr.ach(b,"editStateDlg","keydown",function(a){return a.handleEnterEsc(function(){cr.serverMethodCallInHandler(a,".methodCall_save",{})},function(){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})})});cr.ach(b,"closeEditStateDlg","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ach(b,"editStateDlg","historychanged",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ash(b,"cancelValue","click",
null);cr.ash(b,"saveValue","click",null);regdlg(b,"editStateDlg")});

charisma.Rest=function(){};
charisma.Rest.get=function(b,a,d,f){b=charisma.Rest.url(b);if(a){var c,h=!0,i=function(b,a){if(void 0!=a&&null!=a&&("string"!=typeof a||""!=a))h?(c="?",h=!1):c+="&",c+=encodeURIComponent(b)+"="+encodeURIComponent(a)},e;for(e in a){var g=a[e];jQuery.isArray(g)?jQuery.each(g,function(a,b){i(e,b)}):i(e,g)}c&&(b+=c)}Webr.Event.get({eventName:f,headers:{Accept:"application/json"},handlerUrl:b,hideLoadingPopup:!0,collectFileElements:!1,collectFormElements:!1,pollInterval:10,processRecentOnly:!0,listeners:[new charisma.RestRequestListener(d)]})};
charisma.Rest.post=function(b,a,d,f){Webr.Event.post({headers:{Accept:"application/json","Content-Type":"application/json"},handlerUrl:charisma.Rest.url(b),sync:!1,preventDoubleSubmit:!1,processRecentOnly:!1,collectFormElements:!0,body:a,listeners:d?[new charisma.RestRequestListener(d,f)]:null})};charisma.Rest.url=function(b){return Webr.Event.rootUrl+"rest/"+b};
charisma.RestRequestListener=function(b,a){charisma.RestRequestListener.superclass.constructor.call(this);this.onSuccessCallback=b;this.onFailureCallback=a};var F=new Function;F.prototype=Webr.event.ServerEventListener.prototype;charisma.RestRequestListener.prototype=new F;charisma.RestRequestListener.prototype.constructor=charisma.RestRequestListener;charisma.RestRequestListener.superclass=Webr.event.ServerEventListener.prototype;
charisma.RestRequestListener.prototype.onSuccess=function(b,a){var d=jQuery.parseJSON(a.responseText);this.onSuccessCallback(d)};charisma.RestRequestListener.prototype.onFailure=function(b,a){if(this.onFailureCallback)this.onFailureCallback(a)};charisma.RestRequestListener.prototype.onException=function(b,a){if(this.onFailureCallback)this.onFailureCallback(a)};

cr.setTemplateBind("EditOwnedFieldDialog",function(a){cr.ach(a,"editOwnedField","keydown",function(a){return a.handleEnterEsc(function(){cr.serverMethodCallInHandler(a,".methodCall_save",{})},function(){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})})});cr.ach(a,"closeEditDlg","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ach(a,"editOwnedField","historychanged",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ash(a,"save","click",
null);cr.ash(a,"cancel","click",null);cr.ash(a,"owner","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});regCC(a,"owner");regdlg(a,"editOwnedField")});

cr.setTemplateBind("FilterContent",function(d){cr.ach(d,"allCheckbox","click",function(a){cr.getTarget(a).disabled=!0;cr.getTarget(a).checked=!0;cr.serverMethodCallInHandler(a,".methodCall_checkAll",{__param__anchorId:cr.getTarget(a).id});jQuery.each(charisma.smartui.Filter.getFilter(cr.getTarget(a)).options,function(){this.checked=!1;$(this).parent().removeClass("selected")});$(cr.getTarget(a)).parent().parent().parent().children("a:first").removeClass("vert-item_highlight");charisma.smartui.Filter.swapLastChecked(null)});
cr.ach(d,"filterCheckbox","click",function(a){var b=charisma.smartui.Filter.swapLastChecked(cr.getTarget(a)),d=a.shiftKey&&b,e=cr.getTarget(a).checked,c=cr.findInHandler(a,".allCheckbox",[]),f=!1,b=d?charisma.smartui.Filter.getCheckboxRange(b,cr.getTarget(a)):$(cr.getTarget(a));e?b.parent().addClass("vert-item_highlight"):b.parent().removeClass("vert-item_highlight");b.attr("checked",e);c.checked?e&&(c.disabled=!1,c.checked=!1):e||(f=0==$(charisma.smartui.Filter.getFilter(cr.getTarget(a)).options).filter(function(){return this.checked}).length);
f?(c.disabled=!0,c.checked=!0,cr.serverMethodCallInHandler(a,".methodCall_checkAll",{__param__anchorId:cr.getTarget(a).id}),charisma.smartui.Filter.getGroupHeader(cr.getTarget(a)).removeClass("vert-item_highlight")):(c=b.map(function(a,b){return b.id}).get(),cr.serverMethodCallInHandler(a,".methodCall_checkFilterParam",{__param__filterParam:c,__param__checked:e,__param__anchorId:cr.getTarget(a).id}),charisma.smartui.Filter.getGroupHeader(cr.getTarget(a)).addClass("vert-item_highlight"))});cr.ash(d,
"showMoreFilters","click",null)});

Webr.component.MultiBoxComponentBind=function(a,b){var c=new Webr.component.BindedComboRenderer(b,a,Webr.component.ComboComponentBase.findRoot(a));Webr.component.MultiBoxComponentBind.superclass.constructor.call(this,new Webr.component.MultiBoxComponent(a,c),b)};var F=new Function;F.prototype=Webr.component.ComboComponentBaseBind.prototype;Webr.component.MultiBoxComponentBind.prototype=new F;Webr.component.MultiBoxComponentBind.prototype.constructor=Webr.component.MultiBoxComponentBind;
Webr.component.MultiBoxComponentBind.superclass=Webr.component.ComboComponentBaseBind.prototype;Webr.component.MultiBoxComponentBind.prototype.makeHidden=function(){this.focusBindedElement()};Webr.component.MultiBoxComponentBind.prototype.makeVisible=function(){this.comboComponent.setFocusNoEvents()};Webr.component.MultiBoxComponentBind.prototype.submitted=function(){};

Webr.stateMachine={};

var ringController;charisma.RingCommonController=function(a,b){this.config=a;this.callback=b;this.init();ringController=this;this.userInternalRest=(new Webr.rest.Client(Webr.Event.rootUrl,Ajax.ajaxSettings())).resource({p:["userInternal"]})};charisma.RingCommonController.prototype.setPart=function(a){this.part=a};charisma.RingCommonController.prototype.init=function(){this.callback();this.onLoad()};
charisma.RingCommonController.prototype.onLoad=function(){$(document).ready(function(){this.initShortcutDialog();this.initCreateButton();this.initKeyHandlers()}.bind(this))};charisma.RingCommonController.prototype.initKeyHandlers=function(){var a=this;$(document).keydown(function(b){if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.MyWatchFolder))return $(".yt-header__issues-toggler").click(),!1;if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.QuickHelp))return a.showShortcutsDialog(),!1})};
charisma.RingCommonController.prototype.initShortcutDialog=function(){$(document).on(charisma.RingCommonController.CLICK_RING,".yt-header__help-shortcuts",jQuery.proxy(this.showShortcutsDialog,this))};charisma.RingCommonController.prototype.showShortcutsDialog=function(){this.config.methods.showShorcuts&&this.config.methods.showShorcuts()};charisma.RingCommonController.prototype.initCreateButton=function(){$(document).on(charisma.RingCommonController.CLICK_RING,".yt-header__create-btn",function(a){a.preventDefault()})};
charisma.RingCommonController.prototype.initNewUiButton=function(){var a=this;$(".yt-header__new-ui").bind(charisma.RingCommonController.CLICK_RING,function(){a.userInternalRest.method("put",{p:["userInternal","profile",null]}).call({p:["userInternal","profile",a.part],x:{dataType:"json",async:!1}})})};charisma.RingCommonController.prototype.callback=function(){};charisma.RingCommonController.prototype.login=function(){var a=this.config.serviceId;try{localStorage.removeItem(a+"-token")}catch(b){}};
charisma.RingCommonController.CLICK_RING="click.ring";charisma.RingCommonController.CONTAINER=".container";
charisma.RingCommonController.initFooter=function(a,b){if(window.reactRender&&window.React&&window.Footer){var c=$(".footer-placeholder");c.addClass(!0===b?"footer-placeholder_left":"footer-placeholder_right");var d=function(){var a=$(".ring-footer-spent");a[0]&&($(".yt-mps-footer div:last li:first").append(a.html()),a.remove())};try{var e=window.React.createElement(window.Footer,a);window.reactRender(e,c[0],d)}catch(f){window.console.log("Footer is unavailable.")}}else window.console.log("React not found! Footer is unavailable.")};

charisma.smartui.RingController=function(a){charisma.smartui.RingController.superclass.constructor.call(this,a,this.callback);ringController=this;charisma.smartui.RingController.superclass.setPart.call(this,"issues")};var F=new Function;F.prototype=charisma.RingCommonController.prototype;charisma.smartui.RingController.prototype=new F;charisma.smartui.RingController.prototype.constructor=charisma.smartui.RingController;charisma.smartui.RingController.superclass=charisma.RingCommonController.prototype;
charisma.smartui.RingController.prototype.callback=function(){this.initIssuesToggle();this.initWhatsNewToggle();this.initCreateIssueButton();charisma.smartui.RingController.superclass.initNewUiButton.call(this)};
charisma.smartui.RingController.prototype.initIssuesToggle=function(){var a=this,b=$(".yt-header__issues-toggler");$(document).one(charisma.RingCommonController.CLICK_RING,".yt-header__issues-toggler",function(){(new Webr.component.ComboBoxComponentBind($(".yt-header__issues-combo").get(0),this)).toggle()});b.on(charisma.RingCommonController.CLICK_RING,function(){a.hideDropdown()})};
charisma.smartui.RingController.prototype.initWhatsNewToggle=function(){var a=this.config;$(document).on(charisma.RingCommonController.CLICK_RING,".yt-header__whats-new",function(b){b.preventDefault();a.methods.showNewFeatures&&a.methods.showNewFeatures(!$(this).hasClass("yt-header__whats-new_nav"))})};charisma.smartui.RingController.prototype.removeWhatsNewToggle=function(){$(".yt-header__whats-new").remove()};charisma.smartui.RingController.prototype.hideDropdown=function(){ring("dropdown","hide")()};
charisma.smartui.RingController.prototype.initCreateIssueButton=function(){var a=this;$(document).on("mouseup.ring",".yt-header__create-btn",function(b){2==b.which||(b.ctrlKey||b.metaKey)&&1==b.which?(b.preventDefault(),b.stopPropagation(),window.open("#newissue","_blank")):a.config.methods.newIssueClick();return!1})};
charisma.smartui.RingController.prototype.setCreateButtonVisible=function(a){a?(commonController&&commonController.editMode&&commonController.toggleEditMode(!1),$(".yt-header__create-issue-toggler, .yt-header__create-btn").hide()):$(".yt-header__create-issue-toggler, .yt-header__create-btn").show()};charisma.smartui.RingController.prototype.login=function(){charisma.smartui.RingController.superclass.login.call(this);this.config.methods.goToLoginScreen()};

cr.setTemplateBind("Sidebars",function(a){cr.ash(a,"updateCountsTicker","tick",{collectFormElements:!1,hideLoadingPopup:!0});regT(a,"updateCountsTicker")});

cr.setTemplateBind("IssueCheckbox",function(b){cr.ach(b,"issueSelectionCheckbox","click",function(a){$(cr.findInHandler(a,".issueSelectionCheckbox",[cr.getTarget(a).getAttribute("p0")])).next().toggleClass("jt-custom-checkbox-checked")})});

cr.setTemplateBind("MultiGroupSelectorEditor",function(a){cr.ash(a,"multiSelector","change",null);cr.ash(a,"multiSelector","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

cr.setTemplateBind("VerticalProperties",function(a){cr.ash(a,"issueProject","change",null);cr.ash(a,"issueProject","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

Webr.util.KeyMapping=function(){};Webr.util.KeyMapping.prototype.getKeyStroke=function(){};Webr.util.IKeyStroke=function(){this.shift=this.meta=this.alt=this.ctrl=!1};

var SuggestKeyStrokes={},SuggestKeyStrokes=function(){};SuggestKeyStrokes.PreviousItem=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:38}}];SuggestKeyStrokes.NextItem=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:40}}];SuggestKeyStrokes.Close=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:27}}];SuggestKeyStrokes.ImplicitComplete=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:9}}];SuggestKeyStrokes.ExplicitComplete=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:13}}];
SuggestKeyStrokes.SpaceComplete=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:32}}];

Webr.event.CommandProcessor=function(){};Webr.event.CommandProcessor.prototype.processCommand=function(){};Webr.event.CommandProcessor.commandProcessors=[];Webr.event.CommandProcessor.register=function(a){Webr.event.CommandProcessor.commandProcessors.push(a)};Webr.event.ProcessingContext=function(){this.scripts=[];this.refresh=0;this.errorMessagesCleared=!1};Webr.event.ProcessingContext.prototype.addScript=function(a){this.scripts.push(a)};
Webr.event.ProcessingContext.prototype.queue=function(){this.refresh+=1};Webr.event.ProcessingContext.prototype.release=function(){this.refresh-=1;if(0==this.refresh)for(var a=0;a<this.scripts.length;++a)jQuery.globalEval(this.scripts[a])};Webr.event.ExecuteCommandProcessor=function(){Webr.event.ExecuteCommandProcessor.superclass.constructor.call(this)};var F=new Function;F.prototype=Webr.event.CommandProcessor.prototype;Webr.event.ExecuteCommandProcessor.prototype=new F;
Webr.event.ExecuteCommandProcessor.prototype.constructor=Webr.event.ExecuteCommandProcessor;Webr.event.ExecuteCommandProcessor.superclass=Webr.event.CommandProcessor.prototype;Webr.event.ExecuteCommandProcessor.prototype.processCommand=function(a,c){var b=!1;"execute"==a.getAttribute("type")&&(b=!0,c.addScript(a.firstChild.nodeValue));return b};Webr.event.CommandProcessor.register(new Webr.event.ExecuteCommandProcessor);Webr.event.MessageCommandProcessor=function(){Webr.event.MessageCommandProcessor.superclass.constructor.call(this)};
F=new Function;F.prototype=Webr.event.CommandProcessor.prototype;Webr.event.MessageCommandProcessor.prototype=new F;Webr.event.MessageCommandProcessor.prototype.constructor=Webr.event.MessageCommandProcessor;Webr.event.MessageCommandProcessor.superclass=Webr.event.CommandProcessor.prototype;
Webr.event.MessageCommandProcessor.prototype.processCommand=function(a,c){var b=!1;if("message"==a.getAttribute("type")){if((b=a.getAttribute("clear"))&&"false"!=b&&!1==c.errorMessagesCleared)Webr.ErrorMessage.clearErrorMessages(),c.errorMessagesCleared=!0;for(var b=eval(a.firstChild.nodeValue),d=0;d<b.length;++d){var e=b[d];Webr.ErrorMessage.addMessage(e.message,e.severity,e.inputName,e.propertyName)}b=!0}return b};Webr.event.CommandProcessor.register(new Webr.event.MessageCommandProcessor);
Webr.event.RefreshCommandProcessor=function(){Webr.event.RefreshCommandProcessor.superclass.constructor.call(this)};F=new Function;F.prototype=Webr.event.CommandProcessor.prototype;Webr.event.RefreshCommandProcessor.prototype=new F;Webr.event.RefreshCommandProcessor.prototype.constructor=Webr.event.RefreshCommandProcessor;Webr.event.RefreshCommandProcessor.superclass=Webr.event.CommandProcessor.prototype;
Webr.event.RefreshCommandProcessor.prototype.processCommand=function(a,c){var b=!1;if("refresh"==a.getAttribute("type")){var b=!0,d=a.getAttribute("targetId"),e=a.getAttribute("target");if(null!=d&&""!=d){var f=document.getElementById(d);this.notifyListeners(function(a){a.beforeRefresh&&a.beforeRefresh(e,f);return!0});var g=$(a).text();Webr.event.RefreshCommandProcessor.setContent(f,g,c);f=document.getElementById(d);this.notifyListeners(function(a){a.afterRefresh&&a.afterRefresh(e,f);return!0})}else window.alert("Try to refresh not refreshable template ["+
e+"]"),Webr.Event.reload()}return b};Webr.event.RefreshCommandProcessor.prototype.notifyListeners=function(a){Webr.event.RefreshCommandProcessor.refreshListeners&&Webr.event.RefreshCommandProcessor.refreshListeners.forEach(a)};Webr.event.RefreshCommandProcessor.ID_GEN=0;Webr.event.RefreshCommandProcessor.setContent=function(a,c,b){return Webr.event.RefreshCommandProcessor.setContentToElement(a,c,b)};
Webr.event.RefreshCommandProcessor.setContentToElement=function(a,c,b){++Webr.event.RefreshCommandProcessor.ID_GEN;b&&b.queue();window.setTimeout(function(){Webr.event.RefreshCommandProcessor.executeScripts(c,function(){b&&b.release()})},20);time("setContentToElement");var d=c.replace(Webr.event.RefreshCommandProcessor.createScriptRegexp(),""),e=d.indexOf("<"),f=Math.min(d.indexOf(">",e),d.indexOf(" ",e)),g=d.substring(e+1,f),f=$(a);if(a.tagName.toLowerCase()==g.toLowerCase()){f.unbind();for(var e=
d.substring(d.indexOf(" ",e),d.indexOf(">")),g=RegExp('\\w+\\="[^"]*"',"ig"),h;h=g.exec(e);){h=h[0];var i=h.indexOf("=");f.attr(h.substring(0,i),h.substring(i+2,h.length-1))}d=d.substring(d.indexOf(">")+1,d.lastIndexOf("<"));try{a.innerHTML=d}catch(j){f.html(d)}}else f.replaceWith(d);timeEnd("setContentToElement");return f};Webr.event.RefreshCommandProcessor.createScriptRegexp=function(){return RegExp("(?:\\s*)(?:<script([^>]*)?>)((\\s|.)*?)(?:<\/script>)(?:\\s*)","ig")};
Webr.event.RefreshCommandProcessor.executeScripts=function(a,c,b){Webr.event.RefreshCommandProcessor._executeScripts(a,a.indexOf("<script"),c,b)};
Webr.event.RefreshCommandProcessor.loadCSS=function(a,c){var b;b=a.indexOf("<link");if(-1==b)c();else{var d;d=a.indexOf(">",b)+1;b=a.substring(b,d);a=a.substring(d);if(-1==b.indexOf('type="text/css"'))Webr.event.RefreshCommandProcessor.loadCSS(a,c);else if(d=/href=\"(.*)\"/.exec(b)){var e=d[1];window.setTimeout(function(){Webr.event.RefreshCommandProcessor._insertCSSLink(e);Webr.event.RefreshCommandProcessor.loadCSS(a,c)},1)}}};
Webr.event.RefreshCommandProcessor._insertCSSLink=function(a){var c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.media="all";c.href=a;for(var b=document.getElementsByTagName("head").item(0),d=b.getElementsByTagName("link"),e=!0,f=0;f<d.length;++f){var g=d.item(f);0<=g.href.indexOf(a)&&(e=!1,trace("Replacing existing CSS ["+a+"]"),b.replaceChild(c,g))}e&&(trace("Loading new CSS ["+a+"]"),b.appendChild(c))};
Webr.event.RefreshCommandProcessor._executeScripts=function(a,c,b,d){var e,f;if(-1==c)b();else if(e=c,c=a.indexOf(">",c)+1,f=a.indexOf("<\/script>",c),-1==f)b();else{if(!d&&(e=/src=\"(.*)\"/.exec(a.substring(e+7,c-1)))){e=e[1];jQuery.ajax({url:e,cache:!0,dataType:"script",success:function(){c=a.indexOf("<script",f+8);_execScripts(a,c,b,d)}});return}(e=a.substring(c,f))&&0<e.length&&eval(e);c=a.indexOf("<script",f+8);_execScripts(a,c,b,d)}};
Webr.event.RefreshCommandProcessor.addListener=function(a){null==Webr.event.RefreshCommandProcessor.refreshListeners&&(Webr.event.RefreshCommandProcessor.refreshListeners=new Webr.util.Set);Webr.event.RefreshCommandProcessor.refreshListeners.add(a)};Webr.event.RefreshCommandProcessor.removeListener=function(a){null!=Webr.event.RefreshCommandProcessor.refreshListeners&&Webr.event.RefreshCommandProcessor.refreshListeners.remove(a)};Webr.event.CommandProcessor.register(new Webr.event.RefreshCommandProcessor);
var _execScripts=Webr.event.RefreshCommandProcessor._executeScripts;

charisma.smartui.Toolbar=function(a,b,c,d){this.shown=!1;this.doc=$(document);this.win=$(window);this.toolbarCopy=!1;this.position={};this.current_state=null;this.container=$(a);this.parent=this.container.parent();(this.toolbarCopy=b)||this.setHeightToParentElement();this.verticalMargin=d||0;this.bindEvents();this.saveParentOffset();this.createShadow(c);this.current_state=charisma.smartui.Toolbar.state_PINNED};
charisma.smartui.Toolbar.prototype.isFarScroll=function(){return this.position.top-12-this.verticalMargin/6<this.doc.scrollTop()+this.verticalMargin};charisma.smartui.Toolbar.prototype.setHeightToParentElement=function(){this.parent.get(0)&&this.parent.css({"min-height":this.container.outerHeight()})};
charisma.smartui.Toolbar.prototype.saveParentOffset=function(){if(this.parent.get(0)){var a=this.parent.offset();this.position={top:a.top,left:a.left};this.saveOriginalDimentions();this.currentDimensions=[0,0]}};charisma.smartui.Toolbar.prototype.saveOriginalDimentions=function(){this.originalDimensions=[this.parent.width(),this.container.height()]};charisma.smartui.Toolbar.prototype.createShadow=function(a){this.shadow=a?Webr.component.Shadow.EMPTY_SHADOW:Webr.component.Shadow.getShadow(this.container)};
charisma.smartui.Toolbar.prototype.updateMenuPosition=function(){null!=Webr.component.Menu.OPEN_MENU&&Webr.component.Menu.OPEN_MENU.setItemsPosition()};charisma.smartui.Toolbar.prototype._show=function(){this.shown=!0;this.visualizeToolbarContent(!0);this._update();this.shadow.show();this.updateMenuPosition();this.triggerShowEvent()};charisma.smartui.Toolbar.prototype.triggerShowEvent=function(){this.container.trigger(charisma.smartui.Toolbar.EVENT_SHOW)};
charisma.smartui.Toolbar.prototype._hide=function(){this.shown=!1;this.shadow.hide();this.visualizeToolbarContent(!1);this._update(!0);this.updateMenuPosition();this.container.trigger(charisma.smartui.Toolbar.EVENT_HIDE)};
charisma.smartui.Toolbar.prototype.visualizeToolbarContent=function(a){this.toolbarCopy&&(this.toolbarCopyContent?a?this.toolbarCopyContent.show():this.toolbarCopyContent.hide():(this.toolbarCopyContent=$(document.createElement("div")).addClass("fsi-toolbar-copy").html(this.container.html()),this.parent.append(this.toolbarCopyContent)))};charisma.smartui.Toolbar.prototype._update=function(a){this.toggleCssClass(a);this.setTop();this.setWidth();this.calculateHeight()};
charisma.smartui.Toolbar.prototype.calculateHeight=function(){this.currentDimensions[1]=this.shown?this.container.outerHeight(!0):this.originalDimensions[1]};charisma.smartui.Toolbar.prototype.toggleCssClass=function(a){this.container[a?"removeClass":"addClass"](charisma.smartui.Toolbar.CSS_UNPINNED_CLASS)};charisma.smartui.Toolbar.prototype.setTop=function(){0<this.verticalMargin&&this.container.css("top",this.shown?this.verticalMargin:"")};
charisma.smartui.Toolbar.prototype.setWidth=function(a){this.container.css({width:a?a:this.shown?this.originalDimensions[0]:""})};charisma.smartui.Toolbar.prototype.updateWidth=function(){this.saveParentOffset();this.setWidth()};charisma.smartui.Toolbar.prototype.bindEvents=function(){var a=this;this.resizeHandler=function(){a.originalDimensions[0]=a.container.parent().width();a.shown&&a.setWidth(a.originalDimensions[0])};this.scrollHandler=function(){a.scroll()};this.win.resize(a.resizeHandler).scroll(a.scrollHandler)};
charisma.smartui.Toolbar.prototype.getDimension=function(){return[this.currentDimensions[0],-this.currentDimensions[1]]};charisma.smartui.Toolbar.prototype.scroll=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"scroll",arguments)};charisma.smartui.Toolbar.prototype.update=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"update",arguments)};charisma.smartui.Toolbar.CSS_UNPINNED_CLASS="toolbar-unpined";charisma.smartui.Toolbar.EVENT_SHOW="show";
charisma.smartui.Toolbar.EVENT_HIDE="hide";charisma.smartui.Toolbar.state_PINNED={name:"PINNED",onexit:function(){this.currentDimensions=this.originalDimensions.slice()},scroll:function(){return this.isFarScroll()?(Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.Toolbar.state_PINNED),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,charisma.smartui.Toolbar.state_UNPINNED),charisma.smartui.Toolbar.state_UNPINNED):!1},update:function(){this.saveParentOffset()}};
charisma.smartui.Toolbar.state_UNPINNED={name:"UNPINNED",onenter:function(){this._show()},onexit:function(){this._hide();this.currentDimensions=[0,0]},scroll:function(){return!this.isFarScroll()?(Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.Toolbar.state_UNPINNED),charisma.smartui.Toolbar.state_PINNED):!1},update:function(){this.saveParentOffset();this.setWidth()}};
charisma.smartui.Toolbar.destroy=function(a){a&&(a._hide(),a.container.removeClass(charisma.smartui.Toolbar.CSS_UNPINNED_CLASS),a.win.unbind("resize",a.resizeHandler).unbind("scroll",a.scrollHandler))};charisma.smartui.SummaryToolbar=function(a,b,c){charisma.smartui.SummaryToolbar.superclass.constructor.call(this,a,!1,!1,b||0);this.commandToolbar=c};var F=new Function;F.prototype=charisma.smartui.Toolbar.prototype;charisma.smartui.SummaryToolbar.prototype=new F;
charisma.smartui.SummaryToolbar.prototype.constructor=charisma.smartui.SummaryToolbar;charisma.smartui.SummaryToolbar.superclass=charisma.smartui.Toolbar.prototype;charisma.smartui.SummaryToolbar.prototype._show=function(){charisma.smartui.SummaryToolbar.superclass._show.call(this);this.commandToolbar.container.addClass("noShadow")};charisma.smartui.SummaryToolbar.prototype._hide=function(){charisma.smartui.SummaryToolbar.superclass._hide.call(this);this.commandToolbar.container.removeClass("noShadow")};
charisma.smartui.SidebarToolbar=function(a){charisma.smartui.SidebarToolbar.superclass.constructor.call(this,a,!1,!0);this.handleFieldsCombo();this.fields=$(a).children().first();this.voters=$(a).find(".fsi__sidebar__bottom");this.scroll();this.handleResizeAndToggle()};F=new Function;F.prototype=charisma.smartui.Toolbar.prototype;charisma.smartui.SidebarToolbar.prototype=new F;charisma.smartui.SidebarToolbar.prototype.constructor=charisma.smartui.SidebarToolbar;
charisma.smartui.SidebarToolbar.superclass=charisma.smartui.Toolbar.prototype;charisma.smartui.SidebarToolbar.prototype.handleResizeAndToggle=function(){if(this.voters[0]){var a,b=this;$(window).on("resize",function(){window.clearTimeout(a);a=window.setTimeout(function(){b.balance()},100)});this.container.on(charisma.smartui.SidebarToolbar.TOGGLE_SIDEBAR_LIST,function(){b.setVotersTop()});window.setTimeout(function(){b.shown||b.balance()},500)}};
charisma.smartui.SidebarToolbar.prototype.getMaxAvailableHeght=function(){return $(window).height()-this.container.offset().top+$(window).scrollTop()};charisma.smartui.SidebarToolbar.prototype.calculateBalancedHeight=function(){this.setVotersTopPosition(null);this.viewportHeight=this.getMaxAvailableHeght();this.votersHeight=this.voters.outerHeight();return this.viewportHeight<this.votersHeight+this.voters.position().top?this.viewportHeight-this.votersHeight:""};
charisma.smartui.SidebarToolbar.prototype.setVotersTop=function(){if(this.voters[0]){this.setVotersBalanceCssClass(!1);var a=this.calculateBalancedHeight();if(a)this.setVotersTopPosition(a);else{var b=this;window.setTimeout(function(){b.balance()},500)}this.setVotersBalanceCssClass("number"===typeof a)}};charisma.smartui.SidebarToolbar.prototype.setVotersBalanceCssClass=function(a){this.voters[!0===a?"addClass":"removeClass"]("fsi__sidebar__bottom_sticky")};
charisma.smartui.SidebarToolbar.prototype.setVotersTopPosition=function(a){a=a?Math.max(0,a):"";this.voters.css({top:a,"max-height":this.viewportHeight})};charisma.smartui.SidebarToolbar.prototype.reset=function(){this.fields.height("");this.setVotersTopPosition(null);this.setVotersBalanceCssClass(!1)};
charisma.smartui.SidebarToolbar.prototype.balance=function(){if(this.voters[0]){this.reset();var a=this.calculateBalancedHeight();a&&(this.fields.height(a),this.setVotersBalanceCssClass("number"===typeof a))}};charisma.smartui.SidebarToolbar.prototype.setHeightToParentElement=function(){};charisma.smartui.SidebarToolbar.prototype.isFarScroll=function(){var a=this.doc.scrollTop();return this.position.top-a/2<a};
charisma.smartui.SidebarToolbar.prototype.setWidth=function(){var a="",b="";if(this.shown){var c=$(".vertical-properties:visible");0<c.length&&(a=c.width(),b=c.offset().left)}this.container.css("left",b);charisma.smartui.SidebarToolbar.superclass.setWidth.call(this,a)};
charisma.smartui.SidebarToolbar.prototype.handleFieldsCombo=function(){var a=$(document),b=function(){jQuery.each(a.find(".combobox.bind:visible"),function(){var a=$(this).attr("_cn_");a&&$(document.getElementById(a)).parent().hasClass("fsi-property")&&(a=cr.findById(a))&&a.renderer&&a.renderer.reset()});jQuery.each(a.find(".cf-input-container:visible"),function(){var a=cr.findById($(this).children().attr("id"));a&&a.layouter&&a.kesc()})};this.container.bind(charisma.smartui.Toolbar.EVENT_SHOW,function(){a.bind("scroll",
b);b()}).bind(charisma.smartui.Toolbar.EVENT_HIDE,function(){a.unbind("scroll",b);b()})};charisma.smartui.SidebarToolbar.prototype.setTop=function(){var a=this,b="";window.setTimeout(function(){var c=$(".fsi-top-toolbar.toolbar-unpined");c[0]&&(b=$(".issues-nav-info")[0]?c.outerHeight():0);b?a.container.animate({top:b+"px"},200):a.container.css("top",b)},150)};charisma.smartui.SidebarToolbar.prototype._show=function(){charisma.smartui.SidebarToolbar.superclass._show.call(this);this.balance()};
charisma.smartui.SidebarToolbar.prototype._hide=function(){var a=this;charisma.smartui.SidebarToolbar.superclass._hide.call(this);window.setTimeout(function(){a.balance()},600)};charisma.smartui.SidebarToolbar.TOGGLE_SIDEBAR_LIST="toggleSidebarList";charisma.smartui.CreateIssueToolbar=function(a,b){this.jQselector=b;charisma.smartui.CreateIssueToolbar.superclass.constructor.call(this,a)};F=new Function;F.prototype=charisma.smartui.Toolbar.prototype;charisma.smartui.CreateIssueToolbar.prototype=new F;
charisma.smartui.CreateIssueToolbar.prototype.constructor=charisma.smartui.CreateIssueToolbar;charisma.smartui.CreateIssueToolbar.superclass=charisma.smartui.Toolbar.prototype;charisma.smartui.CreateIssueToolbar.prototype.setWidth=function(){var a=$(this.jQselector).width();this.container.css({width:a?a:this.shown?this.originalDimensions[0]:""})};

cr.setTemplateBind("IntegerEditor",function(b){cr.ach(b,"intValue","keydown",function(a){return a.handleEnterEsc(function(){if(cr.findInHandler(a,".intValue",[]).value.length){var b=parseInt(cr.findInHandler(a,".intValue",[]).value);isNaN(b)||2147483647<b||-2147483647>b?cr.findInHandler(a,".intValue",[]).highlight(l10n('Integer value expected!')):(cr.findInHandler(a,".intValue",[]).value=b,cr.findInHandler(a,".integerContentInlineEditor",[]).submit())}else cr.serverMethodCallInHandler(a,
".methodCall_setUndefinedValue",{})},function(){cr.findInHandler(a,".integerContentInlineEditor",[]).abort()})});cr.ach(b,"clearValue","click",function(){return!1});cr.ach(b,"integerContentInlineEditor","createeditor",function(a){$(cr.findInHandler(a,".intField",[])).addClass("cf-edit");$(cr.findInHandler(a,".intField",[])).parent().addClass("cf-visible")});cr.ach(b,"integerContentInlineEditor","abort",function(a){$(cr.findInHandler(a,".intField",[])).removeClass("cf-edit");$(cr.findInHandler(a,".intField",
[])).parent().removeClass("cf-visible")});cr.ach(b,"integerContentInlineEditor","submit",function(a){$(cr.findInHandler(a,".intField",[])).removeClass("cf-edit");$(cr.findInHandler(a,".intField",[])).parent().removeClass("cf-visible")});cr.ash(b,"clearValue","click",null);cr.ash(b,"integerContentInlineEditor","createeditor",{preventDoubleSubmit:!0});cr.ash(b,"integerContentInlineEditor","submit",{preventDoubleSubmit:!0});regic(b,"integerContentInlineEditor")});

!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),n(2),n(4)},function(e,t){"use strict";function n(){this._plugins=[]}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.config=function(e){this._plugins=e},n.prototype.track=function(e,t){if(e){var n=e.indexOf(":");0>n&&(n=e.indexOf("_")),0>n&&(n=e.length);var i=e.substr(0,n),o=e.substr(n+1);this.trackEvent(i,o,t)}},n.prototype.trackPageView=function(e){this._plugins.forEach(function(t){t.trackPageView(e)})},n.prototype.trackEvent=function(e,t,n){var i=n?t+this._buildSuffix(n):null;this._plugins.forEach(function(n){n.trackEvent(e,t),i&&n.trackEvent(e,i)})},n.prototype.trackShortcutEvent=function(e,t,n){this.trackEvent(e,t,n),this.trackEvent("ring-shortcut",e+"$"+t,n)},n.prototype.trackEntityProperties=function(e,t,n,i){for(var o=0;o<n.length;++o){var r=n[o].split("."),a=t;if(r.length){for(var s=0;s<r.length;++s){if(!a.hasOwnProperty(r[s])){a="no-value";break}a=a[r[s]]}"string"==typeof a&&(a=a.toLowerCase().replace(/[\._]+/g,"-"));var c=r.join("-")+"__"+a;this.trackEvent(e,c,i)}}},n.prototype._buildSuffix=function(e){if(!e)return"";var t="",n=void 0;for(n in e)e.hasOwnProperty(n)&&(t+="__"+n+"$"+e[n]);return t},t["default"]=new n,e.exports=t["default"]},function(e,t,n){"use strict";var i=n(3);i(function(){var e=function(e){return function(t){if(e||t.originalEvent){var n=i(this).attr("yt-analytics");window.analytics.track(n)}}},t=function(t){var n=t.attr("yt-analytics-on");n&&(n=n.split(":"),n.length>0&&t.on(n[0],e(n.length>1&&"all"===n[1].toLowerCase())))};i(document.body).delegate("[yt-analytics]:not([yt-analytics-on])","click",e(!1)),i("[yt-analytics-on]").each(function(e,n){t(i(n))}),i(document.body).delegate("[yt-analytics-on]","load",function(){t(i(this))})}),e.exports={}},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";window.analytics=n(1),window.AnalyticsPlugins={AnalyticsGAPlugin:n(5),AnalyticsCustomPlugin:n(6)},e.exports={}},function(e,t){"use strict";function n(e,t){if(e||t){!function(e,t,n,i,o,r,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,r=t.createElement(n),a=t.getElementsByTagName(n)[0],r.async=1,r.src=i,a.parentNode.insertBefore(r,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga");var n=e||"UA-57284711-1";ga("create",n,e?{}:{cookieDomain:"none"})}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,n.prototype.trackEvent=function(e,t){if(window.ga){var n={eventCategory:e,eventAction:t};ga("send","event",n)}},n.prototype.trackPageView=function(e){window.ga&&ga("send","pageview",e)},e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t,n,i){var o=this;this._data=[],"function"!=typeof i&&(i=function(){return!0}),this._flush=function(){o._data.length>0&&i()&&(e(o._data),o._data=[])},this._isDevelopment=t,this._flushInterval=n||1e4}var o=n(7)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var r=n(8),a=o(r);i.prototype.trackEvent=function(e,t){this._processEvent(e,t)},i.prototype.trackPageView=function(e){this._lastPagePath!==e&&(this._trackPageViewAdditionalInfo(e),this._processEvent("ring-page",e),this._processEvent("ring-navigator_user-agent",a["default"].getUserAgentPresentation()),this._processEvent("ring-navigator_platform",a["default"].npeSaveLowerCase(navigator.platform)),this._processEvent("ring-navigator_lang",a["default"].npeSaveLowerCase(navigator.language)),this._processEvent("ring-device-pixel-ratio",a["default"].getDevicePixelRatioPresentation()),this._processEvent("ring-screen-width",a["default"].getScreenWidthPresentation()))},i.prototype._initSendSchedule=function(){var e=this;window.addEventListener("beforeunload",function(){return e._trackPageViewAdditionalInfo(),e._flush()}),setInterval(this._flush,this._flushInterval),this._hasSendSchedule=!0},i.prototype._processEvent=function(e,t){!this._hasSendSchedule&&this._flush&&this._initSendSchedule(),e=a["default"].reformatString(e,!0),t=a["default"].reformatString(t),this._isDevelopment&&console.log("TRACKING DATA = ",e,t),this._data.push({category:e,action:t})},i.prototype._trackPageViewAdditionalInfo=function(e){var t=(new Date).getTime();if(this._lastPagePath&&this._lastPageViewTime){var n=a["default"].getPageViewDurationPresentation(t-this._lastPageViewTime);this._processEvent("ring-pageview-duration_"+this._lastPagePath,n)}this._lastPageViewTime=t,this._lastPagePath=e},e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,n){"use strict";var i=n(9)["default"],o=n(7)["default"];Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),a=o(r),s={};s.reformatString=function(e,t){var n=String(e),i=t?/[\.:;!@#^&*()\{}\[\]?,%=+\\\/]+/g:/[\.:;!@#^&*()\{}\[\]?,%=+\\]+/g;return n.replace(i,"_")},s.getPageViewDurationPresentation=function(e){var t=e/1e3;if(t>3600)return"more-than-hour";var n=Math.floor(Math.pow(2,Math.floor(i(t))+1));return n=n>0?n:1,"less-than-"+n+"-sec"},s.getScreenWidthPresentation=function(){for(var e=[0,768,992,1200],t=1;t<e.length;++t)if(window.innerWidth<e[t])return"["+e[t-1]+"px;"+e[t]+"px)";return"[1200px;inf)"},s.npeSaveLowerCase=function(e){return(e||"unknown").toLowerCase()},s.getUserAgentPresentation=function(){var e=new a["default"];e.sniff();var t=s.npeSaveLowerCase(e.browser.name||"unknown"),n=e.browser.version[0],i=n||"unknown";return t+"$"+i},s.getDevicePixelRatioPresentation=function(){return window.devicePixelRatio&&window.devicePixelRatio.toFixed?String(window.devicePixelRatio.toFixed(1)):"unknown"},t["default"]=s,e.exports=t["default"]},function(e,t,n){e.exports={"default":n(10),__esModule:!0}},function(e,t,n){n(11),e.exports=n(14).Math.log2},function(e,t,n){var i=n(12);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var i=n(13),o=n(14),r="prototype",a=function(e,t){return function(){return e.apply(t,arguments)}},s=function(e,t,n){var c,u,f,l,d=e&s.G,p=e&s.P,g=d?i:e&s.S?i[t]:(i[t]||{})[r],h=d?o:o[t]||(o[t]={});d&&(n=t);for(c in n)u=!(e&s.F)&&g&&c in g,u&&c in h||(f=u?g[c]:n[c],d&&"function"!=typeof g[c]?l=n[c]:e&s.B&&u?l=a(f,i):e&s.W&&g[c]==f?!function(e){l=function(t){return this instanceof e?new e(t):e(t)},l[r]=e[r]}(f):l=p&&"function"==typeof f?a(Function.call,f):f,h[c]=l,p&&((h[r]||(h[r]={}))[c]=f))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t){var n="undefined",i=e.exports=typeof window!=n&&window.Math==Math?window:typeof self!=n&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t){var n=e.exports={};"number"==typeof __e&&(__e=n)},function(e,t){!function(t){function n(){var e=this;s.forEach(function(t){e[t]={name:a,version:[],versionString:a}})}function i(e,t,n){r[t].forEach(function(i){var r=i[0],s=i[1],c=n.match(r);c&&(e[t].name=s,c[2]?(e[t].versionString=c[2],e[t].version=[]):c[1]?(e[t].versionString=c[1].replace(/_/g,"."),e[t].version=o(c[1])):(e[t].versionString=a,e[t].version=[]))})}function o(e){return e.split(/[\._]/).map(function(e){return parseInt(e)})}var r={browser:[[/msie ([\.\_\d]+)/,"ie"],[/trident\/.*?rv:([\.\_\d]+)/,"ie"],[/firefox\/([\.\_\d]+)/,"firefox"],[/chrome\/([\.\_\d]+)/,"chrome"],[/version\/([\.\_\d]+).*?safari/,"safari"],[/mobile safari ([\.\_\d]+)/,"safari"],[/android.*?version\/([\.\_\d]+).*?safari/,"com.android.browser"],[/crios\/([\.\_\d]+).*?safari/,"chrome"],[/opera/,"opera"],[/opera\/([\.\_\d]+)/,"opera"],[/opera ([\.\_\d]+)/,"opera"],[/opera mini.*?version\/([\.\_\d]+)/,"opera.mini"],[/blackberry/,"blackberry"],[/blackberry.*?version\/([\.\_\d]+)/,"blackberry"],[/bb\d+.*?version\/([\.\_\d]+)/,"blackberry"],[/rim.*?version\/([\.\_\d]+)/,"blackberry"],[/iceweasel\/([\.\_\d]+)/,"iceweasel"],[/edge\/([\.\d]+)/,"edge"]],os:[[/linux ()([a-z\.\_\d]+)/,"linux"],[/mac os x/,"macos"],[/mac os x.*?([\.\_\d]+)/,"macos"],[/os ([\.\_\d]+) like mac os/,"ios"],[/openbsd ()([a-z\.\_\d]+)/,"openbsd"],[/android/,"android"],[/android ([a-z\.\_\d]+);/,"android"],[/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/,"firefoxos"],[/windows\s*(?:nt)?\s*([\.\_\d]+)/,"windows"],[/windows phone.*?([\.\_\d]+)/,"windows.phone"],[/windows mobile/,"windows.mobile"],[/blackberry/,"blackberryos"],[/bb\d+/,"blackberryos"],[/rim.*?os\s*([\.\_\d]+)/,"blackberryos"]],device:[[/ipad/,"ipad"],[/iphone/,"iphone"],[/lumia/,"lumia"],[/htc/,"htc"],[/nexus/,"nexus"],[/galaxy nexus/,"galaxy.nexus"],[/nokia/,"nokia"],[/ gt\-/,"galaxy"],[/ sm\-/,"galaxy"],[/xbox/,"xbox"],[/(?:bb\d+)|(?:blackberry)|(?: rim )/,"blackberry"]]},a="Unknown",s=Object.keys(r);n.prototype.sniff=function(e){var t=this,n=(e||navigator.userAgent||"").toLowerCase();s.forEach(function(e){i(t,e,n)})},"undefined"!=typeof e&&e.exports?e.exports=n:(t.Sniffr=new n,t.Sniffr.sniff(navigator.userAgent))}(this)}]);
cr.setTemplateBind("LinkPanel",function(b){cr.ach(b,"showMore","click",function(a){$(cr.findInHandler(a,".loading",[cr.getTarget(a).getAttribute("p0"),cr.getTarget(a).getAttribute("p1")])).show()});cr.ash(b,"showMore","click",null)});

cr.setTemplateBind("AttachmentThumbnail",function(b){cr.ach(b,"preview","mouseover",function(a){Webr.util.Util.isMobile||cr.findInHandler(a,".previewPopup",[]).load(function(){cr.serverMethodCallInHandler(a,".methodCall_showPreview",{})},cr.findInHandler(a,".preview",[]));return!1});regPC(b,"previewPopup")});

cr.setTemplateBind("DraftsMenuContent",function(b){cr.ach(b,"draft","click",function(a){if($(a.target).hasClass("icon-delete"))return!1;if(Webr.util.PageStateStore.getInstance().get(charisma.smartui.NewIssueSwitcher.NEW_ISSUE_TOKEN))return Webr.util.PageStateStore.getInstance().put(charisma.smartui.NewIssueSwitcher.NEW_ISSUE_TOKEN,cr.getTarget(a).getAttribute("p0")),!1})});

cr.setTemplateBind("SelectAllIssues",function(a){cr.ash(a,"selectAllIssues","click",null);cr.ash(a,"clearAllIssuesSelection","click",null)});

cr.setTemplateBind("BuildFieldSelectorEditor",function(a){cr.ash(a,"valueSelector","change",null);cr.ash(a,"valueSelector","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

Webr.component.Popup=function(a,b){this.inited=this.movedToBody=!1;this.loadingTimeHandler=this.timerHandler=0;this.parent=this.anchor=null;this.hide_pause=Webr.component.Popup.HIDE_PAUSE;this.show_pause=Webr.component.Popup.SHOW_PAUSE;this.checkIfTheSameAnchor=!0;this.current_state=null;Webr.component.Popup.superclass.constructor.call(this,a);var c=a[0].id;this.parentTemplateName=c.substring(3,c.lastIndexOf("."));this.groupId=b;this.parent=a.parent();this.savedBindMouseHovers=!0;this.current_state=
Webr.component.Popup.state_CLOSED};var F=new Function;F.prototype=Webr.component.panel.AbstractPanel.prototype;Webr.component.Popup.prototype=new F;Webr.component.Popup.prototype.constructor=Webr.component.Popup;Webr.component.Popup.superclass=Webr.component.panel.AbstractPanel.prototype;
Webr.component.Popup.prototype.init=function(){var a=this;this.refreshListener={beforeRefresh:function(b){a._finalize(b)}};this.mouseHandlers=[function(){a.mouseOverAnchor()},function(){a.mouseOutAnchor()},function(b){if($(b.data.element).ancestorOf(b.target))return!0;a.outerClick()}];Webr.event.RefreshCommandProcessor.addListener(this.refreshListener)};
Webr.component.Popup.prototype._finalize=function(a){0==this.parentTemplateName.indexOf(a)&&(Webr.event.RefreshCommandProcessor.removeListener(this.refreshListener),this.hide(),this.refreshListener=null,delete this.refreshListener)};Webr.component.Popup.prototype.setLayout=function(a){this.positionFunc=Webr.component.Popup.POSITION_FUNCTIONS[a]};Webr.component.Popup.prototype.load=function(a,b,c){this.inited||(this.showAsync(a,b,c),this.inited=!0)};
Webr.component.Popup.prototype.mouseOverAnchor=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseOverAnchor",arguments)};Webr.component.Popup.prototype.mouseOverPanel=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseOverPanel",arguments)};Webr.component.Popup.prototype.mouseOutAnchor=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseOutAnchor",arguments)};
Webr.component.Popup.prototype.mouseOutPanel=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseOutPanel",arguments)};Webr.component.Popup.prototype.outerClick=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"outerClick",arguments)};Webr.component.Popup.prototype.tick=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"tick",arguments)};
Webr.component.Popup.prototype.hide=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"hide",arguments)};Webr.component.Popup.prototype.show=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"show",arguments)};Webr.component.Popup.prototype.showAsync=function(a,b,c){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"showAsync",arguments)};Webr.component.Popup.prototype.onshow=function(){};Webr.component.Popup.prototype.onhide=function(){};
Webr.component.Popup.prototype._bindMouseOverAnchor=function(){this.anchor.mouseover(this.mouseHandlers[0]).mouseout(this.mouseHandlers[1])};Webr.component.Popup.prototype._unbindMouseOverAnchor=function(){this.anchor.unbind("mouseover",this.mouseHandlers[0]).unbind("mouseout",this.mouseHandlers[1])};Webr.component.Popup.prototype._bindMouseOverPanel=function(){var a=this;this.panel.mouseover(function(){a.mouseOverPanel()});this.panel.mouseout(function(){a.mouseOutPanel()})};
Webr.component.Popup.prototype._bindMouseClick=function(a){var b=this;window.setTimeout(function(){$(document).bind("click",{element:a},b.mouseHandlers[2])},20)};Webr.component.Popup.prototype._unbindMouseClick=function(){$(document).unbind("click",this.mouseHandlers[2])};Webr.component.Popup.prototype._moveToBodyIfNecessary=function(){if(!this.movedToBody){var a=this._getElement();a.parentNode.removeChild(a);document.body.appendChild(a);this.movedToBody=!0}};
Webr.component.Popup.prototype._moveFromBodyIfNecessary=function(){if(this.movedToBody){var a=this._getElement();if(0<this.parent.length)document.body.removeChild(a),this.parent.append(a),this.movedToBody=!1;else throw"Popup parent element not found!";}};Webr.component.Popup.prototype._getElement=function(){return this.panel.get(0)};
Webr.component.Popup.prototype._show=function(a,b){this._updateCurrentOpenedPopup();this.anchor&&(this._unbindMouseOverAnchor(),this._unbindMouseClick());this._registerMouseHandlers(a,b);this.setVisible(!0)};Webr.component.Popup.prototype._showFromAsyncLoading=function(){this._updateCurrentOpenedPopup();this._bindMouseOverPanel();this.setVisible(!0)};Webr.component.Popup.prototype._hide=function(){this.setVisible(!1)};
Webr.component.Popup.prototype._updateCurrentOpenedPopup=function(){var a=Webr.component.Popup.GROUPS[this.groupId];a&&a!=this&&a.hide();Webr.component.Popup.GROUPS[this.groupId]=this};
Webr.component.Popup.prototype.setVisible=function(a){var b=this._getElement();a?(this.positionFunc||(this.positionFunc=Webr.component.Popup.POSITION_FUNCTIONS[0]),this._moveToBodyIfNecessary(),b.style.visibility="hidden",this.panel.css("top",0),this.panel.css("left",0),b.style.display="block",this.positionFunc(this),b.style.visibility="visible",this.panel.trigger("show")):(b.style.display="none",Webr.component.Popup.GROUPS[this.groupId]=null,this._moveFromBodyIfNecessary(),this.panel.trigger("hide"));
this.visible=a};Webr.component.Popup.prototype._loading=function(){this.loadingTimeHandler=window.setTimeout(function(){},this.show_pause)};Webr.component.Popup.prototype._loaded=function(){window.clearTimeout(this.loadingTimeHandler)};Webr.component.Popup.prototype._registerMouseHandlers=function(a,b){if(b)this.anchor=$(b),a?(this._bindMouseOverAnchor(),this._bindMouseOverPanel()):this._bindMouseClick(this.panel);else if(!this.anchor)throw"No anchor for popup!";};
Webr.component.Popup.prototype._showFixParameters=function(a,b){a||!1==a?b?this._show(a,b):a.appendChild&&this._show(Webr.component.Popup.DEFAULT_MOUSE_HOVERS,b):this._show(Webr.component.Popup.DEFAULT_MOUSE_HOVERS,null)};Webr.component.Popup.prototype._initPopupForDelegatedLoad=function(a,b){this.callback=a;this._registerMouseHandlers(!0,b)};Webr.component.Popup.prototype._startTimer=function(a){this._stopTimer();var b=this;this.timerHandler=window.setTimeout(function(){b.tick()},a)};
Webr.component.Popup.prototype._stopTimer=function(){window.clearTimeout(this.timerHandler)};Webr.component.Popup.DEFAULT_MOUSE_HOVERS=!1;Webr.component.Popup.SHOW_PAUSE=200;Webr.component.Popup.DEFAULT_GROUP_ID="__DEFAULT_GROUP__";Webr.component.Popup.HIDE_PAUSE=400;Webr.component.Popup.GROUPS=[];
Webr.component.Popup.POSITION_FUNCTIONS=[function(a){var b=$(window).width();$(window).height();var c=Webr.component.Popup.getAnchorPoint(a.anchor,0,2),d=this.panel.outerWidth();this.panel.outerHeight();a.panel.css("top",Math.max(0,c.top));a.panel.css("left",Math.max(0,Math.min(c.left,b-d-1)))},function(a){var b=$(window).width();$(window).height();var c=Webr.component.Popup.getAnchorPoint(a.anchor,2,0),d=this.panel.outerWidth();this.panel.outerHeight();a.panel.css("top",Math.max(0,c.top));a.panel.css("left",
Math.max(0,Math.min(c.left,b-d-1)))},function(a){var b=$(window).width();$(window).height();var c=Webr.component.Popup.getAnchorPoint(a.anchor,0,0),d=this.panel.outerWidth(),e=this.panel.outerHeight();a.panel.css("top",Math.max(0,c.top-e-5));a.panel.css("left",Math.max(0,Math.min(c.left-(d-this.anchor.width())/2,b-d-1)))}];
Webr.component.Popup.state_CLOSED={name:"CLOSED",mouseOverAnchor:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_PAUSE_BEFORE_OPEN);return Webr.component.Popup.state_PAUSE_BEFORE_OPEN},showAsync:function(a,b,c){if(c)return this._initPopupForDelegatedLoad(a,b),Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_ASYNC_LOADING),Webr.component.Popup.state_ASYNC_LOADING;this._initPopupForDelegatedLoad(a,b);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,
Webr.component.Popup.state_PAUSE_BEFORE_LOAD);return Webr.component.Popup.state_PAUSE_BEFORE_LOAD},show:function(a,b){this._showFixParameters(a,b);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_OPEN);return Webr.component.Popup.state_OPEN}};
Webr.component.Popup.state_PAUSE_BEFORE_OPEN={name:"PAUSE_BEFORE_OPEN",onenter:function(){this._startTimer(this.show_pause)},onexit:function(){this._stopTimer()},tick:function(){this._show(this.savedBindMouseHovers,this.anchor.get(0));Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_PAUSE_BEFORE_OPEN);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_OPEN);return Webr.component.Popup.state_OPEN},mouseOutAnchor:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,
Webr.component.Popup.state_PAUSE_BEFORE_OPEN);return Webr.component.Popup.state_CLOSED},hide:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_PAUSE_BEFORE_OPEN);return Webr.component.Popup.state_CLOSED}};Webr.component.Popup.state_SHOWN={name:"SHOWN",onexit:function(){this._hide()},hide:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_SHOWN);return Webr.component.Popup.state_CLOSED}};
Webr.component.Popup.state_OPEN={name:"OPEN",parentState:Webr.component.Popup.state_SHOWN,onenter:function(){},mouseOutAnchor:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_PAUSE_BEFORE_CLOSE);return Webr.component.Popup.state_PAUSE_BEFORE_CLOSE},mouseOutPanel:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_PAUSE_BEFORE_CLOSE);return Webr.component.Popup.state_PAUSE_BEFORE_CLOSE},outerClick:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,
Webr.component.Popup.state_SHOWN);return Webr.component.Popup.state_CLOSED},show:function(a,b){this.hide();this.show(a,b)}};
Webr.component.Popup.state_PAUSE_BEFORE_CLOSE={name:"PAUSE_BEFORE_CLOSE",parentState:Webr.component.Popup.state_SHOWN,onenter:function(){this._startTimer(this.hide_pause)},onexit:function(){this._stopTimer()},tick:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_PAUSE_BEFORE_CLOSE);Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_SHOWN);return Webr.component.Popup.state_CLOSED},mouseOverAnchor:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,
Webr.component.Popup.state_PAUSE_BEFORE_CLOSE);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_OPEN);return Webr.component.Popup.state_OPEN},mouseOverPanel:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_PAUSE_BEFORE_CLOSE);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_OPEN);return Webr.component.Popup.state_OPEN}};Webr.component.Popup.state_ASYNC_BEHAVIOUR={name:"ASYNC_BEHAVIOUR"};
Webr.component.Popup.state_ASYNC_NOT_LOADED={name:"ASYNC_NOT_LOADED",parentState:Webr.component.Popup.state_ASYNC_BEHAVIOUR,mouseOverAnchor:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_PAUSE_BEFORE_LOAD);return Webr.component.Popup.state_PAUSE_BEFORE_LOAD}};
Webr.component.Popup.state_PAUSE_BEFORE_LOAD={name:"PAUSE_BEFORE_LOAD",parentState:Webr.component.Popup.state_ASYNC_BEHAVIOUR,onenter:function(){this._startTimer(this.show_pause)},onexit:function(){this._stopTimer()},tick:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_PAUSE_BEFORE_LOAD);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_ASYNC_LOADING);return Webr.component.Popup.state_ASYNC_LOADING},mouseOutAnchor:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,
Webr.component.Popup.state_PAUSE_BEFORE_LOAD);return Webr.component.Popup.state_ASYNC_NOT_LOADED},hide:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_PAUSE_BEFORE_LOAD);return Webr.component.Popup.state_ASYNC_NOT_LOADED}};
Webr.component.Popup.state_ASYNC_LOADING={name:"ASYNC_LOADING",parentState:Webr.component.Popup.state_ASYNC_BEHAVIOUR,onenter:function(){this.callback();this._loading()},onexit:function(){this._loaded()},mouseOutPanel:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_ASYNC_LOADING);return Webr.component.Popup.state_ASYNC_NOT_LOADED},mouseOutAnchor:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_ASYNC_LOADING);
return Webr.component.Popup.state_ASYNC_NOT_LOADED},hide:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_ASYNC_LOADING);return Webr.component.Popup.state_ASYNC_NOT_LOADED},show:function(){this._showFromAsyncLoading();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Popup.state_ASYNC_LOADING);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Popup.state_OPEN);return Webr.component.Popup.state_OPEN}};
Webr.component.Popup.getAnchorPoint=function(a,b,c){var d=a.offset(),e=a.outerWidth(),a=a.outerHeight();return{left:d.left+e*b/2,top:d.top+a*c/2}};Webr.component.Popup.register=function(a,b){cr.forEach(a,b,function(){var a=$(this),b=a.attr("gid"),e=a.attr("lyt"),e=e?parseInt(e):0;(new Webr.component.Popup(a,b?b:Webr.component.Popup.DEFAULT_GROUP_ID)).setLayout(e)})};var regPC=Webr.component.Popup.register;

cr.setTemplateBind("FiltersSideBar",function(a){cr.ach(a,"filtersSideBarTitleDiv","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_toggle",{})});cr.ach(a,"close","click",function(){charisma.smartui.Filter.hideFilterPopup()});cr.ash(a,"filtersReadyTicker","tick",{collectFormElements:!1,hideLoadingPopup:!0,preventDoubleSubmit:!0});regPC(a,"filterResults");regT(a,"filtersReadyTicker")});

Webr.component.ToolTip=function(a,b,c){this.delay=5;this.delta=Webr.component.ToolTip.DELTA;this.appended=!1;this.current_state=this.watchElementPos=null;this.watchElement=$(a);this.container=$(b);this.config=c;this.init();this.registerEvents();this.current_state=Webr.component.ToolTip.state_INACTIVE};Webr.component.ToolTip.prototype.init=function(){var a="tooltip";this.config.showOnTop&&(this.delta=0,this.arrow=new ToolTipArrow(this.container),a="tooltip tooltip-inline");this.container.addClass(a)};
Webr.component.ToolTip.prototype.registerEvents=function(){var a=this;this.mouseOverHandler=function(){a.mover()};this.mouseOutHandler=function(){a.mout()};this.mouseMoveHandler=function(b){a.mmove(b.pageX,b.pageY)};this.watchElement.mouseover(this.mouseOverHandler);this.watchElement.mouseout(this.mouseOutHandler);this.watchElement.mousemove(this.mouseMoveHandler)};
Webr.component.ToolTip.prototype.unregisterEvents=function(){this.watchElement.unbind("mouseover",this.mouseOverHandler);this.watchElement.unbind("mouseout",this.mouseOutHandler);this.watchElement.unbind("mousemove",this.mouseMoveHandler)};Webr.component.ToolTip.prototype.startTimer=function(){var a=this;this.timer=window.setTimeout(function(){a.timeOut()},a.delay)};Webr.component.ToolTip.prototype.cancelTimer=function(){window.clearTimeout(this.timer)};
Webr.component.ToolTip.prototype.startTicker=function(){if(!this.ticker){var a=this;this.ticker=window.setInterval(function(){a.timeTick()},this.delay)}};Webr.component.ToolTip.prototype.stopTicker=function(){this.ticker&&(window.clearInterval(this.ticker),this.ticker=null)};Webr.component.ToolTip.prototype.saveCurrentPosition=function(a,b){this.config.showOnTop||(this.x=a,this.y=b)};
Webr.component.ToolTip.prototype.setTopPosition=function(){if(this.config.showOnTop){var a=this.watchElement.offset();if(void 0==this.watchElementPos||Webr.component.ToolTip.posistonNotEqual(this.watchElementPos,a)){this.watchElementPos=a;var b=this.container.outerHeight(),c=this.container.outerWidth(),d=this.watchElement.outerWidth();this.y=a.top-b-5;this.x=a.left-(c-d)/2}this.setArrowPosition()}};
Webr.component.ToolTip.prototype.move=function(){this.setTopPosition();this.container.css({top:this.y+this.delta,left:this.x})};Webr.component.ToolTip.prototype.show=function(){this.appended||($(document.body).append(this.container),this.appended=!0);this.move();this.container.show()};
Webr.component.ToolTip.prototype.changeText=function(a,b){var c=this.container.children(".tooltip-text");c.get(0)?c.text(a):this.container.append($(document.createElement("span")).addClass("tooltip-text").text(a));this.watchElementPos=null;b&&this.move()};Webr.component.ToolTip.prototype.setArrowPosition=function(){this.arrow&&this.arrow.setLeftPosition()};Webr.component.ToolTip.prototype.hide=function(){this.container.fadeOut(100)};
Webr.component.ToolTip.prototype.mover=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mover",arguments)};Webr.component.ToolTip.prototype.mout=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mout",arguments)};Webr.component.ToolTip.prototype.mmove=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mmove",arguments)};Webr.component.ToolTip.prototype.timeTick=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"timeTick",arguments)};
Webr.component.ToolTip.prototype.timeOut=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"timeOut",arguments)};Webr.component.ToolTip.prototype.changetext=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"changetext",arguments)};Webr.component.ToolTip.DELTA=18;
Webr.component.ToolTip.state_INACTIVE={name:"INACTIVE",mmove:function(a,b){this.saveCurrentPosition(a,b);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ToolTip.state_PAUSED);return Webr.component.ToolTip.state_PAUSED},changetext:function(a){this.changeText(a)}};
Webr.component.ToolTip.state_PAUSED={name:"PAUSED",onenter:function(){this.startTimer()},onexit:function(){this.cancelTimer()},mout:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ToolTip.state_PAUSED);return Webr.component.ToolTip.state_INACTIVE},timeOut:function(){this.show();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ToolTip.state_PAUSED);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.ToolTip.state_SHOWN);return Webr.component.ToolTip.state_SHOWN},
changetext:function(a){this.changeText(a)}};
Webr.component.ToolTip.state_SHOWN={name:"SHOWN",onenter:function(){this.startTicker()},onexit:function(){this.stopTicker()},timeTick:function(){if(this.config.followCursor)this.move();else return!1},mout:function(){this.hide();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.ToolTip.state_SHOWN);return Webr.component.ToolTip.state_INACTIVE},mmove:function(a,b){if(this.config.followCursor)this.saveCurrentPosition(a,b);else return!1},changetext:function(a){this.changeText(a,!0)}};
Webr.component.ToolTip.register=function(a,b,c){cr.forEach(a,b,function(){var a=$(this),b=document.getElementById(a.attr("bid"));$(b).one("mouseover",function(){(new Webr.component.ToolTip($(b),a.get(0),{followCursor:c,showOnTop:!1})).mover()})})};Webr.component.ToolTip.destroy=function(a){a&&a.container&&(a.unregisterEvents(),$(a.container).remove(),delete a)};Webr.component.ToolTip.posistonNotEqual=function(a,b){return a.left!=b.left||a.top!=b.top?!0:!1};
Webr.component.ToolTipConfig=function(){this.showOnTop=!1};var regtt=Webr.component.ToolTip.register,ToolTipArrow={},ToolTipArrow=function(a){this.container=a;this.create()};ToolTipArrow.prototype.create=function(){this.container&&(this.arrow=$(document.createElement("span")).addClass("tooltip-arrow-south"),this.container.append(this.arrow),this.setLeftPosition())};
ToolTipArrow.prototype.setLeftPosition=function(){this.arrowLeft=this.container.outerWidth()/2-ToolTipArrow.offset;this.arrow.css("left",this.arrowLeft)};ToolTipArrow.offset=4.5;

charisma.smartui.TextCopier=function(a,b,c){this.isDescription=!1;this.messageType=-1;this.current_state=null;this.allowRegularUiUpdate=c;this.swfUri=a+"?v5";this.correctTop=b?3:0;this.createCopier();this.current_state=charisma.smartui.TextCopier.state_HIDDEN};charisma.smartui.TextCopier.prototype.createDomElement=function(a,b){var c=$(document.createElement(a));b&&c.attr("id",b);return c};
charisma.smartui.TextCopier.prototype.createCopier=function(){var a=$(document.body);this.textContainer=this.createDomElement("span").addClass("clipboard-text");a.append(this.textContainer);charisma.smartui.TextCopier.ieNativeSupport()?(this.copier=this.createDomElement("div").addClass("text-copier").addClass("copierIe").addClass("hidden"),this.registerIeEvents(),a.append(this.copier)):a.append(this.createFlash());this.tooltip=new charisma.smartui.CopierTooltip(this.copier,this.createDomElement("div").get(0),
{followCursor:!1,showOnTop:!0});this.tooltip.container.addClass("toolbar-tootip")};
charisma.smartui.TextCopier.prototype.registerIeEvents=function(){var a=this;this.copier.click(function(){charisma.smartui.TextCopier.instance.updateTooltip(charisma.smartui.TextCopier.instance.isDescription?0:1,!0);a.doIeCopy()});this.copier.mouseenter(function(){charisma.smartui.TextCopier.instance.updateTooltip(charisma.smartui.TextCopier.instance.isDescription?0:1,!0);charisma.smartui.TextCopier.copiedCallback(!0)});this.copier.mouseleave(function(){charisma.smartui.TextCopier.copiedCallback(-1);
a.mouseleave()})};charisma.smartui.TextCopier.prototype.doIeCopy=function(){window.clipboardData.clearData();window.clipboardData.setData("Text",this.getText());charisma.smartui.TextCopier.copiedCallback(!1)};
charisma.smartui.TextCopier.prototype.getText=function(){var a,b=this;if(this.isDescription){var c=charisma.Rest.url("issue/"+this.issueId+"/descriptionWithRemovedMarkup");jQuery.ajax({url:c,dataType:"text",type:"GET",async:!1,cache:!1,success:function(b,c,d){a=d.responseText},error:function(c,f,d){trace("rest request thrown error: "+d);a=b.getParsedText(!1)}})}else a=b.getParsedText(!0);return a};
charisma.smartui.TextCopier.prototype.getParsedText=function(a){var b=jQuery.trim(this.target.text());return a?b+" "+jQuery.trim(this.target2.text()):b};
charisma.smartui.TextCopier.prototype.setPosition=function(){this.isDescription=this.target.hasClass("description");var a=this.target.offset(),b=a.left,a=a.top+this.correctTop;if(this.isDescription){var c=this.target.children();3!==c.get(0).firstChild.nodeType&&0<c.find(".wiki-plus").length&&(b-=charisma.smartui.TextCopier.COPIER_WIDTH)}else b+=this.target.outerWidth();this.copier.css({left:b,top:a})};
charisma.smartui.TextCopier.prototype.startTimer=function(a,b){if(!a){this.stopTimer(a);var c=this,a=window.setTimeout(function(){c.tick()},b)}};charisma.smartui.TextCopier.prototype.stopTimer=function(a){a&&window.clearInterval(a)};charisma.smartui.TextCopier.prototype.saveTargets=function(a,b){this.target=a;this.target2=b};charisma.smartui.TextCopier.prototype.show=function(a,b){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"show",arguments)};
charisma.smartui.TextCopier.prototype.tick=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"tick",arguments)};charisma.smartui.TextCopier.prototype.hideshowflash=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"hideshowflash",arguments)};charisma.smartui.TextCopier.prototype.mouseleave=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseleave",arguments)};charisma.smartui.TextCopier.prototype._hide=function(){this.copier.addClass("hidden")};
charisma.smartui.TextCopier.prototype._show=function(){this.focusedElement=document.activeElement;this.setPosition();this.copier.removeClass("hidden")};
charisma.smartui.TextCopier.prototype.createFlash=function(){this.copier=this.createDomElement("object").addClass("text-copier").addClass("hidden");this.copier.attr("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");this.copier.attr("codebase","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0");this.copier.attr("heigth","16");this.copier.attr("width",charisma.smartui.TextCopier.SWF_WIDTH);var a=[];a.push('<param name = "movie" value="');a.push(this.swfUri);
a.push('"/><param name = "bgcolor" value = "#ffffff"/><param name = "quality" value = "high"/><param name = "scale" value = "noscale"/>');a.push('<param name = "wmode" value = "transparent"/>');a.push('<embed name = "');a.push(charisma.smartui.TextCopier.SWF_OBJECT_ID);a.push('" src = "');a.push(this.swfUri);a.push('" width = "');a.push(charisma.smartui.TextCopier.SWF_WIDTH);a.push('" height = "16" bgcolor = "#ffffff" wmode = "transparent" quality = "high" allowScriptAccess = "always" pluginspage = "http://www.macromedia.com/go/getflashplayer" menu = "false" type = "application/x-shockwave-flash">');
a.push("</object>");return this.copier.append(a.join(""))};charisma.smartui.TextCopier.prototype.setTooltipText=function(a){this.messageType!=a&&(this.tooltip.changetext(charisma.smartui.TextCopier.MSG[a]),this.messageType=a)};charisma.smartui.TextCopier.prototype.updateTooltip=function(a,b){this.tooltip.move();this.setTooltipText(a);this.tooltip.mmove(0,0);b&&this.tooltip.timeOut()};charisma.smartui.TextCopier.CONTAINER_ID="_copier_";charisma.smartui.TextCopier.SWF_OBJECT_ID="_copier-obj-id_";
charisma.smartui.TextCopier.TEXT_CONTAINER_ID="_copier-txt_";charisma.smartui.TextCopier.SWF_WIDTH=17;charisma.smartui.TextCopier.MSG=[l10n('Copy description to clipboard'),l10n('Copy id and summary to clipboard'),l10n('Copied')];charisma.smartui.TextCopier.COPIER_WIDTH=22;
charisma.smartui.TextCopier.state_HIDDEN={name:"HIDDEN",show:function(a,b){this.saveTargets(a,b);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,charisma.smartui.TextCopier.state_PAUSE_BEFORE_SHOW);return charisma.smartui.TextCopier.state_PAUSE_BEFORE_SHOW}};
charisma.smartui.TextCopier.state_PAUSE_BEFORE_SHOW={name:"PAUSE_BEFORE_SHOW",onenter:function(){this.startTimer(this.showTimer,500)},onexit:function(){this.stopTimer(this.showTimer)},tick:function(){this._show();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.TextCopier.state_PAUSE_BEFORE_SHOW);return charisma.smartui.TextCopier.state_SHOWN},mouseleave:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.TextCopier.state_PAUSE_BEFORE_SHOW);
return charisma.smartui.TextCopier.state_HIDDEN}};
charisma.smartui.TextCopier.state_SHOWN={name:"SHOWN",mouseleave:function(a){return!0==a?(this._hide(),charisma.smartui.TextCopier.state_HIDDEN):!1==a?(Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,charisma.smartui.TextCopier.state_PAUSE_BEFORE_HIDE),charisma.smartui.TextCopier.state_PAUSE_BEFORE_HIDE):!1},hideshowflash:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,charisma.smartui.TextCopier.state_PAUSE_BEFORE_HIDE);return charisma.smartui.TextCopier.state_PAUSE_BEFORE_HIDE}};
charisma.smartui.TextCopier.state_PAUSE_BEFORE_HIDE={name:"PAUSE_BEFORE_HIDE",onenter:function(){this.startTimer(this.hideTimer,2E3)},onexit:function(){this.stopTimer(this.hideTimer)},hideshowflash:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.TextCopier.state_PAUSE_BEFORE_HIDE);return charisma.smartui.TextCopier.state_SHOWN},show:function(a,b){return this.target==a?(Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.TextCopier.state_PAUSE_BEFORE_HIDE),
charisma.smartui.TextCopier.state_SHOWN):this.target!=a?(this.saveTargets(a,b),this.setPosition(),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.TextCopier.state_PAUSE_BEFORE_HIDE),charisma.smartui.TextCopier.state_SHOWN):!1},mouseleave:function(a){return!0==a?(this._hide(),Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.TextCopier.state_PAUSE_BEFORE_HIDE),charisma.smartui.TextCopier.state_HIDDEN):!1},tick:function(){this._hide();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,
charisma.smartui.TextCopier.state_PAUSE_BEFORE_HIDE);return charisma.smartui.TextCopier.state_HIDDEN}};
charisma.smartui.TextCopier.copiedCallback=function(a){-1==a?(charisma.smartui.TextCopier.instance.tooltip.mout(),charisma.smartui.TextCopier.instance.hideshowflash()):!0==a?(charisma.smartui.TextCopier.instance.updateTooltip(charisma.smartui.TextCopier.instance.isDescription?0:1,!0),charisma.smartui.TextCopier.instance.hideshowflash()):!1==a&&(charisma.smartui.TextCopier.instance.updateTooltip(2),commonController.focusIssue())};
charisma.smartui.TextCopier.ieNativeSupport=function(){return Webr.util.Util.isIE&&window.clipboardData};charisma.smartui.TextCopier.isAvailable=function(){if(charisma.smartui.TextCopier.ieNativeSupport())return!0;if(navigator.plugins&&0<navigator.plugins.length){var a=navigator.mimeTypes;return a["application/x-shockwave-flash"]&&a["application/x-shockwave-flash"].enabledPlugin?!0:!1}return!1};
charisma.smartui.TextCopier.doCopyText=function(){return charisma.smartui.TextCopier.instance?charisma.smartui.TextCopier.instance.getText():null};charisma.smartui.TextCopier.hideCopier=function(a){charisma.smartui.TextCopier.instance&&charisma.smartui.TextCopier.instance.mouseleave(a?a:!1)};charisma.smartui.TextCopier.showCopier=function(a,b,c){charisma.smartui.TextCopier.instance&&(charisma.smartui.TextCopier.instance.issueId=c,charisma.smartui.TextCopier.instance.show(a,b))};
charisma.smartui.TextCopier.init=function(a,b,c){if(charisma.smartui.TextCopier.isAvailable())return charisma.smartui.TextCopier.instance?charisma.smartui.TextCopier.instance:charisma.smartui.TextCopier.instance=new charisma.smartui.TextCopier(a,b,c)};charisma.smartui.CopierTooltip=function(a,b,c){charisma.smartui.CopierTooltip.superclass.constructor.call(this,a,b,c)};var F=new Function;F.prototype=Webr.component.ToolTip.prototype;charisma.smartui.CopierTooltip.prototype=new F;
charisma.smartui.CopierTooltip.prototype.constructor=charisma.smartui.CopierTooltip;charisma.smartui.CopierTooltip.superclass=Webr.component.ToolTip.prototype;charisma.smartui.CopierTooltip.prototype.init=function(){var a="tooltip";this.config.showOnTop&&(this.delta=0,a="tooltip tooltip-inline");this.container.addClass(a)};
charisma.smartui.CopierTooltip.prototype.setTopPosition=function(){if(this.config.showOnTop){var a=this.watchElement.offset();if(void 0==this.watchElementPos||Webr.component.ToolTip.posistonNotEqual(this.watchElementPos,a)){this.watchElementPos=a;var b=this.container.outerHeight(),c=this.container.outerWidth(),e=this.watchElement.outerWidth();this.y=a.top-b-5;this.x=Math.max(0,a.left-(c-e)/2)}}};

Webr.component.BindedComboBoxHighlighter=function(a,b){a.shown?Webr.component.BindedComboBoxHighlighter.superclass.constructor.call(this,a.comboComponent,b):this.elementHighlighter=new Webr.component.ElementHighlighter(a.bindedToElement,b)};var F=new Function;F.prototype=Webr.component.BaseComboboxHighlighter.prototype;Webr.component.BindedComboBoxHighlighter.prototype=new F;Webr.component.BindedComboBoxHighlighter.prototype.constructor=Webr.component.BindedComboBoxHighlighter;
Webr.component.BindedComboBoxHighlighter.superclass=Webr.component.BaseComboboxHighlighter.prototype;Webr.component.BindedComboBoxHighlighter.prototype.create=function(){this.elementHighlighter?this.elementHighlighter.create():Webr.component.BindedComboBoxHighlighter.superclass.create.call(this)};Webr.component.BindedComboBoxHighlighter.prototype.destroy=function(){this.elementHighlighter?(this.elementHighlighter.destroy(),delete this.elementHighlighter):Webr.component.BindedComboBoxHighlighter.superclass.destroy.call(this)};
Webr.component.ElementHighlighter=function(a,b){this.element=a;this.message=b;var c=this;this.dismissHandler=function(){c.destroy()}};Webr.component.ElementHighlighter.prototype.create=function(){$(this.element).addClass(Webr.component.ElementHighlighter.HIGHLIGHT_STYLE);this.registerInputEvents()};Webr.component.ElementHighlighter.prototype.destroy=function(){$(this.element).removeClass(Webr.component.ElementHighlighter.HIGHLIGHT_STYLE);this.unregisterInputEvents()};
Webr.component.ElementHighlighter.prototype.registerInputEvents=function(){$(this.element).one("keydown click",this.dismissHandler)};Webr.component.ElementHighlighter.prototype.unregisterInputEvents=function(){$(this.element).unbind("keydown click",this.dismissHandler)};Webr.component.ElementHighlighter.HIGHLIGHT_STYLE="combo-has-error";

cr.setTemplateBind("CommandsToolbarMiddleSubpart",function(a){cr.ach(a,"commandItem","click",function(a){commandDialog.show(cr.getTarget(a).getAttribute("p0"),!1)});regmn(a,"addLinkMenu")});

cr.setTemplateBind("CreateTagDialog",function(b){cr.ach(b,"createTagDlg","keydown",function(a){return a.handleEnterEsc(function(){$(cr.findInHandler(a,".createNewTag",[])).click()},function(){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})})});cr.ach(b,"cancelNewTag","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ach(b,"closeCreateTagDlg","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ach(b,"ts.color","click",function(a){var b=
$(cr.getTarget(a)).attr("class");$(cr.findInHandler(a,".tagName",[])).attr("class","jt-input "+b)});cr.ach(b,"createNewTag","click",function(a){cr.findInHandler(a,".tagName",[])&&cr.findInHandler(a,".tagName",[]).value&&0<cr.findInHandler(a,".tagName",[]).value.trim().length?cr.serverMethodCallInHandler(a,".methodCall_save",{},{preventDoubleSubmit:!0}):cr.findInHandler(a,".tagName",[]).highlight(l10n('Name is required'))});cr.ash(b,"ts.color","click",null);cr.ash(b,"visibleForGroup",
"Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});cr.ash(b,"updateableForGroup","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});regCC(b,"visibleForGroup");regCC(b,"updateableForGroup");regdlg(b,"createTagDlg")});

/*
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function(b){b.support.touch="ontouchend" in document;if(!b.support.touch){return;}var c=b.ui.mouse.prototype,e=c._mouseInit,a;function d(g,h){if(g.originalEvent.touches.length>1){return;}g.preventDefault();var i=g.originalEvent.changedTouches[0],f=document.createEvent("MouseEvents");f.initMouseEvent(h,true,true,window,1,i.screenX,i.screenY,i.clientX,i.clientY,false,false,false,false,0,null);g.target.dispatchEvent(f);}c._touchStart=function(g){var f=this;if(a||!f._mouseCapture(g.originalEvent.changedTouches[0])){return;}a=true;f._touchMoved=false;d(g,"mouseover");d(g,"mousemove");d(g,"mousedown");};c._touchMove=function(f){if(!a){return;}this._touchMoved=true;d(f,"mousemove");};c._touchEnd=function(f){if(!a){return;}d(f,"mouseup");d(f,"mouseout");if(!this._touchMoved){d(f,"click");}a=false;};c._mouseInit=function(){var f=this;f.element.bind("touchstart",b.proxy(f,"_touchStart")).bind("touchmove",b.proxy(f,"_touchMove")).bind("touchend",b.proxy(f,"_touchEnd"));e.call(f);};})(jQuery);
Webr.TimerUtil=function(){this.timeouts=new Webr.NumberSet(!1);this.intervals=new Webr.NumberSet(!1);this.wrapDefaultTimers()};Webr.TimerUtil.prototype.add=function(a,b){(b?this.timeouts:this.intervals).add(a)};Webr.TimerUtil.prototype.remove=function(a,b){(b?this.timeouts:this.intervals).remove(a)};Webr.TimerUtil.prototype.contains=function(a,b){return(b?this.timeouts:this.intervals).contains(a)};
Webr.TimerUtil.prototype.stopAll=function(){this.timeouts.forEach(function(a){window.clearTimeout(a);return!0});this.intervals.forEach(function(a){window.clearInterval(a);return!0})};
Webr.TimerUtil.prototype.wrapDefaultTimers=function(){var a=this,b=window.setTimeout;window.setTimeout=function(c,e){var d=b(function(){a.remove(d,!0);c()},e);a.add(d,!0);return d};var f=window.clearTimeout;window.clearTimeout=function(c){a.remove(c,!0);f(c)};var g=window.setInterval;window.setInterval=function(c,b){var d=g(c,b);a.add(d,!1);return d};var h=window.clearInterval;window.clearInterval=function(b){a.remove(b,!1);h(b)}};Webr.TimerUtil.FINGERPRINT="WEBR_TIMER";Webr.TimerUtil.clearAll=function(){Webr.TimerUtil.WEBR_TIMER.stopAll()};
Webr.TimerUtil.WEBR_TIMER=new Webr.TimerUtil;

cr.setTemplateBind("AddComment",function(b){cr.ach(b,"commentTextarea","keydown",function(a){return a.isKey(Webr.util.Key.TAB)&&!cr.findInHandler(a,".commentTextarea",[]).suggester.visible?(cr.findInHandler(a,".cs.permittedGroup",[]).inputElement?cr.findInHandler(a,".cs.permittedGroup",[]).makeVisible():$(cr.findInHandler(a,".cs.permittedGroupAnchor",[])).click(),!1):!0});cr.ach(b,"cs.permittedGroup","keydown",function(a){if(a.isKey(Webr.util.Key.TAB)){cr.findInHandler(a,".cs.permittedGroup",[]).makeHidden();
var b=cr.findInHandler(a,".addComment",[]);window.setTimeout(function(){b.focus()},20);return!1}if(a.isShift(Webr.util.Key.TAB))return cr.findInHandler(a,".cs.permittedGroup",[]).makeHidden(),b=cr.findInHandler(a,".commentTextarea",[]),window.setTimeout(function(){b.focus()},20),!1});cr.ach(b,"addComment","keydown",function(a){if(a.isShift(Webr.util.Key.TAB))return cr.findInHandler(a,".cs.permittedGroup",[]).makeVisible(),!1;if(a.isKey(Webr.util.Key.TAB)&&(a=cr.findInHandler(a,".closeCommentsLink",
[])))return a.focus(),!1});cr.ach(b,"commentTextarea","keydown",function(a){if(a.isKey(Webr.util.Key.ESC))return cr.findInHandler(a,".commentTextarea",[]).focus(),!1});cr.ach(b,"newComment","keydown",function(a){if((Webr.util.Key.isApplicable(a,SmartUIShortCuts.Submit)||Webr.util.Key.isApplicable(a,SmartUIShortCuts.Submit_Mac))&&!Webr.component.panel.Dialog.isModalVisible())return $(cr.findInHandler(a,".addComment",[])).click(),!1});cr.ach(b,"addComment","click",function(a){var b=cr.findInHandler(a,
".commentTextarea",[]).value,c=cr.findInHandler(a,".markdownToggle",[]),c=c&&c.checked;""!=jQuery.trim(b)||c?(cr.findInHandler(a,".addComment",[]).disabled=!0,cr.findInHandler(a,".commentTextarea",[]).detachWatcher(),cr.serverMethodCallInHandler(a,".methodCall_save",{__param__text:b,__param__usesMarkdown:c},{preventDoubleSubmit:!0}),a=cr.findInHandler(a,".cs.permittedGroup",[]),a.reset&&a.reset()):Webr.event.PopupMessage.ERROR.show(l10n('Please enter some text'),4E3)});cr.ash(b,
"commentTextarea","valuechange",{preventDoubleSubmit:!0,hideLoadingPopup:!0});cr.ash(b,"markdownToggle","click",null);cr.forEach(b,"commentTextarea",function(){this.attachWatcher(!1)});cr.forEach(b,"commentTextarea",function(){Webr.component.ElementExpander.addExpandListener(this,200)});regmn(b,"addFileMenu")});

cr.setTemplateBind("Attachment",function(b){cr.ach(b,"deleteAttachment","click",function(a){var b=$(a.target);window.confirm(l10n('Delete attachment \'{0}\'?',b.attr("name")||b.parent().attr("name")))&&cr.serverMethodCallInHandler(a,".methodCall_deleteAttachment",{},{preventDoubleSubmit:!0})});cr.ach(b,"zoom","click",function(a){if((Webr.util.Util.isMac?!0===a.metaKey:!0===a.ctrlKey)||a.which&&1!==a.which)return a.preventDefault(),window.open($(cr.findInHandler(a,".zoom",[])).attr("href"),
"_blank"),!0});cr.ach(b,"zoom","mouseover",function(a){$(cr.findInHandler(a,".at.preview",[])).mouseover()});cr.ach(b,"zoom","mouseout",function(a){$(cr.findInHandler(a,".at.preview",[])).mouseout()});cr.ash(b,"editAttachment","click",null)});

charisma.smartui.AttachFileRest=function(a,b,c){this.dropZone=document.createElement("div");"draggable"in this.dropZone||"ondragstart"in this.dropZone&&"ondrop"in this.dropZone?(this.selector=a,this.onUpload="boolean"===typeof b?this.showInlineSuccessMessage:b,this.bind()):delete this.dropZone;this.windowId=c};
charisma.smartui.AttachFileRest.prototype.bind=function(){var a=this;$(document).delegate(a.getSelector(),"dragover",function(b){a.stopEvent(b);!0===a.dragFromInside||(!a.isDataIsFile(b.originalEvent)||a.issueExpanded($(this)))||(a.init(),b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="copy",b.originalEvent.dataTransfer.dropEffect="copy"),a.target=$(this),a.setIssue($(this)),a.show($(this)))});$(document).delegate("a.attach-lnk","dragstart",function(b){if(b.originalEvent.dataTransfer&&
b.originalEvent.dataTransfer.constructor){a.dragFromInside=!0;var c=this.href.split("/_persistent/").pop().split("?file")[0],d=common.util.Util.getMimeType(c.split(".").pop());d&&(c=d+":"+c+":"+viewImageAttachment.baseUrl+$(b.target).attr("href"),b.originalEvent.dataTransfer.setData("DownloadURL",c))}}).delegate("a.attach-lnk","dragend",function(){a.dragFromInside=!1})};
charisma.smartui.AttachFileRest.prototype.getSelector=function(){return this.selector&&"#"===this.selector.charAt(0)?this.selector.replace(/\./g,"\\."):this.selector};
charisma.smartui.AttachFileRest.prototype.init=function(){if(!this.input){this.createDomElements();this.restClient=new Webr.rest.Client(Webr.Event.rootUrl,Ajax.ajaxSettings());var a=this;this.input.change(function(){0<this.files[0].size?a.attach():Webr.event.PopupMessage.ERROR.show(l10n('Can not attach a zero-size file'))});this.dropZone.bind("dragleave drop",function(){a.hide()})}};
charisma.smartui.AttachFileRest.prototype.isDataIsFile=function(a){var b=!1;jQuery.each(a.dataTransfer.types,function(a,d){"files"===d.toLowerCase()&&(b=!0)});return b};
charisma.smartui.AttachFileRest.prototype.createDomElements=function(){var a="__"+(new Date).getTime();this.dropZone=$(this.dropZone);this.dropZone.addClass("upload__drop-area");this.input=$(document.createElement("input")).attr("id",a).attr("type","file").attr("multiple",!0).addClass("upload__input");this.dropZone.append(this.input);$(document.body).append(this.dropZone);this.delta=parseInt(this.dropZone.css("borderTopWidth"))};
charisma.smartui.AttachFileRest.prototype.setIssue=function(a){this.issue=void 0!=commonController.newIssueId?commonController.newIssueId:a.attr("iid")};charisma.smartui.AttachFileRest.prototype.stopEvent=function(a){a.preventDefault();a.stopPropagation();return!1};charisma.smartui.AttachFileRest.prototype.show=function(a){this.dropZone.css(this.getPositionAndDimention(a));this.dropZone.show()};charisma.smartui.AttachFileRest.prototype.hide=function(){this.dropZone.hide()};
charisma.smartui.AttachFileRest.prototype.getPositionAndDimention=function(a){var b,c=this.getDimentionFix(a);"number"===typeof c?(b=a.offset(),a={width:a.outerWidth()-this.delta,height:c-2*this.delta,top:b.top,left:b.left-2+parseInt(a.css("marginLeft"))}):(b=c.pos,a={width:c.dim.width-this.delta,height:c.dim.height-2*this.delta,top:b.top,left:b.left-this.delta});return a};
charisma.smartui.AttachFileRest.prototype.getDimentionFix=function(a){if(a.hasClass("sb-task")){var a=a.children(),b=a.first(),c={width:b.outerWidth(),height:0},b=b.offset();a.each(function(){c.height+=$(this).outerHeight()});return{pos:b,dim:c}}return a.outerHeight()};charisma.smartui.AttachFileRest.prototype.issueExpanded=function(a){return commonController.issuesList&&0<a.children(".issue-comments").length};
charisma.smartui.AttachFileRest.prototype.attach=function(){var a=this;this.restClient.resource({p:["issue"]}).method("post",{p:["issue",null,"attachment"]}).call({p:["issue",a.issue,"attachment"],q:{window_id:a.windowId},f:$(a.input),u:{success:function(){a.onUpload(a.issue,void 0!=commonController.newIssueId);a.input.val("")},error:function(b){a.showError(b)},timeout:18E4}})};
charisma.smartui.AttachFileRest.prototype.showError=function(a){Webr.event.PopupMessage.ERROR.show(l10n('Can not attach file: {0}',a))};
charisma.smartui.AttachFileRest.prototype.showInlineSuccessMessage=function(){if(this.target){this.inlineMessage||(this.inlineMessage=$(document.createElement("div")).text(l10n('Successfully attached')).addClass("upload__inline-msg"),$(document.body).append(this.inlineMessage),this.delta={width:this.inlineMessage.outerWidth(),height:this.inlineMessage.outerHeight()});var a=this.target.offset();this.inlineMessage.css({top:a.top+this.target.height()/2-this.delta.height/
2,left:a.left+this.target.width()/2-this.delta.width/2}).fadeIn(300).delay(1200).fadeOut(60)}};charisma.smartui.AttachFileToComment=function(a,b,c){charisma.smartui.AttachFileToComment.superclass.constructor.call(this,a,b);this.commentDraftGetter=c};var F=new Function;F.prototype=charisma.smartui.AttachFileRest.prototype;charisma.smartui.AttachFileToComment.prototype=new F;charisma.smartui.AttachFileToComment.prototype.constructor=charisma.smartui.AttachFileToComment;
charisma.smartui.AttachFileToComment.superclass=charisma.smartui.AttachFileRest.prototype;charisma.smartui.AttachFileToComment.prototype.attach=function(){this.commentDraftGetter()};
charisma.smartui.AttachFileToComment.prototype.doAttach=function(a){var b=this;(new Webr.rest.Client(Webr.Event.rootUrl,Ajax.ajaxSettings())).resource({p:["comment"]}).method("post",{p:["comment",null,null,"attachment"]}).call({p:["comment",b.issue,a,"attachment"],f:$(b.input),u:{success:function(){b.onUpload();b.input.val("")},error:function(a){b.showError(a)},timeout:18E4}})};
charisma.smartui.AttachFileToComment.prototype.setIssue=function(){this.issue=("TEXTAREA"!==this.target[0].tagName?this.target.children("textarea").first():this.target).closest(".issueContainer").attr("iid")||$(".issueContainer").attr("iid")};charisma.smartui.AttachFileToComment.prototype.issueExpanded=function(){return!1};
charisma.smartui.AttachFileToComment.getInstance=function(a,b,c){charisma.smartui.AttachFileToComment.INSTANCE||(charisma.smartui.AttachFileToComment.INSTANCE=[]);if(a){if(charisma.smartui.AttachFileToComment.INSTANCE[a])return charisma.smartui.AttachFileToComment.INSTANCE[a];charisma.smartui.AttachFileToComment.INSTANCE[a]=new charisma.smartui.AttachFileToComment(a,b,c)}};

charisma.RestMethods=function(a,b){this.wfId=a;this.textField=b};charisma.RestMethods.prototype.suggest=function(a){$(this.textField).is(":visible")&&charisma.RestMethods.showSearchSuggest(this.textField,this.wfId,this.textField.value,a?a:this.textField.getCaretPosition())};charisma.RestMethods.prototype.underline=function(a){$(this.textField).is(":visible")&&charisma.RestMethods.showSearchUnderline(this.textField,this.wfId,this.textField.value,a)};
charisma.RestMethods.prototype.underlineAndSuggest=function(a,b){$(this.textField).is(":visible")&&charisma.RestMethods.showSearchUnderlineAndSuggest(this.textField,this.wfId,this.textField.value,a?a:this.textField.getCaretPosition(),b)};charisma.RestMethods.bind=function(a,b){a._rest=b;b.textField=a;return b};charisma.RestMethods.$=function(a){return a._rest};charisma.RestMethods.id=function(a){a=$(a);return a.attr("id")+"-"+a.attr("name")};
charisma.RestMethods.showSearchSuggest=function(a,b,c,d){$(a).is(":visible")&&charisma.Rest.get("search/suggest",{wfId:b,query:c,caret:d},function(b){$(a).is(":visible")&&(b.items=b.items||[],a.suggest(b))},charisma.RestMethods.id(a))};charisma.RestMethods.showSearchUnderline=function(a,b,c,d){$(a).is(":visible")&&charisma.Rest.get("search/underline",{wfId:b,query:c},function(b){$(a).is(":visible")&&a.underline(b.query,b.ranges,d)},charisma.RestMethods.id(a))};
charisma.RestMethods.showSearchUnderlineAndSuggest=function(a,b,c,d,e){$(a).is(":visible")&&charisma.Rest.get("search/underlineAndSuggest",{wfId:b,query:c,caret:d},function(b){if($(a).is(":visible")){var c=b.underline,b=b.suggest;b.items=b.items||[];a.suggest(b);a.underline(c.query,c.ranges,e)}},charisma.RestMethods.id(a))};
charisma.RestMethods.showCommandSuggest=function(a,b,c,d,e,g,h){$(a).is(":visible")&&charisma.Rest.get("command/suggest",{folder:b,issueIds:e,query:g,noIssuesContext:h,command:c,caret:d},function(b){$(a).is(":visible")&&(b.items=b.items||[],a.suggest(b))},charisma.RestMethods.id(a))};
charisma.RestMethods.showCommandUnderline=function(a,b,c,d,e,g){$(a).is(":visible")&&charisma.Rest.get("command/underline",{folder:b,issueIds:d,query:e,noIssuesContext:g,command:c},function(b){$(a).is(":visible")&&a.underline(b.query,b.ranges,5)},charisma.RestMethods.id(a))};
charisma.RestMethods.showCommandUnderlineAndSuggest=function(a,b,c,d,e,g,h){$(a).is(":visible")&&charisma.Rest.get("command/underlineAndSuggest",{folder:b,issueIds:e,query:g,noIssuesContext:h,command:c,caret:d},function(b){if($(a).is(":visible")){var c=b.underline,b=b.suggest;b.items=b.items||[];a.suggest(b);a.underline(c.query,c.ranges,5)}},charisma.RestMethods.id(a))};
charisma.RestMethods.showCommandUnderlineAndSuggestAndCommands=function(a,b,c,d,e,g,h,f){$(a).is(":visible")&&charisma.Rest.get("command/underlineAndSuggestAndCommands",{folder:b,issueIds:e,query:g,noIssuesContext:f,command:c,caret:d},function(b){if($(a).is(":visible")){var c=b.underline,d=b.suggest,b=b.commands?b.commands.command:[];d.items=d.items||[];a.suggest(d);a.underline(c.query,c.ranges,5);h.children().remove();c=h.data("show_quick_fixes");for(d=0;d<b.length;d+=1){var e=b[d];h.append('<li class="'+
(e.error?"error":"normal lightText")+'"><span>'+e.desc+"</span></li>");if(e.error&&e.quickFixes&&c)for(var g in e.quickFixes){var f=e.quickFixes[g],i=f.message;f.params.valueToAdd?(i=i.replace("{{valueToAdd}}",'<span class="valueToAdd"></span>'),i="<span>"+i+"</span>",i=$("<span>"+i+"</span>"),i.find(".valueToAdd").text(f.params.valueToAdd)):i=$("<span>"+i+"</span>");var j=$('<li class="quickFix"></li>');j.append(i);h.append(j);h.append('<li class="quickFix"><button class="ring-btn">'+f.buttonMessage+
"</button></li>");h.find("button").last().data("quick_fix_id",f.id)}}}},charisma.RestMethods.id(a))};charisma.RestMethods.moveIssue=function(a,b,c,d,e,g){charisma.RestMethods.post("folder/"+a+"/moveIssue",{moved:b,leading:c,query:d,orderExpected:e},function(a){g(a)})};charisma.RestMethods.resetIssuePosition=function(a,b,c){charisma.RestMethods.post("folder/"+a+"/resetIssuePosition",{issue:b},function(a){c(a)})};charisma.RestMethods.get=function(a,b,c){charisma.RestMethods.request("GET",a,b,c)};
charisma.RestMethods.post=function(a,b,c){charisma.RestMethods.request("POST",a,b,c)};
charisma.RestMethods.request=function(a,b,c,d){b=charisma.Rest.url(b);if(c){var e,g=!0,h;for(h in c){var f=c[h];void 0!=f&&(null!=f&&!("string"==typeof f&&""==f)&&!("boolean"==typeof f&&!1==f))&&(g?(e="?",g=!1):e+="&",e+=encodeURIComponent(h)+"="+encodeURIComponent(f))}void 0!=e&&(b+=e)}c={headers:{Accept:"application/json"},handlerUrl:b,hideLoadingPopup:!0,collectFileElements:!1,collectFormElements:!1,pollInterval:10,processRecentOnly:!0,listeners:[new charisma.RestRequestListener(d)],method:a};
"POST"==a&&(c.headers=c.headers||{},c.headers["Content-Type"]=c.headers["Content-Type"]||"application/x-www-form-urlencoded");Webr.Event.send(c)};charisma.CommandRest=function(a,b,c,d,e){charisma.CommandRest.superclass.constructor.call(this,a);this.issueIds=b;this.query=c;this.description=d?$(d):null;this.noIssuesContext=!0==e?!0:!1};var F=new Function;F.prototype=charisma.RestMethods.prototype;charisma.CommandRest.prototype=new F;charisma.CommandRest.prototype.constructor=charisma.CommandRest;
charisma.CommandRest.superclass=charisma.RestMethods.prototype;charisma.CommandRest.prototype.suggest=function(a){charisma.RestMethods.showCommandSuggest(this.textField,this.wfId,this.textField.value,a?a:this.textField.getCaretPosition(),this.issueIds,this.query,this.noIssuesContext)};charisma.CommandRest.prototype.underline=function(){charisma.RestMethods.showCommandUnderline(this.textField,this.wfId,this.textField.value,this.issueIds,this.query,this.noIssuesContext)};
charisma.CommandRest.prototype.underlineAndSuggest=function(a){null!=this.description?charisma.RestMethods.showCommandUnderlineAndSuggestAndCommands(this.textField,this.wfId,this.textField.value,a?a:this.textField.getCaretPosition(),this.issueIds,this.query,this.description,this.noIssuesContext):charisma.RestMethods.showCommandUnderlineAndSuggest(this.textField,this.wfId,this.textField.value,a?a:this.textField.getCaretPosition(),this.issueIds,this.query,this.noIssuesContext)};

charisma.smartui.AddCfValueCombo=function(){};charisma.smartui.AddCfValueCombo.makeAdditionalContentWrapper=function(){return $(document.createElement("div")).addClass("fieldComboAction")};charisma.smartui.AddCfValueCombo.makeAddValueLink=function(a,b){var c=$(document.createElement("div")).addClass("fieldComboAction__add-value").html(l10n('Add value'));c.click(function(){var e=a.renderer.getInputElement().val();a.blur();b(e)});return c};
charisma.smartui.AddCfValueCombo.makeSearchHint=function(){return $(document.createElement("div")).addClass("fieldComboAction__hint").html(l10n('(type to find more items)'))};charisma.smartui.AddCfValueCombo.onAnchorClick=function(a,b){a.one("click",function(){setTimeout(b,10)})};
charisma.smartui.AddCfValueCombo.initAddValueLink=function(a,b,c){charisma.smartui.AddCfValueCombo.onAnchorClick(a,function(){var a=charisma.smartui.AddCfValueCombo.makeAdditionalContentWrapper(),d=b();a.append(charisma.smartui.AddCfValueCombo.makeAddValueLink(d,c));d.renderer.addExtraContent(a)})};
charisma.smartui.AddCfValueCombo.initAddValueLinkWithSearchHint=function(a,b,c){charisma.smartui.AddCfValueCombo.onAnchorClick(a,function(){var a=charisma.smartui.AddCfValueCombo.makeAdditionalContentWrapper(),d=b();a.append(charisma.smartui.AddCfValueCombo.makeSearchHint());a.append(charisma.smartui.AddCfValueCombo.makeAddValueLink(d,c));d.renderer.addExtraContent(a)})};

cr.setTemplateBind("WatchFolderMenu",function(a){cr.ash(a,"pin","click",{preventDoubleSubmit:!0});cr.ash(a,"showSettingsDialog","click",{preventDoubleSubmit:!0})});

var common={util:{}};

charisma.smartui.TextSelector=function(){};charisma.smartui.TextSelector.SELECTED_NOTHING=0;charisma.smartui.TextSelector.SELECTED_FIRST=1;charisma.smartui.TextSelector.SELECTED_FIRST_AND_SECOND=2;charisma.smartui.TextSelector.state=charisma.smartui.TextSelector.SELECTED_NOTHING;
charisma.smartui.TextSelector.clearTextSelection=function(){if(charisma.smartui.TextSelector.state!==charisma.smartui.TextSelector.SELECTED_NOTHING)try{Webr.util.Util.isIE?document.selection.empty():window.getSelection().removeAllRanges()}catch(b){}charisma.smartui.TextSelector.state=charisma.smartui.TextSelector.SELECTED_NOTHING};
charisma.smartui.TextSelector.setSelection=function(b){var c=Webr.util.Util.isIE?document.body.createTextRange():document.createRange(),a=Webr.util.Util.isIE?document.selection:window.getSelection();Webr.util.Util.isIE?(c.moveToElementText(b),charisma.smartui.TextSelector.state!=charisma.smartui.TextSelector.SELECTED_FIRST?c.select():(b=a.createRange(),b.setEndPoint("EndToEnd",c),b.select())):(charisma.smartui.TextSelector.state!=charisma.smartui.TextSelector.SELECTED_FIRST?c.selectNodeContents(b):
(c.setStartBefore(a.focusNode),c.setEndAfter(b)),a.removeAllRanges(),a.addRange(c))};
charisma.smartui.TextSelector.selectText=function(b,c){var a,d;switch(charisma.smartui.TextSelector.state){case charisma.smartui.TextSelector.SELECTED_NOTHING:a=b;d=charisma.smartui.TextSelector.SELECTED_FIRST;break;case charisma.smartui.TextSelector.SELECTED_FIRST:a=c;d=charisma.smartui.TextSelector.SELECTED_FIRST_AND_SECOND;break;case charisma.smartui.TextSelector.SELECTED_FIRST_AND_SECOND:charisma.smartui.TextSelector.clearTextSelection(),a=null}null!=a&&charisma.smartui.TextSelector.state!=charisma.smartui.TextSelector.SELECTED_FIRST_AND_SECOND?
charisma.smartui.TextSelector.setSelection(a):d=charisma.smartui.TextSelector.SELECTED_NOTHING;charisma.smartui.TextSelector.state=d};

var FileUtils={},FileUtils=function(){};FileUtils.SIZE_UNITS="B KB MB GB TB PB EB ZB YB".split(" ");FileUtils.getFileSizePresentation=function(a){for(var b=0;1024<=a;)a/=1024,++b;return a.toFixed(1)+" "+FileUtils.SIZE_UNITS[b]};

var attachFileDialog=null,AttachFileDialog={},AttachFileDialog=function(a,b,d){AttachFileDialog.superclass.constructor.call(this,"#attachFileDialog",null);attachFileDialog=this;this.isIE9=d;this.restClient=new Webr.rest.Client(Webr.Event.rootUrl,Ajax.ajaxSettings());this.windowId=a;this.maxFileSize=b},F=new Function;F.prototype=charisma.BaseDialog.prototype;AttachFileDialog.prototype=new F;AttachFileDialog.prototype.constructor=AttachFileDialog;AttachFileDialog.superclass=charisma.BaseDialog.prototype;
AttachFileDialog.prototype.initialize=function(){var a=this;this.fileInput=$("#attachFiles");this.fileInput.change(function(){if(a.setupPermittedGroup)a.updateFilesList();else{var b=$(this).prop("files");a.currentFileSize=0;if(b)for(var f=0;f<b.length;++f)a.currentFileSize+=b[f].size;a.attachFile()}a.isIE9&&a.fileInput.setVisible(!1)});$("#selectAttachmentsBtn").click(function(b){b.preventDefault();b.stopImmediatePropagation();a.fileInput.click()});var b=charisma.ComboBoxHelper.create(this.permittedGroupController,
"",{load:function(b){return b.loadValuesFromRest(a.restClient.resource({p:["issueInternal"]}).method("get",{p:["issueInternal","visibilityGroups",a.issueId]}).getUrl())},multi:!0,dataParser:function(a){var b=[];if(jQuery.isArray(a))for(var c=0;c<a.length;++c){var g=a[c],h={text:g.name,id:c+"",empty:!1};h.entityId=g.entityId;b.push(h)}return b}});this.permittedGroupControllerHelper=b;b.insideDialog=!0};
AttachFileDialog.prototype.show=function(a,b,d,f){this.resetState();this.returnFocus=a;this.setupPermittedGroup=b;this.issueId=d;this.commentId=f;this.fileInput||this.initialize();!b&&!this.isIE9?this.fileInput.click():(this.selectAttachmentsBtn.setVisible(!0),$("#attachFileDialog .jt-panel-title").text(l10n('Attach file to ')+this.getIssueId(!0)),this.isIE9&&!b&&this.permittedGroupFieldset.setVisible(!1),this.loadDlg())};
AttachFileDialog.prototype.loadDlg=function(){AttachFileDialog.superclass.show.call(this);this.updateFilesList()};
AttachFileDialog.prototype.updateFilesList=function(){this.files||(this.files=[]);var a=this.fileInput.prop("files");if(a){for(var b=0;b<a.length;++b)this.files.push(a[b]);for(b=0;b<a.length;++b){var d=a[b].name,f=FileUtils.getFileSizePresentation(a[b].size),c="<li";this.maxFileSize<a[b].size&&(c+=" class='yt-uploaded-file-list_error' title='"+AttachFileDialog.FILE_SIZE_EXCEEDED+"'");c+="><span class='yt-uploaded-file-list__name' style='text-overflow:ellipsis'>"+d+"</span><span class='yt-uploaded-file-list__size'>&nbsp;"+
f+"</span>";window.FormData&&(c+="<span class='yt-uploaded-file-list__remove ring-font-icon ring-font-icon_close'></span>");c+="</li>";this.filesList.append(c)}var g=this;0<a.length&&($(".yt-uploaded-file-list__remove").click(function(a){a.stopImmediatePropagation();a.preventDefault();$(this).parent().addClass("yt-uploaded-file-list_removed");g.updateTotalFileSize()}),this.updateTotalFileSize())}else if(d=this.fileInput.val())this.filesList.append("<li><span class='yt-uploaded-file-list__name' style='text-overflow:ellipsis'>"+
d.split("\\").pop()+"</span></li>"),this.files=[this.fileInput];0<this.files.length&&(window.FormData?this.selectAttachmentsBtn.text(l10n('Add more files')):this.selectAttachmentsBtn.setVisible(!1))};
AttachFileDialog.prototype.updateTotalFileSize=function(){this.currentFileSize=0;for(var a=this.filesList.children(),b=0;b<this.files.length;++b)$(a[b]).hasClass("yt-uploaded-file-list_removed")||(this.currentFileSize+=this.files[b].size);this.fileSizeLimit||(this.fileSizeLimit=$(".sb-add-filesize-limit_attach-dialog"));this.fileSizeLimit.text(l10n('Current upload size: ')+FileUtils.getFileSizePresentation(this.currentFileSize)+" ("+l10n('maximum: ')+
FileUtils.getFileSizePresentation(this.maxFileSize)+")");this.currentFileSize>this.maxFileSize?this.fileSizeLimit.addClass("sb-add-filesize-limit_attach-dialog_error"):this.fileSizeLimit.removeClass("sb-add-filesize-limit_attach-dialog_error")};
AttachFileDialog.prototype.init=function(a){AttachFileDialog.superclass.init.call(this,a);this.filesList=$("#selectedFiles");this.permittedGroupController=$("#attachmentVisibleForGroup");this.selectAttachmentsBtn=$("#selectAttachmentsBtn");this.permittedGroupFieldset=$(".yt-attach-file-dialog__permitted-group-fieldset")};AttachFileDialog.prototype.close=function(){this.resetState();AttachFileDialog.superclass.close.call(this)};AttachFileDialog.prototype.submit=function(){this.attachFile()};
AttachFileDialog.prototype.onSuccess=function(a,b){this.toggleView(!1);Webr.event.PopupMessage.SYSTEM.show(l10n('File(s) attached to')+" "+(b?l10n('comment'):a),3E3);this.fileInput.val("");this.close()};
AttachFileDialog.prototype.onError=function(a){this.toggleView(!1);var b=a.statusText;void 0===b&&("string"===typeof a?b=a:(console.warn("Attach file error: ",a),b=l10n('unexpected end of file. This error may be caused by an explicit limit set on reverse proxy. Refer to the corresponding documentation on how to increase it.')));Webr.event.PopupMessage.ERROR.show(l10n('Cannot attach file:')+" "+b)};
AttachFileDialog.prototype.toggleView=function(a){a?($("#attachFileProgress").addClass("sb-invisible"),$("#attachFileProgress").removeClass("sb-invisible")):($("#attachFileProgress").removeClass("sb-invisible"),$("#attachFileProgress").addClass("sb-invisible"))};
AttachFileDialog.prototype.attachFile=function(a){a||(a=this.fileInput);if(a.val())if(this.currentFileSize>this.maxFileSize)Webr.event.PopupMessage.SYSTEM.show(AttachFileDialog.FILE_SIZE_EXCEEDED,5E3);else{var b=this;b.toggleView(!0);var d=b.getIssueId(),f=b.getIssueId(!0),c,g=!1;if(this.setupPermittedGroup){c=b.permittedGroupControllerHelper.combo;var h=c.currentCheckedIds,j=c.dataList?c.dataList.options:[];c="";for(var i=!0,e=0;e<j.length;e+=1){var k=j[e].option;if(0<=h.indexOf(k.id)){i?i=!1:c+=
",";var l=k.entityId;l?(c+=l,g=!0):c+=k.text}}}else c=void 0;if(this.setupPermittedGroup&&window.FormData){a=new FormData;h=!1;j=this.filesList.children();for(e=0;e<this.files.length;++e)i=$(j[e]),!i.hasClass("yt-uploaded-file-list_removed")&&!i.hasClass("yt-uploaded-file-list_error")&&(a.append(this.files[e].name,this.files[e]),h=!0);if(!h){this.close();return}}Webr.event.PopupMessage.SYSTEM.show('Loading');d={commentId:b.commentId,issueId:d,error:function(a){Webr.event.PopupMessage.SYSTEM.hide();
b.onError(a)},success:function(){b.onSuccess(f,b.commentId)},content:a,windowId:b.windowId};g?d.permittedGroupIds=c:d.permittedGroup=c;AttachActionsUtils.saveFiles(d)}else this.close()};
AttachFileDialog.prototype.resetState=function(){if(this.fileInput){this.commentId=this.issueId=null;this.fileInput.replaceWith(this.fileInput=this.fileInput.clone(!0));this.fileInput.setVisible(!0);this.files=[];this.selectAttachmentsBtn.text(l10n('Select files'));var a=this.permittedGroupControllerHelper.combo;a.dataList&&(a.defaultCheckedIds=[],a.reset(),a.hideOptions());this.permittedGroupFieldset.setVisible(!0);this.filesList.html("");this.updateTotalFileSize()}};
AttachFileDialog.prototype.fixDrag=function(){this.dialog.panel.draggable({handle:".jt-panel-title"})};AttachFileDialog.prototype.getIssueId=function(a){return this.issueId?a&&this.issueId==commonController.getFocusedIssueId()?commonController.getFocusedPresentationIssueId():this.issueId:a?commonController.getFocusedPresentationIssueId():commonController.getFocusedIssueId()};AttachFileDialog.FILE_SIZE_EXCEEDED=l10n('File size exceeded max upload size');

charisma.smartui.CommandDialogConfig=function(){};charisma.smartui.CommandDialogConfig.prototype.updateComment=function(){};charisma.smartui.CommandDialogConfig.prototype.show=function(){};charisma.smartui.CommandDialogConfig.prototype.submit=function(){};charisma.smartui.CommandDialogConfig.prototype.repeatLastCommand=function(){};charisma.smartui.CommandDialogConfig.prototype.invokedByKeyboardCallback=function(){};
charisma.smartui.CommandDialog=function(a){charisma.smartui.CommandDialog.superclass.constructor.call(this);this.catchLetters=!0;this.modalDiv=null;this.visible=!1;this.pageControler=commonController;this.pageControler.setCommandDialog(this);this.config=a;this.initSuggest();this.initCommandField();this.initCommentTextArea();this.initDocumentHandlers();this.initDialog()};var F=new Function;F.prototype=Webr.component.Component.prototype;charisma.smartui.CommandDialog.prototype=new F;
charisma.smartui.CommandDialog.prototype.constructor=charisma.smartui.CommandDialog;charisma.smartui.CommandDialog.superclass=Webr.component.Component.prototype;
charisma.smartui.CommandDialog.prototype.initSuggest=function(){this.suggestComponent=this.config.commandText.getSuggest({baseSuggestOffset:-5,propogateImplicitComplete:!0});this.suggestComponent.getInputPosition=function(){var a=$(this.input).offset();a.top-=$(document).scrollTop();return a};this.suggestComponent.suggestDivPosition="fixed";this.suggestComponent.addListener(this)};
charisma.smartui.CommandDialog.prototype.initDialog=function(){var a=this;this.config.dialog.panel.keyrepeatable(function(b){return b.isCtrl(Webr.util.Key.ENTER)||b.isMeta(Webr.util.Key.ENTER)?(a.config.applyButton.click(),!1):Webr.util.Key.isApplicable(b,SmartUIShortCuts.SilentApplyCommand)?(a.config.silentApplyButton.click(),!1):b.isKey(Webr.util.Key.ESC)?(a.hide(),!1):!0})};
charisma.smartui.CommandDialog.prototype.initCommandField=function(){var a=this;$(this.config.commandText).bind("valuechange",function(b,c){a.underlineAndSuggest(c.caretPos)}).bind("caretmove",function(b,c){a.suggest(c.caretPos)});this.config.commandText.attachWatcher(!1);this.config.commandText.setWatcherDelay(150)};
charisma.smartui.CommandDialog.prototype.initCommentTextArea=function(){var a=this;$(this.config.commentTextArea).bind("valuechange",function(){a.serverUpdateComment()});$(this.config.markdownToggler).bind("change",function(){a.serverUpdateComment()});this.config.commentTextArea.attachWatcher(!1)};charisma.smartui.CommandDialog.prototype.initDocumentHandlers=function(){var a=this;$(document).keypress(function(b){return a.noFocusElementKeyPressed(b)});$(document).keydown(function(b){return a.documentKeyDownHandler(b)})};
charisma.smartui.CommandDialog.prototype.setCatchLetters=function(a){this.catchLetters=a};charisma.smartui.CommandDialog.prototype.documentKeyDownHandler=function(a){return Webr.component.panel.Dialog.isModalVisible()||charisma.smartui.ViewImageAttachment.isVisible()?!0:Webr.util.Key.isApplicable(a,SmartUIShortCuts.CommandDialog)?(this.show(""),a.targetIsInput()&&(this.returnFocus=$(a.target)),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.RepeatLastCommand)?(this.repeatLastCommand(),!1):!0};
charisma.smartui.CommandDialog.prototype.noFocusElementKeyPressed=function(a){if(a.targetIsInput()||Webr.component.panel.Dialog.isModalVisible()||charisma.smartui.ViewImageAttachment.isVisible()||!this.catchLetters)return!0;if(!a.altKey&&(!a.ctrlKey&&!a.metaKey)&&(a=this.getCharPressedForKeyPressedEvent(a),null!=a)){this.show(a);try{this.config.invokedByKeyboardCallback()}catch(b){}return!1}return!0};
charisma.smartui.CommandDialog.prototype.getCharPressedForKeyPressedEvent=function(a){a=a.originalEvent;a=void 0!=a.which?a.which:a.keyCode;return 0<a&&63E3>a&&(48<=a&&57>=a||65<=a)?String.fromCharCode(a):null};
charisma.smartui.CommandDialog.prototype.show=function(a,b){this.returnFocus=null;this.pageControler.getFocusedIssueId()&&(charisma.RestMethods.bind(this.config.commandText,new charisma.CommandRest(null,this.getPackagedIssueIds(),this.getQuery(),this.config.commandsDescription)),!1!==this.config.show(this.pageControler.getFocusedIssueId())&&(this.pageControler.searchField&&this.pageControler.searchField.getSuggest().hide(),this.config.dialog.setVisible(!0),this.config.commentTextArea.value="",this.config.commandText.value=
a,this.config.commandText.fireValueChange(a.length,a),!0==b?this.config.commentTextArea.focus():(this.config.commandText.setCaretPosition(a.length),$(this.config.commandText).focus())))};charisma.smartui.CommandDialog.prototype.execute=function(a){this.pageControler.getFocusedIssueId()&&this.config.submit(this.pageControler.getFocusedIssueId(),a)};charisma.smartui.CommandDialog.prototype.repeatLastCommand=function(){this.pageControler.getFocusedIssueId()&&this.config.repeatLastCommand(this.pageControler.getFocusedIssueId())};
charisma.smartui.CommandDialog.prototype.serverProcessedShow=function(){this.visible=!0};charisma.smartui.CommandDialog.prototype.setSampleText=function(a){this.config.commandText.focus();this.config.commandText.value=a;this.config.commandText.setCaretPosition(a.length)};
charisma.smartui.CommandDialog.prototype.hide=function(){this.suggestComponent.blur();this.config.commandText.blur();this.config.commentTextArea.blur();this.fire(function(a){a.commandsHide()});this.config.dialog.setVisible(!1);this.config.commandText.value="";this.config.commandText.underline("",null);this.visible=!1;this.returnFocus&&this.returnFocus.focus()};charisma.smartui.CommandDialog.prototype.serverUpdateComment=function(){var a=this;this.callOnVisible(function(){a.config.updateComment(a.config.commentTextArea.value)})};
charisma.smartui.CommandDialog.prototype.allFoundIssuesAreSelected=function(){return this.pageControler.allFoundIssuesAreSelected()};charisma.smartui.CommandDialog.prototype.getQuery=function(){return this.allFoundIssuesAreSelected()?this.pageControler.getQuery():null};charisma.smartui.CommandDialog.prototype.getPackagedIssueIds=function(){if(this.allFoundIssuesAreSelected())return null;var a=this.pageControler.getSelectedIssuesIds();return charisma.smartui.IssueId.encodeIssueIds(a)};
charisma.smartui.CommandDialog.prototype.keyDown=function(a,b){if(a==this.suggestComponent){if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.ForceComplete))return this.suggest(),!1;if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.ApplyCommand))return this.config.applyButton.click(),!1;if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.SilentApplyCommand))return this.config.silentApplyButton.click(),!1}return!0};charisma.smartui.CommandDialog.prototype.isVisible=function(){return this.visible};
charisma.smartui.CommandDialog.prototype.suggest=function(a){var b=this;this.callOnVisible(function(){charisma.RestMethods.$(b.config.commandText).suggest(a)})};charisma.smartui.CommandDialog.prototype.underlineAndSuggest=function(a){var b=this;this.callOnVisible(function(){charisma.RestMethods.$(b.config.commandText).underlineAndSuggest(a)})};charisma.smartui.CommandDialog.prototype.callOnVisible=function(a){var b=this;this.repeat(function(){b.isVisible()&&a();return b.isVisible()},150,10)};
charisma.smartui.CommandDialog.prototype.repeat=function(a,b,c){var d=window.setInterval(function(){(a()||0>(c-=1))&&window.clearTimeout(d)},b)};charisma.smartui.CommandsListener=function(){charisma.smartui.CommandsListener.superclass.constructor.call(this)};F=new Function;F.prototype=Webr.component.ComponentListener.prototype;charisma.smartui.CommandsListener.prototype=new F;charisma.smartui.CommandsListener.prototype.constructor=charisma.smartui.CommandsListener;
charisma.smartui.CommandsListener.superclass=Webr.component.ComponentListener.prototype;charisma.smartui.CommandsListener.prototype.commandsHide=function(){};var commandDialog;

Webr.component.Debug=function(){};Webr.component.Debug.div=null;Webr.component.Debug.ta=null;Webr.component.Debug.DEBUG=!0;Webr.component.Debug.info=function(a){Webr.component.Debug.consoleMethod("log",Webr.component.Debug.getTime()+": "+a)};Webr.component.Debug.trace=function(a){info(a)};Webr.component.Debug.getTime=function(){var a=new Date;return[a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()].join(":")};
Webr.component.Debug.time=function(a){Webr.component.Debug.consoleMethod("time",a)};Webr.component.Debug.timeEnd=function(a){Webr.component.Debug.consoleMethod("timeEnd",a)};Webr.component.Debug.profile=function(){Webr.component.Debug.consoleMethod("profile")};Webr.component.Debug.profileEnd=function(){Webr.component.Debug.consoleMethod("profileEnd")};Webr.component.Debug.group=function(){Webr.component.Debug.consoleMethod("group")};Webr.component.Debug.groupEnd=function(){Webr.component.Debug.consoleMethod("groupEnd")};
Webr.component.Debug.dumpStackTrace=function(){Webr.component.Debug.group("Stack trace");var a=arguments.callee;if(a)for(a=a.caller;a;)Webr.component.Debug.info(a.toString()),a=a.caller;Webr.component.Debug.groupEnd()};Webr.component.Debug.consoleMethod=function(a,b){if(Webr.component.Debug.DEBUG&&window.console&&window.console[a])window.console[a](b)};
var info=Webr.component.Debug.info,trace=Webr.component.Debug.trace,time=Webr.component.Debug.time,timeEnd=Webr.component.Debug.timeEnd,profile=Webr.component.Debug.profile,profileEnd=Webr.component.Debug.profileEnd;

cr.setTemplateBind("UserWatchFolders",function(a){cr.ash(a,"userWatchFoldersCombo","change",null);cr.ash(a,"userWatchFoldersCombo","Load",null)});

charisma.smartui.SidebarToggler=function(b,a,c){this.toggler=b?"#"+b.id.replaceAll("\\.","\\."):null;this.content=a?"#"+a.id.replaceAll("\\.","\\."):null;this.sidebar=c?"#"+c.id.replaceAll("\\.","\\."):null};charisma.smartui.SidebarToggler.prototype.setVisible=function(b){if(this.sidebar){var a=$(this.sidebar);b?a.show():a.hide();$(this.content).toggleClass("noSidebar");$(this.toggler).children().toggleClass("sidebar_collapsed")}};
charisma.smartui.SidebarToggler.prototype.updatePositionAndHeight=function(b){if(Webr.util.Util.isIE&&7>=Webr.util.Util.browserVersion){var a=$(this.toggler);a.hide();var c=b.offset();a.css({left:c.left-22,top:c.top,height:b.height()});a.fadeIn("slow")}};charisma.smartui.SidebarToggler.prototype.click=function(){$(this.toggler).click()};

Webr.rest.FileUploader=function(a,b){this.successListeners=[];this.errorListeners=[];this.completeListeners=[];this.fileInput=a;this.settings=b;b.success&&this.successListeners.push(b.success);b.error&&this.errorListeners.push(b.error);b.complete&&this.completeListeners.push(b.complete)};Webr.rest.FileUploader.prototype.abort=function(a){this.aborted=!0;this.unwrapHiddenForm();a&&this.clearTimeout()};Webr.rest.FileUploader.prototype.complete=function(a){this.completeListeners.push(a)};
Webr.rest.FileUploader.prototype.fireSuccess=function(a,b){for(var c=0;c<this.successListeners.length;++c)this.successListeners[c](a,b);for(c=0;c<this.completeListeners.length;++c)this.completeListeners[c](!0,a,b)};Webr.rest.FileUploader.prototype.fireError=function(a){for(var b=0;b<this.errorListeners.length;++b)this.errorListeners[b](a);for(b=0;b<this.completeListeners.length;++b)this.completeListeners[b](!1,a)};
Webr.rest.FileUploader.prototype.handleResponse=function(a){var b=null;(b=a.contentWindow?a.contentWindow.document:a.contentDocument||window.frames[a.id].document)?(a=$(b).children("error"),0<a.length?(b=a.text(),this.unwrapHiddenForm(),this.fireError(b)):(b=$(b).children(),this.unwrapHiddenForm(),this.fireSuccess("Success",b))):(this.unwrapHiddenForm(),this.fireError("File upload failed: no response returned"))};
Webr.rest.FileUploader.prototype.wrapHiddenForm=function(){var a="fileUploader-iframe-"+Math.round((new Date).getTime()/1E3),b=this;$("body").after('<iframe width="0" height="0" style="display:none;" name="'+a+'" id="'+a+'"/>');$("#"+a).load(function(){b.aborted||(b.clearTimeout(),b.handleResponse(this))});this.fileInput.wrap(function(){return'<form action="'+b.settings.url+'" method="POST" enctype="multipart/form-data" target="'+a+'" />'}).after(function(){var a="",d;for(d in b.settings.params)a+=
'<input type="hidden" name="'+d+'" value="'+b.settings.params[d]+'" />';return a})};Webr.rest.FileUploader.prototype.unwrapHiddenForm=function(){this.fileInput.siblings().remove();this.fileInput.unwrap()};Webr.rest.FileUploader.prototype.setTimeout=function(){if(0<this.settings.timeout){var a=this;this.timeoutHandler=window.setTimeout(function(){a.timeoutHandler=null;a.abort(!0);a.fireError("Upload request timeout")},this.settings.timeout)}};
Webr.rest.FileUploader.prototype.clearTimeout=function(){this.timeoutHandler&&window.clearTimeout(this.timeoutHandler)};Webr.rest.FileUploader.upload=function(a,b){var c=new Webr.rest.FileUploader(a,b);if(""==a.val())c.fireError("File input is empty");else return a.attr("name")||a.attr("name",a.attr("id")),c.wrapHiddenForm(),a.parent("form").submit(),c.setTimeout(),c};var UploadSettings={},UploadSettings=function(){};UploadSettings.prototype.success=function(){};UploadSettings.prototype.error=function(){};
UploadSettings.prototype.complete=function(){};

cr.setTemplateBind("StringBasedValueEditor",function(b){cr.ach(b,"value","keydown",function(a){return a.handleEnterEsc(function(){cr.serverMethodCallInHandler(a,".methodCall_submit",{})},function(){cr.findInHandler(a,".contentInlineEditor",[]).abort()})});cr.ach(b,"contentInlineEditor","createeditor",function(a){$(cr.findInHandler(a,".issueField",[])).addClass("cf-edit");$(cr.findInHandler(a,".issueField",[])).parent().addClass("cf-visible")});cr.ach(b,"contentInlineEditor","abort",function(a){$(cr.findInHandler(a,
".issueField",[])).removeClass("cf-edit");$(cr.findInHandler(a,".issueField",[])).parent().removeClass("cf-visible")});cr.ach(b,"contentInlineEditor","submit",function(a){$(cr.findInHandler(a,".issueField",[])).removeClass("cf-edit");$(cr.findInHandler(a,".issueField",[])).parent().removeClass("cf-visible")});cr.ash(b,"contentInlineEditor","createeditor",{preventDoubleSubmit:!0});cr.ash(b,"contentInlineEditor","submit",{preventDoubleSubmit:!0});regic(b,"contentInlineEditor")});

Webr.util.CheckBrowser=function(){};Webr.util.CheckBrowser.check=function(){!Webr.util.Util.isKnownBrowser()&&!Webr.util.Util.isSearchBot?window.location.href=Webr.util.CheckBrowser.ERROR_URL:Webr.util.Util.isIE&&7>Webr.util.Util.browserVersion&&!Webr.util.CheckBrowser.isChromeFrameInstalled()&&(window.location.href=Webr.util.CheckBrowser.CHROME_FRAME_INSTALL_URL)};
Webr.util.CheckBrowser.isChromeFrameInstalled=function(){var a=navigator.userAgent.toLowerCase();if(0<=a.indexOf("chromeframe")||0<=a.indexOf("x-clock"))return!0;if(void 0!=typeof window.ActiveXObject)try{if(new ActiveXObject("ChromeTab.ChromeFrame"))return!0}catch(b){}};

charisma.Idea=function(a){this.sequential=Webr.util.Util.isWebkit;this.id="id_"+Math.random();this.connects=this.successes=this.responseCount=0;this.requests=[];this.index=0;for(var b=this,c=function(a){b.done(a)},d=charisma.Idea.START_PORT;d<=charisma.Idea.END_PORT;++d){var e=new charisma.XSS("r_"+this.id+"_"+d,charisma.Idea.HOST+":"+d+"/"+a);e.oncomplete=c;this.requests[d-charisma.Idea.START_PORT]=e;this.sequential||e.go()}this.sequential&&this.go()};
charisma.Idea.prototype.go=function(){var a=this.index;this.index=a+1;this.requests[a].go()};charisma.Idea.prototype.done=function(a){this._processingResponse=!0;this._timeout&&window.clearTimeout(this._timeout);this.responseCount+=1;0<=a&&(this.connects+=1);1<=a&&(this.successes+=1);if(this.responseCount>=this.requests.length){var b=this;this._timeout=window.setTimeout(function(){b.notify()},2E3)}this._processingResponse=!1;this.sequential&&this.index<this.requests.length&&this.go()};
charisma.Idea.prototype.notify=function(){if(!this._processingResponse&&0==this.successes){var a=0==this.connects?l10n('No IDE responded'):l10n('Can\'t find requested file');Webr.event.PopupMessage.SYSTEM.show(a)}};charisma.Idea.START_PORT=63330;charisma.Idea.END_PORT=charisma.Idea.START_PORT+9;charisma.Idea.HOST="http://127.0.0.1";charisma.Idea.openFile=function(a,b){var c="file?file="+a;b&&(c+="&line="+b);new charisma.Idea(c)};
charisma.Idea.layoutWikiLinks=function(){$(".dsLink").each(function(){var a=$(this);a.removeClass("dsLink");var b=a.attr("txt"),c=a.attr("lne");a.click(function(){charisma.Idea.openFile(b,c)});a.addClass("dsLinkEnabled");a.attr("title",l10n('Open in IDE'))})};charisma.XSS=function(a,b){this.id=a;this.url=b+"&noCache="+(new Date).getTime()};charisma.XSS.prototype.done=function(){if(this.oncomplete)this.oncomplete(this.status)};
charisma.XSS.prototype.doneR=function(){var a=this.transport.readyState;if(Webr.util.Util.isOpera||"loaded"==a||"complete"==a)this.status=1,this.doneL()};charisma.XSS.prototype.doneL=function(){this.status=2==this.transport.width?1:0;this.done()};charisma.XSS.prototype.doneE=function(){this.status=-1;this.done()};
charisma.XSS.prototype.go=function(){(this.transport=$("#"+this.id).get(0))&&this.dispose();this.transport=new Image;var a=$(this.transport);a.attr("id",this.id);var b=this;Webr.util.Util.isOpera||Webr.util.Util.isIE?a.bind("readystatechange",function(){b.doneR()}):a.bind("load",function(){b.doneL()});a.bind("error",function(){b.doneE()});a.bind("abort",function(){b.doneE()});a.css("display: none");this.transport.src=this.url};
charisma.XSS.prototype.dispose=function(){var a=$(this.transport);Webr.util.Util.isOpera||Webr.util.Util.isIE?a.bind("readystatechange",function(){}):a.bind("load",function(){});a.bind("error",function(){});a.bind("abort",function(){})};

var ToolbarGuard={},ToolbarGuard=function(a){var b=this;this.toolbar=a;this.componentName=a.container.attr("id").substring(3);info("ToolbarGuard["+this.componentName+"] created");this.refreshListener={beforeRefresh:function(a){b.onTemplateRefresh(a)}};Webr.event.RefreshCommandProcessor.addListener(this.refreshListener)};
ToolbarGuard.prototype.onTemplateRefresh=function(a){0==this.componentName.indexOf(a)&&(info("ToolbarGuard["+this.componentName+"] destroyed"),this.componentName=null,Webr.event.RefreshCommandProcessor.removeListener(this.refreshListener),this.refreshListener=null,this.toolbar.guard=null,this.finalize())};ToolbarGuard.prototype.finalize=function(){charisma.smartui.Toolbar.destroy(this.toolbar)};ToolbarGuard.get=function(a){a.guard||(a.guard=new ToolbarGuard(a));return a.guard};

cr.setTemplateBind("IssueWorkItem",function(a){cr.ash(a,"vwi.wic.editWorkItem","click",null)});

cr.setTemplateBind("IssueList",function(b){cr.ach(b,"resetCustomOrder","mouseover",function(a){$(cr.findInHandler(a,".resetCustomOrderTip",[])).show()});cr.ach(b,"resetCustomOrder","mouseout",function(a){$(cr.findInHandler(a,".resetCustomOrderTip",[])).hide()});cr.ach(b,"resetCustomOrder","click",function(a){window.confirm("Reset custom order?")&&cr.serverMethodCallInHandler(a,".methodCall_resetCustomOrder",{},{preventDoubleSubmit:!0})})});

cr.setTemplateBind("BottomToolbar",function(b){cr.ach(b,"firstPageLink","click",function(a){"javascript:void(0)"!=cr.findInHandler(a,".firstPageLink",[]).href&&Webr.Event.redirect(cr.findInHandler(a,".firstPageLink",[]).href+"&f="+issues.issuesList.focused);return!1});cr.ach(b,"prevPageLink","click",function(a){"javascript:void(0)"!=cr.findInHandler(a,".prevPageLink",[]).href&&Webr.Event.redirect(cr.findInHandler(a,".prevPageLink",[]).href+"&f="+issues.issuesList.focused);return!1});cr.ach(b,"nextPageLink",
"click",function(a){"javascript:void(0)"!=cr.findInHandler(a,".nextPageLink",[]).href&&Webr.Event.redirect(cr.findInHandler(a,".nextPageLink",[]).href+"&f="+issues.issuesList.focused);return!1});cr.ach(b,"lastPageLink","click",function(a){"javascript:void(0)"!=cr.findInHandler(a,".lastPageLink",[]).href&&Webr.Event.redirect(cr.findInHandler(a,".lastPageLink",[]).href+"&f="+issues.issuesList.focused);return!1});cr.ach(b,"pageLink","click",function(a){"javascript:void(0)"!=cr.findInHandler(a,".pageLink",
[cr.getTarget(a).getAttribute("p0")]).href&&Webr.Event.redirect(cr.findInHandler(a,".pageLink",[cr.getTarget(a).getAttribute("p0")]).href+"&f="+issues.issuesList.focused);return!1});cr.ash(b,"issuesPerPage","change",null);cr.ash(b,"lastPageLink","click",null)});

cr.setTemplateBind("SortPanel",function(a){cr.ash(a,"unsortedLink","click",null);cr.ash(a,"sortedLink","click",null);cr.ash(a,"add","click",null);cr.ash(a,"remove","click",null);cr.ash(a,"removeCustomOrder","click",null);cr.ash(a,"addCustomOrder","click",null);cr.ash(a,"customOrderSorted","click",null);cr.ash(a,"customOrderUnsorted","click",null)});

charisma.smartui.CommentItem=function(a,b){this.commentsList=a;var c=$(b);this.element=c.get(0);var d=this;this.initAttachmentsBlock();c.click(function(a){!Webr.util.Util.targetIsInput(a)&&!$(a.target).hasClass("comment-reply")&&d.commentsList.mousedown(d);return!0})};
charisma.smartui.CommentItem.prototype.collect=function(){time("collect comment elements");var a=$(this.element);this.attachmentsExpanded=a.attr("exp")?!0:!1;this.permaLink=a.find("a.permalink");this.editComment=a.find("a.commentEdit").get(0);this.deleteComment=a.find("a.commentDelete").get(0);timeEnd("collect comment elements")};charisma.smartui.CommentItem.prototype.initAttachmentsBlock=function(){this.attachmentsExpanded=!1;this.attachmentToggler=$(this.element).find("span.comment-change-title")};
charisma.smartui.CommentItem.prototype.edit=function(){this.editComment&&$(this.editComment).click()};charisma.smartui.CommentItem.prototype.del=function(){this.deleteComment&&$(this.deleteComment).click()};charisma.smartui.CommentItem.prototype.refresh=function(a){this.collect();this.select();$(this.element)[a?"removeClass":"addClass"]("comment-selected")};
charisma.smartui.CommentItem.prototype.select=function(a,b){this.addClass(this.commentsList.selectedItemClass);a||this.permaLink.focus();b||$(this.element).scrollTo(this.commentsList.scrollable?this.commentsList.mainDivElement:void 0,this.commentsList.getToolbarIndents())};charisma.smartui.CommentItem.prototype.unselect=function(){this.removeClass(this.commentsList.selectedItemClass)};charisma.smartui.CommentItem.prototype.addClass=function(a){$(this.element).addClass(a)};
charisma.smartui.CommentItem.prototype.removeClass=function(a){$(this.element).removeClass(a)};charisma.smartui.CommentItem.prototype.toggleAttachments=function(){this.attachmentToggler.get(0)&&this.attachmentToggler.click()};charisma.smartui.CommentItem.prototype.toggleState=function(){this.attachmentsExpanded=!this.attachmentsExpanded};

charisma.smartui.PropertySelector=function(){this.inited=this.currentShown=!1;var a=this;this.handler=function(b){return b.isKey(Webr.util.Key.TAB)?(b.preventDefault(),a.select(++a.current)):b.isShift(Webr.util.Key.TAB)?(b.preventDefault(),a.select(--a.current)):a.submit(b)};this.listener={afterRefresh:function(b,c){c.getAttribute("id")==a.rootId&&(a.refreshRoot(),a.update())},beforeRefresh:function(b,c){c==a.root.get(0)&&a.unbind();a.finalize(b)}}};
charisma.smartui.PropertySelector.prototype.finalize=function(a){this.newIssueTemplateRootId&&0==this.newIssueTemplateRootId.indexOf(a)&&(Webr.event.RefreshCommandProcessor.removeListener(this.listener),this.unbind(),this.deinit())};charisma.smartui.PropertySelector.prototype.init=function(a,b,c,d,e){info("Initing...");this.newIssueTemplateRootId=b.substring(3);this.rootId=a;this.refreshRoot();this.head=c;this.tail=d;this.submit=e;this.inited=!0};
charisma.smartui.PropertySelector.prototype.deinit=function(){this.inited&&(info("Deiniting..."),delete this.head,delete this.tail,delete this.submit,this.inited=!1)};charisma.smartui.PropertySelector.prototype.unbind=function(){this.inited&&(info("Unbinding..."),this.combos.unbind("ShowOptions").unbind("HideOptions"),delete this.combos,delete this.fields,Webr.util.Util.removeKeyHandler(this.root,this.handler))};
charisma.smartui.PropertySelector.prototype.update=function(){if(this.inited&&(info("Updating current selected..."),this.current&&!(0>this.current||this.current>=charisma.smartui.PropertySelector.LAST)))this.currentShown?this.show(this.current):this.focus(this.current)};
charisma.smartui.PropertySelector.prototype.bind=function(){var a=this;this.fields=this.combos.prev();this.combos.bind("ShowOptions",function(){a.onShowCombo(a.combos.index(this))}).bind("HideOptions",function(){a.onHideCombo(a.combos.index(this))});Webr.util.Util.addKeyHandler(this.root,this.handler)};
charisma.smartui.PropertySelector.prototype.refreshRoot=function(){info("Refreshing root...");var a=document.getElementById(this.rootId);a&&(this.root=$(a),Webr.event.RefreshCommandProcessor.addListener(this.listener),this.combos=this.root.find("div.combobox"),a=this.combos.length,0>=a?charisma.smartui.PropertySelector.LAST=0:(charisma.smartui.PropertySelector.LAST=a,this.bind()))};
charisma.smartui.PropertySelector.prototype.select=function(a){if(this.inited){if(0>a)return this.current=0,info("Calling head..."),this.head(),!0;if(a>=charisma.smartui.PropertySelector.LAST)return this.current=charisma.smartui.PropertySelector.LAST,info("Calling tail..."),this.tail(),!0;this.current=a;var b=this;window.setTimeout(function(){b.show(a)},250);return!0}return!1};
charisma.smartui.PropertySelector.prototype.onShowCombo=function(a){info("Shown "+a);this.current=a;this.currentShown=!0;Webr.util.Util.addKeyHandler(this.combos.eq(a).data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE).renderer.getMainElement(),this.handler)};
charisma.smartui.PropertySelector.prototype.onHideCombo=function(a){info("Hidden "+a);this.currentShown=!1;Webr.util.Util.removeKeyHandler(this.combos.eq(a).data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE).renderer.getMainElement(),this.handler)};charisma.smartui.PropertySelector.prototype.show=function(a){info("Click on "+a);this.currentShown=!0;this.fields.eq(a).trigger("click")};charisma.smartui.PropertySelector.prototype.focus=function(a){info("Focusing on "+a);this.fields.eq(a).children().eq(0).focus()};
charisma.smartui.PropertySelector._INSTANCE_=null;charisma.smartui.PropertySelector.LAST=0;charisma.smartui.PropertySelector.getInstance=function(){null==charisma.smartui.PropertySelector._INSTANCE_&&(charisma.smartui.PropertySelector._INSTANCE_=new charisma.smartui.PropertySelector);return charisma.smartui.PropertySelector._INSTANCE_};

cr.setTemplateBind("IndexedColorPicker",function(a){cr.ach(a,"color","click",function(a){$(".colorPicker").find(".selectedTag").removeClass("selectedTag");$(cr.findInHandler(a,".color",[cr.getTarget(a).getAttribute("p0")])).parent().addClass("selectedTag")});cr.ash(a,"color","click",null)});

cr.setTemplateBind("UpdateAttachmentDialog",function(b){cr.ach(b,"cancelUpdFile","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ach(b,"updateAttachmentDlg","keydown",function(a){return a.handleEnterEsc(function(){cr.serverMethodCallInHandler(a,".methodCall_update",{})},function(){cr.findInHandler(a,".newName",[]).blur();cr.serverMethodCallInHandler(a,".methodCall_cancel",{})})});cr.ach(b,"closeUpdateAttachmentDlg","click",function(a){cr.serverMethodCallInHandler(a,
".methodCall_cancel",{})});cr.ach(b,"deleteFile","click",function(a){window.confirm(l10n('Delete attachment \'{0}\'?',$(cr.findInHandler(a,".deleteFile",[])).attr("name")))&&cr.serverMethodCallInHandler(a,".methodCall_remove",{})});cr.ash(b,"updateFile","click",{collectFileElements:!0});regdlg(b,"updateAttachmentDlg")});

cr.setTemplateBind("CommandsToolbarPart",function(a){cr.ach(a,"commandItem","click",function(a){commandDialog.show(cr.getTarget(a).getAttribute("p0"),!1)});cr.ach(a,"addCommentCommandItem","click",function(a){commandDialog.show(cr.getTarget(a).getAttribute("p0"),!0)});cr.ach(a,"commandItemInstant","click",function(a){commandDialog.execute(cr.getTarget(a).getAttribute("p0"))});cr.ach(a,"repeatLastCommand","click",function(){commandDialog.repeatLastCommand()});regmn(a,"assignMenu");regmn(a,"commandMenu")});

cr.setTemplateBind("Link",function(a){cr.ach(a,"tl","mouseover",function(a){cr.findInHandler(a,".pu",[]).load(function(){cr.serverMethodCallInHandler(a,".methodCall_showPreview",{})},cr.findInHandler(a,".tl",[]))});cr.ash(a,"delete","click",null);regPC(a,"pu")});

cr.setTemplateBind("ShortcutsDialog",function(b){cr.ach(b,"shorcutsDlgClose","click",function(a){cr.findInHandler(a,".shorcutsDlg",[]).setVisible(!1)});cr.ach(b,"closeBtn","click",function(a){cr.findInHandler(a,".shorcutsDlg",[]).setVisible(!1)});cr.ach(b,"shorcutsDlg","keydown",function(a){return a.handleEnterEsc(function(){return!1},function(){cr.findInHandler(a,".shorcutsDlg",[]).setVisible(!1)})});regdlg(b,"shorcutsDlg")});

cr.setTemplateBind("SimilarIssuePanel",function(a){cr.ash(a,"similarTicker","tick",{preventDoubleSubmit:!0,collectFormElements:!1,hideLoadingPopup:!0});cr.ash(a,"toggler","click",null);regT(a,"similarTicker")});

Webr.event.ParamBuilder=function(){this.buffer=[]};Webr.event.ParamBuilder.prototype.addParamPair=function(b,a){if(a instanceof Array)for(var c=0;c<a.length;++c)this.addParamPair(b,a[c]);else c="",void 0!=a&&(c=encodeURIComponent(a)),this.buffer.push(encodeURIComponent(b),"=",c,"&")};Webr.event.ParamBuilder.prototype.addParamObject=function(b){if(b)for(var a in b)this.addParamPair(a,b[a])};Webr.event.ParamBuilder.prototype.toParameterString=function(){return this.buffer.join("")};

Webr.event.FormBuilder=function(a){Webr.event.FormBuilder.superclass.constructor.call(this);this.form=a};var F=new Function;F.prototype=Webr.event.ParamBuilder.prototype;Webr.event.FormBuilder.prototype=new F;Webr.event.FormBuilder.prototype.constructor=Webr.event.FormBuilder;Webr.event.FormBuilder.superclass=Webr.event.ParamBuilder.prototype;
Webr.event.FormBuilder.prototype.addParamPair=function(a,c){if(c instanceof Array)for(var b=0;b<c.length;++b)this.addParamPair(a,c[b]);else b=document.createElement("input"),b.name=a,b.value=c,b.type="hidden",this.form.appendChild(b)};Webr.event.FormBuilder.prototype.addParamObject=function(a){if(a)for(var c in a)this.addParamPair(c,a[c])};

cr.setTemplateBind("WorkItemContent",function(a){cr.ach(a,"deleteWorkItem","click",function(a){window.confirm(l10n('Are you sure?'))&&cr.serverMethodCallInHandler(a,".methodCall_delete",{})})});

cr.setTemplateBind("Searches",function(a){cr.ash(a,"countIssuesTicker","tick",{collectFormElements:!1,preventDoubleSubmit:!0,hideLoadingPopup:!0});cr.ash(a,"tsb.createTag","click",null);regT(a,"countIssuesTicker")});

var imageToolDialog,ImageToolDlg={},ImageToolDlg=function(){ImageToolDlg.superclass.constructor.call(this,"#imageToolDialog",null);imageToolDialog=this},F=new Function;F.prototype=charisma.BaseDialog.prototype;ImageToolDlg.prototype=new F;ImageToolDlg.prototype.constructor=ImageToolDlg;ImageToolDlg.superclass=charisma.BaseDialog.prototype;
ImageToolDlg.prototype.onkeyrepeatable=function(a){return Webr.util.Key.isApplicable(a,SuggestKeyStrokes.Close)?(-1===(a.target?a.target.className:"").indexOf("ring-js-shortcuts")&&this.close(),!1):ImageToolDlg.superclass.onkeyrepeatable.call(this,a)};ImageToolDlg.prototype.show=function(a){ImageToolDlg.superclass.show.call(this);this.dialog.centerDialog();this.loadImageTool(a)};
ImageToolDlg.prototype.loadImageTool=function(a){this.imageIsAlreadyAttached=a.imageIsAlreadyAttached;var c=this,e={onSave:function(b,e,d){c.close(!0);var f=(d.permittedUsers||[]).map(function(a){return a.id}).join(","),d=(d.permittedGroups||[]).map(function(a){return a.id}).join(",");a.onSave(b,e,d,f)},issueId:a.issue,attachmentId:a.attachment,imageIsAlreadyAttached:a.imageIsAlreadyAttached,name:a.imageName,imageWidth:a.width,imageHeight:a.height,imageSrc:a.imageSrc};$(".image-tool-loader").remove();
var b=window.mpsToAngularBridgeBootstrapImageToolApp("imageToolDialog");b.$apply(function(){b.imageToolWrapperConfig=e});this.rootScope=b};
ImageToolDlg.prototype.close=function(a){void 0==a&&(a=this.imageIsAlreadyAttached,this.imageIsAlreadyAttached=void 0);var c=window.ImageTool&&ImageTool.PANEL;if(!c||a||window.confirm(l10n('Are you sure you want to exit without attaching image?')))c&&ImageTool.PANEL.clear(),ImageToolDlg.superclass.close.call(this);this.rootScope&&this.rootScope.$applyAsync(function(){this.rootScope.imageToolWrapperConfig=null}.bind(this))};ImageToolDlg.prototype.submit=function(){ImageTool.PANEL&&ImageTool.PANEL.save()};
var ImageToolDlgSettings={},ImageToolDlgSettings=function(){};

charisma.smartui.SortController=function(a){this.issueMoved=!1;this.list=$(a.content);this.sortData=a.sortData;this.listLeftPos=this.list.offset().left;this.hintMsg=[l10n('Remove from order'),this.sortData.subtaskTypeName+" ",l10n('Move to root level'),"",l10n('Sorry, can\'t move issue within a hierarchy')];this.hierarchy=this.sortData.isHierarchyMode();this.init()};
charisma.smartui.SortController.prototype.init=function(){var a=this;this.resetSortable();this.list.sortable({items:"div."+charisma.smartui.SortController.SORT_ITEM,cursor:"move",tolerance:"pointer",handle:".drag-control",placeholder:"sort-placeholder",start:function(b,c){a.start(c)},sort:function(b,c){a.moveHint(c)},beforeStop:function(b,c){a.beforeStop(c)}})};charisma.smartui.SortController.prototype.resetSortable=function(){this.list.is(":ui-sortable")&&this.list.sortable("destroy")};
charisma.smartui.SortController.prototype.start=function(a){var b=issues.issuesList;b&&(b.unselectIssue(b.getFocusedIssue()),b.selectIssue(a.item,!0));b=a.item.prev("div."+charisma.smartui.SortController.SORT_ITEM);this.prevIssue=b.get(0)?b:this.getPrevIssue(a);this.initDrag(a)};
charisma.smartui.SortController.prototype.initDrag=function(a){a.placeholder.height(a.helper.outerHeight());this.toggleHelperView(a.helper,!0);this.hierarchy&&this.isRoot(a.helper)&&(a.helper.data(charisma.smartui.SortController.CHILDREN,a.helper.nextUntil(".h-level-0").not(".sort-placeholder")),this.toggleHierarchy(a.helper,!1))};charisma.smartui.SortController.prototype.beforeStop=function(a){this.toggleHelperView(a.helper,!1);this.processPosition(a)};
charisma.smartui.SortController.prototype.toggleHelperView=function(a,b){b?a.addClass("sort-helper"):a.removeClass("sort-helper")};charisma.smartui.SortController.prototype.toggleHierarchy=function(a,b){var c=a.data(charisma.smartui.SortController.CHILDREN);c&&(b?c.addClass(charisma.smartui.SortController.SORT_ITEM).show():c.removeClass(charisma.smartui.SortController.SORT_ITEM).hide(),this.list.sortable("refresh"))};
charisma.smartui.SortController.prototype.isUnrelatedRoot=function(a){(a=a.hasClass("issue-unrelated")&&a.hasClass("h-level-0"))&&Webr.event.PopupMessage.SYSTEM.show(l10n('Issue you\'ve dragged doesn\'t match search criteria and can\'t be re-ordered.'));return a};
charisma.smartui.SortController.prototype.moveIssue=function(a){var b=this.getPrevIssue(a);if(b.attr("id")==this.prevIssue.attr("id")&&this.prevIssue.get(0)||this.isUnrelatedRoot(a.helper))this.list.sortable("cancel"),this.toggleHierarchy(a.helper,!0);else{var c=this,d=this.sortData,f=this.getVisibleId(b);null==f&&(f=d.lastIssueOnPrevPage);null!=f&&-1!=d.brandNewIssues.indexOf(","+f+",")&&(f=null);var g=a.item,b=""==d.wfId?d.queryString:"",h=this.getVisibleId(g);charisma.RestMethods.moveIssue(d.wfId?
d.wfId:"<fake>",h,f,b,d.orderExpected,function(b){var e=b.messageCode;if(e==200){c.issueMoved=true;d.wfId=b.id;d.orderExpected=true;if((b=a.helper.data(charisma.smartui.SortController.CHILDREN))&&b.length>0)c.sortData.refreshList(true);else{$(".marked").length<1&&c.customOrderCreatedCallBack();c.markIssues(g)}c.list.find(".reset-order").removeClass("hidden");trace("Issue "+h+(f?" placed after "+f:" placed first"))}else{c.list.sortable("cancel");if(e==406){d.wfId=b.id;Webr.event.PopupMessage.SYSTEM.show(l10n('Issues custom order has been removed. {0}Refresh?{1}',
"<a id='refreshIssues' href='javascript:void(0)'>","</a>"));$("#refreshIssues").click(function(){window.location.reload()})}else if(e==500)Webr.event.PopupMessage.ERROR.show(l10n('Internal server error. {0}',b.params[0].value));else if(e==418||e==400)Webr.event.PopupMessage.ERROR.show(b.params[0].value);else if(e==403){e=l10n('You don\'t have permissions to reorder issues in {0}. ',b.params[0].value);e=b.params[1].value=="user"?e+l10n('Only project leader with login {0} is allowed to do it.',
b.params[2].value):e+l10n('Only members of {0} are  allowed to do it.',b.params[2].value);Webr.event.PopupMessage.SYSTEM.show(e)}else e==404&&Webr.event.PopupMessage.ERROR.show(l10n('Could not find a context under id {0}',d.wfId))}})}};charisma.smartui.SortController.prototype.markIssues=function(a){a.addClass("marked");a.prevAll("."+charisma.smartui.SortController.SORT_ITEM).addClass("marked")};
charisma.smartui.SortController.prototype.removeIssue=function(a){var b=this.sortData,c=this.getVisibleId(a);charisma.RestMethods.resetIssuePosition(b.wfId,c,function(d){200!=d.messageCode?Webr.event.PopupMessage.ERROR.show(l10n('Error')):(a.remove(),trace("Issue "+c+" removed from the custom order"),b.refreshList(!0))})};
charisma.smartui.SortController.prototype.linkCommand=function(a,b,c){this.getVisibleId(a.helper);a=this.getVisibleId(b);commandDialog.execute(c?commonController.removeCommand+" "+this.sortData.subtaskTypeName+" "+a:this.sortData.subtaskTypeName+" "+a)};
charisma.smartui.SortController.prototype.processPosition=function(a){var b;1==this.state&&(b=this.getPrevIssue(a),b.get(0)||(this.state=3));switch(this.state){case 0:trace("Issue "+this.getVisibleId(a.item)+" was removed from the custom order");this.removeIssue(a.item);break;case 1:this.linkCommand(a,b);a.helper.addClass(this.getHierarchyCss(b));break;case 2:this.linkCommand(a,this.getParentIssue(a.helper),!0);break;case 3:this.moveIssue(a);break;case null:this.toggleHierarchy(a.helper,!0),this.list.sortable("cancel")}this.hideHint()};
charisma.smartui.SortController.prototype.getParentIssue=function(a){if(this.hierarchy&&!this.isRoot(a)){a.prevAll(".issueContainer");for(var a=this.getIssueLevel(a),b=this.prevIssue;this.getIssueLevel(b)>=a;)b=b.prev();return b}return a.prev()};charisma.smartui.SortController.prototype.getIssueLevel=function(a){return parseInt(this.getHierarchyCss(a,!0).split("h-level-").pop())};
charisma.smartui.SortController.prototype.getState=function(a){var b=a.offset.left-this.listLeftPos;return-20>b?this.hierarchy?this.isRoot(a.helper)?a.helper.hasClass("marked")?0:this.isRoot(this.getNextIssue(a))?3:1:2:a.helper.hasClass("marked")?0:3:44<b?this.hierarchy&&this.getPrevIssue(a).get(0)?1:3:44>=b&&-20<b?this.hierarchy?this.isRoot(a.helper)?(a=this.getNextIssue(a),!a.get(0)||this.isRoot(a)?3:1):a.helper.parent().ancestorOf(a.placeholder)?1:2:3:null};
charisma.smartui.SortController.prototype.createHint=function(a){if(this.hint){if(this.hint.parent()!=a.helper){var b=this.hint.clone();a.append(b);this.hint.remove();this.hint=b}}else this.hint=$(document.createElement("div")).html("<span></span><span class='sort-action-arrow'></span>").addClass("sort-action-icon"),a.append(this.hint)};charisma.smartui.SortController.prototype.hideHint=function(){this.hint&&this.hint.hide()};
charisma.smartui.SortController.prototype.showHint=function(a,b,c){this.hintMsg[b]&&(this.createHint(a.helper),c=c.get(0)?this.getVisibleId(c):"",a=this.hint.children().first(),c=this.hintMsg[b]+c,0==b&&(c="\u2190 "+c),a.text(c),this.hint.show())};charisma.smartui.SortController.prototype.resetUI=function(a){this.resetPlaceholder(a.placeholder);this.hideHint()};charisma.smartui.SortController.prototype.resetPlaceholder=function(a){a.attr("class","sort-placeholder");return a};
charisma.smartui.SortController.prototype.moveHint=function(a){this.state=this.getState(a);var b=1==this.state?this.getPrevIssue(a):$();this.resetUI(a);this.showHint(a,this.state,b);switch(this.state){case null:this.updatePlaceholderIndent(a,b,!0);break;case 0:a.placeholder.addClass("remove-from-order");break;case 1:this.updatePlaceholderIndent(a,b)}};charisma.smartui.SortController.prototype.updatePlaceholderIndent=function(a,b,c){this.hierarchy&&b.get(0)&&(b=this.getHierarchyCss(b,c?!0:!1),this.resetPlaceholder(a.placeholder).addClass(b))};
charisma.smartui.SortController.prototype.getVisibleId=function(a){return!a.get(0)?null:a.find("a.issueIdAnchor").first().text()};charisma.smartui.SortController.prototype.getPrevIssue=function(a){var b=a.placeholder.prevAll(".issueContainer:visible"),c=b.first();return c.get(0)?this.sameIssue(c,a)?b.eq(1):c:$()};charisma.smartui.SortController.prototype.getNextIssue=function(a){var b=a.placeholder.nextAll(".issueContainer:visible"),c=b.first();return c.get(0)?this.sameIssue(c,a)?b.eq(1):c:$()};
charisma.smartui.SortController.prototype.sameIssue=function(a,b){return a.attr("id")==b.helper.attr("id")};charisma.smartui.SortController.prototype.getHierarchyCss=function(a,b){var c=a.attr("class").match(/h-level-[0-9]+/);if(null==c)return"h-level-1";if(b)return c[0];var c=c[0].split("-"),d=parseInt(c.pop());d<this.sortData.maxLevel&&++d;return c.join("-")+"-"+d};charisma.smartui.SortController.prototype.isRoot=function(a){return a.hasClass("h-level-0")};
charisma.smartui.SortController.SORT_ITEM="sort-item";charisma.smartui.SortController.CHILDREN="children";charisma.smartui.SortData=function(){};

cr.setTemplateBind("Issues",function(a){cr.ach(a,"c.il.sbToggler","click",function(a){charisma.smartui.Filter.hideFilterPopup();cr.serverMethodCallInHandler(a,".methodCall_toggleSidebar",{})});cr.ash(a,"c.tb.printIssues","click",null);cr.ash(a,"sp.sl.sortByLink","click",null);cr.ash(a,"sp.sl.sortByUpdated","click",null);cr.ash(a,"sp.sl.sortByRelevance","click",null);cr.ash(a,"c.tb.viewSettings","click",null);cr.ash(a,"sp.sl.issuesFound","click",null)});

jQuery.prototype.scrollTo=function(a,d){var d=d||[0,0],c=this.get(0),a=a===window?null:a,b=$(a?a:window),e=[b.scrollLeft(),b.scrollTop(),b.width(),b.height()],f=0,g=a?this.height():this.outerHeight(!0),c=a?c.offsetTop:this.offset().top,h=c+g-e[1]-e[3];0<h?f=(e[3]<g?c-e[1]:h)+d[1]:(g=e[1]+d[1],f=g>c?c-g:f);b.scrollLeft(e[0]+0);b.scrollTop(e[1]+f);return this};
jQuery.prototype.scrollToFast=function(a,d){var d=d||[0,0],c=this.get(0),a=a===window?null:a,b;b=Webr.util.Util.isIE?[Math.max(document.body.scrollLeft,document.documentElement.scrollLeft),Math.max(document.body.scrollTop,document.documentElement.scrollTop),Math.min(document.body.clientWidth,document.documentElement.clientWidth),Math.min(document.body.clientHeight,document.documentElement.clientHeight)]:[window.pageXOffset,window.pageYOffset,window.innerWidth,window.innerHeight];var e=0,f=Math.max(c.scrollHeight,
c.clientHeight),c=Webr.util.Util.isIE?c.offsetTop+c.parentNode.offsetTop:c.offsetTop,g=c+f-b[1]-b[3];0<g?e=(b[3]<f?c-b[1]:g)+d[1]:(f=b[1]+d[1],e=f>c?c-f:e);a?(a.scrollLeft=b[0]+0,a.scrollTop=b[1]+e):window.scrollTo(b[0]+0,b[1]+e);return this};jQuery.prototype.addRefreshListener=function(a){var d=this.get(0).id;if(d){var d=d.substring(3,d.lastIndexOf(".")),c={beforeRefresh:function(b){0===d.indexOf(b)&&(a(),Webr.event.RefreshCommandProcessor.removeListener(c))}};Webr.event.RefreshCommandProcessor.addListener(c)}};
jQuery.prototype.title=function(a){var d=this.get(0);d&&d.title&&(d.title=a);return this};jQuery.prototype.maxVisibleHeight=function(){var a=this.get(0),a=$(a).offset().top,d=$(window).height()+$(window).scrollTop();return Math.min(this.height(),Math.max(0,d-a))};
jQuery.prototype.ancestorOf=function(a,d){var c=$(a);if(1!=this.length||1!=c.length)throw"More then one element or empty element.";var b=c.get(0),c=this.get(0);if(d&&b==c)return!0;if(c.contains&&!Webr.util.Util.isWebkit)return c.contains(b);for(b=b.parentNode;b;){if(b==c)return!0;if(!b.tagName||"html"==c.tagName.toLowerCase())break;b=b.parentNode}return!1};
jQuery.prototype.relativeOffset=function(){for(var a=0,d=0,c=this.offset(),b=this.parent();b[0]&&b[0]!==document.body&&b[0]!==this[0].ownerDocument.documentElement;){if("relative"==b.css("position")){a=b[0].offsetTop;d=b[0].offsetLeft;break}b=b.parent()}c.top=0<a?a:c.top;c.left=0<d?d:c.left;return c};jQuery.prototype.keyrepeatable=function(a){Webr.util.Util.isIE||Webr.util.Util.isWebkit||Webr.util.Util.isOpera?this.keydown(a):this.keypress(a)};
jQuery.prototype.setVisible=function(a){a?this.show():this.hide()};jQuery.prototype.matches=function(a){for(var d=0;d<a.length;d+=1)if(this.is(a[d].toLowerCase()))return!0;return!1};jQuery.prototype.equals=function(a){a=0<a.length?a.get(0):a;return this.get(0)===a};jQuery.PositionConfig=function(){};

charisma.smartui.IssueListConfig=function(){};charisma.smartui.IssueListConfig.prototype.toggleEditMode=function(){};charisma.smartui.IssueList=function(a){charisma.smartui.IssueList.superclass.constructor.call(this);this.allFoundIssuesAreSelected=this.focused=!1;this.ch=!0;this.listListeners=new Webr.util.Set;this.selectAllClickFunction=Function;this.current_state=null;this.init(a);this.current_state=charisma.smartui.IssueList.state_NOT_SHIFTED};var F=new Function;F.prototype=Webr.component.Component.prototype;
charisma.smartui.IssueList.prototype=new F;charisma.smartui.IssueList.prototype.constructor=charisma.smartui.IssueList;charisma.smartui.IssueList.superclass=Webr.component.Component.prototype;charisma.smartui.IssueList.prototype.setToolbar=function(a){this.toolbar=a};
charisma.smartui.IssueList.prototype.init=function(a){a.selectAll=a.selectAll||$(".selectAll").children("input");var b=this,c=this.config;this.config=a;this.content=$(a.content);this.selectAll=$(a.selectAll);this.focused=!1;c?$(c.selectAll).unbind("clickSelectAll",this.selectAllClickFunction):(c=$(Webr.util.Util.isIE?document.body:document),c.mousedown(function(a){return b.mousedownHandler(a)}),c.keydown(function(a){return b.keyDownHandler(a)}),c.keyrepeatable(function(a){return b.navigationKeysHandler(a)}),
c.keyup(function(a){return b.keyUpHandler(a)}));this.selectAll.on("clickSelectAll",this.selectAllClickFunction=function(a,c){b.toggleSelectAll(c);return b.selectAllClickHandler(c)});this.getIssues().each(function(){b.addIssueHandlers($(this))});this.updateCheckedIssuesParam();!0===this.config.focusOnLoad&&this.focus();var d=this.getIssueIdToFocus(a);d&&(this.focus(),jQuery.each(this.getIssues(),function(){var a=$(this);if(b.getVisibleIssueId(a)==d){b.issueRedrawn(b.getIssueId(a),true);b.config.outlineIssueId&&
b.outlineIssue(a);return a}}));this.restoreCheckboxesStates()};charisma.smartui.IssueList.prototype.toggleSelectAll=function(a){null!=a&&this.selectAll.prop("checked",!this.isSelectedAll());this.selectAll.next().toggleClass("jt-custom-checkbox-checked")};charisma.smartui.IssueList.prototype.getIssueIdToFocus=function(a){return Webr.util.PageStateStore.getInstance().get("issueid")||a.outlineIssueId||this.lastFocusedVisibleIssueId};
charisma.smartui.IssueList.prototype.restoreCheckboxesStates=function(){var a=this;jQuery.each(this.getIssues(),function(){var b=$(this);a.isIssueWasChecked(a.getIssueId(b))&&a.setIssueChecked(b,!0,!1)})};charisma.smartui.IssueList.prototype.mousedownHandler=function(a){this.content.ancestorOf(a.target)||this.blur()};charisma.smartui.IssueList.prototype.isFocusedIssueHasCheckbox=function(){return 0<this.getIssueCheckbox(this.getFocusedIssue()).length};
charisma.smartui.IssueList.prototype.keyDownHandler=function(a){if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.SelectAll)&&!a.targetIsInput())return this.selectAll.trigger("clickSelectAll",{checked:!this.isSelectedAll()}),!1;if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.StarIssue))return this.toggleStar(),!1;if(!this.focused)return!0;(a.isKey(16)||a.isShift(16))&&this.isFocusedIssueHasCheckbox()&&this.shiftDown();if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.EditIssue)&&!$(a.target).hasClass("yt-search-box"))return this.edit(),
!1;if(a.isKey(Webr.util.Key.ENTER)&&!a.targetIsInput()&&this.hasFocusedIssue())return this.enterIssue(this.getFocusedIssue()),!1;Webr.util.Key.isApplicable(a,SmartUIShortCuts.SelectIssueIdSummary)&&charisma.smartui.TextSelector.selectText(this.getIssueAnchor(this.getFocusedIssue()).get(0),this.getIssueSummary(this.getFocusedIssue()).get(0));if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.SelectIssueId)&&!a.targetIsInput()){var b=Webr.util.Util.getSelection();if(!(b&&""!=b))return charisma.smartui.TextSelector.setSelection(this.getIssueAnchor(this.getFocusedIssue()).get(0)),
!1}return!a.targetIsInput()&&(Webr.util.Key.isApplicable(a,SmartUIShortCuts.DeleteIssue)||Webr.util.Util.isMac&&Webr.util.Key.isApplicable(a,SmartUIShortCuts.DeleteIssue_Backspace))?(a.preventDefault(),a.stopPropagation(),commandDialog&&commandDialog.show(commonController.deleteCommand),!1):!0};
charisma.smartui.IssueList.prototype.toggleStar=function(){var a;if(0<this.getCheckedCount()){a=!0;for(var b=this.getSelectedIssuesIds(),c=0;c<b.length;c+=1)if(!this.isStarred(this.getIssueById(b[c]))){a=!1;break}}else a=this.isStarred(this.getFocusedIssue());commandDialog.execute(a?commonController.unstarCommand+" "+commonController.meCommand:commonController.starCommand+" "+commonController.meCommand)};charisma.smartui.IssueList.prototype.isStarred=function(a){return a.find(".star").hasClass("active")};
charisma.smartui.IssueList.prototype.enterIssue=function(a){if(a=a.find("a.issueIdAnchor").get(0))a.click(),Webr.event.ResponseServerEventListener.PAGE_CHANGED=!0};charisma.smartui.IssueList.prototype.openInNewWindow=function(a){a=a.find("a.issueIdAnchor");window.open(a.attr("href"),"_blank")};charisma.smartui.IssueList.prototype.commentItemFocused=function(){this.blur()};
charisma.smartui.IssueList.prototype.keyUpHandler=function(a){if(!this.focused)return!0;(a.isKey(16)||a.isShift(16))&&this.isFocusedIssueHasCheckbox()&&this.shiftUp();return!0};charisma.smartui.IssueList.prototype.getIssues=function(){return this.content.find(".issueContainer")};charisma.smartui.IssueList.prototype.isIssueChecked=function(a){return this.getIssueCheckbox(a).is(":checked")};charisma.smartui.IssueList.prototype.getIssueId=function(a){return a.attr("iid")};
charisma.smartui.IssueList.prototype.getVisibleIssueId=function(a){return this.getIssueAnchor(a).text()};charisma.smartui.IssueList.prototype.isIssueExpanded=function(a){return a.hasClass("issue-expanded")};charisma.smartui.IssueList.prototype.getIssueCheckbox=function(a){return a.find("div.issue-controls > input")};charisma.smartui.IssueList.prototype.setIssueChecked=function(a,b,c){this.isIssueChecked(a)!=b&&this.toggleCheckState(a,c)};charisma.smartui.IssueList.prototype.getIssueAnchor=function(a){return a.find("a.issueIdAnchor")};
charisma.smartui.IssueList.prototype.getIssueSummary=function(a){return a.find(".issue-summary")};charisma.smartui.IssueList.prototype.getIssueDescription=function(a){return a.find(".description")};charisma.smartui.IssueList.prototype.addListListener=function(a){this.listListeners.add(a)};charisma.smartui.IssueList.prototype.removeListListener=function(a){this.listListeners.remove(a)};
charisma.smartui.IssueList.prototype.fireCheckedItemsChanged=function(){this.listListeners.forEach(function(a){a.checkedItemsUpdated();return!0})};
charisma.smartui.IssueList.prototype.navigationKeysHandler=function(a){if(!this.focused)return!0;if(a.isKey(Webr.util.Key.ESC)&&!this.isIssueInEditMode(this.getFocusedIssue())){if(this.isSelectedAll())return this.clearSelectedAll(),!1;if(this.getCheckedCount())return this.setCheckedForAll(!1),!1}return a.targetIsInput()?!0:a.isKey(Webr.util.Key.UP)&&!this.prev()?!1:a.isShift(Webr.util.Key.UP)?(this.kup(),this.prev(),!1):a.isKey(Webr.util.Key.DOWN)&&!this.next()?!1:a.isShift(Webr.util.Key.DOWN)?(this.kdown(),
this.next(),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.CollapseIssue)?(this.collapse(),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.ExpandIssue)?(this.expand(),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.SelectIssue)?(this.toggleCheckState(this.getFocusedIssue()),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.GoToFirst)?(this.first(),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.GoToLast)?(this.last(),!1):this.fireKeyPressed(a)};
charisma.smartui.IssueList.prototype.keyDown=function(a,b){if(a instanceof charisma.smartui.CommentsList){if(b.isKey(Webr.util.Key.UP))return this.focus(),!1;if(b.isKey(Webr.util.Key.DOWN))return this.focus(),this.next(),!1;if(b.isKey(Webr.util.Key.LEFT,Webr.util.Key.ESC))return this.focus(),this.collapse(),!1}var c=this.navigationKeysHandler(b);c||this.focus();return c};charisma.smartui.IssueList.prototype.getIssueById=function(a){return this.content.find("[iid='"+a+"']")};
charisma.smartui.IssueList.prototype.issueRedrawn=function(a,b){var c=this.getIssueById(a),d=this.getVisibleIssueId(c);trace("issueRedrawn: "+d);this.addIssueHandlers(c);this.isIssueExpanded(c)&&this.addTextCopierHandlersToExpandedIssue(c);this.isIssueWasChecked(a)&&this.setIssueChecked(c,!0,!1);if(b||this.lastFocusedVisibleIssueId==d)this.unselectIssue(this.getFocusedIssue()),this.selectIssue(c,!0)};
charisma.smartui.IssueList.prototype.addIssueHandlers=function(a){var b=this,c=this.getIssueCheckbox(a);c.click(function(){b.issueCheckboxClick(a)});c.focus(function(){b.getIssueId(b.getFocusedIssue())!==b.getIssueId(a)&&b.mousedown(a);b.focusIssue(a)});a.click(function(){b.mousedown(a);return!0})};
charisma.smartui.IssueList.prototype.addTextCopierHandlersToExpandedIssue=function(a){var b=this,c=this.getIssueDescription(a),d=this.getIssueSummary(a),e=this.getIssueAnchor(a);c.mouseover(function(){b.showTextCopier(a,c,null)}).mouseout(function(){charisma.smartui.TextCopier.hideCopier()});d.mouseover(function(){b.showTextCopier(a,e,d)}).mouseout(function(){charisma.smartui.TextCopier.hideCopier()});e.mouseout(function(){b.showTextCopier(a,e,d)}).mouseout(function(){charisma.smartui.TextCopier.hideCopier()})};
charisma.smartui.IssueList.prototype.showTextCopier=function(a,b,c){charisma.smartui.TextCopier.showCopier(b,c,this.getIssueId(a))};charisma.smartui.IssueList.prototype.focus=function(){this.focused||(this.select(),this.focusIssue(this.getFocusedIssue()))};charisma.smartui.IssueList.prototype.blur=function(){this.focused=!1};charisma.smartui.IssueList.prototype.select=function(){if(this.hasFocusedIssue())this.selectIssue(this.getFocusedIssue());else{var a=this.getIssues();0<a.length&&this.selectIssue(a.first())}};
charisma.smartui.IssueList.prototype.selectIssue=function(a,b){a||(a=this.getFocusedIssue());this.addSelectedOrFocusedClass(a);this.lastFocusedVisibleIssueId=this.getVisibleIssueId(a);!0==b&&this.focusIssue(a)};charisma.smartui.IssueList.prototype.unselectIssue=function(a){a.removeClass("issue-selected");a.removeClass("issue-focused")};
charisma.smartui.IssueList.prototype.focusIssue=function(a){if(!(0>=a.length)){var b=this.toolbar?this.toolbar.getDimension():[0,0];Webr.util.Util.isIE?a.scrollToFast(null,b):a.scrollTo(null,b);this.getIssueAnchor(a).focus();this.lastFocusedVisibleIssueId=this.getVisibleIssueId(a);this.focused=!0}};charisma.smartui.IssueList.prototype.addSelectedOrFocusedClass=function(a){this.getCheckedCount()?a.addClass("issue-focused"):a.addClass("issue-selected")};
charisma.smartui.IssueList.prototype.outlineIssue=function(a){a.addClass("issue-created")};charisma.smartui.IssueList.prototype.clearSelection=function(){var a=this.getFocusedIssue();this.unselectIssue(a);(a=this.getComments(a))&&a.unfocus()};
charisma.smartui.IssueList.prototype.mousedown=function(a){var b=this.getFocusedIssue();this.getIssueId(b)==this.getIssueId(a)?this.selectIssue(b):(this.clearSelection(),this.selectIssue(a));if(!this.isCommentsExpanded(a)||!this.getComments(a).isFocused())this.focused=!0};charisma.smartui.IssueList.prototype.toggleCheckState=function(a,b){var c=this.getIssueCheckbox(a);c.prop("checked",!c.prop("checked"));c.next().toggleClass("jt-custom-checkbox-checked");this.issueCheckboxClick(a,b)};
charisma.smartui.IssueList.prototype.issueCheckboxClick=function(a,b){var c=this.isIssueChecked(a);c?(a.addClass("issue-checked"),a==this.getFocusedIssue()&&a.addClass("issue-focused")):(a.removeClass("issue-checked"),(void 0==b||!0==b)&&this.clearSelectedAllNoFireClick());(void 0==b||!0==b)&&this.updateCheckedIssuesParam();this.toggleIeCustomCheckbox(a,c)};
charisma.smartui.IssueList.prototype.toggleIeCustomCheckbox=function(a,b){if(Webr.util.Util.isIE&&9>Webr.util.Util.browserVersion){var c=this.getIssueCheckbox(a).next();b?c.addClass("jt-custom-checkbox-checked"):c.removeClass("jt-custom-checkbox-checked")}};charisma.smartui.IssueList.prototype.next=function(){var a=this.getFocusedIssue(),b=this.getNextPrevIssue(!0,a);if(0<b.length)return this.unselectIssue(a),this.selectIssue(b,!0),!1;$(window).scrollTop($(document).height());return!0};
charisma.smartui.IssueList.prototype.prev=function(){var a=this.getFocusedIssue(),b=this.getNextPrevIssue(!1,a);if(0<b.length)return this.unselectIssue(a),this.selectIssue(b,!0),!1;$(window).scrollTop(0);return!0};charisma.smartui.IssueList.prototype.getNextPrevIssue=function(a,b){var c=a?"next":"prev",d=b[c](".issueContainer");if(0<d.length)return d;for(var d=b.parent()[c](".hierarchy"),e=d.children();0<d.length&&0>=e.length;)d=d[c](".hierarchy"),e=d.children();return a?e.first():e.last()};
charisma.smartui.IssueList.prototype.first=function(){var a=this.getFocusedIssue(),b=this.getIssues().first();if(a.get(0)!=b)return this.unselectIssue(a),this.selectIssue(b,!0),!1;$(window).scrollTop(0);return!0};charisma.smartui.IssueList.prototype.last=function(){var a=this.getFocusedIssue(),b=this.getIssues().last();if(a.get(0)!=b)return this.unselectIssue(a),this.selectIssue(b,!0),!1;$(window).scrollTop($(document).height());return!0};charisma.smartui.IssueList.prototype.expand=function(){this.expandIssue(this.getFocusedIssue())};
charisma.smartui.IssueList.prototype.expandIssue=function(a){if(!this.isIssueExpanded(a))return charisma.smartui.TextCopier.hideCopier(!0),this.getExpandToggleAnchor(a).click(),!1;if(!this.isCommentsExpanded(a))return this.getCommentsToggleAnchor(a).click(),!1;this.blur();(a=this.getComments(a))&&a.focus()};charisma.smartui.IssueList.prototype.collapse=function(){this.collapseIssue(this.getFocusedIssue())};charisma.smartui.IssueList.prototype.isCommentsExpanded=function(a){return 0<a.find(".issue-comments").length};
charisma.smartui.IssueList.prototype.getCommentsToggleAnchor=function(a){return a.find(".toggleCommentsAnchor")};charisma.smartui.IssueList.prototype.getExpandToggleAnchor=function(a){return a.find("a.toggleDescrAnchor")};
charisma.smartui.IssueList.prototype.collapseIssue=function(a){if(this.isCommentsExpanded(a)){var b=this.getComments(a);b&&b.unfocus();this.getCommentsToggleAnchor(a).click();return!1}if(this.isIssueExpanded(a))return charisma.smartui.TextCopier.hideCopier(!0),this.getExpandToggleAnchor(a).click(),!1};charisma.smartui.IssueList.prototype.edit=function(){charisma.smartui.TextCopier.hideCopier(!0);this.config.toggleEditMode&&this.config.toggleEditMode(this.getIssueId(this.getFocusedIssue()))};
charisma.smartui.IssueList.prototype.getFocusedIssue=function(){var a=this.content.find(".issue-focused");0>=a.length&&(a=this.content.find(".issue-selected"));this.getIssueId(a)&&(this.lastFocusedVisibleIssueId=this.getVisibleIssueId(a));return a};charisma.smartui.IssueList.prototype.hasFocusedIssue=function(){return 0<this.getFocusedIssue().length};charisma.smartui.IssueList.prototype.isIssueInEditMode=function(a){return a.hasClass("listEditIssue")};
charisma.smartui.IssueList.prototype.getComments=function(a){return a.data("commentList")};charisma.smartui.IssueList.prototype.setComments=function(a,b){var c=this.getComments(a);c&&(c.removeListener(this),c.unhandleKeys());a.data("commentList",b);b.addListener(this)};charisma.smartui.IssueList.prototype.isSelectedAll=function(){return this.selectAll.prop("checked")};
charisma.smartui.IssueList.prototype.clearSelectedAllNoFireClick=function(){this.isSelectedAll()&&this.selectAll.trigger("clickSelectAll",{ignore:!0});this.allFoundIssuesAreSelected=!1};charisma.smartui.IssueList.prototype.clearSelectedAll=function(){this.isSelectedAll()&&this.selectAll.trigger("clickSelectAll",{checked:!1});this.allFoundIssuesAreSelected=!1};
charisma.smartui.IssueList.prototype.selectAllClickHandler=function(a){if(!a||!a.ignore)a=a?a.checked:this.isSelectedAll(),this.setCheckedForAll(a),this.focus()};charisma.smartui.IssueList.prototype.setCheckedForAll=function(a){var b=this;jQuery.each(this.getIssues(),function(){b.setIssueChecked($(this),a,!1)});this.updateCheckedIssuesParam()};
charisma.smartui.IssueList.prototype.updateCheckedIssuesParam=function(){this.createCheckedIssuesInput();var a="",b=!0,c=this;jQuery.each(this.getIssues(),function(){c.isIssueChecked($(this))&&(b?b=!1:a+=",",a+=c.getIssueId($(this)))});this.checkedIssuesInput.value=a;this.fireCheckedItemsChanged()};
charisma.smartui.IssueList.prototype.getSelectedIssuesIds=function(){var a=[],b=this;jQuery.each(this.getIssues(),function(){b.isIssueChecked($(this))&&a.push(b.getIssueId($(this)))});0==a.length&&a.push(b.getIssueId(b.getFocusedIssue()));return a};charisma.smartui.IssueList.prototype.isIssueWasChecked=function(a){var b=this.checkedIssuesInput.value;return 0<=b.indexOf(a+",")||b.lastIndexOf(a)==b.length-a.length};
charisma.smartui.IssueList.prototype.createCheckedIssuesInput=function(){this.checkedIssuesInput||(this.checkedIssuesInput=document.createElement("input"),this.checkedIssuesInput.type="hidden",this.checkedIssuesInput.name="hiddenCheckedIssue",document.body.appendChild(this.checkedIssuesInput))};charisma.smartui.IssueList.prototype.getCheckedCount=function(){var a=this.checkedIssuesInput.value;return""==a?0:a.split(",").length};
charisma.smartui.IssueList.prototype.shiftDown=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"shiftDown",arguments)};charisma.smartui.IssueList.prototype.shiftUp=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"shiftUp",arguments)};charisma.smartui.IssueList.prototype.kdown=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"kdown",arguments)};
charisma.smartui.IssueList.prototype.kup=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"kup",arguments)};charisma.smartui.IssueList.state_NOT_SHIFTED={name:"NOT_SHIFTED",onexit:function(){this.ch=!this.isIssueChecked(this.getFocusedIssue())},shiftDown:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.IssueList.state_NOT_SHIFTED);return charisma.smartui.IssueList.state_INITIAL}};charisma.smartui.IssueList.state_SHIFTED={name:"SHIFTED"};
charisma.smartui.IssueList.state_INITIAL={name:"INITIAL",parentState:charisma.smartui.IssueList.state_SHIFTED,kdown:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,charisma.smartui.IssueList.state_MOVE_DOWN);return charisma.smartui.IssueList.state_MOVE_DOWN},kup:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,charisma.smartui.IssueList.state_MOVE_UP);return charisma.smartui.IssueList.state_MOVE_UP},shiftUp:function(){return charisma.smartui.IssueList.state_NOT_SHIFTED}};
charisma.smartui.IssueList.state_MOVE_DOWN={name:"MOVE_DOWN",parentState:charisma.smartui.IssueList.state_SHIFTED,onenter:function(){this.setIssueChecked(this.getFocusedIssue(),this.ch)},kdown:function(){this.setIssueChecked(this.getFocusedIssue(),this.ch)},kup:function(){this.ch=!this.ch;Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,charisma.smartui.IssueList.state_MOVE_UP);return charisma.smartui.IssueList.state_MOVE_UP},shiftUp:function(){return charisma.smartui.IssueList.state_NOT_SHIFTED}};
charisma.smartui.IssueList.state_MOVE_UP={name:"MOVE_UP",parentState:charisma.smartui.IssueList.state_SHIFTED,onenter:function(){this.setIssueChecked(this.getFocusedIssue(),this.ch)},kup:function(){this.setIssueChecked(this.getFocusedIssue(),this.ch)},kdown:function(){this.ch=!this.ch;Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,charisma.smartui.IssueList.state_MOVE_DOWN);return charisma.smartui.IssueList.state_MOVE_DOWN},shiftUp:function(){return charisma.smartui.IssueList.state_NOT_SHIFTED}};

var similarIssuesList;charisma.smartui.SimilarIssueList=function(a){charisma.smartui.SimilarIssueList.superclass.constructor.call(this,a)};var F=new Function;F.prototype=charisma.smartui.IssueList.prototype;charisma.smartui.SimilarIssueList.prototype=new F;charisma.smartui.SimilarIssueList.prototype.constructor=charisma.smartui.SimilarIssueList;charisma.smartui.SimilarIssueList.superclass=charisma.smartui.IssueList.prototype;
charisma.smartui.SimilarIssueList.prototype.inputOrTextFocused=function(){try{var a=document.activeElement.tagName;return"INPUT"==a||"TEXTAREA"==a}catch(d){return!1}};
charisma.smartui.SimilarIssueList.prototype.init=function(a){this.inputOrTextFocused()&&(this.focused=!1);var d=this.config,c=void 0;this.focused||(c=this.lastFocusedVisibleIssueId,this.lastFocusedVisibleIssueId=void 0);var a=charisma.smartui.SimilarIssueList.superclass.init.call(this,a),b=this,e=function(){b.focus();b.content.one("focus",e)};this.content.one("focus",e);if(c){var f=!1;this.getIssues().each(function(){if(b.getVisibleIssueId($(this))==c){b.selectIssue($(this),b.focused);f=true}});f||
b.select()}d&&this.content.keydown(function(a){if(!b.focused)return true;if(a.isCtrl(Webr.util.Key.ENTER)&&!a.targetIsInput()&&b.hasFocusedIssue()){b.openInNewWindow(b.getFocusedIssue());return false}});return a};charisma.smartui.SimilarIssueList.prototype.getIssueIdToFocus=function(a){a.outlineIssueId||this.lastFocusedVisibleIssueId};
charisma.smartui.SimilarIssueList.prototype.navigationKeysHandler=function(a){return!this.focused?!0:a.isKey(Webr.util.Key.UP)?(this.prev()&&(this.blur(),$(".edit-issue-form__i__description").focus()),!1):a.isShift(Webr.util.Key.TAB)?(this.blur(),$(".edit-issue-form__i__description").focus(),!1):charisma.smartui.SimilarIssueList.superclass.navigationKeysHandler.call(this,a)};
charisma.smartui.SimilarIssueList.prototype.keyDownHandler=function(a){return!this.focused?!0:a.isKey(Webr.util.Key.TAB)?(this.blur(),a=$(".issuePermission").find("a"),0<a.length?a.focus():charisma.smartui.PropertySelector.getInstance().select(0),!1):charisma.smartui.SimilarIssueList.superclass.keyDownHandler.call(this,a)};

cr.setTemplateBind("DraftsMenu",function(a){cr.ash(a,"c.delete","click",null);regmn(a,"savedDrafts")});

cr.setTemplateBind("SingleGroupSelectorEditor",function(a){cr.ash(a,"singleSelector","change",null);cr.ash(a,"singleSelector","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

cr.setTemplateBind("ConfirmCloseDialog",function(b){cr.ach(b,"closeDialog","click",function(a){cr.findInHandler(a,".closeEditIssueConfirmDialog",[]).setVisible(!1);cr.serverMethodCallInHandler(a,".methodCall_returnFocus",{})});cr.ach(b,"cancel","click",function(a){$(cr.findInHandler(a,".closeDialog",[])).click()});cr.ach(b,"cancel","keydown",function(a){if(a.keyCode==Webr.util.Key.TAB)return $(cr.findInHandler(a,".ok",[])).focus(),!1});cr.ach(b,"confirm","keydown",function(a){if(a.keyCode==Webr.util.Key.TAB)return a.isShift(a.keyCode)?
$(cr.findInHandler(a,".cancel",[])).focus():$(cr.findInHandler(a,".ok",[])).focus(),!1});cr.ach(b,"ok","keydown",function(a){if(a.keyCode==Webr.util.Key.TAB)return a.isShift(a.keyCode)?$(cr.findInHandler(a,".confirm",[])).focus():$(cr.findInHandler(a,".cancel",[])).focus(),!1});cr.ach(b,"cancel","keydown",function(a){if(a.keyCode==Webr.util.Key.TAB)return a.isShift(a.keyCode)?$(cr.findInHandler(a,".ok",[])).focus():$(cr.findInHandler(a,".confirm",[])).focus(),!1});cr.ach(b,"closeEditIssueConfirmDialog",
"keydown",function(a){var b=cr.findInHandler(a,".closeEditIssueConfirmDialog",[]).panel.ancestorOf(a.target);a.handleEnterEsc(function(){b&&a.stopPropagation()},function(){b&&(a.stopPropagation(),$(cr.findInHandler(a,".closeDialog",[])).click())})});cr.ash(b,"ok","click",null);regdlg(b,"closeEditIssueConfirmDialog")});

Webr.component.ComboBoxComponent=function(a,b){this.searchContext="";this.pager=null;this.noMatch={text:"<"+l10n('no matches')+">",id:Webr.component.ComboOption.NO_MATCH_ID,empty:!1,styleClass:"nomatch"};Webr.component.ComboBoxComponent.superclass.constructor.call(this,a,b=b||new Webr.component.ComboRenderer(a,Webr.component.ComboComponentBase.findRoot(a)));b.setConfig({containerClass:this.getCustomCssClass(),maxListHeight:a.getAttribute("maxheight"),minListHeight:a.getAttribute("minheight")});
var c=this,d=$(a).find("a.arrow");d.get(0)&&(d.unbind("click"),d.bind("click",function(){c.toggle()}));this.selectionListener={selectionChanged:function(){c.inputElement.setValueNoEvents(c.dataList.getCurrentOption().text);c.updateSelection()}}};var F=new Function;F.prototype=Webr.component.ComboComponentBase.prototype;Webr.component.ComboBoxComponent.prototype=new F;Webr.component.ComboBoxComponent.prototype.constructor=Webr.component.ComboBoxComponent;
Webr.component.ComboBoxComponent.superclass=Webr.component.ComboComponentBase.prototype;Webr.component.ComboBoxComponent.prototype.setSearchContext=function(a){a.equalsIgnoreCase(this.searchContext)||(this.dataList.narrow(a),this.searchContext=a,this.renderer.repaint())};
Webr.component.ComboBoxComponent.prototype.fireKeyDown=function(a){if(a.isKey(Webr.util.Key.ENTER))this.onEnter();if(a.isKey(Webr.util.Key.ESC))this.onEsc();var b=this;return this.fire(function(c){return c.keyDown?c.keyDown(b,a):!0})};
Webr.component.ComboBoxComponent.prototype.sync=function(){var a=this.currentOption;this.remote?0!=this.searchContext.length?(this.onInitValueChanged=!0,this.searchContext=""):this.dataList.setCurrentOption(a):(this.setSearchContext(""),this.dataList.setCurrentOption(a));this.inputElement.setValueNoEvents(null!=a?a.text:"")};Webr.component.ComboBoxComponent.prototype.loadRequired=function(){return this.remote&&0!=this.searchContext.length};
Webr.component.ComboBoxComponent.prototype.makeVisible=function(){this.renderer.show();this.showOptions()};Webr.component.ComboBoxComponent.prototype.getCurentOption=function(){return this.currentOption};Webr.component.ComboBoxComponent.prototype.showOptions=function(){this.jQinputElement.removeClass("empty");this.setFocusNoEvents();this.onShowOptions()};Webr.component.ComboBoxComponent.prototype.makeHidden=function(){this.renderer.hide();this.hideOptions()};
Webr.component.ComboBoxComponent.prototype.hideOptions=function(){var a=this.currentOption;null!=a&&a.empty?this.jQinputElement.addClass("empty"):null==a&&""===this.inputElement.value&&this.jQinputElement.addClass("empty");this.onHideOptions()};Webr.component.ComboBoxComponent.prototype.resetCurrentOption=function(){this.setCurrent(this.currentOption,!1)};
Webr.component.ComboBoxComponent.prototype.updateSelection=function(){var a=this.inputElement.value;""!==this.searchContext&&a.startsWith(this.searchContext)?a.equalsIgnoreCase(this.searchContext)?this.inputElement.select():this.inputElement.setSelectionRange(this.searchContext.length,a.length):this.inputElement.select()};Webr.component.ComboBoxComponent.prototype.reset=function(){this.setCurrent(this.defaultOption,!0);this.sync();this.blur();this.drop()};
Webr.component.ComboBoxComponent.prototype.initDataList=function(a){if(!this.dataList){var b={clickHandler:jQuery.proxy(this.mOptionClicked,this),circle:this.mainElement.attr("nocircle")?!1:!0};a?(this.local=!1,a=new Webr.component.RemoteDataList(this,b)):a=new Webr.component.MemoryDataList(b);a.addNoMatchOption(new Webr.component.ComboBoxListItem(this.noMatch));a.addListener(this.selectionListener);this.dataList=a}};
Webr.component.ComboBoxComponent.prototype.initOption=function(){this.currentOption||(this.currentOption=this.dataList.getCurrentOption());this.defaultOption||(this.defaultOption=this.currentOption)};
Webr.component.ComboBoxComponent.prototype.update=function(a,b,c,d,e,f,g){this.remote=void 0!==b;this.initDataList(this.remote);e?this.pager&&this.pager.hide():this.remote&&(this.updatePager(c,d,b,f,g),this.pager.show());b=this.searchContext.equalsIgnoreCase("")?this.jQinputElement.attr("valueId"):"";this.dataList.update(a,function(a){return new Webr.component.ComboBoxListItem(a)},b);this.initOption();this.renderList();this.loaded()};
Webr.component.ComboBoxComponent.prototype.setCurrent=function(a,b){this.currentOption=a;b&&this.updateInputValueId(null!=a?a.id:"")};Webr.component.ComboBoxComponent.prototype.updateInputValueId=function(a){this.inputElement.setAttribute("valueId",a)};Webr.component.ComboBoxComponent.prototype.renderList=function(){this.pager&&this.renderer.addExtraContent(this.pager.getElement());this.renderer.draw(this.dataList)};
Webr.component.ComboBoxComponent.prototype.getCustomCssClass=function(){var a=this.mainElement.attr("customClass");return a?a:""};Webr.component.ComboBoxComponent.prototype.submit=function(a){a?(this.setCurrent(a,!0),this.onchange()):this.submitInputValue();this.fire(function(b){b.submitted(a)})};Webr.component.ComboBoxComponent.prototype.submitInputValue=function(){this.onSubmitAbsentOption(this.inputElement.value)};
Webr.component.ComboBoxComponent.prototype.lessClicked=function(a){this.onLoad(this.searchContext,a)};Webr.component.ComboBoxComponent.prototype.moreClicked=function(a){this.onLoad(this.searchContext,a)};Webr.component.ComboBoxComponent.prototype.callLoading=function(a){if(this.local)this.loadLocal(a);else this.onLoad(a)};
Webr.component.ComboBoxComponent.prototype.updatePager=function(a,b,c,d,e){if(!this.pager){var f=this;this.pager=new Webr.component.Pager(function(a){f.moreClicked(a)},function(a){f.lessClicked(a)})}this.pager.update(a,b,c,d,e)};Webr.component.ComboBoxComponent.prototype.loadLocal=function(){var a=this.mainElement.find("div.comboboxList"),b=a.text();a.remove();b&&window.setTimeout(function(){eval(b)},10)};
Webr.component.ComboBoxComponent.prototype.onLoad=function(a,b){this.mainElement.trigger("Load",{prefix:a,skip:b})};Webr.component.ComboBoxComponent.prototype.onchange=function(){this.mainElement.trigger("change")};Webr.component.ComboBoxComponent.prototype.onEnter=function(){};Webr.component.ComboBoxComponent.prototype.onEsc=function(){};Webr.component.ComboBoxComponent.prototype.onSubmitAbsentOption=function(a){this.mainElement.trigger("SubmitAbsentOption",{value:a})};
Webr.component.ComboBoxComponent.prototype.onShowOptions=function(){this.mainElement.trigger("ShowOptions")};Webr.component.ComboBoxComponent.prototype.onHideOptions=function(){this.mainElement.trigger("HideOptions")};Webr.component.ComboBoxComponent.CB_COMPONENT_DATA="_combo_component_data_";
Webr.component.ComboBoxComponent.register=function(a,b){cr.forEach(a,b,function(){var a=$(this),b=a.attr("bid"),e=function(){return b?new Webr.component.ComboBoxComponentBind(a.get(0),document.getElementById(b)):new Webr.component.ComboBoxComponent(a.get(0))};if(b){var f=$(document.getElementById(b)),g=function(a){if(a.targetIs(["A","IMG"])&&a.target!=f.get(0))f.one("click",g);else return e().toggle(),!1};f.one("click",g)}else{var h=a.children("div"),i=h.children("input"),h=h.siblings("a");i.attr("disabled")?
a.addClass("combo-disabled"):(i.one("focus",function(){e().focus()}),h.one("click",function(){e().toggle()}))}})};
Webr.component.ComboBoxComponent.register2=function(a,b){var c=b||window.event||{};if((c=$(c.srcElement?c.srcElement:c.target))&&c.matches(["A","IMG"])&&!c.equals($(a).children()))return!0;var c=$(a).data(Webr.component.ComboBoxComponent.CB_COMPONENT_DATA)||$(a).next("div"),d=$(c).data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE);d||($(a).data(Webr.component.ComboBoxComponent.CB_COMPONENT_DATA,c.get?c.get(0):c),d=new Webr.component.ComboBoxComponentBind(c.get(0),$(a).children().get(0)),c.bind("ShowOptions",
function(){$(a).children().addClass("active")}).bind("HideOptions",function(){$(a).children().removeClass("active")}),$(a).unbind("click"));d.toggle();return!1};Webr.component.ComboBoxComponent.safeFocus=function(a){a=Webr.component.ComboBoxComponent.getComboBoxInput(a);a.focus();a.select()};Webr.component.ComboBoxComponent.getComboBoxInput=function(a){return a.finalize?a.jQinputElement:$(a).find("input")};Webr.component.ComboBoxComponent.getValueId=function(a){return Webr.component.ComboBoxComponent.getComboBoxInput(a).attr("valueid")};
Webr.component.ComboBoxComponent.safeReset=function(a){a.reset&&a.reset()};Webr.component.ComboBoxListItem=function(a){Webr.component.ComboBoxListItem.superclass.constructor.call(this,a)};F=new Function;F.prototype=Webr.component.DataListItem.prototype;Webr.component.ComboBoxListItem.prototype=new F;Webr.component.ComboBoxListItem.prototype.constructor=Webr.component.ComboBoxListItem;Webr.component.ComboBoxListItem.superclass=Webr.component.DataListItem.prototype;
Webr.component.ComboBoxListItem.prototype.createElement=function(){var a=$(document.createElement("li"));this.el=a;a.addClass(this.option.styleClass);Webr.component.ComboOption.NO_MATCH_ID===this.option.id?(a.text(this.option.text),this.hide()):this.option.h?a.html(this.option.text):(a.text(this.option.text),a.attr("title",this.option.text))};Webr.component.ComboBoxListItem.prototype.scroll=function(){this.el.scrollTo(this.el.parent().get(0))};
Webr.component.ComboBoxListItem.prototype.registerClickHandler=function(a){var b=this;this.el.click(function(){a.call(b,b.option);return!1})};Webr.component.Pager=function(a,b){this.moreHandler=a;this.lessHandler=b;this.me=$(document.createElement("div")).addClass("pager")};
Webr.component.Pager.prototype.update=function(a,b,c,d,e){var f=this;this.me.children().remove();if(0<a){var g=$(document.createElement("a")).html("&laquo; prev").attr("href","javascript:void(0)");this.me.append(g);g.click(function(){f.lessHandler(Math.max(0,a-d))})}this.me.append("<span>"+(a+1)+"-"+b+" of "+c+(e?"":"+")+"</span>");if(b<c||void 0!=e&&!e)c=$(document.createElement("a")).html("next &raquo;").attr("href","javascript:void(0)"),this.me.append(c),c.click(function(){f.moreHandler(b)})};
Webr.component.Pager.prototype.getElement=function(){return this.me};Webr.component.Pager.prototype.show=function(){this.me.show()};Webr.component.Pager.prototype.hide=function(){this.me.hide()};var regCC=Webr.component.ComboBoxComponent.register,regCC2=Webr.component.ComboBoxComponent.register2;

Webr.component.MultiBoxComponent=function(a,b){Webr.component.MultiBoxComponent.superclass.constructor.call(this,a,b);var c=this,d=function(a){c.toggleOption(a);c.setFocusNoEvents()};this.setCheckHandler(d);c.mainElement.attr("noclick")?this.setClickHandler(d):this.setClickHandler(jQuery.proxy(this.mOptionClicked,this));this.initApplyButton();var d=$(document.createElement("div")).addClass("morePlaceholder"),f=c.mainElement.attr("showMore");this.showMoreOnEmpty=c.mainElement.attr("showMoreOnEmpty");
var e=$(document.createElement("span")).html(f||"And more");d.append(e);this.morePlaceholder=d;f&&b.addExtraContent(this.morePlaceholder)};var F=new Function;F.prototype=Webr.component.ComboBoxComponent.prototype;Webr.component.MultiBoxComponent.prototype=new F;Webr.component.MultiBoxComponent.prototype.constructor=Webr.component.MultiBoxComponent;Webr.component.MultiBoxComponent.superclass=Webr.component.ComboBoxComponent.prototype;
Webr.component.MultiBoxComponent.prototype.initApplyButton=function(){this.applyButton=$(document.createElement("div"));this.applyButton.html(l10n('Apply'));this.applyButton.addClass("applyButton");this.applyButton.click(jQuery.proxy(this.applyButtonClicked,this));this.applyButton.hide();this.renderer.getInputElement().after(this.applyButton)};
Webr.component.MultiBoxComponent.prototype.createHighlighter=function(a){return new Webr.component.MultiBoxHighlighter(this,a)};Webr.component.MultiBoxComponent.prototype.setCheckHandler=function(a){this.checkHandler=a};Webr.component.MultiBoxComponent.prototype.setClickHandler=function(a){this.clickHandler=a};Webr.component.MultiBoxComponent.prototype.showOptions=function(){this.setFocusNoEvents();this.onShowOptions()};
Webr.component.MultiBoxComponent.prototype.fireKeyDown=function(a){if(a.isKey(Webr.util.Key.SPACE)){var b=this.dataList.getCurrentItem();if(b)return b.toggleCheck(),this.toggleOption(b.option),!1}return Webr.component.MultiBoxComponent.superclass.fireKeyDown.call(this,a)};Webr.component.MultiBoxComponent.prototype.hideOptions=function(){this.applyButton.hide();this.setCurrent(this.defaultCheckedIds,!1);this.onHideOptions()};
Webr.component.MultiBoxComponent.prototype.reset=function(){this.setCurrent(this.defaultCheckedIds,!0);this.inputElement.removeAttribute("valueId");this.sync();this.blur();this.drop()};
Webr.component.MultiBoxComponent.prototype.update=function(a,b,c,d,f,e,i,h){this.defaultCheckedIds=b&&b.slice()||[];this.currentCheckedIds||(this.currentCheckedIds=this.defaultCheckedIds.slice());b=this.currentCheckedIds;jQuery.each(a,function(a,c){if(b.indexOf(c.id)>=0)c.checked=true});if(!this.dataList){var g;g={clickHandler:this.clickHandler,checkHandler:this.checkHandler,circle:this.mainElement.attr("nocircle")?!1:!0};g=void 0!==c?new Webr.component.RemoteDataList(this,g):new Webr.component.MemoryDataList(g);
g.addNoMatchOption(new Webr.component.MultiBoxListItem(this.noMatch));this.dataList=g}e?this.pager&&this.pager.hide():void 0!==c&&(this.updatePager(d,f,c,i,h),this.pager.show());this.dataList.update(a,function(a){return new Webr.component.MultiBoxListItem(a)});e&&!h?this.morePlaceholder.show():this.showMoreOnEmpty&&(!this.searchContext||""===this.searchContext)?this.morePlaceholder.show():this.morePlaceholder.hide();this.renderList();this.loaded()};
Webr.component.MultiBoxComponent.prototype.sync=function(){};Webr.component.MultiBoxComponent.prototype.setCurrent=function(a,b){0<this.searchContext.length&&(this.setSearchContext(""),this.inputElement.setValueNoEvents(""));this.currentCheckedIds=a!=this.currentCheckedIds?a.slice():a;this.dataList.unselectCurrent(!0);this.dataList.forEach(function(b){b.setChecked(jQuery.inArray(b.option.id,a)!==-1)});b&&(this.defaultCheckedIds=a.slice(),this.updateInputValueId(this.getCheckedRepresentation()))};
Webr.component.MultiBoxComponent.prototype.toggleOption=function(a){a.checked?this.check(a):this.uncheck(a);this.applyButton.show()};Webr.component.MultiBoxComponent.prototype.check=function(a){this.onselect(a);this.currentCheckedIds.push(a.id)};Webr.component.MultiBoxComponent.prototype.uncheck=function(a){this.onunselect(a);this.currentCheckedIds.splice(jQuery.inArray(a.id,this.currentCheckedIds),1)};Webr.component.MultiBoxComponent.prototype.getCheckedRepresentation=function(){return this.currentCheckedIds.toString()};
Webr.component.MultiBoxComponent.prototype.submit=function(a){this.searchContext!==this.inputElement.value&&this.valueChange();var b=this.currentCheckedIds;a&&(b=[a.id]);this.setCurrent(b,!0);this.onchange();this.fire(function(b){b.submitted(a)})};Webr.component.MultiBoxComponent.prototype.updatePager=function(a,b,c,d,f){if(!this.pager){var e=this;this.pager=new Webr.component.Pager(function(a){e.moreClicked(a)},function(a){e.lessClicked(a)})}this.pager.update(a,b,c,d,f)};
Webr.component.MultiBoxComponent.prototype.onselect=function(a){this.mainElement.trigger("select",{option:a.id})};Webr.component.MultiBoxComponent.prototype.onunselect=function(a){this.mainElement.trigger("unselect",{option:a.id})};Webr.component.MultiBoxComponent.CB_COMPONENT_DATA="_combo_component_data_";
Webr.component.MultiBoxComponent.register=function(a,b){cr.forEach(a,b,function(){var a=$(this),b=a.attr("bid"),f=function(){return b?new Webr.component.MultiBoxComponentBind(a.get(0),document.getElementById(b)):new Webr.component.MultiBoxComponent(a.get(0))};if(b){var e=$(document.getElementById(b)),i=function(a){if(a.targetIs(["A","IMG"])&&a.target!=e.get(0))e.one("click",i);else return f().toggle(),!1};e.one("click",i)}else{var h=a.children("div"),g=h.children("input"),h=h.siblings("a");g.one("focus",
function(){f().focus()});h.one("click",function(){f().toggle()})}})};
Webr.component.MultiBoxComponent.register2=function(a,b){var c=b||window.event||{};if((c=$(c.srcElement?c.srcElement:c.target))&&c.matches(["A","IMG"])&&!c.equals($(a).children()))return!0;var c=$(a).data(Webr.component.MultiBoxComponent.CB_COMPONENT_DATA)||$(a).next("div"),d=$(c).data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE);d||($(a).data(Webr.component.MultiBoxComponent.CB_COMPONENT_DATA,c.get(0)),d=new Webr.component.MultiBoxComponentBind(c.get(0),$(a).children().get(0)),c.bind("ShowOptions",
function(){$(a).children().addClass("active")}).bind("HideOptions",function(){$(a).children().removeClass("active")}),$(a).unbind("click"));d.toggle();return!1};Webr.component.MultiBoxComponent.safeFocus=function(a){a=a.finalize?a.jQinputElement:$(a).find("input");a.focus();a.select()};Webr.component.MultiBoxComponent.safeReset=function(a){a.reset&&a.reset()};Webr.component.MultiBoxListItem=function(a){Webr.component.MultiBoxListItem.superclass.constructor.call(this,a)};F=new Function;
F.prototype=Webr.component.DataListItem.prototype;Webr.component.MultiBoxListItem.prototype=new F;Webr.component.MultiBoxListItem.prototype.constructor=Webr.component.MultiBoxListItem;Webr.component.MultiBoxListItem.superclass=Webr.component.DataListItem.prototype;
Webr.component.MultiBoxListItem.prototype.createElement=function(){var a=$(document.createElement("li"));this.el=a;a.addClass(this.option.styleClass);if(this.option.id===Webr.component.ComboOption.NO_MATCH_ID||this.option.id===Webr.component.ComboOption.NEW_OPTION_ID)this.hide();else{var b=$(document.createElement("span"));b.html("&nbsp;").addClass("checkbox").addClass(this.option.checked?"checked":"unchecked");a.append(b);this.checkBox=$(b)}b=$(document.createElement("span"));this.option.h?b.html(this.option.text):
b.text(this.option.text);this.textElement=$(b);a.append(b)};Webr.component.MultiBoxListItem.prototype.check=function(){this.checkBox.click()};Webr.component.MultiBoxListItem.prototype.getTextElement=function(){return this.textElement};Webr.component.MultiBoxListItem.prototype.toggleCheck=function(){this.option.checked=!this.option.checked;this.checkBox.toggleClass("checked").toggleClass("unchecked")};Webr.component.MultiBoxListItem.prototype._check=function(){this.option.checked=!0;this.checkBox.removeClass("unchecked").addClass("checked")};
Webr.component.MultiBoxListItem.prototype._uncheck=function(){this.option.checked=!1;this.checkBox.removeClass("checked").addClass("unchecked")};Webr.component.MultiBoxListItem.prototype.setChecked=function(a){this.option.id!==Webr.component.ComboOption.NO_MATCH_ID&&(a?this._check():this._uncheck())};Webr.component.MultiBoxListItem.prototype.registerClickHandler=function(a){var b=this;this.el.click(function(){b.toggleCheck();a.call(b,b.option);return!1})};
Webr.component.MultiBoxListItem.prototype.registerCheckHandler=function(a){var b=this;this.checkBox.click(function(){b.toggleCheck();a.call(b,b.option);return!1})};var regMBC=Webr.component.MultiBoxComponent.register,regMBC2=Webr.component.MultiBoxComponent.register2;

cr.setTemplateBind("SearchBar",function(b){cr.ach(b,"searchSubmit","click",function(){commonController.doSearchRequest()});cr.ach(b,"filterFolder","change",function(a){cr.findInHandler(a,".filterFolder",[]).mainElement.get(0)==a.target&&(analytics.trackEvent("issueList","contextSelector"),cr.serverMethodCallInHandler(a,".methodCall_changeContext",{__param__folder:cr.findInHandler(a,".filterFolder",[]).getCurentOption().id}))});cr.ach(b,"searchField","valuechange",function(a,b){var c=b.value;null!=
c&&0<c.length?($(cr.findInHandler(a,".saveQueryBtn",[])).attr("title",l10n('Save this search')),$(cr.findInHandler(a,".clearSearchLink",[])).show()):($(cr.findInHandler(a,".clearSearchLink",[])).hide(),$(cr.findInHandler(a,".saveQueryBtn",[])).attr("title",""));charisma.RestMethods.$(cr.findInHandler(a,".searchField",[])).underlineAndSuggest(b.caretPos,3)});cr.ach(b,"searchField","caretmove",function(a,b){charisma.RestMethods.$(cr.findInHandler(a,".searchField",[])).suggest(b.caretPos)});
cr.ach(b,"clearSearchLink","click",function(a){cr.findInHandler(a,".searchField",[]).focus();cr.findInHandler(a,".searchField",[]).value="";$(cr.findInHandler(a,".saveQueryBtn",[])).attr("title","");Webr.util.Util.isIE&&charisma.RestMethods.$(cr.findInHandler(a,".searchField",[])).underlineAndSuggest(3)});cr.ash(b,"putQuery","click",null);cr.ash(b,"editSearchLink","click",null);cr.ash(b,"filterFolder","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});
cr.forEach(b,"searchField",function(){this.attachWatcher(!1)});cr.forEach(b,"searchField",function(){this.attachWatcher(!1)});regCC(b,"filterFolder")});

cr.setTemplateBind("ViewSettingsDialog",function(a){cr.ach(a,"viewSettingsDlg","keydown",function(a){return a.handleEnterEsc(function(){cr.serverMethodCallInHandler(a,".methodCall_save",{})},function(){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})})});cr.ach(a,"closeViewSettingsDlg","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ash(a,"saveViewSettings","click",null);cr.ash(a,"cancelViewSettings","click",null);cr.ash(a,"filterProject","change",null);cr.ash(a,
"filterProject","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});regCC(a,"filterProject");regdlg(a,"viewSettingsDlg")});

String.prototype.startsWith=function(a){return 0===this.toLowerCase().indexOf(a.toLowerCase())};String.prototype.equalsIgnoreCase=function(a){return this.toLowerCase()===a.toLowerCase()};String.prototype.replaceAll=function(a,b){return this.replace(RegExp(a,"g"),b)};

cr.setTemplateBind("CommentSettings",function(b){cr.ach(b,"permittedGroup","change",function(c){for(var b=$(cr.findInHandler(c,".permittedGroupAnchor",[])),a=cr.findInHandler(c,".permittedGroup",[]),g=a.currentCheckedIds,i=a.dataList.options,j=!0,e=0,d=a="",f=0;f<i.length;f+=1){var h=i[f].option;0<=g.indexOf(h.id)&&(j?(j=!1,a+=h.text):(e+=1,d+=", "),d+=h.text)}0<e&&(a+=" +"+e);g=b.text();b.find(".comment-visibility-text-placeholder").text(a||l10n('Same as issue'));c=cr.findInHandler(c,
".permittedGroupAnchor",[]).title.replace(g,d);b.title(c)});cr.ash(b,"permittedGroup","change",null);cr.ash(b,"permittedGroup","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

cr.setTemplateBind("CommandDialogConfirmation",function(b){cr.ach(b,"closeDialog","click",function(a){info("client close");$(".jt-dialog-mask").css("z-index",50);cr.findInHandler(a,".panel",[]).setVisible(!1);$(".commandsDialog").find(".ring-btn_blue").removeAttr("disabled");$(".command-query").focus()});cr.ach(b,"cancel","click",function(a){$(cr.findInHandler(a,".closeDialog",[])).click()});cr.ach(b,"panel","keydown",function(a){Webr.util.Key.isApplicable(a,SmartUIShortCuts.CancelEdit)?$(cr.findInHandler(a,
".cancel",[])).trigger("click"):Webr.util.Key.isApplicable(a,SmartUIShortCuts.ApplyCommand)&&(a.target==cr.findInHandler(a,".cancel",[])||a.target==cr.findInHandler(a,".apply",[])||a.target==cr.findInHandler(a,".silentApply",[]))&&$(a.target).trigger("click");a.keyCode!=Webr.util.Key.TAB&&a.stopPropagation()});cr.ach(b,"apply","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_apply",{},{preventDoubleSubmit:!0})});cr.ach(b,"silentApply","click",function(a){cr.serverMethodCallInHandler(a,
".methodCall_silentApply",{},{preventDoubleSubmit:!0})});cr.ash(b,"neverSuggest","change",null);regdlg(b,"panel")});

cr.setTemplateBind("MultiBundleSelectorEditor",function(a){cr.ash(a,"valueSelector","change",null);cr.ash(a,"valueSelector","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

cr.setTemplateBind("EditProjectVersionDialog",function(a){cr.ach(a,"editProjectVersionDlg","keydown",function(a){return a.handleEnterEsc(function(){cr.serverMethodCallInHandler(a,".methodCall_save",{})},function(){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})})});cr.ach(a,"closeEditProjectVersionDlg","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ach(a,"editProjectVersionDlg","historychanged",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",
{})});cr.ash(a,"cancelVersion","click",null);cr.ash(a,"saveVersion","click",null);cr.ash(a,"versionReleaseDate","DateSelected",null);regC(a,"versionReleaseDate");regdlg(a,"editProjectVersionDlg")});

cr.setTemplateBind("AttachmentVisibility",function(b){cr.ach(b,"updAttPermittedGroup","ShowOptions",function(a){var a=cr.findInHandler(a,".updAttPermittedGroup",[]).renderer,b=a.comboContainer,c=a.anchorElement.offset().top,d=$(document).scrollTop(),c={top:a.anchorElement.outerHeight(!0)+c-d};b.css({top:""});b.parent().css(c);a.comboContainer.removeClass("hide-visibility-combobox");a.comboContainer.parent().removeClass("hide-visibility-combobox")});cr.ash(b,"updAttPermittedGroup","change",null);cr.ash(b,
"updAttPermittedGroup","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

charisma.smartui.Tooltip=function(a,c,b,d,e,f){this.shift=4;this.hideTimer=this.showTimer=this.marginLeft=0;this.current_state=null;this.anchor=a;this.text=c;this.direction=b||charisma.smartui.TooltipDirection.TOP;this.showDelay=e||400;this.hideDelay=f||100;this.closeByClick=d?d:!0;this.bindEvents();this.current_state=charisma.smartui.Tooltip.state_HIDDEN};
charisma.smartui.Tooltip.prototype.bindEvents=function(){var a=this;this.anchor.mouseover(function(){a.mouseOver()}).mouseout(function(){a.mouseOut()});this.closeByClick&&this.anchor.click(function(){a.hide()})};
charisma.smartui.Tooltip.prototype.create=function(){this.container||(this.arrow=$(document.createElement("span")),this.container=$(document.createElement("div")).html(this.text).addClass(charisma.smartui.Tooltip.CSS).append(this.arrow),$("body").append(this.container),this.containerDim={width:this.container.outerWidth(),height:this.container.outerHeight()},this.marginLeft=parseInt(this.anchor.css("margin-left")))};
charisma.smartui.Tooltip.prototype._show=function(){charisma.smartui.Tooltip.SHOWN&&charisma.smartui.Tooltip.SHOWN.hide();var a=this.parentIsPositioned();if(!a||a.fixed)return!1;this.create();a=this.getOptions(a);this.container.css(a.pos);this.arrow.removeClass().addClass(charisma.smartui.Tooltip.ARROW_CSS[a.dir]);a.css&&this.arrow.addClass(a.css);this.container.fadeIn(150);charisma.smartui.Tooltip.SHOWN=this};
charisma.smartui.Tooltip.prototype._hide=function(){this.container&&this.container.fadeOut(100);charisma.smartui.Tooltip.SHOWN=null};
charisma.smartui.Tooltip.prototype.getOptions=function(a){var c,b={};a?(a=this.anchor.parent().offset(),b=this.anchor.position(),b.top+=a.top,b.left+=a.left):b=this.anchor.offset();if(void 0!=this.direction)switch(this.direction){case charisma.smartui.TooltipDirection.TOP:c=this.getTopBottom(b);break;case charisma.smartui.TooltipDirection.RIGHT:c=this.getLeftRigth(b,!0);break;case charisma.smartui.TooltipDirection.BOTTOM:c=this.getTopBottom(b,!0);break;case charisma.smartui.TooltipDirection.LEFT:c=
this.getLeftRigth(b)}else c=b.top>this.containerDim.height?this.getTopBottom(b):b.left<this.containerDim.width?$(window).width()-b.left-this.anchor.outerWidth()<this.containerDim.width?this.getTopBottom(b,!0):this.getLeftRigth(b,!0):this.getLeftRigth(b);return c};charisma.smartui.Tooltip.prototype.parentIsPositioned=function(){var a=this.anchor.offsetParent();return 0<a.length?(a=a.css("position"),{fixed:-1!=a.indexOf("fixed"),relative:-1!=a.indexOf("fixed")}):!1};
charisma.smartui.Tooltip.prototype.getTopBottom=function(a,c){var b=this.getLeftPosition(a,a.left+this.marginLeft+(this.anchor.outerWidth()-this.containerDim.width)/2);return{pos:{top:c?a.top+this.anchor.outerHeight()+this.shift:a.top-this.containerDim.height-this.shift,left:b.left},dir:c?charisma.smartui.TooltipDirection.BOTTOM:charisma.smartui.TooltipDirection.TOP,css:b.css}};
charisma.smartui.Tooltip.prototype.getLeftPosition=function(a,c){var b,d=$(window).scrollLeft(),e=$(window).width()+d;this.arrow.removeAttr("style");0>c?(c=0,b=charisma.smartui.Tooltip.ARROW_CSS[4],this.arrow.css("left",6)):c<d?(c=d,b=charisma.smartui.Tooltip.ARROW_CSS[4],this.arrow.css("left",6)):c+this.containerDim.width>e&&(c=e-this.containerDim.width,b=charisma.smartui.Tooltip.ARROW_CSS[5],this.arrow.css("right",6).css("left","auto"));return{left:c,css:b}};
charisma.smartui.Tooltip.prototype.getLeftRigth=function(a,c){return{pos:{top:a.top,left:c?a.left+this.anchor.outerWidth()+this.shift:a.left-this.containerDim.width-this.shift},dir:c?charisma.smartui.TooltipDirection.RIGHT:charisma.smartui.TooltipDirection.LEFT}};charisma.smartui.Tooltip.prototype.startTimer=function(a,c){if(!a){this.stopTimer(a);var b=this,a=window.setTimeout(function(){b.tick()},c)}};charisma.smartui.Tooltip.prototype.stopTimer=function(a){a&&window.clearInterval(a)};
charisma.smartui.Tooltip.prototype.tick=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"tick",arguments)};charisma.smartui.Tooltip.prototype.show=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"show",arguments)};charisma.smartui.Tooltip.prototype.hide=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"hide",arguments)};charisma.smartui.Tooltip.prototype.mouseOut=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseOut",arguments)};
charisma.smartui.Tooltip.prototype.mouseOver=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseOver",arguments)};charisma.smartui.Tooltip.CSS="toolbar-tootip";charisma.smartui.Tooltip.ARROW_CSS=["toolbar-tootip-arrow","toolbar-tootip-arrow-l","toolbar-tootip-arrow-b","toolbar-tootip-arrow-r"];
charisma.smartui.Tooltip.state_HIDDEN={name:"HIDDEN",mouseOver:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,charisma.smartui.Tooltip.state_BEFORE_SHOW);return charisma.smartui.Tooltip.state_BEFORE_SHOW},show:function(){this._show();return charisma.smartui.Tooltip.state_SHOWN}};
charisma.smartui.Tooltip.state_BEFORE_SHOW={name:"BEFORE_SHOW",onenter:function(){this.startTimer(this.showTimer,this.showDelay)},onexit:function(){this.stopTimer(this.showTimer)},mouseOut:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.Tooltip.state_BEFORE_SHOW);return charisma.smartui.Tooltip.state_HIDDEN},tick:function(){this._show();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.Tooltip.state_BEFORE_SHOW);return charisma.smartui.Tooltip.state_SHOWN},
hide:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.Tooltip.state_BEFORE_SHOW);return charisma.smartui.Tooltip.state_HIDDEN}};charisma.smartui.Tooltip.state_SHOWN={name:"SHOWN",mouseOut:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,charisma.smartui.Tooltip.state_BEFORE_HIDE);return charisma.smartui.Tooltip.state_BEFORE_HIDE},hide:function(){this._hide();return charisma.smartui.Tooltip.state_HIDDEN}};
charisma.smartui.Tooltip.state_BEFORE_HIDE={name:"BEFORE_HIDE",onenter:function(){this.startTimer(this.hideTimer,this.hideDelay)},onexit:function(){this.stopTimer(this.hideTimer)},mouseOver:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.Tooltip.state_BEFORE_HIDE);return charisma.smartui.Tooltip.state_SHOWN},show:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.Tooltip.state_BEFORE_HIDE);return charisma.smartui.Tooltip.state_SHOWN},
hide:function(){this._hide();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.Tooltip.state_BEFORE_HIDE);return charisma.smartui.Tooltip.state_HIDDEN},tick:function(){this._hide();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.Tooltip.state_BEFORE_HIDE);return charisma.smartui.Tooltip.state_HIDDEN}};charisma.smartui.TooltipOptions=function(){};charisma.smartui.TooltipDirection=function(){};charisma.smartui.TooltipDirection.TOP=0;
charisma.smartui.TooltipDirection.LEFT=1;charisma.smartui.TooltipDirection.BOTTOM=2;charisma.smartui.TooltipDirection.RIGHT=3;

cr.setTemplateBind("CommandDialog",function(a){cr.ach(a,"submitButton","click",function(b){cr.findInHandler(b,".submitButton",[]).disabled=!0;var a=cr.findInHandler(b,".markdownToggle",[])&&cr.findInHandler(b,".markdownToggle",[]).checked;cr.serverMethodCallInHandler(b,".methodCall_submit",{__param__command:commandDialog.config.commandText.value,__param__comment:commandDialog.config.commentTextArea.value,__param__disableNotifications:!1,__param__useMarkdown:a},{preventDoubleSubmit:!0,collectFileElements:!1,
collectFormElements:!1})});cr.ach(a,"silentSubmitButton","click",function(b){var a=cr.findInHandler(b,".markdownToggle",[])&&cr.findInHandler(b,".markdownToggle",[]).checked;cr.serverMethodCallInHandler(b,".methodCall_submit",{__param__command:commandDialog.config.commandText.value,__param__comment:commandDialog.config.commentTextArea.value,__param__disableNotifications:!0,__param__useMarkdown:a},{preventDoubleSubmit:!0,collectFileElements:!1,collectFormElements:!1})});cr.ach(a,"cancelButton","click",
function(){commandDialog.hide()});cr.ach(a,"closeDialog","click",function(){commandDialog.hide()});cr.ach(a,"commandDialog","stopdrag",function(a){cr.findInHandler(a,".newCommandText",[]).focus()});regdlg(a,"commandDialog")});

var byid=function(a){return $(document.getElementById(a))},applyExtension=function(a){Webr.util.Util.isIE&&Webr.component.ComponentRegistry.get().applyExtension(a)};common.util.Util=function(){};
common.util.Util.MIME_TYPES={doc:"application/msword",dot:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",txt:"text/rtf",ez:"application/andrew-inset",aw:"application/applixware",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomsvc:"application/atomsvc+xml",ccxml:"application/ccxml+xml",cu:"application/cu-seeme",
davmount:"application/davmount+xml",ecma:"application/ecmascript",emma:"application/emma+xml",epub:"application/epub+zip",pfr:"application/font-tdpfr",stk:"application/hyperstudio",jar:"application/java-archive",ser:"application/java-serialized-object","class":"application/java-vm",js:"application/javascript",json:"application/json",lostxml:"application/lost+xml",hqx:"application/mac-binhex40",cpt:"application/mac-compactpro",mrc:"application/marc",ma:"application/mathematica",nb:"application/mathematica",
mb:"application/mathematica",mathml:"application/mathml+xml",mbox:"application/mbox",mscml:"application/mediaservercontrol+xml",mp4s:"application/mp4","doc,.dot":"application/msword",mxf:"application/mxf",oda:"application/oda",opf:"application/oebps-package+xml",ogx:"application/ogg",onetoc:"application/onenote",onetoc2:"application/onenote",onetmp:"application/onenote",onepkg:"application/onenote",xer:"application/patch-ops-error+xml",pdf:"application/pdf",pgp:"application/pgp-encrypted",asc:"application/pgp-signature",
sig:"application/pgp-signature",prf:"application/pics-rules",p10:"application/pkcs10",p7m:"application/pkcs7-mime",p7c:"application/pkcs7-mime",p7s:"application/pkcs7-signature",cer:"application/pkix-cert",crl:"application/pkix-crl",pkipath:"application/pkix-pkipath",pki:"application/pkixcmp",pls:"application/pls+xml",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",cww:"application/prs.cww",rdf:"application/rdf+xml",rif:"application/reginfo+xml",rnc:"application/relax-ng-compact-syntax",
rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rs:"application/rls-services+xml",rsd:"application/rsd+xml",rss:"application/rss+xml",rtf:"application/rtf",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",spq:"application/scvp-vp-request",spp:"application/scvp-vp-response",sdp:"application/sdp",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",shf:"application/shf+xml",smi:"application/smil+xml",
smil:"application/smil+xml",rq:"application/sparql-query",srx:"application/sparql-results+xml",gram:"application/srgs",grxml:"application/srgs+xml",ssml:"application/ssml+xml",plb:"application/vnd.3gpp.pic-bw-large",psb:"application/vnd.3gpp.pic-bw-small",pvb:"application/vnd.3gpp.pic-bw-var",tcap:"application/vnd.3gpp2.tcap",pwn:"application/vnd.3m.post-it-notes",aso:"application/vnd.accpac.simply.aso",imp:"application/vnd.accpac.simply.imp",acu:"application/vnd.acucobol",atc:"application/vnd.acucorp",
acutc:"application/vnd.acucorp",air:"application/vnd.adobe.air-application-installer-package+zip",xdp:"application/vnd.adobe.xdp+xml",xfdf:"application/vnd.adobe.xfdf",azf:"application/vnd.airzip.filesecure.azf",azs:"application/vnd.airzip.filesecure.azs",azw:"application/vnd.amazon.ebook",acc:"application/vnd.americandynamics.acc",ami:"application/vnd.amiga.ami",apk:"application/vnd.android.package-archive",cii:"application/vnd.anser-web-certificate-issue-initiation",fti:"application/vnd.anser-web-funds-transfer-initiation",
atx:"application/vnd.antix.game-component",mpkg:"application/vnd.apple.installer+xml",swi:"application/vnd.arastra.swi",aep:"application/vnd.audiograph",mpm:"application/vnd.blueice.multipass",bmi:"application/vnd.bmi",rep:"application/vnd.businessobjects",cdxml:"application/vnd.chemdraw+xml",mmd:"application/vnd.chipnuts.karaoke-mmd",cdy:"application/vnd.cinderella",cla:"application/vnd.claymore",csp:"application/vnd.commonspace",cdbcmsg:"application/vnd.contact.cmsg",cmc:"application/vnd.cosmocaller",
clkx:"application/vnd.crick.clicker",clkk:"application/vnd.crick.clicker.keyboard",clkp:"application/vnd.crick.clicker.palette",clkt:"application/vnd.crick.clicker.template",clkw:"application/vnd.crick.clicker.wordbank",wbs:"application/vnd.criticaltools.wbs+xml",pml:"application/vnd.ctc-posml",ppd:"application/vnd.cups-ppd",car:"application/vnd.curl.car",pcurl:"application/vnd.curl.pcurl",rdz:"application/vnd.data-vision.rdz",fe_launch:"application/vnd.denovo.fcselayout-link",dna:"application/vnd.dna",
mlp:"application/vnd.dolby.mlp",dpg:"application/vnd.dpgraph",dfac:"application/vnd.dreamfactory",geo:"application/vnd.dynageo",mag:"application/vnd.ecowin.chart",nml:"application/vnd.enliven",esf:"application/vnd.epson.esf",msf:"application/vnd.epson.msf",qam:"application/vnd.epson.quickanime",slt:"application/vnd.epson.salt",ssf:"application/vnd.epson.ssf",es3:"application/vnd.eszigno3+xml",et3:"application/vnd.eszigno3+xml",ez2:"application/vnd.ezpix-album",ez3:"application/vnd.ezpix-package",
fdf:"application/vnd.fdf",mseed:"application/vnd.fdsn.mseed",seed:"application/vnd.fdsn.seed",dataless:"application/vnd.fdsn.seed",gph:"application/vnd.flographit",ftc:"application/vnd.fluxtime.clip",fm:"application/vnd.framemaker",frame:"application/vnd.framemaker",maker:"application/vnd.framemaker",book:"application/vnd.framemaker",fnc:"application/vnd.frogans.fnc",ltf:"application/vnd.frogans.ltf",fsc:"application/vnd.fsc.weblaunch",oas:"application/vnd.fujitsu.oasys",oa2:"application/vnd.fujitsu.oasys2",
oa3:"application/vnd.fujitsu.oasys3",fg5:"application/vnd.fujitsu.oasysgp",bh2:"application/vnd.fujitsu.oasysprs",ddd:"application/vnd.fujixerox.ddd",xdw:"application/vnd.fujixerox.docuworks",xbd:"application/vnd.fujixerox.docuworks.binder",fzs:"application/vnd.fuzzysheet",txd:"application/vnd.genomatix.tuxedo",ggb:"application/vnd.geogebra.file",ggt:"application/vnd.geogebra.tool",gex:"application/vnd.geometry-explorer",gre:"application/vnd.geometry-explorer",gmx:"application/vnd.gmx",kml:"application/vnd.google-earth.kml+xml",
kmz:"application/vnd.google-earth.kmz",gqs:"application/vnd.grafeq",gqf:"application/vnd.grafeq",gac:"application/vnd.groove-account",ghf:"application/vnd.groove-help",gim:"application/vnd.groove-identity-message",grv:"application/vnd.groove-injector",gtm:"application/vnd.groove-tool-message",tpl:"application/vnd.groove-tool-template",vcg:"application/vnd.groove-vcard",zmm:"application/vnd.handheld-entertainment+xml",hbci:"application/vnd.hbci",les:"application/vnd.hhe.lesson-player",hpgl:"application/vnd.hp-hpgl",
hpid:"application/vnd.hp-hpid",hps:"application/vnd.hp-hps",jlt:"application/vnd.hp-jlyt",pcl:"application/vnd.hp-pcl",pclxl:"application/vnd.hp-pclxl","sfd-hdstx":"application/vnd.hydrostatix.sof-data",x3d:"application/vnd.hzn-3d-crossword",mpy:"application/vnd.ibm.minipay",irm:"application/vnd.ibm.rights-management",sc:"application/vnd.ibm.secure-container","icc,.icm":"application/vnd.iccprofile",igl:"application/vnd.igloader",ivp:"application/vnd.immervision-ivp",ivu:"application/vnd.immervision-ivu",
"xpw,.xpx":"application/vnd.intercon.formnet",qbo:"application/vnd.intu.qbo",qfx:"application/vnd.intu.qfx",rcprofile:"application/vnd.ipunplugged.rcprofile",irp:"application/vnd.irepository.package+xml",xpr:"application/vnd.is-xpr",jam:"application/vnd.jam",rms:"application/vnd.jcp.javame.midlet-rms",jisp:"application/vnd.jisp",joda:"application/vnd.joost.joda-archive","ktz,.ktr":"application/vnd.kahootz",karbon:"application/vnd.kde.karbon",chrt:"application/vnd.kde.kchart",kfo:"application/vnd.kde.kformula",
flw:"application/vnd.kde.kivio",kon:"application/vnd.kde.kontour","kpr,.kpt":"application/vnd.kde.kpresenter",ksp:"application/vnd.kde.kspread","kwd,.kwt":"application/vnd.kde.kword",htke:"application/vnd.kenameaapp",kia:"application/vnd.kidspiration","kne,.knp":"application/vnd.kinar","skp,.skd,.skt,.skm":"application/vnd.koan",sse:"application/vnd.kodak-descriptor",lbd:"application/vnd.llamagraphics.life-balance.desktop",lbe:"application/vnd.llamagraphics.life-balance.exchange+xml",123:"application/vnd.lotus-1-2-3",
apr:"application/vnd.lotus-approach",pre:"application/vnd.lotus-freelance",nsf:"application/vnd.lotus-notes",org:"application/vnd.lotus-organizer",scm:"application/vnd.lotus-screencam",lwp:"application/vnd.lotus-wordpro",portpkg:"application/vnd.macports.portpkg",mcd:"application/vnd.mcd",mc1:"application/vnd.medcalcdata",cdkey:"application/vnd.mediastation.cdkey",mwf:"application/vnd.mfer",mfm:"application/vnd.mfmp",flo:"application/vnd.micrografx.flo",igx:"application/vnd.micrografx.igx",mif:"application/vnd.mif",
daf:"application/vnd.mobius.daf",dis:"application/vnd.mobius.dis",mbk:"application/vnd.mobius.mbk",mqy:"application/vnd.mobius.mqy",msl:"application/vnd.mobius.msl",plc:"application/vnd.mobius.plc",txf:"application/vnd.mobius.txf",mpn:"application/vnd.mophun.application",mpc:"application/vnd.mophun.certificate",xul:"application/vnd.mozilla.xul+xml",cil:"application/vnd.ms-artgalry",cab:"application/vnd.ms-cab-compressed",xls:"application/vnd.ms-excel",xlm:"application/vnd.ms-excel",xla:"application/vnd.ms-excel",
xlc:"application/vnd.ms-excel",xlt:"application/vnd.ms-excel",xlw:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xltm:"application/vnd.ms-excel.template.macroenabled.12",eot:"application/vnd.ms-fontobject",chm:"application/vnd.ms-htmlhelp",ims:"application/vnd.ms-ims",lrm:"application/vnd.ms-lrm",cat:"application/vnd.ms-pki.seccat",stl:"application/vnd.ms-pki.stl",
ppt:"application/vnd.ms-powerpoint",pps:"application/vnd.ms-powerpoint",pot:"application/vnd.ms-powerpoint",ppam:"application/vnd.ms-powerpoint.addin.macroenabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",sldm:"application/vnd.ms-powerpoint.slide.macroenabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroenabled.12",potm:"application/vnd.ms-powerpoint.template.macroenabled.12",mpt:"application/vnd.ms-project",mpt:"application/vnd.ms-project",docm:"application/vnd.ms-word.document.macroenabled.12",
dotm:"application/vnd.ms-word.template.macroenabled.12",wps:"application/vnd.ms-works",wks:"application/vnd.ms-works",wcm:"application/vnd.ms-works",wdb:"application/vnd.ms-works",wpl:"application/vnd.ms-wpl",xps:"application/vnd.ms-xpsdocument",mseq:"application/vnd.mseq",mus:"application/vnd.musician",msty:"application/vnd.muvee.style",nlu:"application/vnd.neurolanguage.nlu",nnd:"application/vnd.noblenet-directory",nns:"application/vnd.noblenet-sealer",nnw:"application/vnd.noblenet-web",ngdat:"application/vnd.nokia.n-gage.data",
"n-gage":"application/vnd.nokia.n-gage.symbian.install",rpst:"application/vnd.nokia.radio-preset",rpss:"application/vnd.nokia.radio-presets",edm:"application/vnd.novadigm.edm",edx:"application/vnd.novadigm.edx",ext:"application/vnd.novadigm.ext",odc:"application/vnd.oasis.opendocument.chart",otc:"application/vnd.oasis.opendocument.chart-template",odb:"application/vnd.oasis.opendocument.database",odf:"application/vnd.oasis.opendocument.formula",odft:"application/vnd.oasis.opendocument.formula-template",
odg:"application/vnd.oasis.opendocument.graphics",otg:"application/vnd.oasis.opendocument.graphics-template",odi:"application/vnd.oasis.opendocument.image",oti:"application/vnd.oasis.opendocument.image-template",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",ots:"application/vnd.oasis.opendocument.spreadsheet-template",odt:"application/vnd.oasis.opendocument.text",otm:"application/vnd.oasis.opendocument.text-master",ott:"application/vnd.oasis.opendocument.text-template",
oth:"application/vnd.oasis.opendocument.text-web",xo:"application/vnd.olpc-sugar",dd2:"application/vnd.oma.dd2+xml",oxt:"application/vnd.openofficeorg.extension",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",sldx:"application/vnd.openxmlformats-officedocument.presentationml.slide",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",dp:"application/vnd.osgi.dp",pdb:"application/vnd.palm",pqa:"application/vnd.palm",oprc:"application/vnd.palm",str:"application/vnd.pg.format",ei6:"application/vnd.pg.osasli",efif:"application/vnd.picsel",plf:"application/vnd.pocketlearn",pbd:"application/vnd.powerbuilder6",
box:"application/vnd.previewsystems.box",mgz:"application/vnd.proteus.magazine",qps:"application/vnd.publishare-delta-tree",ptid:"application/vnd.pvi.ptid1",mxl:"application/vnd.recordare.musicxml",musicxml:"application/vnd.recordare.musicxml+xml",cod:"application/vnd.rim.cod",rm:"application/vnd.rn-realmedia",link66:"application/vnd.route66.link66+xml",see:"application/vnd.seemail",sema:"application/vnd.sema",semd:"application/vnd.semd",semf:"application/vnd.semf",ifm:"application/vnd.shana.informed.formdata",
itp:"application/vnd.shana.informed.formtemplate",iif:"application/vnd.shana.informed.interchange",ipk:"application/vnd.shana.informed.package",twd:"application/vnd.simtech-mindmapper",twds:"application/vnd.simtech-mindmapper",mmf:"application/vnd.smaf",teacher:"application/vnd.smart.teacher",sdkm:"application/vnd.solent.sdkm+xml",sdkd:"application/vnd.solent.sdkm+xml",dxp:"application/vnd.spotfire.dxp",sfs:"application/vnd.spotfire.sfs",sdc:"application/vnd.stardivision.calc",sda:"application/vnd.stardivision.draw",
sdd:"application/vnd.stardivision.impress",smf:"application/vnd.stardivision.math",sdw:"application/vnd.stardivision.writer",vor:"application/vnd.stardivision.writer",sgl:"application/vnd.stardivision.writer-global",sxc:"application/vnd.sun.xml.calc",stc:"application/vnd.sun.xml.calc.template",sxd:"application/vnd.sun.xml.draw",std:"application/vnd.sun.xml.draw.template",sxi:"application/vnd.sun.xml.impress",sti:"application/vnd.sun.xml.impress.template",sxm:"application/vnd.sun.xml.math",sxw:"application/vnd.sun.xml.writer",
sxg:"application/vnd.sun.xml.writer.global",stw:"application/vnd.sun.xml.writer.template",sus:"application/vnd.sus-calendar",susp:"application/vnd.sus-calendar",svd:"application/vnd.svd",sis:"application/vnd.symbian.install",sisx:"application/vnd.symbian.install",xsm:"application/vnd.syncml+xml",bdm:"application/vnd.syncml.dm+wbxml",xdm:"application/vnd.syncml.dm+xml",tao:"application/vnd.tao.intent-module-archive",tmo:"application/vnd.tmobile-livetv",tpt:"application/vnd.trid.tpt",mxs:"application/vnd.triscape.mxs",
tra:"application/vnd.trueapp",ufd:"application/vnd.ufdl",ufdl:"application/vnd.ufdl",utz:"application/vnd.uiq.theme",umj:"application/vnd.umajin",unityweb:"application/vnd.unity",uoml:"application/vnd.uoml+xml",vcx:"application/vnd.vcx",vsd:"application/vnd.visio",vst:"application/vnd.visio",vss:"application/vnd.visio",vsw:"application/vnd.visio",vis:"application/vnd.visionary",vsf:"application/vnd.vsf",wbxml:"application/vnd.wap.wbxml",wmlc:"application/vnd.wap.wmlc",wmlsc:"application/vnd.wap.wmlscriptc",
wtb:"application/vnd.webturbo",wpd:"application/vnd.wordperfect",wqd:"application/vnd.wqd",stf:"application/vnd.wt.stf",xar:"application/vnd.xara",xfdl:"application/vnd.xfdl",hvd:"application/vnd.yamaha.hv-dic",hvs:"application/vnd.yamaha.hv-script",hvp:"application/vnd.yamaha.hv-voice",osf:"application/vnd.yamaha.openscoreformat",osfpvg:"application/vnd.yamaha.openscoreformat.osfpvg+xml",saf:"application/vnd.yamaha.smaf-audio",spf:"application/vnd.yamaha.smaf-phrase",cmp:"application/vnd.yellowriver-custom-menu",
zir:"application/vnd.zul",zirz:"application/vnd.zul",zaz:"application/vnd.zzazz.deck+xml",vxml:"application/voicexml+xml",hlp:"application/winhlp",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",abw:"application/x-abiword",ace:"application/x-ace-compressed",aam:"application/x-authorware-map",aas:"application/x-authorware-seg",bcpio:"application/x-bcpio",torrent:"application/x-bittorrent",bz:"application/x-bzip",bz2:"application/x-bzip2",boz:"application/x-bzip2",vcd:"application/x-cdlink",
chat:"application/x-chat",pgn:"application/x-chess-pgn",cpio:"application/x-cpio",csh:"application/x-csh",deb:"application/x-debian-package",udeb:"application/x-debian-package",wad:"application/x-doom",ncx:"application/x-dtbncx+xml",dtb:"application/x-dtbook+xml",res:"application/x-dtbresource+xml",dvi:"application/x-dvi",bdf:"application/x-font-bdf",gsf:"application/x-font-ghostscript",psf:"application/x-font-linux-psf",otf:"application/x-font-otf",pcf:"application/x-font-pcf",snf:"application/x-font-snf",
ttf:"application/x-font-ttf",ttc:"application/x-font-ttf",pfa:"application/x-font-type1",pfb:"application/x-font-type1",pfa:"application/x-font-type1",afm:"application/x-font-type1",spl:"application/x-futuresplash",gnumeric:"application/x-gnumeric",gtar:"application/x-gtar",hdf:"application/x-hdf",jnlp:"application/x-java-jnlp-file",latex:"application/x-latex",application:"application/x-ms-application",wmd:"application/x-ms-wmd",wmz:"application/x-ms-wmz",xbap:"application/x-ms-xbap",mdb:"application/x-msaccess",
obd:"application/x-msbinder",crd:"application/x-mscardfile",clp:"application/x-msclip",wmf:"application/x-msmetafile",mny:"application/x-msmoney",pub:"application/x-mspublisher",scd:"application/x-msschedule",trm:"application/x-msterminal",wri:"application/x-mswrite",p7r:"application/x-pkcs7-certreqresp",rar:"application/x-rar-compressed",sh:"application/x-sh",shar:"application/x-shar",swf:"application/x-shockwave-flash",xap:"application/x-silverlight-app",sit:"application/x-stuffit",sitx:"application/x-stuffitx",
tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",tfm:"application/x-tex-tfm",ustar:"application/x-ustar",der:"application/x-x509-ca-cert",crt:"application/x-x509-ca-cert",fig:"application/x-xfig",xpi:"application/x-xpinstall",xenc:"application/xenc+xml",xhtml:"application/xhtml+xml",xht:"application/xhtml+xml",xml:"application/xml",xsl:"application/xml",dtd:"application/xml-dtd",xop:"application/xop+xml",xslt:"application/xslt+xml",xspf:"application/xspf+xml",mxml:"application/xv+xml",
xhvml:"application/xv+xml",xvml:"application/xv+xml",xvm:"application/xv+xml",zip:"application/zip",adp:"audio/adpcm",au:"audio/basic",snd:"audio/basic",mid:"audio/midi",mp4a:"audio/mp4",m4p:"audio/mp4a-latm",mpga:"audio/mpeg",mp2:"audio/mpeg",mp2a:"audio/mpeg",mp3:"audio/mpeg",m2a:"audio/mpeg",m3a:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",eol:"audio/vnd.digital-winds",dts:"audio/vnd.dts",dtshd:"audio/vnd.dts.hd",lvp:"audio/vnd.lucent.voice",pya:"audio/vnd.ms-playready.media.pya",ecelp4800:"audio/vnd.nuera.ecelp4800",
ecelp7470:"audio/vnd.nuera.ecelp7470",ecelp9600:"audio/vnd.nuera.ecelp9600",aac:"audio/x-aac",m3u:"audio/x-mpegurl",wax:"audio/x-ms-wax",wma:"audio/x-ms-wma",ram:"audio/x-pn-realaudio",ra:"audio/x-pn-realaudio",rmp:"audio/x-pn-realaudio-plugin",wav:"audio/x-wav",cdx:"chemical/x-cdx",cif:"chemical/x-cif",cmdf:"chemical/x-cmdf",cml:"chemical/x-cml",csml:"chemical/x-csml",xyz:"chemical/x-xyz",bmp:"image/bmp",cgm:"image/cgm",g3:"image/g3fax",gif:"image/gif",ief:"image/ief",jp2:"image/jp2",jpeg:"image/jpeg",
jpg:"image/jpeg",jpe:"image/jpeg",pct:"image/pict",png:"image/png",btif:"image/prs.btif",svg:"image/svg+xml",svgz:"image/svg+xml",tiff:"image/tiff",tif:"image/tiff",psd:"image/vnd.adobe.photoshop",djvu:"image/vnd.djvu",djv:"image/vnd.djvu",dwg:"image/vnd.dwg",dxf:"image/vnd.dxf",fbs:"image/vnd.fastbidsheet",fpx:"image/vnd.fpx",fst:"image/vnd.fst",mmr:"image/vnd.fujixerox.edmics-mmr",rlc:"image/vnd.fujixerox.edmics-rlc",mdi:"image/vnd.ms-modi",npx:"image/vnd.net-fpx",wbmp:"image/vnd.wap.wbmp",xif:"image/vnd.xiff",
ras:"image/x-cmu-raster",cmx:"image/x-cmx",ico:"image/x-icon",pntg:"image/x-macpaint",mac:"image/x-macpaint",mac:"image/x-macpaint",pcx:"image/x-pcx",doc:"application/msword",dot:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document:",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template:"};common.util.Util.createElement=function(a,b,c){a=$(document.createElement(a));b&&a.addClass(b);c&&a.attr("title",c);return a};
common.util.Util.handleMouseClick=function(a,b,c){if((Webr.util.Util.isMac?!0===a.metaKey:!0===a.ctrlKey)||a.which&&1!==a.which)return Webr.util.Util.isChrome&&b&&(a.preventDefault(),window.open(b,"_blank")),!0;c&&c(a);return!1};
common.util.Util.hiResolutionDisplay=function(){if(window.matchMedia){var a=window.matchMedia("only screen and (-moz-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");return a&&a.matches}return!1};common.util.Util.isIE8andLower=function(){return Webr.util.Util.isIE&&8>=Webr.util.Util.browserVersion};
common.util.Util.getMimeType=function(a){return common.util.Util.MIME_TYPES[a]};common.util.Util.escapeDots=function(a){return a.replace(/\./g,"\\.")};common.util.Util.isLineBreakOrSpace=function(a){return/\r\n|\n|\r|\s/g.test(a)};common.util.Util.getSelection=function(){return void 0!==typeof window.getSelection?window.getSelection().toString():document.selection.createRange().text};

Webr.component.MultiBox=function(a,b,c,g){Webr.component.MultiBox.superclass.constructor.call(this);this.noMatch={name:"&lt;"+l10n('no matches')+"&gt;",id:"nomatch",checked:!1};this.newOption={name:"",id:"newoption",checked:!1};this.submitted=this.visible=this.inited=this.optionsLoaded=this.allowNewOption=!1;this.height=0;this.clickOptionFunction=null;this.shadow=Webr.component.Shadow.EMPTY_SHADOW;this.searchInput=a;this.allowNewOption=c;this.valueQuery=$(this.searchInput);
this.valueQuery.data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE,this);this.searchInput.name=this.searchInput.id.substring(3);this.mainElement=this.valueQuery.parent().parent();this.height=this.mainElement.get(0).getAttribute("_max-height");var d=this;this.searchInput.createHighlighter=function(a){d.errorHighlighter=new Webr.component.SelectorErrorHighlighter(d,a);return d.errorHighlighter};this.checkOptionFunction=function(a){a.checked?(d.checkedOptions[a.id]=a,d.searchInput.setAttribute("valueId",
d.collectOptions()),d.onSelect(a.id)):(delete d.checkedOptions[a.id],d.searchInput.setAttribute("valueId",d.collectOptions()),d.onUnSelect(a.id));d.applyButton&&d.applyButton.show();d.focusInput()};this.clickOptionFunction=!0==g?function(a){d.searchInput.setAttribute("valueId",a.id);d.submit();d.reset([a.id])}:this.checkOptionFunction;b?(this.applyButton=$(document.createElement("div")),this.applyButton.html(l10n('Apply')),this.applyButton.addClass("applyButton"),this.applyButton.click(function(){d.submit()}),
this.applyButton.hide(),this.bindToElement=document.getElementById(b),this.handleBlurMouseDown=function(a){d.mainElement.ancestorOf(a.target)||d.blur()},this.handleBlurKeyDown=function(a){(a.isKey(Webr.util.Key.ESC)||a.isShift(Webr.util.Key.TAB))&&d.blur()}):this.collectItems()};var F=new Function;F.prototype=Webr.component.Component.prototype;Webr.component.MultiBox.prototype=new F;Webr.component.MultiBox.prototype.constructor=Webr.component.MultiBox;Webr.component.MultiBox.superclass=Webr.component.Component.prototype;
Webr.component.MultiBox.prototype.init=function(){var a=this;this.searchInput.attachWatcher(!0);this.searchInput.setWatcherDelay(0);var b=$(this.searchInput);b.bind("valuechange",function(){a.inputValueChanged()});var c=function(b){return a.handleKeyDown(b)};Webr.util.Util.isWebkit||Webr.util.Util.isIE?(b.keydown(c),b.keypress(function(b){if(32==b.keyCode)return null!==a.dataList.getCurrentOption()?!1:!0})):(b.keypress(c),b.keydown(function(b){if(32==b.keyCode)return null!==a.dataList.getCurrentOption()?
!1:!0}))};
Webr.component.MultiBox.prototype.collectItems=function(){var a=this;this.checkedOptions={};this.dataList=new Webr.component.MultiDataList;this.originalSelectedIds=[];this.originalOptions=[];this.uList=this.mainElement.find("ul.comboboxList");this.listWrapper=this.uList.parent();this.uList.children().each(function(){a.dataList.addOption((new Webr.component.CheckListItem(null)).collectElement(this));a.cellHeight||(a.cellHeight=$(this).height())});this.height&&this.listWrapper.css("max-height",this.height*
this.cellHeight);for(var b=0;b<this.dataList.options.length;++b){var c=this.dataList.options[b].option;c.checked&&(this.checkedOptions[c.id]=c,this.originalSelectedIds.push(c.id));this.originalOptions.push(c)}this.searchInput.setAttribute("valueId",a.collectOptions());this.dataList.registerCheckHandller(this.checkOptionFunction);this.dataList.registerClickHandler(this.clickOptionFunction);this.optionsLoaded=!0};
Webr.component.MultiBox.prototype.update=function(a,b){this.checkedOptions={};this.dataList=new Webr.component.MultiDataList;this.originalSelectedIds=b;this.originalOptions=a;this.submitted=!1;var c=this,g=a.length,d=$(document.createElement("div"));d.addClass("contentWrapper");var h=document.createElement("ul");h.className="comboboxList";d.append(h);for(var f=0;f<g;f+=1){-1!==jQuery.inArray(a[f].id,b)&&(c.checkedOptions[a[f].id]=a[f],a[f].checked=!0);var e=new Webr.component.CheckListItem(a[f]);
this.dataList.addOption(e);h.appendChild(e.getOptionElement().get(0));this.cellHeight||(this.cellHeight=e.getOptionElement().height())}this.dataList.registerClickHandler(c.clickOptionFunction);this.dataList.registerCheckHandller(c.checkOptionFunction);void 0==a||0==a.length?(this.noMatch.name="&lt;empty list&gt;",e=new Webr.component.CheckListItem(this.noMatch),this.dataList.addOption(e),h.appendChild(e.getOptionElement().get(0))):this.bindToElement&&(e=new Webr.component.CheckListItem(this.noMatch),
this.dataList.addOption(e),h.appendChild(e.getOptionElement().get(0)));this.allowNewOption&&(e=new Webr.component.CheckListItem(this.newOption),this.dataList.addOption(e),h.appendChild(e.getOptionElement().get(0)),e.registerClickHandler(function(a){c.submit(a.name)}));this.searchInput.setAttribute("valueId",c.collectOptions());this.listWrapper?this.listWrapper.replaceWith(d):this.mainElement.append(d);this.uList=$(h);this.listWrapper=d;this.bindToElement&&(this.mainElement.append(this.applyButton),
this.shadow.remove(),this.shadow=Webr.component.Shadow.getShadow(this.listWrapper,"ie-combo-shadow"));this.height&&this.listWrapper.css("max-height",this.height*this.cellHeight);this.bindToElement&&this.visible&&this.showOptions()};
Webr.component.MultiBox.prototype.fixHeight=function(){this.listWrapper.get(0);var a=this.listWrapper.maxVisibleHeight(),b=!1,c=this.listWrapper.height(),g=$(window).height();c>a&&a<g/5&&(b=!0,a=$(this.bindToElement).offset().top-$(window).scrollTop()-this.mainElement.outerHeight(!0));this.move(b);c>a?this.uList.css("max-height",a).css("overflow-y","scroll"):this.uList.css("max-height","").css("overflow-y","")};
Webr.component.MultiBox.prototype.move=function(a){a?this.bindToElement&&this.mainElement.addClass("reversal").css("top",$(this.bindToElement).position().top-this.mainElement.outerHeight(!0)):this.mainElement.removeClass("reversal").css("top","")};Webr.component.MultiBox.prototype.submit=function(a){this.submitted=!0;this.originalSelectedIds=[];for(var b in this.checkedOptions)this.originalSelectedIds.push(b);this.blur();if(a)this.onSubmitNewOption(a);else this.onsubmit()};
Webr.component.MultiBox.prototype.reset=function(a){for(var b=0;b<this.originalOptions.length;++b)this.originalOptions[b].checked=!1;this.update(this.originalOptions,a?a:this.originalSelectedIds)};Webr.component.MultiBox.prototype.collectOptions=function(){var a=!0,b="",c;for(c in this.checkedOptions)a||(b+=","),b+=c,a=!1;return b};Webr.component.MultiBox.prototype.blur=function(){this.unhandleBlur();this.hideOptions()};
Webr.component.MultiBox.prototype.handleBlur=function(){var a=$(Webr.util.Util.isIE?document.body:document);a.mousedown(this.handleBlurMouseDown);Webr.util.Util.addKeyHandler(a,this.handleBlurKeyDown)};Webr.component.MultiBox.prototype.unhandleBlur=function(){var a=$(Webr.util.Util.isIE?document.body:document);a.unbind("mousedown",this.handleBlurMouseDown);Webr.util.Util.removeKeyHandler(a,this.handleBlurKeyDown)};
Webr.component.MultiBox.prototype.inputValueChanged=function(){this.newOption.name=this.searchInput.value;this.dataList.narrow(this.searchInput.value.toLowerCase(),void 0!=this.bindToElement);this.shadow.setHeight(this.uList.height())};Webr.component.MultiBox.prototype.loadOptions=function(){if(!this.optionsLoaded)if(void 0!=this.valueQuery.triggerHandler("load"))this.optionsLoaded=!0;else{var a=this;window.setTimeout(function(){a.loadOptions()},50)}};
Webr.component.MultiBox.prototype.focus=function(){this.optionsLoaded?this.showOptions():(this.loadOptions(),this.visible=!0);this.inited||(this.init(void 0!=this.bindToElement),this.inited=!0);this.bindToElement&&this.handleBlur()};
Webr.component.MultiBox.prototype.handleKeyDown=function(a){this.bindToElement&&(Webr.util.Key.isKeyNoModifiers(a,Webr.util.Key.ENTER)&&(this.dataList.hasCurrent()&&this.dataList.getCurrentItem().check(),this.submit()),a.isKey(Webr.util.Key.TAB)&&this.submit());return Webr.util.Key.isKeyNoModifiers(a,Webr.util.Key.DOWN)?(this.dataList.next(),!1):Webr.util.Key.isKeyNoModifiers(a,Webr.util.Key.UP)?(this.dataList.prev(),!1):32==a.which&&null!==this.dataList.getCurrentOption()?(this.dataList.getCurrentItem().check(),
!1):Webr.util.Key.isKeyNoModifiers(a,Webr.util.Key.PAGEDOWN)?(this.dataList.last(),!1):Webr.util.Key.isKeyNoModifiers(a,Webr.util.Key.PAGEUP)?(this.dataList.first(),!1):!0};
Webr.component.MultiBox.prototype.showOptions=function(){this.mainElement&&(this.submitted=!1,this.visible=!0,this.bindToElement&&(this.dataList.narrow("",!1),this.mainElement.show(),this.focusInput(),this.fixHeight()),this.onShowOptions(),this.shadow.setTop(this.listWrapper.position().top),this.shadow.setHeight(this.uList.height()),this.shadow.show())};
Webr.component.MultiBox.prototype.hideOptions=function(){if(this.mainElement){this.visible=!1;if(this.bindToElement){this.searchInput.setValueNoEvents("");this.mainElement.hide();this.bindToElement.focus();var a=this;window.setTimeout(function(){$(a.bindToElement).one("click",function(){a.focus();return!1})},150)}this.move(!1);this.onHideOptions();this.shadow.hide()}};Webr.component.MultiBox.prototype.focusInput=function(){try{this.searchInput.focus()}catch(a){}};
Webr.component.MultiBox.prototype.onload=function(){};Webr.component.MultiBox.prototype.onsubmit=function(){this.valueQuery.trigger("submit")};Webr.component.MultiBox.prototype.onSubmitNewOption=function(a){this.valueQuery.trigger("SubmitNewOption",{option:a})};Webr.component.MultiBox.prototype.onSelect=function(a){this.valueQuery.trigger("Select",{option:a})};Webr.component.MultiBox.prototype.onUnSelect=function(a){this.valueQuery.trigger("UnSelect",{option:a})};
Webr.component.MultiBox.prototype.onShowOptions=function(){this.valueQuery.trigger("ShowOptions")};Webr.component.MultiBox.prototype.onHideOptions=function(){this.valueQuery.trigger("HideOptions")};Webr.component.MultiBox.registerMultibox=function(a,b,c){cr.forEach(a,b,function(){var a=$(this),b=a.attr("bid"),h=b?!0:!1,f=function(){(new Webr.component.MultiBox(a.get(0),b,c,h)).focus();return!1};if(b)$(document.getElementById(b)).one("click",f);else f()})};
Webr.component.MultiBox.safeHighLight=function(a,b){var c;a.hideOptions?c=a.valueQuery:(c=$(a).find("input"),c.focus());c.get(0).highlight(b)};Webr.component.MultiDataList=function(){this.options=[];this.visibleOptions=0;this.currenStyleName="active";this.currentIndex=-1};Webr.component.MultiDataList.prototype.addOption=function(a){this.options.push(a);"nomatch"!==a.option.id?(this.visibleOptions=this.options.length,this.subscribeMouseOver(this.options.length-1)):this.noMatch=a};
Webr.component.MultiDataList.prototype.isEmpty=function(){return 0>=this.options.length};Webr.component.MultiDataList.prototype.hasVisible=function(){return!this.isEmpty()&&0<this.visibleOptions};Webr.component.MultiDataList.prototype.hasCurrent=function(){return 0<=this.currentIndex&&this.currentIndex<this.options.length};Webr.component.MultiDataList.prototype.unselectCurrent=function(){this.hasCurrent()&&this.options[this.currentIndex].unselect(this.currenStyleName)};
Webr.component.MultiDataList.prototype.next=function(){if(this.hasVisible()){-1!=this.currentIndex&&this.options[this.currentIndex].unselect(this.currenStyleName);for(var a=1;a<=this.options.length;++a){var b=(this.currentIndex+a)%this.options.length;if(this.options[b].visible){this.currentIndex=b;break}}this.options[this.currentIndex].selectAndScroll(this.currenStyleName)}};
Webr.component.MultiDataList.prototype.prev=function(){if(this.hasVisible()){-1==this.currentIndex?this.currentIndex=this.options.length:this.options[this.currentIndex].unselect(this.currenStyleName);for(var a=this.options.length-1;0<=a;--a){var b=(this.currentIndex+a)%this.options.length;if(this.options[b].visible){this.currentIndex=b;break}}this.options[this.currentIndex].selectAndScroll(this.currenStyleName)}};
Webr.component.MultiDataList.prototype.first=function(){this.hasVisible()&&(this.unselectCurrent(),this.currentIndex=-1,this.next())};Webr.component.MultiDataList.prototype.last=function(){this.hasVisible()&&(this.unselectCurrent(),this.currentIndex=-1,this.prev())};Webr.component.MultiDataList.prototype.getCurrentName=function(){var a=this.getCurrentOption();return null!=a?a.name:""};
Webr.component.MultiDataList.prototype.getCurrentId=function(){var a=this.getCurrentOption();return null!=a?a.id:""};Webr.component.MultiDataList.prototype.getCurrentOption=function(){var a=null;if(this.hasCurrent()&&(a=this.options[this.currentIndex].option,"nomatch"===a.id||"apply"===a.id||"newoption"===a.id))a=null;return a};Webr.component.MultiDataList.prototype.getCurrentItem=function(){var a=null;this.hasCurrent()&&(a=this.options[this.currentIndex]);return a};
Webr.component.MultiDataList.prototype.narrow=function(a,b){for(var c=this.visibleOptions=0;c<this.options.length;++c)this.options[c].narrow(a,b)&&(this.visibleOptions+=1);if(!b||!this.hasCurrent()||!this.getCurrentItem().visible)if((!this.hasCurrent()||!this.getCurrentItem().match)&&this.hasVisible()){-1==this.currentIndex?this.currentIndex=0:this.options[this.currentIndex].unselect(this.currenStyleName);for(c=0;c<this.options.length;++c){var g=(this.currentIndex+c)%this.options.length;if(this.options[g].visible&&
this.options[g].match){this.currentIndex=g;break}}this.options[this.currentIndex].selectAndScroll(this.currenStyleName)}this.hasVisible()||(this.noMatch.optionElement.show(),this.hasCurrent()&&this.getCurrentItem().unselect(this.currenStyleName),this.currentIndex=-1)};Webr.component.MultiDataList.prototype.registerClickHandler=function(a){for(var b=this.options.length,c=0;c<b;++c)this.options[c].registerClickHandler(a)};
Webr.component.MultiDataList.prototype.registerCheckHandller=function(a){for(var b=this.options.length,c=0;c<b;++c)this.options[c].registerCheckHandler(a)};Webr.component.MultiDataList.prototype.mouseOver=function(a){this.hasCurrent()&&this.options[this.currentIndex].unselect(this.currenStyleName);this.options[a].select(this.currenStyleName);this.currentIndex=a};Webr.component.MultiDataList.prototype.mousOut=function(){this.unselectCurrent();this.currentIndex=-1};
Webr.component.MultiDataList.prototype.subscribeMouseOver=function(a){var b=this;this.options[a].getOptionElement().mouseover(function(){b.mouseOver(a)});this.options[a].getOptionElement().mouseout(function(){b.mousOut(a)})};Webr.component.CheckListItem=function(a){this.visible=!0;this.match=!1;this.option=a};
Webr.component.CheckListItem.prototype.toggleCheck=function(){"nomatch"===this.option.id||("apply"===this.option.id||"newoption"===this.option.id)||(this.option.checked=!this.option.checked,this.checkBoxElement.toggleClass("checked"),this.checkBoxElement.toggleClass("unchecked"))};Webr.component.CheckListItem.prototype.isChecked=function(){return this.option.checked};Webr.component.CheckListItem.prototype.selectAndScroll=function(a){this.optionElement.addClass(a);this.optionElement.scrollTo(this.optionElement.parent().get(0))};
Webr.component.CheckListItem.prototype.select=function(a){this.optionElement.addClass(a)};Webr.component.CheckListItem.prototype.unselect=function(a){this.optionElement.removeClass(a)};Webr.component.CheckListItem.prototype.registerClickHandler=function(a){var b=this;this.optionElement.click(function(){b.toggleCheck();a.call(this,b.option);return!1})};
Webr.component.CheckListItem.prototype.registerCheckHandler=function(a){var b=this;this.checkBoxElement.click(function(){b.toggleCheck();a.call(this,b.option);return!1})};Webr.component.CheckListItem.prototype.check=function(){this.checkBoxElement.click()};
Webr.component.CheckListItem.prototype.narrow=function(a,b){var c=this.option.name.toLowerCase().indexOf(a);if("nomatch"===this.option.id)return this.visible=!1,this.optionElement.hide(),!1;if("apply"===this.option.id)return this.option.checked?this.optionElement.show():this.optionElement.hide(),this.visible=!1;if("newoption"===this.option.id)return 0!=a.length?(this.htmlText.html('"<span class="match">'+this.option.name+'</span>" (create new)'),this.optionElement.show(),this.visible=!0):(this.optionElement.hide(),
this.visible=!1),this.visible;0==a.length||-1==c?(this.htmlText.html(this.option.name),b&&0!=a.length?(this.optionElement.hide(),this.visible=!1):(this.optionElement.show(),this.visible=!0),this.match=0==a.length?!0:!1):(this.htmlText.html(this.option.name.substring(0,c)+'<span class="match">'+this.option.name.substring(c,c+a.length)+"</span>"+this.option.name.substring(c+a.length)),this.optionElement.show(),this.match=this.visible=!0);return this.visible};
Webr.component.CheckListItem.prototype.getOptionElement=function(){if(!this.checkBoxElement&&!this.optionElement&&!this.htmlText){var a=document.createElement("li");if(!("nomatch"===this.option.id||"apply"===this.option.id||"newoption"===this.option.id)){var b=document.createElement("span");b.innerHTML="&nbsp";b.className=this.option.checked?"checkbox checked":"checkbox unchecked";a.appendChild(b);this.checkBoxElement=$(b)}b=document.createElement("span");b.innerHTML=this.option.name;a.appendChild(b);
this.htmlText=$(b);this.optionElement=$(a)}return this.optionElement};Webr.component.CheckListItem.prototype.collectElement=function(a){if(!this.checkBoxElement&&!this.optionElement&&!this.htmlText){var b=$(a);this.optionElement=b;this.htmlText=b.children("span:last");var a=this.htmlText.html(),c=b.attr("_id");this.checkBoxElement=b.children("span:first");b=this.checkBoxElement.hasClass("checked");this.option={id:c,name:a,checked:b}}return this};
Webr.component.SelectorErrorHighlighter=function(a,b){Webr.component.SelectorErrorHighlighter.superclass.constructor.call(this,a.searchInput,b);this.multibox=a};F=new Function;F.prototype=Webr.ErrorHighlighter.prototype;Webr.component.SelectorErrorHighlighter.prototype=new F;Webr.component.SelectorErrorHighlighter.prototype.constructor=Webr.component.SelectorErrorHighlighter;Webr.component.SelectorErrorHighlighter.superclass=Webr.ErrorHighlighter.prototype;
Webr.component.SelectorErrorHighlighter.prototype._register=function(){this.multibox.valueQuery.one("Select UnSelect",this.dismissHandler)};Webr.component.SelectorErrorHighlighter.prototype._unregister=function(){this.multibox.valueQuery.unbind("Select UnSelect",this.dismissHandler);this.multibox=null};Webr.component.Option=function(){};var regmb2=Webr.component.MultiBox.registerMultibox,regmb=Webr.component.MultiBox.registerMultibox;

var clipboardUtils,ClipboardUtils={},ClipboardUtils=function(a,b){this.pastingCases=[];this.windowId=b;this.undoClient=new Webr.rest.Client(Webr.Event.rootUrl,Ajax.ajaxSettings());this.attachClient=new Webr.rest.Client(Webr.Event.rootUrl,{error:Ajax.onError});this.contenteditableDiv=""===a?$(document.body):$(a)};
ClipboardUtils.prototype.pasteHandler=function(a){if(a.clipboardData){var b=a.clipboardData.items;if(void 0===b||0===b.length)b=a.clipboardData.files;if(void 0!==b)for(a=0;a<b.length;++a)if("file"===b[a].kind){var c=b[a].getAsFile();this.attach(b[a].type,c)}}};
ClipboardUtils.prototype.attach=function(a,b){if(this.issue||!window.FormData)if(1>b.size)Webr.event.PopupMessage.SYSTEM.show(AttachActionsErrors.CANNOT_UPLOAD,5E3);else{var c=new FormData,a=a.toLowerCase(),e;e=0===a.indexOf("image/")&&6<a.length?a.replaceAll("/","."):"file."+a;c.append(e,b);var d=this;Webr.event.PopupMessage.SYSTEM.show(l10n('Uploading image...'));e=AttachActionsUtils.getSaveFilesUrl({issueId:d.issue,windowId:d.windowId,commentId:d.comment,defaultFileName:PastingCallbackCase.IMAGE_NAME});
jQuery.ajax({url:e,type:"POST",processData:!1,contentType:!1,dataType:"json",data:c,success:function(a){d.onAttach(a)},error:function(a,b,c){Webr.event.PopupMessage.SYSTEM.hide();Ajax.onError(a,b,c)}})}};
ClipboardUtils.prototype.onAttach=function(a){var b=l10n('Image has been successfully attached to ');if(void 0!==this.comment)Webr.event.PopupMessage.SYSTEM.show(b+l10n('comment draft'),7E3);else{this.lastAttachedImageId=a.id;var b=b+l10n('issue'),c=PastingCallbackCase.DEFAULT_ISSUE_PRESENTATION_GETTER();c||(c=this.issue);var e=". <a href='javascript:void(0)' onclick='clipboardUtils.undo()'>"+l10n('Undo')+
"</a> ";Webr.event.PopupMessage.SYSTEM.show(b+" "+c+e,7E3)}this.callback&&this.callback(a)};
ClipboardUtils.prototype.undo=function(){if(null!==this.lastAttachedImageId){var a=this;a.undoClient.resource({p:["issue"]}).method("delete",{p:["issue",a.issue,"attachment",a.lastAttachedImageId],q:{window_id:a.windowId}}).call({p:["issue",null,"attachment",null]}).done(function(){a.lastAttachedImageId=null;a.callback&&a.callback.call();Webr.event.PopupMessage.SYSTEM.show(l10n('Last attached image has been successfully removed.'),3E3)})}};
ClipboardUtils.prototype.subscribe=function(a,b,c){this.pastingCases.push(new PastingCallbackCase(a,b,c))};ClipboardUtils.prototype.subscribeSelector=function(a,b,c,e){var d=this;a.bind("paste",function(a){if(!c){var f=d.findApplicablePastingCase();f&&(c=f.issueIdGetter,b=f.callback,e=f.commentIdGetter)}c&&(d.issue=c(),d.issue&&(d.comment=e?e():void 0,d.callback=b,d.pasteHandler(a.originalEvent),a.stopImmediatePropagation()))})};
ClipboardUtils.prototype.findApplicablePastingCase=function(){for(var a=this.pastingCases.length-1;0<=a;--a)if(this.pastingCases[a].issueIdGetter())return this.pastingCases[a]};
ClipboardUtils.prototype.getAttachUrl=function(){return this.comment?this.attachClient.resource({p:["comment"]}).method("post",{p:["comment",this.issue,this.comment,"attachment"],q:{name:PastingCallbackCase.IMAGE_NAME}}).getUrl():this.attachClient.resource({p:["issue"]}).method("post",{p:["issue",this.issue,"attachment"],q:{name:PastingCallbackCase.IMAGE_NAME,window_id:this.windowId}}).getUrl()};
ClipboardUtils.getInstance=function(a){clipboardUtils||(clipboardUtils=new ClipboardUtils("",a),clipboardUtils.subscribe(function(){}),clipboardUtils.subscribeSelector($(document.body)));clipboardUtils.windowId=a;return clipboardUtils};
var PastingCallbackCase={},PastingCallbackCase=function(a,b,c){this.issueIdGetter=PastingCallbackCase.DEFAULT_ISSUE_ID_GETTER;this.commentIdGetter=void 0;this.callback=PastingCallbackCase.DEFAULT_CALLBACK;b&&(this.issueIdGetter=b);a&&(this.callback=a);c&&(this.commentIdGetter=c)};PastingCallbackCase.DEFAULT_ISSUE_ID_GETTER=function(){if(!Webr.component.panel.Dialog.isModalVisible()&&!charisma.smartui.ViewImageAttachment.isVisible())return commonController.getFocusedIssueId()};
PastingCallbackCase.DEFAULT_ISSUE_PRESENTATION_GETTER=function(){if(!Webr.component.panel.Dialog.isModalVisible()&&!charisma.smartui.ViewImageAttachment.isVisible()&&commonController)return commonController.getFocusedPresentationIssueId()};PastingCallbackCase.DEFAULT_CALLBACK=function(){};PastingCallbackCase.IMAGE_NAME="image.png";

charisma.smartui.CommentsList=function(a){charisma.smartui.CommentsList.superclass.constructor.call(this);this.scrollable=!1;this.commentItems=[];this.commentItemMap={};this.selected=-1;this.newCommentTextAreaFocused=this.focused=!1;var b=a.contentDiv;this.content=b;this.mainDivElement=$(b).children("div.comment-list").get(0);this.selectedItemClass=a.selectedItemClass;this.mouseoverItemClass=a.mouseOverItemClass;this.scrollable=a.scrollable;this.init()};var F=new Function;F.prototype=Webr.component.Component.prototype;
charisma.smartui.CommentsList.prototype=new F;charisma.smartui.CommentsList.prototype.constructor=charisma.smartui.CommentsList;charisma.smartui.CommentsList.superclass=Webr.component.Component.prototype;
charisma.smartui.CommentsList.prototype.init=function(){var a=this,b=$(this.content);this.keyHandler=function(b){return a.keyhandler(b)};this.mouseHandler=function(c){b.ancestorOf(c.target)||a.unhandleKeys()};this.refreshList();if(this.newCommentTexArea=b.find(".add-comment :input").get(0))this.newCommentTexArea.attachWatcher(),this.newCommentTexArea.setWatcherDelay(200),$(this.newCommentTexArea).focus(function(){a.focusOnTextArea();$(this).parent().addClass("comment-textarea_focus")}).blur(function(){a.unFocusOnTextArea();
$(this).parent().removeClass("comment-textarea_focus")}),$(document).delegate(".comment-reply","mouseover",function(){a.updateTextSelectionData()}).delegate(".comment-reply","mouseout",function(){a.updateTextSelectionData(!0)})};charisma.smartui.CommentsList.prototype.setToolbar=function(a){this.toolbar=a};
charisma.smartui.CommentsList.prototype.handleKeys=function(a){if(!this.focused){this.focused=!0;var b=Webr.util.Util.isIE?document.body:document;$(b).mousedown(this.mouseHandler);Webr.util.Util.addKeyHandler(b,this.keyHandler);this.fireCommentItemSelected(a)}};charisma.smartui.CommentsList.prototype.unhandleKeys=function(){if(this.focused){this.focused=!1;var a=Webr.util.Util.isIE?document.body:document;$(a).unbind("mousedown",this.mouseHandler);Webr.util.Util.removeKeyHandler(a,this.keyHandler)}};
charisma.smartui.CommentsList.prototype.refreshList=function(){var a=this;$(this.content).find(".comment-row").each(function(){a.addOrUpdate(this)})};charisma.smartui.CommentsList.prototype.addOrUpdate=function(a){var b=$(a);if(!a)throw"Can't find div for selector ["+a+"]";var b=b.attr("_id"),c=this.commentItemMap[b];null==c&&(c=new charisma.smartui.CommentItem(this,a),this.commentItems.push(c),this.commentItemMap[b]=c);c.collect();return c};
charisma.smartui.CommentsList.prototype.fireCommentItemSelected=function(a){this.fire(function(b){b.commentItemFocused&&b.commentItemFocused(a);return!0})};
charisma.smartui.CommentsList.prototype.keyhandler=function(a){if(this.newCommentTextAreaFocused)switch(a.keyCode){case Webr.util.Key.ESC:return this.throwToUp(a);case Webr.util.Key.UP:return this.prevInsideInput()?!0:!this.empty()?(this.prev(),$(this.newCommentTexArea).blur(),!1):this.throwToUp(a);case Webr.util.Key.DOWN:return this.nextInsideInput()?!0:this.throwToUp(a);case Webr.util.Key.LEFT:return this.prevInsideInput()?!0:this.throwToUp(a)}if(Webr.util.Util.targetIsInput(a))return!0;switch(a.keyCode){case Webr.util.Key.UP:return this.prev()?
!1:this.throwToUp(a);case Webr.util.Key.DOWN:return this.next()?!1:this.throwToUp(a);case Webr.util.Key.LEFT:var b=this.getSelected();b&&b.attachmentsExpanded?b.toggleAttachments():this.throwToUp(a);return!1;case Webr.util.Key.RIGHT:return(b=this.getSelected())&&!b.attachmentsExpanded&&b.toggleAttachments(),!1;case Webr.util.Key.PAGEUP:return this.first(),!1;case Webr.util.Key.PAGEDOWN:return this.last(),!1}return a.isKey(Webr.util.Key.F2)?(this.getSelected().edit(),!1):a.isKey(Webr.util.Key.DELETE)?
(this.getSelected().del(),!1):a.isKey(Webr.util.Key.ENTER)?!0:this.throwToUp(a)};charisma.smartui.CommentsList.prototype.throwToUp=function(a){(a=this.fireKeyDown(a))||this.unhandleKeys();return a};charisma.smartui.CommentsList.prototype.isFocused=function(){return this.focused};charisma.smartui.CommentsList.prototype.empty=function(){return 0>=this.commentItems.length};charisma.smartui.CommentsList.prototype.size=function(){return this.commentItems.length};
charisma.smartui.CommentsList.prototype.focusOnTextArea=function(){this.handleKeys(null);this.getSelected()&&(this.getSelected().unselect(),this.selected=-1);this.newCommentTextAreaFocused=!0};charisma.smartui.CommentsList.prototype.unFocusOnTextArea=function(){this.newCommentTextAreaFocused=!1};
charisma.smartui.CommentsList.prototype.focus=function(){try{var a=this,b=this.getSelected();this.handleKeys(b);b?b.select():this.empty()?window.setTimeout(function(){var b=a.newCommentTexArea;b&&b.focus()},35):window.setTimeout(function(){a.selected=a.size()-1;a.getSelected().select()},35)}catch(c){}};charisma.smartui.CommentsList.prototype.unfocus=function(){try{this.unhandleKeys()}catch(a){}};
charisma.smartui.CommentsList.prototype.clearSelection=function(){this.getSelected()&&(this.getSelected().unselect(),this.selected=-1)};charisma.smartui.CommentsList.prototype.mousedown=function(a){this.handleKeys(a);this.getSelected()===a?a.select(!0,!0):(this.clearSelection(),this.setSelected(a),a.select(!0),info("comment selected"))};
charisma.smartui.CommentsList.prototype.focusHashComment=function(){var a=Webr.util.PageStateStore.getInstance().get("comment");if(a){var b=this.commentItemMap[a];if(b){this.handleKeys(b);this.clearSelection();this.setSelected(b);b.select(!1,!0);var c=this;window.setTimeout(function(){$(window).scrollTop($(b.element).offset().top+c.getToolbarIndents()[1])},100)}}};charisma.smartui.CommentsList.prototype.getToolbarIndents=function(){return this.toolbar?this.toolbar.getDimension():[0,0]};
charisma.smartui.CommentsList.prototype.next=function(){return this.getSelected()&&this.selected<this.size()-1?(this.getSelected().unselect(),this.selected+=1,this.getSelected().select(),!0):this.getSelected()&&this.selected==this.size()-1&&this.newCommentTexArea?(this.getSelected().unselect(),this.selected=-1,$(this.newCommentTexArea).focus(),!0):!1};
charisma.smartui.CommentsList.prototype.prev=function(){return this.getSelected()&&0<this.selected?(this.getSelected().unselect(),this.selected-=1,this.getSelected().select(),!0):this.newCommentTextAreaFocused&&!this.empty()?(this.selected=this.size()-1,this.getSelected().select(),!0):!1};charisma.smartui.CommentsList.prototype.last=function(){this.getSelected()&&this.selected<this.size()-1&&(this.getSelected().unselect(),this.selected=this.size()-1,this.getSelected().select())};
charisma.smartui.CommentsList.prototype.first=function(){this.getSelected()&&0<this.selected&&(this.getSelected().unselect(),this.selected=0,this.getSelected().select())};charisma.smartui.CommentsList.prototype.nextInsideInput=function(){return 0>=this.newCommentTexArea.value.length?!1:!0};charisma.smartui.CommentsList.prototype.prevInsideInput=function(){return 0>=this.newCommentTexArea.value.length?!1:!0};
charisma.smartui.CommentsList.prototype.getSelected=function(){return this.empty()||-1==this.selected||this.selected>=this.size()?null:this.commentItems[this.selected]};charisma.smartui.CommentsList.prototype.setSelected=function(a){this.selected=jQuery.inArray(a,this.commentItems)};
charisma.smartui.CommentsList.prototype.reply=function(a){if(this.newCommentTexArea){var b=charisma.UsernameSuggest.KEY,c=this.newCommentTexArea.value;a&&(b+=a);0!=c.length&&!common.util.Util.isLineBreakOrSpace(c.slice(-1))&&(c+=" ");this.newCommentTexArea.focus();this.newCommentTexArea.value=c+this.getReplyText()+b+" ";this.newCommentTexArea.setCaretPosition(this.newCommentTexArea.value.length);this.updateTextSelectionData(!0);a=$(this.newCommentTexArea);a.keyup().scrollTop(this.newCommentTexArea.scrollHeight).trigger("valuechange");
a.scrollTo()}};charisma.smartui.CommentsList.prototype.getReplyText=function(){if(0<this.selectedText.length){for(var a=0!=this.newCommentTexArea.value.length?"\n>":">",b=this.selectedText.split(/\r\n|\n|\r/g),c=[],d=0;d<b.length;d+=1)""!==b[d].trim()&&c.push(b[d]);this.selectedText=a+c.join("\n>")+"\n"}return this.selectedText};charisma.smartui.CommentsList.prototype.updateTextSelectionData=function(a){this.selectedText=a?"":common.util.Util.getSelection()};
charisma.smartui.CommentsList.prototype.highlightCommentDraftVisibility=function(a){a=$("#"+common.util.Util.escapeDots(a)).parent();if(a[0]){var b=a.closest(".commentVisibilityEdit");b.addClass("commentVisibilityEdit__group_change");$(document).one("keydown",function(){b.addClass("commentVisibilityEdit__group_hide").removeClass("commentVisibilityEdit__group_change")})}};charisma.smartui.CommentsList.toogleLongCommentAreaPresentation=function(a,b){a.height()>=b?a.addClass("comment-list_many"):a.removeClass("comment-list_many")};
charisma.smartui.CommentsListConfig=function(){};charisma.smartui.CommentsListConfig.prototype.toggleEdit=function(){};charisma.smartui.CommentsListListener=function(){charisma.smartui.CommentsListListener.superclass.constructor.call(this)};F=new Function;F.prototype=Webr.component.ComponentListener.prototype;charisma.smartui.CommentsListListener.prototype=new F;charisma.smartui.CommentsListListener.prototype.constructor=charisma.smartui.CommentsListListener;
charisma.smartui.CommentsListListener.superclass=Webr.component.ComponentListener.prototype;charisma.smartui.CommentsListListener.prototype.commentItemFocused=function(){};

jQuery.Event.prototype.getKeyCode=function(){var a=Webr.util.Util.isSafari?jQuery.Event.SAFARI_KEYCODES[this.keyCode]||this.keyCode:this.keyCode;return 0==a?this.which:a};jQuery.Event.prototype.targetIsInput=function(){return this.targetIs(["INPUT","TEXTAREA"])||Boolean(this.target.getAttribute("contenteditable"))};jQuery.Event.prototype.targetIs=function(a){for(var c=0;c<a.length;c+=1)if(this.target.tagName.toLowerCase()==a[c].toLowerCase())return!0;return!1};
jQuery.Event.prototype.testKey=function(a,c,b,d,e){var c=void 0===c||c===this.altKey,b=void 0===b||b===this.shiftKey,f=Webr.util.Util.isMac?this.originalEvent.metaKey:!1;if((void 0===a||a===this.ctrlKey)&&c&&b&&(void 0===d||d===f))if(e.length){a=this.getKeyCode();for(d=0;d<e.length;d+=1)if(e[d]==a)return!0}else return void 0==e?!0:e==this.getKeyCode();return!1};
jQuery.Event.prototype.isInputIgnore=function(a,c,b,d,e){return(Webr.util.Util.isMac&&d||!Webr.util.Util.isMac&&a)&&!b&&!c&&(e==Webr.util.Key.UP||e==Webr.util.Key.DOWN||e==Webr.util.Key.LEFT||e==Webr.util.Key.RIGHT)?this.targetIsInput():!1};jQuery.Event.prototype.isKey=function(a,c,b,d){return this.testKey(!1,!1,!1,!1,1>=arguments.length?a:arguments)};jQuery.Event.prototype.isCtrl=function(a){return this.testKey(!0,!1,!1,!1,1>=arguments.length?a:arguments)};
jQuery.Event.prototype.isAlt=function(a){return this.testKey(!1,!0,!1,!1,1>=arguments.length?a:arguments)};jQuery.Event.prototype.isAltCtrl=function(a){return this.testKey(!0,!0,!1,!1,1>=arguments.length?a:arguments)};jQuery.Event.prototype.isShift=function(a){return this.testKey(!1,!1,!0,!1,1>=arguments.length?a:arguments)};jQuery.Event.prototype.isMeta=function(a){return this.testKey(!1,!1,!1,!0,1>=arguments.length?a:arguments)};
jQuery.Event.prototype.handleEnterEsc=function(a,c){return this.isKey(Webr.util.Key.ENTER)||this.isCtrl(Webr.util.Key.ENTER)?(a(),!1):this.isKey(Webr.util.Key.ESC)?(c(),!1):!0};jQuery.Event.SAFARI_KEYCODES={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,63272:46,63273:36,63275:35};Webr.util.Key=function(){};Webr.util.Key.SPACE=32;Webr.util.Key.ESC=27;Webr.util.Key.DELETE=46;Webr.util.Key.ENTER=13;Webr.util.Key.PAGEUP=33;Webr.util.Key.PAGEDOWN=34;Webr.util.Key.END=35;Webr.util.Key.HOME=36;
Webr.util.Key.UP=38;Webr.util.Key.LEFT=37;Webr.util.Key.RIGHT=39;Webr.util.Key.DOWN=40;Webr.util.Key.TAB=9;Webr.util.Key.INSERT=45;Webr.util.Key.A=65;Webr.util.Key.C=67;Webr.util.Key.D=68;Webr.util.Key.H=72;Webr.util.Key.I=73;Webr.util.Key.J=74;Webr.util.Key.N=78;Webr.util.Key.P=80;Webr.util.Key.F2=113;Webr.util.Key.test=function(a,c,b,d,e,f){return a.ctrlKey==(c||!1)&&a.altKey==(b||!1)&&a.shiftKey==(d||!1)&&(void 0!=f&&a.charCode==f||void 0==f)&&(void 0!=e&&a.getKeyCode()==e||void 0==e)};
Webr.util.Key.isKeyNoModifiers=function(a,c,b){if(c instanceof Array){var d=!1;jQuery.each(c,function(){d=d||Webr.util.Key.isKeyNoModifiers(a,this)});return d}d=Webr.util.Key.test(a,!1,!1,!1,c);b&&(d=d||Webr.util.Key.isKeyNoModifiers(a,b));return d};Webr.util.Key.isApplicable=function(a,c){var b=Webr.util.Util.getKeyStroke(c);return b?a.testKey(b.ctrl,b.alt,b.shift,b.meta,b.keyCode)&&!a.isInputIgnore(b.ctrl,b.alt,b.shift,b.meta,b.keyCode):!1};

var viewImageAttachment=null;charisma.smartui.ViewImageAttachment=function(a){this.shown=!1;this.baseUrl=a;this.setHandlers();this.bindImageClick();this.initHashListener();this.loadImageFromHash()};
charisma.smartui.ViewImageAttachment.prototype.setHandlers=function(){var a=this;this.handleKeyDown=function(b){if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.Dismiss))return a.handleClose(),!1;if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.ExpandIssue))return b.stopPropagation(),a.navigate(!0),!1;if(Webr.util.Key.isApplicable(b,SmartUIShortCuts.CollapseIssue))return b.stopPropagation(),a.navigate(!1),!1};this.handleClose=function(){a.getToken()&&a.removeToken()};this.handleWinResize=function(){a.showCloseButton()};
this.handleMouseClick=function(b){if(a.img.get(0)==b.target||a.div.get(0)==b.target){if(2===b.which||b.metaKey)return window.open(a.img.attr("src"),"_blank"),!1;!b.shiftKey&&1==b.which&&a.navigate(!b.ctrlKey)}};this.handleClickOutside=function(b){a.img.get(0)!==b.target&&(a.prevArea.get(0)!==b.target&&!$(b.target).hasClass("show-img-attach"))&&a.handleClose()}};
charisma.smartui.ViewImageAttachment.prototype.bindImageClick=function(){var a=this;$(document).delegate("a.show-img-attach","click",function(b){if(2===b.which||b.metaKey||b.ctrlKey)return!0;b.preventDefault();$(".popupComponent:visible").hide();a.currentId=a.escape(this.id);a.getToken()&&(a.currentId=null,a.bindEvents(!1));b=$(this).attr("href").split("_persistent/").pop();Webr.util.PageStateStore.getInstance().put(charisma.smartui.ViewImageAttachment.KEY,b)})};
charisma.smartui.ViewImageAttachment.prototype.initHashListener=function(){var a=this;Webr.util.HistoryDispatcher.getInstance().addListener({key:charisma.smartui.ViewImageAttachment.KEY,historyChanged:function(){var b=$("#"+a.currentId);a.getToken()?b.get(0)?a.load(b.attr("href")):a.loadImageFromHash():a.hide()}})};
charisma.smartui.ViewImageAttachment.prototype.bindEvents=function(a){a?(this.container.bind("keydown",this.handleKeyDown),$(window).bind("resize",this.handleWinResize),$(document).bind("click",this.handleClickOutside)):(this.container.unbind("keydown",this.handleKeyDown),$(window).unbind("resize",this.handleWinResize),$(document).unbind("click",this.handleClickOutside));this.bindMouseClick(a)};
charisma.smartui.ViewImageAttachment.prototype.bindMouseClick=function(a){var b=$(document);a?b.click(this.handleMouseClick):b.unbind("click",this.handleMouseClick)};charisma.smartui.ViewImageAttachment.prototype.loadImageFromHash=function(){if(this.getToken()){var a=decodeURIComponent(window.location.hash).split(charisma.smartui.ViewImageAttachment.KEY+"=").pop();a&&this.load(this.baseUrl+"_persistent/"+a)}};
charisma.smartui.ViewImageAttachment.prototype.create=function(){if(!this.container){var a=this;this.img=common.util.Util.createElement("img",!1,l10n('(Ctrl) + Mouse left click - (previous) next image\nESC - close image'));this.closeBtn=common.util.Util.createElement("a","img-view-close-btn","Hide").click(function(b){1==b.which&&a.handleClose()});this.createPrevArea();this.div=common.util.Util.createElement("div","img-view-content");this.container=common.util.Util.createElement("div",
"img-view").attr("tabindex","1000").append(this.closeBtn).append(this.prevArea).append("<div class='img-view-progress'></div>").append(this.div.append(this.img));$(document.body).append(this.container);charisma.smartui.ViewImageAttachment.CONSTANT=[this.container.outerHeight()-this.container.height(),this.closeBtn.width()];charisma.smartui.ViewImageAttachment.CONSTANT[3]=parseInt(this.img.css("paddingLeft")+this.img.css("paddingRight"))}};
charisma.smartui.ViewImageAttachment.prototype.createPrevArea=function(){var a=this,b=$(document);this.prevArea=common.util.Util.createElement("div","img-view-prev","Previous image").append("<div class='img-view-prev-ico'></div>");var c=function(d){d.ctrlKey?a.prevArea.children().addClass("img-view-next-ico"):a.prevArea.children().removeClass("img-view-next-ico");b.one("keydown keyup",c)};this.prevArea.hover(function(){b.one("keydown",c)},function(){b.unbind("keydown",c)}).click(function(b){1==b.which&&
a.navigate(b.ctrlKey)})};charisma.smartui.ViewImageAttachment.prototype.escape=function(a){return a.replace(/\./g,"\\.")};
charisma.smartui.ViewImageAttachment.prototype.navigate=function(a){var b;if(b=(this.getToken()||"").split("?file")[0]){var c=$("a.show-img-attach.panel-attach[href*='"+(Webr.util.Util.isGecko?encodeURIComponent(b):b)+"']");if(1<c.length){var d=c.filter(function(a,c){var d=(c.href||"").split("_persistent/").pop(),d=(d||"").split("?file")[0];return d===b||d===encodeURIComponent(b)});0<d.length&&(c=d)}0!=c.length&&(d=c.first(),this.currentId!==this.escape(d.attr("id"))&&(d=c.last()),this.currentId=
this.escape(d.attr("id")),d=$("#"+this.currentId).parent().parent(),c=this.getAll(),1<c.length&&(this.closeBtn.hide(),this.bindMouseClick(!1),a=c.index(d)+(a?1:-1),this.clear(),c.eq(a<c.length?a:0).children(".show-img-attach").click()))}};charisma.smartui.ViewImageAttachment.prototype.getAll=function(){return $(".attachment-list .img-attach")};charisma.smartui.ViewImageAttachment.prototype.getToken=function(){return Webr.util.PageStateStore.getInstance().get(charisma.smartui.ViewImageAttachment.KEY)};
charisma.smartui.ViewImageAttachment.prototype.removeToken=function(){Webr.util.PageStateStore.getInstance().removeKey(charisma.smartui.ViewImageAttachment.KEY);this.clear()};charisma.smartui.ViewImageAttachment.prototype.isNew=function(a){var b=this.img.attr("src");return!b||-1==b.indexOf(a)};charisma.smartui.ViewImageAttachment.prototype.initImage=function(a){this.div.hide();this.img.removeAttr("class").removeAttr("style");this.isNew(a)?(this.toggleLoading(!0),this.img.attr("src",a)):this.img.load()};
charisma.smartui.ViewImageAttachment.prototype.load=function(a){var b=this;this.create();this.img.one("load",function(){info("Image loaded, show");b.show(a)}).error(function(){b.toggleLoading(!1);b.hide();b.removeToken();Webr.event.PopupMessage.SMALL_INFO.show("Error loading image",3E3)});this.initImage(a)};
charisma.smartui.ViewImageAttachment.prototype.hide=function(){this.mask.hide();this.container.hide();this.div.hide();this.bindEvents(!1);$(window).scrollTop(charisma.smartui.ViewImageAttachment.CONSTANT[2]);this.container.blur();this.shown=!1};
charisma.smartui.ViewImageAttachment.prototype.show=function(a){this.toggleLoading(!1);this.saveScroll();this.setZoom(this.getDimensions(a));this.showMask();this.container.show();this.div.fadeIn(50);this.bindEvents(!0);this.showCloseButton();this.container.focus();this.shown=!0;1<this.getAll().length?this.prevArea.show():this.prevArea.hide()};charisma.smartui.ViewImageAttachment.prototype.toggleLoading=function(a){a?this.div.prev().show():this.div.prev().hide()};
charisma.smartui.ViewImageAttachment.prototype.showCloseButton=function(){var a=this,b=function(){var b=$(window).width();a.closeBtn.css("left",Math.min(b,a.div.offset().left+a.div.width()+charisma.smartui.ViewImageAttachment.CONSTANT[1]/3)).fadeIn(100);b=Math.ceil(b/2-a.div.outerWidth()/2)-charisma.smartui.ViewImageAttachment.CONSTANT[1];a.prevArea.width(b)};if(this.isAnimated())var c=window.setInterval(function(){a.isAnimated()||(b(),window.clearInterval(c))},20);else b()};
charisma.smartui.ViewImageAttachment.prototype.isAnimated=function(){return this.div.is(":animated")};charisma.smartui.ViewImageAttachment.prototype.saveScroll=function(){charisma.smartui.ViewImageAttachment.CONSTANT[2]=$(window).scrollTop()};
charisma.smartui.ViewImageAttachment.prototype.showMask=function(){this.mask||(this.mask=$(document.createElement("div")).append('<div class="jt-dialog-mask"></div>').append("<div class=\"img-view-help\"><span class='img-view-arr'>&larr; </span>/<span class='img-view-shortcut'>"+l10n('Ctrl + Mouse click')+"</span>"+l10n(' - previous image. ')+"<span class='img-view-arr'>&rarr; </span>/<span class='img-view-shortcut'>"+l10n('Mouse click')+
"</span>"+l10n(' - next image. ')+"<span class='img-view-shortcut'>"+l10n('ESC')+"</span>"+l10n(' - close image. ')+"<span class='img-view-shortcut'>"+l10n('Middle click')+"</span>"+l10n(' - open image in a separate window. ')+"<span class='img-view-shortcut'>"+l10n('Shift + Mouse click')+"</span>"+l10n(' - resize.')+
"</div>"),$(document.body).prepend(this.mask));this.mask.show()};charisma.smartui.ViewImageAttachment.prototype.getDimensions=function(){var a=this.getHashParameters();return a.rw&&a.rh?{width:parseInt(a.rw),height:a.rh}:null};charisma.smartui.ViewImageAttachment.prototype.getHashParameters=function(){var a={},b;(b=window.location.hash.substr(1))&&-1==b.indexOf("file=")&&(b=decodeURIComponent(b));b=b.split("&");for(var c,d=0;d<b.length;d+=1)c=b[d].split("="),a[c[0]]=c[1];return a};
charisma.smartui.ViewImageAttachment.prototype.clear=function(){for(var a="",b=["v","c","rw","rh"],c=this.getHashParameters(),d=0;d<b.length;++d)delete c[b[d]];for(var e in c)void 0!=c[e]&&(a+=e+"="+c[e]+"&");window.location.hash="#"+a.replace(/&+$/,"")};
charisma.smartui.ViewImageAttachment.prototype.setZoom=function(a){var b=this;if(a){var c=$(window);c.scrollLeft();var d=c.width(),e=c.height(),c=a.height>e;if(a.width>d||c){var f=d/a.width<e/a.height,g=f?"width":"height";this.handleZoomImage=function(a){if(a.shiftKey||!0===a)b.img.hasClass("img-resized")?b.img.removeAttr("style").addClass("img-orig").removeClass("img-resized"):b.img.addClass("img-resized").removeClass("img-orig").css(g,0.8*(f?d:e)),b.showCloseButton()};this.handleZoomImage(!0);this.img.click(b.handleZoomImage);
this.setCursorOnHover()}}else this.handleZoomImage&&this.img.unbind("click",b.handleZoomImage)};charisma.smartui.ViewImageAttachment.prototype.setCursorOnHover=function(){var a=this,b=function(c){c.shiftKey?a.prevArea.children().addClass("img-view-next-ico"):a.prevArea.children().removeClass("img-view-next-ico");$(document).one("keydown keyup",b)};this.img.hover(function(){$(document).one("keydown",b)},function(){$(document).unbind("keydown",b)})};charisma.smartui.ViewImageAttachment.KEY="viewimage";
charisma.smartui.ViewImageAttachment.CONSTANT=[];charisma.smartui.ViewImageAttachment.isVisible=function(){return viewImageAttachment&&viewImageAttachment.shown};

Webr.event.InputCollector=function(a){this.rootElement=a||document.body};Webr.event.InputCollector.prototype.collect=function(a){this.paramBuilder=a;this.collectSelects();this.collectInputs();this.collectTextAreas()};
Webr.event.InputCollector.prototype.collectSelects=function(){for(var a=$(this.rootElement).find("select[name]:not([disabled])"),b=0;b<a.length;++b)for(var c=a.get(b),f=c.name,c=$(c).find("option:selected"),e=0;e<c.length;++e){var d=c.get(e),d=$(d).is("[value]")?d.value:d.text;this.appendParameter(f,d)}};
Webr.event.InputCollector.prototype.collectInputs=function(){var a=this;$(this.rootElement).find("input[name]:not([disabled])").each(function(){if("radio"===this.type){var b=cr.getComponentName(this);void 0!==b?a.appendParameter(b,this.checked):a.appendParameter(this.name,this.checked)}else if("checkbox"===this.type)a.appendParameter(this.name,this.checked);else if("password"===this.type)"Password is defined"!=this.value&&a.appendParameter(this.name,this.value);else if("text"===this.type||"password"===
this.type||"hidden"===this.type)b=$(this).attr("valueId"),void 0!==b?a.appendParameter(this.name,b):a.appendParameter(this.name,this.value)})};Webr.event.InputCollector.prototype.collectTextAreas=function(){for(var a=$(this.rootElement).find("textarea[name]:not([disabled])"),b=0;b<a.length;++b){var c=a.get(b);this.appendParameter(c.name,c.value)}};Webr.event.InputCollector.prototype.appendParameter=function(a,b){a.length&&(1<=a.length&&"-"!=a.charAt(0))&&this.paramBuilder.addParamPair(a,b)};
Webr.event.InputCollector.isIE=-1<navigator.userAgent.toLowerCase().indexOf("msie");

var saveSummaryAndDescription=function(){var d,e,f;return function(a,b,c,g){d===a&&e===b&&f===c||(d=a,e=b,f=c,g&&g(a,b,c))}}();

var analytics=analytics,AnalyticsInitializer={},AnalyticsInitializer=function(){};
AnalyticsInitializer.init=function(a,b,c){b&&$(function(){var b=new Webr.rest.Client(Webr.Event.rootUrl),d=new AnalyticsPlugins.AnalyticsGAPlugin("869c54ca-878c-4f0a-870d-a081021bcdbd"===ringController.config.serviceId&&"UA-57284711-2"),e=new AnalyticsPlugins.AnalyticsCustomPlugin(function(a){try{b.resource({p:["statistics"]}).method("post",{p:["statistics"],e:Webr.rest.Entity.json(a)}).call({p:["statistics"]})}catch(c){}},!1,void 0,c);analytics.config([d,e]);analytics.trackPageView(a)})};

Webr.component.InlineEditor=function(a,b,d,f){var c=this;this.editing=!1;this.presentation=b;this.presentationId=d;this.editorId=f;this.span=a;a.data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE,c);this.outSideClickHandler=function(b){c.editor.ancestorOf(b.target,!0)||!1!==a.triggerHandler("clickoutside",b)&&c.abort()};this.keyHandler=function(a){c.keypress(a)};this.presentation.click(function(){c.click()})};
Webr.component.InlineEditor.prototype.addHandlers=function(a){Webr.util.Util.addKeyHandler(a,this.keyHandler);$(document).mousedown(this.outSideClickHandler)};Webr.component.InlineEditor.prototype.removeHandlers=function(a){Webr.util.Util.removeKeyHandler(a,this.keyHandler);$(document).unbind("mousedown",this.outSideClickHandler)};Webr.component.InlineEditor.prototype.click=function(){this.editing||this.span.trigger("createeditor")};
Webr.component.InlineEditor.prototype.keypress=function(a){return this.editing&&a.isKey(Webr.util.Key.ESC)?(this.abort(),!1):!0};Webr.component.InlineEditor.prototype.abort=function(){this.editing&&(this.editor.get(0).unHighlight(),this.span.trigger("abort"),this.revertEditor(this.editor.get(0)),this.removeHandlers(this.editor),this.editor.hide(),this.presentation.show(),this.presentation.focus(),this.editing=!1)};
Webr.component.InlineEditor.prototype.submit=function(){this.removeHandlers(this.editor);this.span.trigger("submit")};Webr.component.InlineEditor.prototype.setEditor=function(a){if(!this.editing){this.originalText=a;this.presentation.hide();var b;this.editor?b=this.editor.get(0):(b=document.createElement("div"),this.presentation.after($(b)));this.updateEditor(b,a);this.addHandlers(this.editor);this.fixPosition();this.editing=!0;this.editor.show();this.editor.focus()}};
Webr.component.InlineEditor.prototype.fixPosition=function(){this.editor.offset().left+this.editor.outerWidth()>$(window).width()?this.editor.css({right:0,left:"auto"}):this.editor.css({right:"auto",left:0})};Webr.component.InlineEditor.prototype.updateEditor=function(a,b){$(a).replaceWith(b);var d=$(document.getElementById(this.editorId));cr.bindHandlers(d.parent().get(0));this.editor=d};
Webr.component.InlineEditor.prototype.revertEditor=function(a){this.editor=$(a).replaceWith(this.originalText);this.editor=$(document.getElementById(this.editorId))};
Webr.component.InlineEditor.prototype.setPresentation=function(a){if(this.editing){this.editor.hide();var b=this;Webr.event.RefreshCommandProcessor.setContent(b.presentation.get(0),a);a=$(document.getElementById(b.presentationId));cr.bindHandlers(a.parent().get(0));this.presentation=a;this.presentation.click(function(){b.click()});this.editing=!1;this.presentation.show();this.presentation.focus()}};Webr.component.InlineEditor.prototype.oncreateeditor=function(){};
Webr.component.InlineEditor.prototype.onsubmit=function(){};Webr.component.InlineEditor.prototype.onabort=function(){};Webr.component.InlineEditor.prototype.onclickoutside=function(){};Webr.component.InlineEditor.register2=function(a,b){cr.forEach(a,b,function(){var a=$(this),b=a.attr("pid"),c=a.attr("eid"),e=$(document.getElementById(b));e.one("click",function(){(new Webr.component.InlineEditor(a,e,b,c)).click()})})};Webr.component.InlineEditor.getInlineEditor=function(a){return a.editor?a:null};
var regic=Webr.component.InlineEditor.register2;

cr.setTemplateBind("IssueSubcontent",function(b){cr.ach(b,"vt.votersTitle","click",function(a){a=$(cr.findInHandler(a,".ivl.votersList",[]));a.is(":hidden")&&analytics.trackEvent("Fsi","issue-voters__expand");a.toggle()});cr.ach(b,"vt.v.poll","click",function(){return!1});cr.ach(b,"wt.addWatcher","click",function(a){commandDialog.show(cr.getTarget(a).getAttribute("p0")+" ");return!1});cr.ach(b,"bt.addBoard","click",function(a){commandDialog.show(cr.getTarget(a).getAttribute("p0")+" ");return!1});
cr.ach(b,"wt.watchersTitle","click",function(a){a=$(cr.findInHandler(a,".iwl.watchersList",[]));a.is(":hidden")&&analytics.trackEvent("Fsi","issue-watchers__expand");a.toggle()});cr.ach(b,"bt.boardsTitle","click",function(a){$(cr.findInHandler(a,".ibl.issueBoardsList",[])).toggle()});cr.ash(b,"vt.votersTitle","click",null);cr.ash(b,"bt.boardsTitle","click",null);cr.ash(b,"wt.watchersTitle","click",null)});

var Ajax={},Ajax=function(){};Ajax.onFieldRequired=null;Ajax.LOADING_TIMEOUT=500;Ajax.LOADING_MESSAGE=l10n('Loading...');
Ajax.onError=function(a,b,f){b=f;if(412==a.status){var d,e;if(a.responseXML){var c=$(a.responseXML),b=c.find("message").text();d=c.find("field").text();e=c.find("originalCommand").text()}else try{c=jQuery.parseJSON(a.responseText),b=c.message,d=c.field,e=c.originalCommand}catch(g){}if(null!=d&&0<d.length&&Ajax.onFieldRequired)Ajax.onFieldRequired(d,e)}else if(418==a.status)b=a.statusText;else if(a.responseXML)b=$(a.responseXML).text();else try{b=jQuery.parseJSON(a.responseText).value}catch(h){}Webr.ErrorMessage.addMessage(b,
1E4)};Ajax.loadingInit=function(a){a.loadingPopupHandle=window.setTimeout(function(){Webr.event.PopupMessage.SYSTEM.show(Ajax.LOADING_MESSAGE);a.msgObject=Webr.event.PopupMessage.SYSTEM.message},Ajax.LOADING_TIMEOUT)};Ajax.loadingDispose=function(a){window.clearTimeout(a.loadingPopupHandle);Webr.event.PopupMessage.SYSTEM.message==a.msgObject&&Webr.event.PopupMessage.SYSTEM.hide()};Ajax.ajaxSettings=function(){return{error:Ajax.onError,beforeSend:function(a,b){Ajax.loadingInit(a,b)},complete:Ajax.loadingDispose}};

var CommandToolbarGuard={},CommandToolbarGuard=function(a){this.visible=!0;var b=this;this.menu=a;this.componentName=a.button.attr("id").substring(3);info("MenuGuard["+this.componentName+"] created");this.refreshListener={beforeRefresh:function(a){b.onTemplateRefresh(a)}};this.keyProxy=function(a){return b.visible&&b.menu.isEnabled()?b.keyHandler(a):!0};Webr.event.RefreshCommandProcessor.addListener(this.refreshListener)};
CommandToolbarGuard.prototype.onTemplateRefresh=function(a){0==this.componentName.indexOf(a)&&this.finalize()};CommandToolbarGuard.prototype.setKeyHandler=function(a){info("MenuGuard["+this.componentName+"] keyHandler updated");this.keyHandler&&$(document).unbind("keydown",this.keyProxy);(this.keyHandler=a)&&$(document).keydown(this.keyProxy)};
CommandToolbarGuard.prototype.setChangeListener=function(a,b){info("MenuGuard["+this.componentName+"] issue listener updated");this.changeListener&&(commonController.removeChangeListener(this.changeListener),delete this.changeListener,this.changeListener=null);if(a)if(b){var c=this;window.setTimeout(function(){c.setChangeListener(a,false)},10)}else this.changeListener=a,commonController.addChangeListener(this.changeListener),a.checkedItemsUpdated()};
CommandToolbarGuard.prototype.setVisible=function(a){info("MenuGuard["+this.componentName+"] "+(a?"visible":"hidden"));this.visible=a};CommandToolbarGuard.prototype.finalize=function(){this.setKeyHandler(null);this.setChangeListener(null,!1);info("MenuGuard["+this.componentName+"] destroyed");this.keyProxy=this.componentName=null;Webr.event.RefreshCommandProcessor.removeListener(this.refreshListener);this.refreshListener=null;this.menu.guard=null};
CommandToolbarGuard.registerHandlers=function(a,b,c){a=CommandToolbarGuard.get(Webr.component.Menu.getMenu(a,!0));a.setKeyHandler(b);a.setChangeListener(c,!0)};CommandToolbarGuard.get=function(a){a.guard||(a.guard=new CommandToolbarGuard(a));return a.guard};

cr.setTemplateBind("EditIssue",function(b){cr.ach(b,"issueEditContent","keydown",function(a){return Webr.util.Key.isApplicable(a,SmartUIShortCuts.SubmitIssueEdit)?(cr.serverMethodCallInHandler(a,".methodCall_submit",{},{preventDoubleSubmit:!0}),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.CancelEdit)?(window.setTimeout(function(){cr.serverMethodCallInHandler(a,".methodCall_showConfirmationDialog",{},{preventDoubleSubmit:!0})},10),!1):!0});cr.ach(b,"submitButton","keydown",function(a){if(a.isShift(Webr.util.Key.TAB))return charisma.smartui.PropertySelector.getInstance().select(charisma.smartui.PropertySelector.LAST-
1),!1});cr.ach(b,"iv.issueVisibilityCombo","keydown",function(a){if(a.isKey(Webr.util.Key.TAB))return charisma.smartui.PropertySelector.getInstance().select(0),!1});cr.ach(b,"iv.visibilityContent","keydown",function(a){if(a.isKey(Webr.util.Key.TAB))return charisma.smartui.PropertySelector.getInstance().select(0),!1;if(a.isShift(Webr.util.Key.TAB)){if($("body").hasClass("new-issue-on")&&0==$(".similar-issues__empty").length)return!0;cr.findInHandler(a,".eit.description",[]).focus();return!1}return!0});
cr.ach(b,"eit.description","keydown",function(a){if(a.isKey(Webr.util.Key.TAB)){if($("body").hasClass("new-issue-on")&&0==$(".similar-issues__empty").length)return!0;cr.findInHandler(a,".iv.visibilityContent",[]).focus();return!1}});cr.ach(b,"cancelButton","keydown",function(a){if(a.isKey(Webr.util.Key.TAB))return cr.findInHandler(a,".eit.summary",[]).focus(),!1});cr.ach(b,"urlForIssueTemplate","click",function(a){$(cr.findInHandler(a,".urlForIssueTemplate",[])).select()});cr.ach(b,"urlForIssueTemplate",
"keydown",function(a){a.handleEnterEsc(function(){},function(){$(cr.findInHandler(a,".chageIssueTemplateURLVisibility",[])).click()})});cr.ash(b,"cancelButton","click",null);cr.ash(b,"submitButton","click",{preventDoubleSubmit:!0});cr.ash(b,"eit.project","change",null);cr.ash(b,"chageIssueTemplateURLVisibility","click",null)});

Webr.util.Map=function(){this._size=0;Webr.util.Map.instances+=1};Webr.util.Map.prototype.put=function(a,b){if(null==a)throw"Can't add item with undefined key.";this._items||(this._items={});this._items[a]=b;this._size+=1};Webr.util.Map.prototype.remove=function(a){this._items&&this._items[a]&&(delete this._items[a],this._size-=1)};Webr.util.Map.prototype.get=function(a){return this._items&&this._items[a]?this._items[a]:null};Webr.util.Map.prototype.getKeys=function(){return this._items};
Webr.util.Map.prototype.forEach=function(a){if(0<this._size)for(var b in this._items)a(b,this._items[b])};Webr.util.Map.instances=0;

cr.setTemplateBind("IssueTag",function(a){cr.ash(a,"untag","click",null)});

Webr.component.Menu=function(a,b,c){this.enabled=!0;this.shadow=null;this.selected=-1;this.showPause=100;this.hidePause=10;this.current_state=null;this.button=$(a);this.openLeft=c;this.button.data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE,this);0<this.button.parent("td").length?(this.anchor=this.button.parent("td"),this.activeClass="jt-toolbar-menu-active"):(this.anchor=this.button,this.activeClass="jt-menu-active");this.list=this.button.next("ul");this.fixListWidth();this.shadow=Webr.component.Shadow.getShadow(this.list,
"jt-menu-ieshadow");this.initEvents(b);this.createListAnchors();this.current_state=Webr.component.Menu.state_CLOSED};Webr.component.Menu.prototype.mouseOverButton=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseOverButton",arguments)};Webr.component.Menu.prototype.mouseOverList=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseOverList",arguments)};
Webr.component.Menu.prototype.mouseOutButton=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseOutButton",arguments)};Webr.component.Menu.prototype.mouseOutList=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseOutList",arguments)};Webr.component.Menu.prototype.mouseDownList=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"mouseDownList",arguments)};
Webr.component.Menu.prototype.listClick=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"listClick",arguments)};Webr.component.Menu.prototype.buttonClick=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"buttonClick",arguments)};Webr.component.Menu.prototype.tick=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"tick",arguments)};Webr.component.Menu.prototype.hide=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"hide",arguments)};
Webr.component.Menu.prototype.enable=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"enable",arguments)};Webr.component.Menu.prototype.disable=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"disable",arguments)};
Webr.component.Menu.prototype.initEvents=function(a){var b=this;this.anchor.unbind("mouseover").unbind("click");a||this.anchor.mouseover(function(){b.mouseOverButton()});this.list.mouseover(function(){b.mouseOverList()});a||this.anchor.mouseout(function(){b.mouseOutButton()});this.anchor.click(function(){b.buttonClick()});a||this.list.mouseout(function(){b.mouseOutList()});this.list.click(function(){b.listClick()});this.mouseDownHandler=function(a){return b.mouseDownList(a)};this.keyHandler=function(a){if(a.isKey(Webr.util.Key.UP))return b._prev(),
!1;if(a.isKey(Webr.util.Key.DOWN))return b._next(),!1;if(a.isKey(Webr.util.Key.ESC))return b.hide(),!1;if(a.isKey(Webr.util.Key.HOME))return b._home(),!1;if(a.isKey(Webr.util.Key.END))return b._end(),!1}};Webr.component.Menu.prototype.createListAnchors=function(){this.items=this.list.find("a");this.registerItemsEvents()};Webr.component.Menu.prototype.handleBlur=function(){$(Webr.util.Util.isIE?document.body:document).mousedown(this.mouseDownHandler)};
Webr.component.Menu.prototype.unhandleBlur=function(){$(Webr.util.Util.isIE?document.body:document).unbind("mousedown",this.mouseDownHandler)};Webr.component.Menu.prototype.registerItemsEvents=function(){var a=this;this.items.mouseover(function(b){b=a.items.index(b.target);if(b!=a.selected){var c=a.getSelected();c&&a.toggleCssClass(c);a.selected=b;a.select(b,!0)}})};
Webr.component.Menu.prototype.handleKeys=function(){this.list.keydown(this.keyHandler);var a=this.items.first();this.toggleCssClass(a);a.focus();this.selected=0};Webr.component.Menu.prototype.unhandleKeys=function(){this.list.unbind("keydown");0<=this.selected&&(this.toggleCssClass(this.getSelected()),this.selected=-1)};Webr.component.Menu.prototype._home=function(){var a=this.getSelected();a&&0!=this.selected&&(this.unselect(a),this.select(0,!0))};
Webr.component.Menu.prototype._end=function(){var a=this.getSelected(),b=this.size()-1;a&&this.selected!=b&&(this.unselect(a),this.select(b,!0))};Webr.component.Menu.prototype._prev=function(){var a=this.getSelected();a&&1<=this.selected&&(this.unselect(a),this.select(-1,!1))};Webr.component.Menu.prototype._next=function(){var a=this.getSelected();a&&this.selected<this.size()-1&&(this.unselect(a),this.select(1,!1))};
Webr.component.Menu.prototype.select=function(a,b){var c=b?a:this.selected+a;0<=c&&c<this.size()&&(this.selected=c,c=this.items.eq(this.selected),this.toggleCssClass(c),c.focus())};Webr.component.Menu.prototype.unselect=function(a){this.toggleCssClass(a);a.blur()};Webr.component.Menu.prototype.getSelected=function(){return 0>=this.size()||-1==this.selected?null:this.items.eq(this.selected)};Webr.component.Menu.prototype.toggleCssClass=function(a){a&&a.toggleClass("jt-menu-item-active")};
Webr.component.Menu.prototype.setEnabled=function(a){a?this.enable():this.disable()};Webr.component.Menu.prototype.isEnabled=function(){return this.enabled};Webr.component.Menu.prototype.size=function(){return this.items.length};Webr.component.Menu.prototype.fixListWidth=function(){if(this.anchor.outerWidth()>this.list.outerWidth()){var a=this.list.outerWidth()-this.list.width();this.list.css("min-width",this.anchor.outerWidth()-a)}};
Webr.component.Menu.prototype._show=function(){Webr.component.Menu.OPEN_MENU&&Webr.component.Menu.OPEN_MENU.hide();Webr.component.Menu.OPEN_MENU=this;this.anchor.addClass(this.activeClass);this.setItemsPosition();this.list.show();this.handleKeys();this.shadow.setHeight(this.list.outerHeight());this.shadow.show()};
Webr.component.Menu.prototype.setItemsPosition=function(){var a=this.anchor.position(),b=this.list.outerWidth(),c=a.top+this.anchor.outerHeight();this.openLeft||$(window).width()<a.left+b?(b=Math.ceil(a.left-b+this.anchor.outerWidth()),a=0<b?b:a.left):a=a.left;this.list.css({top:c,left:a});this.shadow.setTop(c);this.shadow.setLeft(a)};Webr.component.Menu.prototype._hide=function(){Webr.component.Menu.OPEN_MENU=null;this.unhandleKeys();this.list.hide();this.shadow.hide();this.anchor.removeClass(this.activeClass)};
Webr.component.Menu.prototype._setEnabled=function(a){(this.enabled=a)?this.button.removeClass("jt-menu-disabled"):this.button.addClass("jt-menu-disabled")};Webr.component.Menu.prototype._startShowTimer=function(){var a=this;this.showTimerHandler=window.setTimeout(function(){a.tick()},this.showPause)};Webr.component.Menu.prototype._stopShowTimer=function(){window.clearTimeout(this.showTimerHandler)};
Webr.component.Menu.prototype._startHideTimer=function(){var a=this;this.hideTimerHandler=window.setTimeout(function(){a.tick()},this.hidePause)};Webr.component.Menu.prototype._stopHideTimer=function(){window.clearTimeout(this.hideTimerHandler)};
Webr.component.Menu.state_CLOSED={name:"CLOSED",mouseOverButton:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_PAUSE_BEFORE_OPEN);return Webr.component.Menu.state_PAUSE_BEFORE_OPEN},buttonClick:function(){this._show();Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_OPEN);return Webr.component.Menu.state_OPEN},disable:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_DISABLED);
return Webr.component.Menu.state_DISABLED}};
Webr.component.Menu.state_PAUSE_BEFORE_OPEN={name:"PAUSE_BEFORE_OPEN",onenter:function(){this._startShowTimer()},onexit:function(){this._stopShowTimer()},tick:function(){this._show();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_PAUSE_BEFORE_OPEN);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_OPEN);return Webr.component.Menu.state_OPEN},buttonClick:function(){this._show();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_PAUSE_BEFORE_OPEN);
Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_OPEN);return Webr.component.Menu.state_OPEN},mouseOutButton:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_PAUSE_BEFORE_OPEN);return Webr.component.Menu.state_CLOSED},mouseOutList:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_PAUSE_BEFORE_OPEN);return Webr.component.Menu.state_CLOSED}};
Webr.component.Menu.state_OPEN={name:"OPEN",onenter:function(){this.handleBlur()},onexit:function(){this.unhandleBlur()},mouseOutButton:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_OPEN);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_PAUSE_BEFORE_CLOSE);return Webr.component.Menu.state_PAUSE_BEFORE_CLOSE},mouseOutList:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_OPEN);
Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_PAUSE_BEFORE_CLOSE);return Webr.component.Menu.state_PAUSE_BEFORE_CLOSE},hide:function(){this._hide();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_OPEN);return Webr.component.Menu.state_CLOSED},listClick:function(){this._hide();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_OPEN);return Webr.component.Menu.state_CLOSED},disable:function(){this._hide();
Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_OPEN);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_DISABLED);return Webr.component.Menu.state_DISABLED},mouseDownList:function(a){!this.list.ancestorOf(a.target)&&!this.anchor.ancestorOf(a.target,!0)&&this.mouseOutList()},buttonClick:function(){this._hide();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_OPEN);return Webr.component.Menu.state_CLOSED}};
Webr.component.Menu.state_PAUSE_BEFORE_CLOSE={name:"PAUSE_BEFORE_CLOSE",onenter:function(){this._startHideTimer()},onexit:function(){this._stopHideTimer()},tick:function(){this._hide();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_PAUSE_BEFORE_CLOSE);return Webr.component.Menu.state_CLOSED},hide:function(){this._hide();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_PAUSE_BEFORE_CLOSE);return Webr.component.Menu.state_CLOSED},listClick:function(){this._hide();
Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_PAUSE_BEFORE_CLOSE);return Webr.component.Menu.state_CLOSED},mouseOverButton:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_PAUSE_BEFORE_CLOSE);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_OPEN);return Webr.component.Menu.state_OPEN},mouseOverList:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_PAUSE_BEFORE_CLOSE);
Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_OPEN);return Webr.component.Menu.state_OPEN},disable:function(){this._hide();Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_PAUSE_BEFORE_CLOSE);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.component.Menu.state_DISABLED);return Webr.component.Menu.state_DISABLED}};
Webr.component.Menu.state_DISABLED={name:"DISABLED",onenter:function(){this._setEnabled(!1)},onexit:function(){this._setEnabled(!0)},enable:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.component.Menu.state_DISABLED);return Webr.component.Menu.state_CLOSED}};
Webr.component.Menu.registerMenu=function(a,b){cr.forEach(a,b,function(){var a=$(this),b=a;0<a.parent("td").length&&(b=a.parent("td"));var d=a.data("toggle-onclick");b.one(d?"click":"mouseover",function(){(new Webr.component.Menu(a,d,a.data("open-left")))[d?"buttonClick":"mouseOverButton"]()})})};Webr.component.Menu.getMenu=function(a,b,c){return a._startShowTimer?a:new Webr.component.Menu(a,b,c)};var regmn=Webr.component.Menu.registerMenu;

cr.setTemplateBind("EditIssueText",function(a){cr.ach(a,"summary","keydown",function(c){return c.isKey(Webr.util.Key.ENTER)||c.isShift(Webr.util.Key.ENTER)?!1:!0});cr.ach(a,"summary","valuechange",function(c,a){var b=cr.findInHandler(c,".description",[]),d=(cr.findInHandler(c,".markdownToggle",[])||{}).checked;b&&saveSummaryAndDescription(a.value,b.value,d,function(a,b,d){cr.serverMethodCallInHandler(c,".methodCall_save",{__param___summary:a,__param___description:b,__param___usesMarkdown:d},{preventDoubleSubmit:!0,
collectFormElements:!1,hideLoadingPopup:!0})})});cr.ach(a,"description","valuechange",function(c,a){var b=cr.findInHandler(c,".summary",[]),d=(cr.findInHandler(c,".markdownToggle",[])||{}).checked;b&&saveSummaryAndDescription(b.value,a.value,d,function(a,b,d){cr.serverMethodCallInHandler(c,".methodCall_save",{__param___summary:a,__param___description:b,__param___usesMarkdown:d},{preventDoubleSubmit:!0,collectFormElements:!1,hideLoadingPopup:!0})})});cr.ach(a,"markdownToggle","click",function(c){var a=
cr.findInHandler(c,".summary",[]),b=cr.findInHandler(c,".description",[]);if(a&&b){var d=(cr.findInHandler(c,".markdownToggle",[])||{}).checked;saveSummaryAndDescription(a.value,b.value,d,function(a,b,d){cr.serverMethodCallInHandler(c,".methodCall_save",{__param___summary:a,__param___description:b,__param___usesMarkdown:d},{preventDoubleSubmit:!0,collectFormElements:!1,hideLoadingPopup:!0})})}});cr.ach(a,"summary","blur",function(a){saveSummaryAndDescription(cr.findInHandler(a,".summary",[]).value,
cr.findInHandler(a,".description",[]).value,(cr.findInHandler(a,".markdownToggle",[])||{}).checked,function(e,b,d){cr.serverMethodCallInHandler(a,".methodCall_save",{__param___summary:e,__param___description:b,__param___usesMarkdown:d},{preventDoubleSubmit:!0,collectFormElements:!1,hideLoadingPopup:!0})})});cr.ach(a,"description","blur",function(a){saveSummaryAndDescription(cr.findInHandler(a,".summary",[]).value,cr.findInHandler(a,".description",[]).value,(cr.findInHandler(a,".markdownToggle",[])||
{}).checked,function(e,b,d){cr.serverMethodCallInHandler(a,".methodCall_save",{__param___summary:e,__param___description:b,__param___usesMarkdown:d},{preventDoubleSubmit:!0,collectFormElements:!1,hideLoadingPopup:!0})})});cr.ash(a,"markdownToggle","click",null);cr.ash(a,"project","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});cr.forEach(a,"summary",function(){this.attachWatcher(!1)});cr.forEach(a,"description",function(){this.attachWatcher(!1)});regCC(a,
"project");cr.forEach(a,"summary",function(){Webr.component.ElementExpander.addExpandListener(this,210)});cr.forEach(a,"description",function(){Webr.component.ElementExpander.addExpandListener(this,400)})});

charisma.smartui.UserToolbarTagCombo=function(a,b,c,e){this.anchor=a;this.addTag=e;var d=this;this.anchor.one("click",function(){d.combo=$(b).data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE);d.overrideAnchorEvents();d.bindScroll();d.addCommandDialogOption()});new charisma.smartui.Tooltip($(a),c,charisma.smartui.TooltipDirection.TOP,!0)};
charisma.smartui.UserToolbarTagCombo.prototype.addCommandDialogOption=function(){var a=this,b=$(document.createElement("a")).addClass("toolbar-user-tags-add").html(l10n('Add tag with command...')).attr("href","javascript:void(0)");this.combo.renderer.getInputElement().parent().before(b.click(function(){a.combo.blur();window.setTimeout(function(){commandDialog.show(l10n('add tag '))},10)}))};
charisma.smartui.UserToolbarTagCombo.prototype.overrideAnchorEvents=function(){var a=this;this.anchor.unbind("click").click(function(){a.combo.toggle()});this.combo.mainElement.bind("change",function(){var b=commandDialog.getPackagedIssueIds();a.addTag(a.combo.currentOption.id,a.combo.currentOption.text,commandDialog.allFoundIssuesAreSelected(),b)})};
charisma.smartui.UserToolbarTagCombo.prototype.bindScroll=function(){var a=commonController.getToolbar();if(a){var b=this,c=function(){b.combo.renderer.getMainElement().toggleClass("toolbar-user-tags-combo-fix")};a.container.hasClass("toolbar-unpined")&&c();a.container.bind(charisma.smartui.Toolbar.EVENT_SHOW,c).bind(charisma.smartui.Toolbar.EVENT_HIDE,function(){c();var e=a.container.offset().top+b.anchor.outerHeight();b.combo.renderer.getMainElement().css("top",e)})}};

Webr.util.HashParametersParser=function(a,b){this.valueStart=this.keyEnd=this.keyStart=this.current=0;this.current_state=null;this.inputString=a;this.listener=b;this.current_state=Webr.util.HashParametersParser.state_START};
Webr.util.HashParametersParser.prototype.parse=function(){if(this.inputString&&0<this.inputString.length)for(;this.current<this.inputString.length;){switch(this.inputString.charAt(this.current)){case "#":break;case " ":break;case "=":this.equals();break;case "&":this.and();break;default:this.character()}++this.current}this.eol()};Webr.util.HashParametersParser.prototype.pushKey=function(a){this.listener.parameter(a,null)};
Webr.util.HashParametersParser.prototype.pushParameter=function(a,b){this.listener.parameter(a,b)};Webr.util.HashParametersParser.prototype.setInputString=function(a){this.inputString=a;this.reset()};Webr.util.HashParametersParser.prototype.equals=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"equals",arguments)};Webr.util.HashParametersParser.prototype.character=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"character",arguments)};
Webr.util.HashParametersParser.prototype.and=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"and",arguments)};Webr.util.HashParametersParser.prototype.eol=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"eol",arguments)};Webr.util.HashParametersParser.prototype.reset=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"reset",arguments)};
Webr.util.HashParametersParser.state_START={name:"START",character:function(){Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.util.HashParametersParser.state_READ_KEY);return Webr.util.HashParametersParser.state_READ_KEY},equals:function(){this.keyStart=this.keyEnd;Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.util.HashParametersParser.state_READ_VALUE);return Webr.util.HashParametersParser.state_READ_VALUE},eol:function(){return Webr.util.HashParametersParser.state_FINAL}};
Webr.util.HashParametersParser.state_READ_KEY={name:"READ_KEY",onenter:function(){this.keyStart=this.current},onexit:function(){this.keyEnd=this.current},equals:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.util.HashParametersParser.state_READ_KEY);Webr.stateMachine.stateMachineRuntime.handleOnEnter(this,Webr.util.HashParametersParser.state_READ_VALUE);return Webr.util.HashParametersParser.state_READ_VALUE},and:function(){this.pushKey(this.inputString.substring(this.keyStart,
this.current));Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.util.HashParametersParser.state_READ_KEY);return Webr.util.HashParametersParser.state_START},eol:function(){this.pushKey(this.inputString.substring(this.keyStart,this.current));Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.util.HashParametersParser.state_READ_KEY);return Webr.util.HashParametersParser.state_FINAL}};
Webr.util.HashParametersParser.state_READ_VALUE={name:"READ_VALUE",onenter:function(){this.valueStart=this.current+1},onexit:function(){this.keyStart!=this.keyEnd?this.pushParameter(this.inputString.substring(this.keyStart,this.keyEnd),this.inputString.substring(this.valueStart,this.current)):this.pushParameter("",this.inputString.substring(this.valueStart,this.current))},and:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.util.HashParametersParser.state_READ_VALUE);return Webr.util.HashParametersParser.state_START},
eol:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,Webr.util.HashParametersParser.state_READ_VALUE);return Webr.util.HashParametersParser.state_FINAL}};Webr.util.HashParametersParser.state_FINAL={name:"FINAL",reset:function(){this.valueStart=this.keyEnd=this.keyStart=this.current=0;return Webr.util.HashParametersParser.state_START}};Webr.util.HashParameterListener=function(){};Webr.util.HashParameterListener.prototype.parameter=function(){};

Webr.util.HistoryDispatcher=function(){this.listeners=new Webr.util.Set;this.init()};Webr.util.HistoryDispatcher.prototype.init=function(){this.setCurrent(window.location.hash);this.startTicker()};Webr.util.HistoryDispatcher.prototype.startTicker=function(){void 0!==window.onhashchange&&!Webr.util.HistoryDispatcher.supportsOnlyFrameHistory()?window.onhashchange=jQuery.proxy(this.historyChange,this):window.setInterval(jQuery.proxy(this.historyChange,this),Webr.util.HistoryDispatcher.TIMER_INTERVAL)};
Webr.util.HistoryDispatcher.prototype.historyChange=function(){var a=this.getCurrent();this.setCurrent(window.location.hash)!=a&&this.fireHistoryChanged()};Webr.util.HistoryDispatcher.prototype.getCurrent=function(){return this.h};Webr.util.HistoryDispatcher.prototype.setCurrent=function(a){return this.h=Webr.util.HistoryDispatcher.sanitize(a)};Webr.util.HistoryDispatcher.prototype.addListener=function(a){this.listeners.add(a)};Webr.util.HistoryDispatcher.prototype.removeListener=function(a){this.listeners.remove(a)};
Webr.util.HistoryDispatcher.prototype.fireHistoryChanged=function(){var a=Webr.util.PageStateStore.getInstance(),b=a.getParams();a.update();this.listeners.forEach(function(c){if(c.key){var d=b.get(c.key.toLowerCase()),e=a.get(c.key);d!=e&&c.historyChanged({current:e,prev:d})}else c.historyChanged();return!0})};Webr.util.HistoryDispatcher.TIMER_INTERVAL=250;
Webr.util.HistoryDispatcher.getInstance=function(){Webr.util.HistoryDispatcher.dispatcher||(Webr.util.HistoryDispatcher.dispatcher=Webr.util.HistoryDispatcher.supportsOnlyFrameHistory()?new Webr.util.IE7HistoryDispatcher:new Webr.util.HistoryDispatcher);return Webr.util.HistoryDispatcher.dispatcher};Webr.util.HistoryDispatcher.supportsOnlyFrameHistory=function(){return Webr.util.Util.isIE?!(void 0!==window.onhashchange&&7<document.documentMode):!1};
Webr.util.HistoryDispatcher.sanitize=function(a){return a.replace(/^#/,"")};Webr.util.IE7HistoryDispatcher=function(){Webr.util.IE7HistoryDispatcher.superclass.constructor.call(this)};var F=new Function;F.prototype=Webr.util.HistoryDispatcher.prototype;Webr.util.IE7HistoryDispatcher.prototype=new F;Webr.util.IE7HistoryDispatcher.prototype.constructor=Webr.util.IE7HistoryDispatcher;Webr.util.IE7HistoryDispatcher.superclass=Webr.util.HistoryDispatcher.prototype;
Webr.util.IE7HistoryDispatcher.prototype.init=function(){this.setCurrent(window.location.hash);this.initFrame()};
Webr.util.IE7HistoryDispatcher.prototype.initFrame=function(){var a=this,b=Webr.util.IE7HistoryDispatcher.IFRAME_ID;this.frame=document.createElement("iframe");this.frame.id=b;this.frame.name=b;this.frame.tabindex=-1;this.frame.style.position="absolute";this.frame.style.left="-10000px";this.frame.style.top="-10000px";this.frame.style.display="none";this.frame.src="javascript:false;";document.body.appendChild(this.frame);document.frames[b].name=b;var c=function(){a.frame.detachEvent("onload",c);a.update(a.getCurrent());
a.startTicker()};this.frame.attachEvent("onload",c)};Webr.util.IE7HistoryDispatcher.prototype.getWindow=function(){return this.frame.contentWindow};Webr.util.IE7HistoryDispatcher.prototype.getFrameHash=function(){return Webr.util.HistoryDispatcher.sanitize(this.getWindow().location.hash)};Webr.util.IE7HistoryDispatcher.prototype.getWindowHash=function(){return Webr.util.HistoryDispatcher.sanitize(window.location.hash)};
Webr.util.IE7HistoryDispatcher.prototype.setCurrent=function(a){return this.currentFrameHash=Webr.util.IE7HistoryDispatcher.superclass.setCurrent.call(this,a)};Webr.util.IE7HistoryDispatcher.prototype.update=function(a){var b=this.getWindow().document;this.fixTitle(b);b.open();b.close();this.getWindow().location.hash=a};
Webr.util.IE7HistoryDispatcher.prototype.historyChange=function(){var a=this.getFrameHash(),b=this.getWindowHash();a!=b&&(b===this.getCurrent()?(this.setCurrent(a),window.location.hash=a):(this.setCurrent(b),this.update(b)),this.fireHistoryChanged())};Webr.util.IE7HistoryDispatcher.prototype.fixTitle=function(a){try{a.title=document.title}catch(b){}};Webr.util.IE7HistoryDispatcher.IFRAME_ID="__frame_history__";Webr.util.HistoryChangeListener=function(){};
Webr.util.HistoryChangeListener.prototype.historyChanged=function(){};Webr.util.HistoryToken=function(){};

charisma.smartui.NewIssueSwitcher=function(a){charisma.smartui.NewIssueSwitcher.superclass.constructor.call(this);this.key=charisma.smartui.NewIssueSwitcher.NEW_ISSUE_TOKEN;this.newIssueVisible=!1;this.current_state=null;this.newInlineIssue=$(a);Webr.util.HistoryDispatcher.getInstance().addListener(this);this.current_state=charisma.smartui.NewIssueSwitcher.state_SWITCHED_OFF};var F=new Function;F.prototype=Webr.util.HistoryChangeListener.prototype;charisma.smartui.NewIssueSwitcher.prototype=new F;
charisma.smartui.NewIssueSwitcher.prototype.constructor=charisma.smartui.NewIssueSwitcher;charisma.smartui.NewIssueSwitcher.superclass=Webr.util.HistoryChangeListener.prototype;charisma.smartui.NewIssueSwitcher.prototype.historyChanged=function(a){this.historyChange(a)};
charisma.smartui.NewIssueSwitcher.prototype.change=function(a){a?(Webr.util.PageStateStore.getInstance().put(charisma.smartui.NewIssueSwitcher.NEW_ISSUE_TOKEN,a),this.switchOn()):(Webr.util.PageStateStore.getInstance().removeKey(charisma.smartui.NewIssueSwitcher.NEW_ISSUE_TOKEN),this.switchOff())};charisma.smartui.NewIssueSwitcher.prototype.newIssueEnvironment=function(a){a&&(commonController.searchField.blur(),commonController.searchField.suggester.blur());this.newIssueVisible=a};
charisma.smartui.NewIssueSwitcher.prototype.isVisible=function(){return this.newIssueVisible};charisma.smartui.NewIssueSwitcher.prototype.switchOn=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"switchOn",arguments)};charisma.smartui.NewIssueSwitcher.prototype.switchOff=function(){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"switchOff",arguments)};
charisma.smartui.NewIssueSwitcher.prototype.historyChange=function(a){Webr.stateMachine.stateMachineRuntime.handleEvent(this,"historyChange",arguments)};charisma.smartui.NewIssueSwitcher.NEW_ISSUE_TOKEN="newIssue";charisma.smartui.NewIssueSwitcher.NEW_ISSUE_PAGE_TITLE='New Issue';
charisma.smartui.NewIssueSwitcher.state_SWITCHED_OFF={name:"SWITCHED_OFF",onexit:function(){this.newIssueEnvironment(!0);charisma.smartui.NewIssueSwitcher.changeTitle(!0)},historyChange:function(a){if(charisma.smartui.NewIssueSwitcher.isEmpty(a.current))return!1;commonController.showExistingDraft(a.current)},switchOn:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.NewIssueSwitcher.state_SWITCHED_OFF);return charisma.smartui.NewIssueSwitcher.state_SWITCHED_ON}};
charisma.smartui.NewIssueSwitcher.state_SWITCHED_ON={name:"SWITCHED_ON",onexit:function(){this.newIssueEnvironment(!1);charisma.smartui.NewIssueSwitcher.changeTitle(!1)},historyChange:function(a){if(charisma.smartui.NewIssueSwitcher.isEmpty(a.current)){if(charisma.smartui.NewIssueSwitcher.isEmpty(a.prev))return!1;this.newInlineIssue.click()}else commonController.showExistingDraft(a.current)},switchOff:function(){Webr.stateMachine.stateMachineRuntime.handleOnExit(this,charisma.smartui.NewIssueSwitcher.state_SWITCHED_ON);
return charisma.smartui.NewIssueSwitcher.state_SWITCHED_OFF}};
charisma.smartui.NewIssueSwitcher.init=function(a){charisma.smartui.NewIssueSwitcher.instance||(charisma.smartui.NewIssueSwitcher.ORIGINAL_PAGE_TITLE=document.title,charisma.smartui.NewIssueSwitcher.instance=new charisma.smartui.NewIssueSwitcher(a),a=Webr.util.PageStateStore.getInstance().get(charisma.smartui.NewIssueSwitcher.NEW_ISSUE_TOKEN),charisma.smartui.NewIssueSwitcher.isEmpty(a)||(commonController.showExistingDraft(a),charisma.smartui.NewIssueSwitcher.changeTitle(!0),charisma.smartui.NewIssueSwitcher.instance.switchOn()))};
charisma.smartui.NewIssueSwitcher.isEmpty=function(a){return!a||""==a};charisma.smartui.NewIssueSwitcher.changeTitle=function(a){document.title=a?charisma.smartui.NewIssueSwitcher.NEW_ISSUE_PAGE_TITLE:charisma.smartui.NewIssueSwitcher.ORIGINAL_PAGE_TITLE};

cr.setTemplateBind("IssuePreview",function(a){cr.ash(a,"togglePreview","click",null)});

/*! jQuery UI - v1.10.3 - 2013-10-20
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

(function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var a=this._uiHash();if(this._trigger("drag",t,a)===!1)return this._mouseUp({}),!1;this.position=a.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,a=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(a=e.ui.ddmanager.drop(this,t)),this.dropped&&(a=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,a=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return a.parents("body").length||a.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),a[0]===this.element[0]||/(fixed|absolute)/.test(a.css("position"))||a.css("position","absolute"),a},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,a,s=this.options;return s.containment?"window"===s.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===s.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):s.containment.constructor===Array?(this.containment=s.containment,undefined):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=e(s.containment),a=i[0],a&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(t,i){i||(i=this.position);var a="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*a,left:i.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*a}},_generatePosition:function(t){var i,a,s,n,r=this.options,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,h=t.pageY;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(a=this.relative_container.offset(),i=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,n=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?n-this.offset.click.left>=i[0]||n-this.offset.click.left>i[2]?n:n-this.offset.click.left>=i[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,a){return a=a||this._uiHash(),e.ui.plugin.call(this,t,[i,a]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,a)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var a=e(this).data("ui-draggable"),s=a.options,n=e.extend({},i,{item:a.element});a.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(a.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i){var a=e(this).data("ui-draggable"),s=e.extend({},i,{item:a.element});e.each(a.sortables,function(){this.instance.isOver?(this.instance.isOver=0,a.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===a.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var a=e(this).data("ui-draggable"),s=this;e.each(a.sortables,function(){var n=!1,r=this;this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(n=!0,e.each(a.sortables,function(){return this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(r.instance.element[0],this.instance.element[0])&&(n=!1),n})),n?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,a._trigger("toSortable",t),a.dropped=this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),a._trigger("fromSortable",t),a.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var a=e(i.helper),s=e(this).data("ui-draggable").options;a.css("opacity")&&(s._opacity=a.css("opacity")),a.css("opacity",s.opacity)},stop:function(t,i){var a=e(this).data("ui-draggable").options;a._opacity&&e(i.helper).css("opacity",a._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),a=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(a.axis&&"x"===a.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-i.overflowOffset.top<a.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-i.overflowOffset.left<a.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(t.pageY-e(document).scrollTop()<a.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(t.pageX-e(document).scrollLeft()<a.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),a=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:a.top,left:a.left})})},drag:function(t,i){var a,s,n,r,o,l,h,u,d,c,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,y=i.offset.top,b=y+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)o=p.snapElements[d].left,l=o+p.snapElements[d].width,h=p.snapElements[d].top,u=h+p.snapElements[d].height,o-m>v||g>l+m||h-m>b||y>u+m||!e.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(a=m>=Math.abs(h-b),s=m>=Math.abs(u-y),n=m>=Math.abs(o-v),r=m>=Math.abs(l-g),a&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),n&&(i.position.left=p._convertPositionTo("relative",{top:0,left:o-p.helperProportions.width}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),c=a||s||n||r,"outer"!==f.snapMode&&(a=m>=Math.abs(h-y),s=m>=Math.abs(u-b),n=m>=Math.abs(o-g),r=m>=Math.abs(l-v),a&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.left=p._convertPositionTo("relative",{top:0,left:o}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(a||s||n||r||c)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=a||s||n||r||c)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,a=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});a.length&&(t=parseInt(e(a[0]).css("zIndex"),10)||0,e(a).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+a.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var a=e(i.helper),s=e(this).data("ui-draggable").options;a.css("zIndex")&&(s._zIndex=a.css("zIndex")),a.css("zIndex",s.zIndex)},stop:function(t,i){var a=e(this).data("ui-draggable").options;a._zIndex&&e(i.helper).css("zIndex",a._zIndex)}})})(jQuery);
var imageAttachAndEditDialog,attachmentInputInstance,ImageAttachAndEditDialog={},ImageAttachAndEditDialog=function(b){ImageAttachAndEditDialog.superclass.constructor.call(this,"#imageAttachAndEditDialog",null);this.windowId=b;imageAttachAndEditDialog=this},F=new Function;F.prototype=charisma.BaseDialog.prototype;ImageAttachAndEditDialog.prototype=new F;ImageAttachAndEditDialog.prototype.constructor=ImageAttachAndEditDialog;ImageAttachAndEditDialog.superclass=charisma.BaseDialog.prototype;
ImageAttachAndEditDialog.prototype.init=function(b){ImageAttachAndEditDialog.superclass.init.call(this,b);var c=this;attachmentInputInstance=new AttachmentInput({target:$(".dragzone-component"),enableFireFoxImagePaste:!0,enableChromeImagePaste:!0,onProcessBase64:function(a,b){c.close();c.callImageEditor(a,b)},onError:function(a){Webr.event.PopupMessage.SYSTEM.show(AttachActionsErrors[a],5E3)}})};
ImageAttachAndEditDialog.prototype.show=function(b,c,a){ImageAttachAndEditDialog.superclass.show.call(this);$(document.body).addClass("yt-attach-input-drop");this.restClient=new Webr.rest.Client(Webr.Event.rootUrl,Ajax.ajaxSettings());this.issueId=c;this.commentId=a;this.callback=b;attachmentInputInstance.init()};ImageAttachAndEditDialog.prototype.close=function(){attachmentInputInstance.unbind();$(document.body).removeClass("yt-attach-input-drop");ImageAttachAndEditDialog.superclass.close.call(this)};
ImageAttachAndEditDialog.prototype.callImageEditor=function(b,c){var a=this,d=c.lastIndexOf(".");0<d&&(c=c.substring(0,d));imageToolDialog.show({onSave:function(b,c,d,e){AttachActionsUtils.saveBase64({content:b,defaultFileName:c,permittedGroupIds:d,permittedUserIds:e,windowId:a.windowId,success:a.callback,issueId:a.issueId,commentId:a.commentId,success:a.callback})},issue:a.issueId,imageSrc:b,imageName:c,imageIsAlreadyAttached:!1})};

/*! jQuery UI - v1.10.3 - 2013-10-20
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */

(function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function s(t,i){return parseInt(e.css(t,i),10)||0}function a(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,o=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var i,s,a=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=a.children()[0];return e("body").append(a),i=r.offsetWidth,a.css("overflow","scroll"),s=r.offsetWidth,i===s&&(s=a[0].clientWidth),a.remove(),n=i-s},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),s=t.isWindow?"":t.element.css("overflow-y"),a="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,n="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:n?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var n,p,m,g,v,y,b=e(t.of),_=e.position.getWithinInfo(t.within),x=e.position.getScrollInfo(_),k=(t.collision||"flip").split(" "),w={};return y=a(b),b[0].preventDefault&&(t.at="left top"),p=y.width,m=y.height,g=y.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,s=(t[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):u.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=u.test(s[1])?s[1]:"center",e=c.exec(s[0]),i=c.exec(s[1]),w[this]=[e?e[0]:0,i?i[0]:0],t[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),n=i(w.at,p,m),v.left+=n[0],v.top+=n[1],this.each(function(){var a,l,u=e(this),c=u.outerWidth(),d=u.outerHeight(),f=s(this,"marginLeft"),y=s(this,"marginTop"),D=c+f+s(this,"marginRight")+x.width,T=d+y+s(this,"marginBottom")+x.height,M=e.extend({},v),S=i(w.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?M.left-=c:"center"===t.my[0]&&(M.left-=c/2),"bottom"===t.my[1]?M.top-=d:"center"===t.my[1]&&(M.top-=d/2),M.left+=S[0],M.top+=S[1],e.support.offsetFractions||(M.left=h(M.left),M.top=h(M.top)),a={marginLeft:f,marginTop:y},e.each(["left","top"],function(i,s){e.ui.position[k[i]]&&e.ui.position[k[i]][s](M,{targetWidth:p,targetHeight:m,elemWidth:c,elemHeight:d,collisionPosition:a,collisionWidth:D,collisionHeight:T,offset:[n[0]+S[0],n[1]+S[1]],my:t.my,at:t.at,within:_,elem:u})}),t.using&&(l=function(e){var i=g.left-M.left,s=i+p-c,a=g.top-M.top,n=a+m-d,h={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:u,left:M.left,top:M.top,width:c,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>n?"top":a>0?"bottom":"middle"};c>p&&p>o(i+s)&&(h.horizontal="center"),d>m&&m>o(a+n)&&(h.vertical="middle"),h.important=r(o(i),o(s))>r(o(a),o(n))?"horizontal":"vertical",t.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollLeft:s.offset.left,n=s.width,o=e.left-t.collisionPosition.marginLeft,h=a-o,l=o+t.collisionWidth-n-a;t.collisionWidth>n?h>0&&0>=l?(i=e.left+h+t.collisionWidth-n-a,e.left+=h-i):e.left=l>0&&0>=h?a:h>l?a+n-t.collisionWidth:a:h>0?e.left+=h:l>0?e.left-=l:e.left=r(e.left-o,e.left)},top:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollTop:s.offset.top,n=t.within.height,o=e.top-t.collisionPosition.marginTop,h=a-o,l=o+t.collisionHeight-n-a;t.collisionHeight>n?h>0&&0>=l?(i=e.top+h+t.collisionHeight-n-a,e.top+=h-i):e.top=l>0&&0>=h?a:h>l?a+n-t.collisionHeight:a:h>0?e.top+=h:l>0?e.top-=l:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var i,s,a=t.within,n=a.offset.left+a.scrollLeft,r=a.width,h=a.isWindow?a.scrollLeft:a.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,c=l+t.collisionWidth-r-h,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+d+p+f+t.collisionWidth-r-n,(0>i||o(u)>i)&&(e.left+=d+p+f)):c>0&&(s=e.left-t.collisionPosition.marginLeft+d+p+f-h,(s>0||c>o(s))&&(e.left+=d+p+f))},top:function(e,t){var i,s,a=t.within,n=a.offset.top+a.scrollTop,r=a.height,h=a.isWindow?a.scrollTop:a.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,c=l+t.collisionHeight-r-h,d="top"===t.my[1],p=d?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-r-n,e.top+p+f+m>u&&(0>s||o(u)>s)&&(e.top+=p+f+m)):c>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,e.top+p+f+m>c&&(i>0||c>o(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,a,n,r=document.getElementsByTagName("body")[0],o=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(n in s)t.style[n]=s[n];t.appendChild(o),i=r||document.documentElement,i.insertBefore(t,i.firstChild),o.style.cssText="position: absolute; left: 10.7432222px;",a=e(o).offset().left,e.support.offsetFractions=a>10&&11>a,t.innerHTML="",i.removeChild(t)}()})(jQuery);
charisma.ComboBoxHelper=function(a,b){this.insideDialog=!1;this.dataParser=function(a){var b=[],c;for(c in a)if(jQuery.isArray(a[c]))for(var d=a[c],j=0;j<d.length;++j){var k=d[j],h,l;"string"===typeof k?h=k:(h=k.value||k.login,l=k.colorIndex);b.push({text:h,id:h,empty:!1,styleClass:l?"c"+l:null})}return b};this.combo=a;this.params=b;this.params.load=this.params.load||this.loadLocal;this.insideDialog=a.renderer.rootElement.hasClass("jt-dialog");var c=this,d=a.renderer.layouter.config.move;a.renderer.layouter.config.move=
function(f){var e=a.renderer;if(c.insideDialog)return e.shadow.remove(),e.shadow=Webr.component.Shadow.EMPTY_SHADOW,d.call(this,f);e=e.getContainer();e.addClass(b.css||"");f==Webr.component.Layouter.UP?(e.addClass("reversal"),e.position({of:this.anchor,my:"left bottom",at:"left top"})):f==Webr.component.Layouter.DOWN&&(e.removeClass("reversal"),e.position({of:this.anchor,my:"left top",at:"left bottom"}))};this.setOnLoad(this.params.load(this));this.params.save&&this.setOnSave(this.params.save(this));
this.dataParser=this.params.dataParser||this.dataParser};charisma.ComboBoxHelper.prototype.loadValuesFromRest=function(a,b){var c=this;return function(){var d;null!=b&&(0<b.length&&!this.params.multi)&&(d={text:b,id:b,empty:!0,styleClass:"empty"});jQuery.ajax({url:a,dataType:"json",type:"GET",cache:!1,success:function(a,b,g){a=c.dataParser(a,b,g);d&&a.push(d);c.combo.update(a)},error:Ajax.onError})}};charisma.ComboBoxHelper.prototype.setOnLoad=function(a){this.combo.mainElement.bind("Load",a)};
charisma.ComboBoxHelper.prototype.loadLocal=function(a){return function(){window.setTimeout(function(){a.combo.update(a.params.values)},1)}};charisma.ComboBoxHelper.prototype.setOnSave=function(a){this.combo.mainElement.bind("change",a)};charisma.ComboBoxHelper.prototype.saveValuesToRest=function(a){var b=this;return function(){jQuery.ajax({url:a,dataType:"text",data:{command:b.combo.inputElement.value},type:"POST",cache:!1,error:Ajax.onError})}};
charisma.ComboBoxHelper.prototype.saveAsCommand=function(a){var b=this;return function(){commandDialog.execute(b.getCommand(a))}};charisma.ComboBoxHelper.prototype.getCommand=function(a,b){var c;c=this.params.multi?this.combo.jQinputElement.attr(charisma.ComboBoxHelper.VALUE_ID_ATTR).split(","):[this.combo.jQinputElement.attr(charisma.ComboBoxHelper.VALUE_ID_ATTR)];this.params.multi&&(b&&0<b.length)&&(c.push(b),c.reverse());return jQuery.map(c,function(b){if(b&&b.length>0)return a+" "+b}).join(" ")};
charisma.ComboBoxHelper.DEAFAULT_PARAMS={multi:!1,bind:null};charisma.ComboBoxHelper.VALUE_ID_ATTR="valueid";
charisma.ComboBoxHelper.create=function(a,b,c){var d=null;if(null==a.data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE)){null==c&&(c=charisma.ComboBoxHelper.DEAFAULT_PARAMS);var f=c.bind,e=null!=f&&null!=f.get(0),g=a.parent();e?g.attr("_valueId",b):(g=g.parent(),a.attr(charisma.ComboBoxHelper.VALUE_ID_ATTR,b),a.click(function(){d.combo.showRequested()}));var i;if(e)i=(c.multi?new Webr.component.MultiBoxComponentBind(g.get(0),f.get(0)):new Webr.component.ComboBoxComponentBind(g.get(0),f.get(0))).comboComponent;
else if(c.multi){var j=new Webr.component.MultiBoxComponent(g.get(0));i=j;var k=a.prev().html();j.mainElement.on("HideOptions",function(){var b=a.prev(),c=[];j.dataList.forEach(function(a){a=a.option;a.checked&&c.push(a.text)});if(c.length){var d=c[0]||"All Users";c.length>1&&(d=d+", +"+(c.length-1));b.html(d)}else b.html(k)})}else{i=new Webr.component.ComboBoxComponent(g.get(0));var h=i.jQinputElement;h.unbind("click focus");h.focus(function(){i.focus();window.setTimeout(function(){h.select()},10)});
h.click(function(){i.showRequested()})}d=new charisma.ComboBoxHelper(i,c)}return d};charisma.ComboBoxHelper.setValue=function(a,b,c){a.parent().parent().data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE);a.val(b);a.attr(charisma.ComboBoxHelper.VALUE_ID_ATTR,c)};
charisma.ComboBoxHelper.toggleCombo=function(a,b,c){b=b||window.event||{};(b=$(b.srcElement?b.srcElement:b.target))&&b.matches(["A","IMG"])&&b.equals($(a).children());var d=$(a),f=d.next(".combobox"),a=f.children().first(),b=f.data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE);if(!b){var e=f.data("empty"),b=charisma.ComboBoxHelper.create(a,d.text(),{bind:d,multi:f.data("multi"),load:function(a){return a.loadValuesFromRest(f.data("load-url"))},save:function(a){var b=d.attr("title");return function(){c&&
0<c.length?eval(c)(a.getCommand(b,e)):(analytics.trackEvent("agile","updateFieldFromBoard"),commandDialog.execute(a.getCommand(b,e)))}},dataParser:function(a){return a}}).combo;d.unbind("click")}b.toggle()};charisma.ComboBoxHelper.getBindMultiboxValues=function(a){a=$(a).parents(".combobox").data(Webr.component.ComponentRegistry.COMPONENT_INSTANCE);return!a?null:a.currentCheckedIds.join("/")};charisma.ComboParameters=function(){};

cr.setTemplateBind("EditEnumValueDialog",function(b){cr.ach(b,"editValueDlg","keydown",function(a){return a.handleEnterEsc(function(){cr.serverMethodCallInHandler(a,".methodCall_save",{})},function(){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})})});cr.ach(b,"closeEditBuildDlg","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ach(b,"editValueDlg","historychanged",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ash(b,"cancelValue",
"click",null);cr.ash(b,"saveValue","click",null);regdlg(b,"editValueDlg")});

!function(){var q=null;window.PR_SHOULD_USE_CONTINUATION=!0;
(function(){function S(a){function d(e){var b=e.charCodeAt(0);if(b!==92)return b;var a=e.charAt(1);return(b=r[a])?b:"0"<=a&&a<="7"?parseInt(e.substring(1),8):a==="u"||a==="x"?parseInt(e.substring(2),16):e.charCodeAt(1)}function g(e){if(e<32)return(e<16?"\\x0":"\\x")+e.toString(16);e=String.fromCharCode(e);return e==="\\"||e==="-"||e==="]"||e==="^"?"\\"+e:e}function b(e){var b=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],a=
b[0]==="^",c=["["];a&&c.push("^");for(var a=a?1:0,f=b.length;a<f;++a){var h=b[a];if(/\\[bdsw]/i.test(h))c.push(h);else{var h=d(h),l;a+2<f&&"-"===b[a+1]?(l=d(b[a+2]),a+=2):l=h;e.push([h,l]);l<65||h>122||(l<65||h>90||e.push([Math.max(65,h)|32,Math.min(l,90)|32]),l<97||h>122||e.push([Math.max(97,h)&-33,Math.min(l,122)&-33]))}}e.sort(function(e,a){return e[0]-a[0]||a[1]-e[1]});b=[];f=[];for(a=0;a<e.length;++a)h=e[a],h[0]<=f[1]+1?f[1]=Math.max(f[1],h[1]):b.push(f=h);for(a=0;a<b.length;++a)h=b[a],c.push(g(h[0])),
h[1]>h[0]&&(h[1]+1>h[0]&&c.push("-"),c.push(g(h[1])));c.push("]");return c.join("")}function s(e){for(var a=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),c=a.length,d=[],f=0,h=0;f<c;++f){var l=a[f];l==="("?++h:"\\"===l.charAt(0)&&(l=+l.substring(1))&&(l<=h?d[l]=-1:a[f]=g(l))}for(f=1;f<d.length;++f)-1===d[f]&&(d[f]=++x);for(h=f=0;f<c;++f)l=a[f],l==="("?(++h,d[h]||(a[f]="(?:")):"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=h&&
(a[f]="\\"+d[l]);for(f=0;f<c;++f)"^"===a[f]&&"^"!==a[f+1]&&(a[f]="");if(e.ignoreCase&&m)for(f=0;f<c;++f)l=a[f],e=l.charAt(0),l.length>=2&&e==="["?a[f]=b(l):e!=="\\"&&(a[f]=l.replace(/[A-Za-z]/g,function(a){a=a.charCodeAt(0);return"["+String.fromCharCode(a&-33,a|32)+"]"}));return a.join("")}for(var x=0,m=!1,j=!1,k=0,c=a.length;k<c;++k){var i=a[k];if(i.ignoreCase)j=!0;else if(/[a-z]/i.test(i.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){m=!0;j=!1;break}}for(var r={b:8,t:9,n:10,v:11,
f:12,r:13},n=[],k=0,c=a.length;k<c;++k){i=a[k];if(i.global||i.multiline)throw Error(""+i);n.push("(?:"+s(i)+")")}return RegExp(n.join("|"),j?"gi":"g")}function T(a,d){function g(a){var c=a.nodeType;if(c==1){if(!b.test(a.className)){for(c=a.firstChild;c;c=c.nextSibling)g(c);c=a.nodeName.toLowerCase();if("br"===c||"li"===c)s[j]="\n",m[j<<1]=x++,m[j++<<1|1]=a}}else if(c==3||c==4)c=a.nodeValue,c.length&&(c=d?c.replace(/\r\n?/g,"\n"):c.replace(/[\t\n\r ]+/g," "),s[j]=c,m[j<<1]=x,x+=c.length,m[j++<<1|1]=
a)}var b=/(?:^|\s)nocode(?:\s|$)/,s=[],x=0,m=[],j=0;g(a);return{a:s.join("").replace(/\n$/,""),d:m}}function H(a,d,g,b){d&&(a={a:d,e:a},g(a),b.push.apply(b,a.g))}function U(a){for(var d=void 0,g=a.firstChild;g;g=g.nextSibling)var b=g.nodeType,d=b===1?d?a:g:b===3?V.test(g.nodeValue)?a:d:d;return d===a?void 0:d}function C(a,d){function g(a){for(var j=a.e,k=[j,"pln"],c=0,i=a.a.match(s)||[],r={},n=0,e=i.length;n<e;++n){var z=i[n],w=r[z],t=void 0,f;if(typeof w==="string")f=!1;else{var h=b[z.charAt(0)];
if(h)t=z.match(h[1]),w=h[0];else{for(f=0;f<x;++f)if(h=d[f],t=z.match(h[1])){w=h[0];break}t||(w="pln")}if((f=w.length>=5&&"lang-"===w.substring(0,5))&&!(t&&typeof t[1]==="string"))f=!1,w="src";f||(r[z]=w)}h=c;c+=z.length;if(f){f=t[1];var l=z.indexOf(f),B=l+f.length;t[2]&&(B=z.length-t[2].length,l=B-f.length);w=w.substring(5);H(j+h,z.substring(0,l),g,k);H(j+h+l,f,I(w,f),k);H(j+h+B,z.substring(B),g,k)}else k.push(j+h,w)}a.g=k}var b={},s;(function(){for(var g=a.concat(d),j=[],k={},c=0,i=g.length;c<i;++c){var r=
g[c],n=r[3];if(n)for(var e=n.length;--e>=0;)b[n.charAt(e)]=r;r=r[1];n=""+r;k.hasOwnProperty(n)||(j.push(r),k[n]=q)}j.push(/[\S\s]/);s=S(j)})();var x=d.length;return g}function v(a){var d=[],g=[];a.tripleQuotedStrings?d.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):a.multiLineStrings?d.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,
q,"'\"`"]):d.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]);a.verbatimStrings&&g.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var b=a.hashComments;b&&(a.cStyleComments?(b>1?d.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):d.push(["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),g.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,q])):d.push(["com",
/^#[^\n\r]*/,q,"#"]));a.cStyleComments&&(g.push(["com",/^\/\/[^\n\r]*/,q]),g.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q]));if(b=a.regexLiterals){var s=(b=b>1?"":"\n\r")?".":"[\\S\\s]";g.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*("+("/(?=[^/*"+b+"])(?:[^/\\x5B\\x5C"+b+"]|\\x5C"+s+"|\\x5B(?:[^\\x5C\\x5D"+b+"]|\\x5C"+
s+")*(?:\\x5D|$))+/")+")")])}(b=a.types)&&g.push(["typ",b]);b=(""+a.keywords).replace(/^ | $/g,"");b.length&&g.push(["kwd",RegExp("^(?:"+b.replace(/[\s,]+/g,"|")+")\\b"),q]);d.push(["pln",/^\s+/,q," \r\n\t\u00a0"]);b="^.[^\\s\\w.$@'\"`/\\\\]*";a.regexLiterals&&(b+="(?!s*/)");g.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,
q],["pun",RegExp(b),q]);return C(d,g)}function J(a,d,g){function b(a){var c=a.nodeType;if(c==1&&!x.test(a.className))if("br"===a.nodeName)s(a),a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)b(a);else if((c==3||c==4)&&g){var d=a.nodeValue,i=d.match(m);if(i)c=d.substring(0,i.index),a.nodeValue=c,(d=d.substring(i.index+i[0].length))&&a.parentNode.insertBefore(j.createTextNode(d),a.nextSibling),s(a),c||a.parentNode.removeChild(a)}}function s(a){function b(a,c){var d=
c?a.cloneNode(!1):a,e=a.parentNode;if(e){var e=b(e,1),g=a.nextSibling;e.appendChild(d);for(var i=g;i;i=g)g=i.nextSibling,e.appendChild(i)}return d}for(;!a.nextSibling;)if(a=a.parentNode,!a)return;for(var a=b(a.nextSibling,0),d;(d=a.parentNode)&&d.nodeType===1;)a=d;c.push(a)}for(var x=/(?:^|\s)nocode(?:\s|$)/,m=/\r\n?|\n/,j=a.ownerDocument,k=j.createElement("li");a.firstChild;)k.appendChild(a.firstChild);for(var c=[k],i=0;i<c.length;++i)b(c[i]);d===(d|0)&&c[0].setAttribute("value",d);var r=j.createElement("ol");
r.className="linenums";for(var d=Math.max(0,d-1|0)||0,i=0,n=c.length;i<n;++i)k=c[i],k.className="L"+(i+d)%10,k.firstChild||k.appendChild(j.createTextNode("\u00a0")),r.appendChild(k);a.appendChild(r)}function p(a,d){for(var g=d.length;--g>=0;){var b=d[g];F.hasOwnProperty(b)?D.console&&console.warn("cannot override language handler %s",b):F[b]=a}}function I(a,d){if(!a||!F.hasOwnProperty(a))a=/^\s*</.test(d)?"default-markup":"default-code";return F[a]}function K(a){var d=a.h;try{var g=T(a.c,a.i),b=g.a;
a.a=b;a.d=g.d;a.e=0;I(d,b)(a);var s=/\bMSIE\s(\d+)/.exec(navigator.userAgent),s=s&&+s[1]<=8,d=/\n/g,x=a.a,m=x.length,g=0,j=a.d,k=j.length,b=0,c=a.g,i=c.length,r=0;c[i]=m;var n,e;for(e=n=0;e<i;)c[e]!==c[e+2]?(c[n++]=c[e++],c[n++]=c[e++]):e+=2;i=n;for(e=n=0;e<i;){for(var p=c[e],w=c[e+1],t=e+2;t+2<=i&&c[t+1]===w;)t+=2;c[n++]=p;c[n++]=w;e=t}c.length=n;var f=a.c,h;if(f)h=f.style.display,f.style.display="none";try{for(;b<k;){var l=j[b+2]||m,B=c[r+2]||m,t=Math.min(l,B),A=j[b+1],G;if(A.nodeType!==1&&(G=x.substring(g,
t))){s&&(G=G.replace(d,"\r"));A.nodeValue=G;var L=A.ownerDocument,o=L.createElement("span");o.className=c[r+1];var v=A.parentNode;v.replaceChild(o,A);o.appendChild(A);g<l&&(j[b+1]=A=L.createTextNode(x.substring(t,l)),v.insertBefore(A,o.nextSibling))}g=t;g>=l&&(b+=2);g>=B&&(r+=2)}}finally{if(f)f.style.display=h}}catch(u){D.console&&console.log(u&&u.stack||u)}}var D=window,y=["break,continue,do,else,for,if,return,while"],E=[[y,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],
"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],M=[E,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],N=[E,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],
O=[N,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,internal,into,is,let,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],E=[E,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],P=[y,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],
Q=[y,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],W=[y,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],y=[y,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],R=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,
V=/\S/,X=v({keywords:[M,O,E,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",P,Q,y],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),F={};p(X,["default-code"]);p(C([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",
/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);p(C([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],
["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);p(C([],[["atv",/^[\S\s]+/]]),["uq.val"]);p(v({keywords:M,hashComments:!0,cStyleComments:!0,types:R}),["c","cc","cpp","cxx","cyc","m"]);p(v({keywords:"null,true,false"}),["json"]);p(v({keywords:O,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:R}),
["cs"]);p(v({keywords:N,cStyleComments:!0}),["java"]);p(v({keywords:y,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]);p(v({keywords:P,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]);p(v({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]);p(v({keywords:Q,
hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]);p(v({keywords:E,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]);p(v({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);p(v({keywords:W,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]);
p(C([],[["str",/^[\S\s]+/]]),["regex"]);var Y=D.PR={createSimpleLexer:C,registerLangHandler:p,sourceDecorator:v,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:D.prettyPrintOne=function(a,d,g){var b=document.createElement("div");b.innerHTML="<pre>"+a+"</pre>";b=b.firstChild;g&&J(b,g,!0);K({h:d,j:g,c:b,i:1});
return b.innerHTML},prettyPrint:D.prettyPrint=function(a,d){function g(){for(var b=D.PR_SHOULD_USE_CONTINUATION?c.now()+250:Infinity;i<p.length&&c.now()<b;i++){for(var d=p[i],j=h,k=d;k=k.previousSibling;){var m=k.nodeType,o=(m===7||m===8)&&k.nodeValue;if(o?!/^\??prettify\b/.test(o):m!==3||/\S/.test(k.nodeValue))break;if(o){j={};o.replace(/\b(\w+)=([\w%+\-.:]+)/g,function(a,b,c){j[b]=c});break}}k=d.className;if((j!==h||e.test(k))&&!v.test(k)){m=!1;for(o=d.parentNode;o;o=o.parentNode)if(f.test(o.tagName)&&
o.className&&e.test(o.className)){m=!0;break}if(!m){d.className+=" prettyprinted";m=j.lang;if(!m){var m=k.match(n),y;if(!m&&(y=U(d))&&t.test(y.tagName))m=y.className.match(n);m&&(m=m[1])}if(w.test(d.tagName))o=1;else var o=d.currentStyle,u=s.defaultView,o=(o=o?o.whiteSpace:u&&u.getComputedStyle?u.getComputedStyle(d,q).getPropertyValue("white-space"):0)&&"pre"===o.substring(0,3);u=j.linenums;if(!(u=u==="true"||+u))u=(u=k.match(/\blinenums\b(?::(\d+))?/))?u[1]&&u[1].length?+u[1]:!0:!1;u&&J(d,u,o);r=
{h:m,c:d,j:u,i:o};K(r)}}}i<p.length?setTimeout(g,250):"function"===typeof a&&a()}for(var b=d||document.body,s=b.ownerDocument||document,b=[b.getElementsByTagName("pre"),b.getElementsByTagName("code"),b.getElementsByTagName("xmp")],p=[],m=0;m<b.length;++m)for(var j=0,k=b[m].length;j<k;++j)p.push(b[m][j]);var b=q,c=Date;c.now||(c={now:function(){return+new Date}});var i=0,r,n=/\blang(?:uage)?-([\w.]+)(?!\S)/,e=/\bprettyprint\b/,v=/\bprettyprinted\b/,w=/pre|xmp/i,t=/^code$/i,f=/^(?:pre|code|xmp)$/i,
h={};g()}};typeof define==="function"&&define.amd&&define("google-code-prettify",[],function(){return Y})})();}()

cr.registerExtension("select","HTMLSelectElement");HTMLSelectElement.prototype.highlight=function(a){this.unHighlight();Webr.ErrorHighlighter.highlightError(this,a)};HTMLSelectElement.prototype.unHighlight=function(){this.highliter&&(this.highliter.destroy(),this.highliter=null)};HTMLSelectElement.prototype.createHighlighter=function(a){return this.highliter=new Webr.ErrorHighlighter(this,a)};

cr.setTemplateBind("ProjectUsages",function(a){cr.ach(a,"usages","mouseover",function(a){cr.findInHandler(a,".usagesPopup",[]).show(!0,cr.findInHandler(a,".usages",[]))});regPC(a,"usagesPopup")});

cr.setTemplateBind("VisibilityGroup",function(a){cr.ach(a,"commandCommentGroups","ShowOptions",function(b){var c=cr.findInHandler(b,".commandCommentGroups",[]).renderer,b=c.comboContainer,a=c.anchorElement.offset().top,d=$(document).scrollTop(),c={top:c.anchorElement.outerHeight(!0)+a-d};b.css({top:""});b.parent().css(c);b.removeClass("hide-visibility-combobox");b.parent().removeClass("hide-visibility-combobox")});cr.ach(a,"commandCommentGroups","change",function(){});cr.ash(a,"commandCommentGroups",
"change",null);cr.ash(a,"commandCommentGroups","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

cr.setTemplateBind("DraftOptions",function(a){cr.ash(a,"clearButton","click",null)});

var c0mb0_prototype_single=Webr.component.ComboBoxListItem.prototype,c0mb0_prototype_single_creator=c0mb0_prototype_single.createElement;
c0mb0_prototype_single.createElement=function(){var a=this.option,b=a.styleClass;if(b&&b.startsWith("c0mb0")){var c=$(document.createElement("li"));this.el=c;c.addClass("c0mb0_container");if(Webr.component.ComboOption.NO_MATCH_ID===a.id)c.text(a.text),this.hide();else{var a=a.text,d="";"c0mb0 c0"!==b&&(d='<span class="info-'+b+'">'+(a.length?a[0]:"")+"</span>");c.html(d+('<span class="value-c0mb0">'+a+"</span>"));c.attr("title",a)}}else c0mb0_prototype_single_creator.call(this)};
var c0mb0_prototype_multi=Webr.component.MultiBoxListItem.prototype,c0mb0_prototype_multi_creator=c0mb0_prototype_multi.createElement;
c0mb0_prototype_multi.createElement=function(){var a=this.option,b=a.styleClass;if(b&&b.startsWith("c0mb0")){var c=$(document.createElement("li")).addClass("c0mb0-wrapper");this.el=c;if(this.option.id===Webr.component.ComboOption.NO_MATCH_ID||this.option.id===Webr.component.ComboOption.NEW_OPTION_ID)this.hide();else{var d=$(document.createElement("span"));d.html("&nbsp;").addClass("checkbox").addClass("multivalue-c0mb0-checkbox").addClass(this.option.checked?"checked":"unchecked");c.append(d);this.checkBox=
$(d)}d=$(document.createElement("span")).addClass("multivalue-c0mb0");a=a.text;d.text(a);c.attr("title",a);this.textElement=$(d);c.append(d);"c0mb0 c0"!==b&&(b=$(document.createElement("span")).addClass("info-"+b),b.text(a.length?a[0]:""),c.append(b))}else c0mb0_prototype_multi_creator.call(this)};

cr.setTemplateBind("WorkItemTypeSelect",function(a){cr.ash(a,"changeType","change",null);cr.ash(a,"changeType","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});regCC(a,"changeType")});

charisma.smartui.IssueId=function(){};charisma.smartui.IssueId.MASK=63;charisma.smartui.IssueId.CC_0=48;charisma.smartui.IssueId.CC_BA=65;charisma.smartui.IssueId.CC_SA=97;charisma.smartui.IssueId.SORT=function(a,c){return a-c};
charisma.smartui.IssueId.encodeIssueIds=function(a){for(var c=a.length,b=0;b<c;b+=1)a[b]=charisma.smartui.IssueId.cutIssueType(a[b]);a.sort(charisma.smartui.IssueId.SORT);for(b=c-1;0<b;b-=1)a[b]-=a[b-1];for(var d=charisma.smartui.IssueId.toString(a[0]),b=1;b<c;b+=1)d+="-"+charisma.smartui.IssueId.toString(a[b]);return d};charisma.smartui.IssueId.cutIssueType=function(a){var c=a.indexOf("-"),a=0<c?a.substring(c+1,a.length):a;return parseInt(a)};
charisma.smartui.IssueId.toString=function(a){var c="",b=charisma.smartui.IssueId.MASK;do c=charisma.smartui.IssueId.toChar(a&b)+c,a>>=6;while(0<a);return c};charisma.smartui.IssueId.toChar=function(a){return String.fromCharCode(10>a?charisma.smartui.IssueId.CC_0+a:36>a?charisma.smartui.IssueId.CC_BA+a-10:charisma.smartui.IssueId.CC_SA+a-36)};

charisma.smartui.Filter=function(a){this.options=$(a).find("li input:checkbox").filter(function(a){return 0<a})};charisma.smartui.Filter.lastChecked=[];charisma.smartui.Filter.getFilter=function(a){var a=charisma.smartui.Filter.getGroupUL(a),b=a.searchFilterComponent;null==b&&(b=new charisma.smartui.Filter(a),a.searchFilterComponent=b);return b};charisma.smartui.Filter.getGroupUL=function(a){return a.parentNode.parentNode};charisma.smartui.Filter.getGroupHeader=function(a){return $(a).parent().parent().parent().children("a:first")};
charisma.smartui.Filter.swapLastChecked=function(a){var b=charisma.smartui.Filter.lastClicked;b&&(a&&charisma.smartui.Filter.getGroupUL(b)!=charisma.smartui.Filter.getGroupUL(a))&&(b=null);charisma.smartui.Filter.lastClicked=a;return b};charisma.smartui.Filter.getCheckboxRange=function(a,b){var c=$(a.parentNode).index(),d=$(b.parentNode).index();if(d<c)var e=d,d=c,c=e;return $(charisma.smartui.Filter.getGroupUL(a)).children().slice(c,d+1).children("input:checkbox")};
charisma.smartui.Filter.setFilterPopup=function(a){charisma.smartui.Filter.filterPopup=a;charisma.smartui.Filter.filterPopup.hide_pause=3E3};charisma.smartui.Filter.hideFilterPopup=function(a){charisma.smartui.Filter.filterPopup&&(a?charisma.smartui.Filter.filterPopup.mouseOutAnchor():charisma.smartui.Filter.filterPopup.hide())};charisma.smartui.Filter.showFilterPopup=function(){charisma.smartui.Filter.filterPopup&&charisma.smartui.Filter.filterPopup.show(!1,$(charisma.smartui.Filter.lastClicked).parent().get(0))};

var attachActionsController,AttachActionsController={},AttachActionsController=function(){this.onAttachDefaultCallbacks=[];this.configurations={};attachActionsController&&console.error("AttachActionsController is inited twice");attachActionsController=this;this.init()};
AttachActionsController.prototype.init=function(){var a=this;$(document).keydown(function(b){return Webr.component.panel.Dialog.isModalVisible()||charisma.smartui.ViewImageAttachment.isVisible()||!AttachActionsController.onlyOneIssue()?!0:(b=AttachActionsController.keyEventToActionName(b))?(a.attach(b),!1):!0});$(window.document).on("click",".yt-attach",function(){if(AttachActionsController.onlyOneIssue())return a.attach(AttachActionsController.classToActionName($(this)),null,null,$(this).attr("iid")),
!1})};AttachActionsController.prototype.doAttach=function(a,b,c,d){c||(c=commonController.getFocusedIssueId());var e=this;a==AttachActionsController.UPLOAD_FILE||a==AttachActionsController.UPLOAD_FILE_SECURILY?attachFileDialog.show(function(){e.invokeCallbacks(b)},a==AttachActionsController.UPLOAD_FILE_SECURILY,c,d):imageAttachAndEditDialog.show(function(){e.invokeCallbacks(b)},c,d)};AttachActionsController.prototype.attach=function(a,b,c,d){this.doAttach(a,b,c,d)};
AttachActionsController.prototype.invokeCallbacks=function(a){if(a)a();else for(a=0;a<this.onAttachDefaultCallbacks.length;++a)this.onAttachDefaultCallbacks[a]()};AttachActionsController.prototype.addDefaultCallback=function(a){this.onAttachDefaultCallbacks.push(a)};AttachActionsController.UPLOAD_FILE="UPLOAD_FILE";AttachActionsController.UPLOAD_FILE_SECURILY="UPLOAD_FILE_SECURILY";AttachActionsController.TAKE_SCREENSHOT="TAKE_SCREENSHOT";AttachActionsController.PASTE_IMAGE="PASTE_IMAGE";
AttachActionsController.PASTE_IMAGE_NO_PREVIEW="PASTE_IMAGE_NO_PREVIEW";AttachActionsController.getAppletActionsTypes=function(){var a={};a[AttachActionsController.TAKE_SCREENSHOT]="takeScreenshot";a[AttachActionsController.PASTE_IMAGE]="pasteFromClipboard";a[AttachActionsController.PASTE_IMAGE_NO_PREVIEW]="pasteFromClipboardNoPreview";return a};
AttachActionsController.classToActionName=function(a){return a.hasClass("yt-attach_file")?AttachActionsController.UPLOAD_FILE:a.hasClass("yt-attach_file-securely")?AttachActionsController.UPLOAD_FILE_SECURILY:a.hasClass("yt-attach_screenshot")?AttachActionsController.TAKE_SCREENSHOT:a.hasClass("yt-attach_clipboard")?AttachActionsController.PASTE_IMAGE:AttachActionsController.PASTE_IMAGE_NO_PREVIEW};
AttachActionsController.keyEventToActionName=function(a){if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.AddFile))return AttachActionsController.UPLOAD_FILE;if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.TakeScreenshot))return AttachActionsController.TAKE_SCREENSHOT;if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.PasteFromClipboard))return AttachActionsController.PASTE_IMAGE;if(Webr.util.Key.isApplicable(a,SmartUIShortCuts.PasteFromClipboardNoPreview))return AttachActionsController.PASTE_IMAGE_NO_PREVIEW};
AttachActionsController.APPLET_ACTION_TYPES=AttachActionsController.getAppletActionsTypes();AttachActionsController.onlyOneIssue=function(){return commonController&&commonController.getFocusedIssueId()};

cr.setTemplateBind("IssueItem",function(a){cr.ach(a,"vi.collapse","click",function(a){var b=$(cr.findInHandler(a,".issueContainer",[])).hasClass("marked");cr.serverMethodCallInHandler(a,".methodCall_toggleExpandIssue",{__param__marked:b},{preventDoubleSubmit:!0})});cr.ash(a,"vi.ip.t.ct.toggleCommentsDiv","click",{preventDoubleSubmit:!0});cr.ash(a,"vi.cs.ac.closeCommentsLink","click",null)});

cr.setTemplateBind("IssueTagsInTitle",function(a){cr.ash(a,"untag","click",null)});

cr.setTemplateBind("MultiBuildFieldSelectorEditor",function(a){cr.ash(a,"valueSelector","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

Webr.util.PageStateStore=function(){Webr.util.PageStateStore.superclass.constructor.call(this);this.params=new Webr.util.Map;this.parser=new Webr.util.HashParametersParser(window.location.hash,this);this.update()};var F=new Function;F.prototype=Webr.util.HashParameterListener.prototype;Webr.util.PageStateStore.prototype=new F;Webr.util.PageStateStore.prototype.constructor=Webr.util.PageStateStore;Webr.util.PageStateStore.superclass=Webr.util.HashParameterListener.prototype;
Webr.util.PageStateStore.prototype.get=function(b){return this.params.get(b.toLowerCase())};Webr.util.PageStateStore.prototype.put=function(b,c){this.formLocation(null,b.toLowerCase(),c)};Webr.util.PageStateStore.prototype.removeKey=function(b){this.formLocation(b.toLowerCase(),null,null)};Webr.util.PageStateStore.prototype.update=function(){delete this.params;this.params=new Webr.util.Map;this.parser.setInputString(window.location.hash);this.parser.parse()};
Webr.util.PageStateStore.prototype.getParams=function(){return this.params};Webr.util.PageStateStore.prototype.parameter=function(b,c){this.params.put(decodeURIComponent(b).toLowerCase(),decodeURIComponent(c))};
Webr.util.PageStateStore.prototype.formLocation=function(b,c,d){var a=[];this.params.forEach(function(e,f){e!=b&&(a.push(encodeURIComponent(e)),a.push("="),e==c&&(f=d,c=null),null!=f&&a.push(encodeURIComponent(f)),a.push("&"))});c?(a.push(encodeURIComponent(c)),a.push("="),null!=d&&a.push(encodeURIComponent(d))):a.pop();var g=0<a.length?a.join(""):" ";Webr.util.Util.isSafari?window.location=window.location.href.split("#")[0]+"#"+g:window.location.hash=g};
Webr.util.PageStateStore.getInstance=function(){Webr.util.PageStateStore.map||(Webr.util.PageStateStore.map=new Webr.util.PageStateStore);return Webr.util.PageStateStore.map};

cr.setTemplateBind("SingleBundleSelectorEditor",function(a){cr.ash(a,"valueSelector","change",null);cr.ash(a,"valueSelector","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1})});

Webr.event.InProgressEventListener=function(){Webr.event.InProgressEventListener.superclass.constructor.call(this);this.eventsInProgress=[]};var F=new Function;F.prototype=Webr.event.ServerEventListener.prototype;Webr.event.InProgressEventListener.prototype=new F;Webr.event.InProgressEventListener.prototype.constructor=Webr.event.InProgressEventListener;Webr.event.InProgressEventListener.superclass=Webr.event.ServerEventListener.prototype;
Webr.event.InProgressEventListener.prototype.onFinish=function(a){a=Webr.event.InProgressEventListener.toFullName(a.config);null!=this.eventsInProgress[a]&&delete this.eventsInProgress[a]};Webr.event.InProgressEventListener.prototype.checkDoubleSubmit=function(a){var b=!0;a.preventDoubleSubmit&&null!=this.eventsInProgress[Webr.event.InProgressEventListener.toFullName(a)]&&(b=!1);return b};
Webr.event.InProgressEventListener.prototype.rememberEvent=function(a){var b=Webr.event.InProgressEventListener.toFullName(a.config);if(a.config.processRecentOnly){var c=this.eventsInProgress[b];null!=c&&c.config.processRecentOnly&&c.abort()}this.eventsInProgress[b]=a;a.config.listeners.push(this)};Webr.event.InProgressEventListener.prototype.isInFlight=function(){var a=0,b=this.eventsInProgress,c;for(c in b)"_heart_beat"!==b[c].config.eventName&&++a;return 0<a};
Webr.event.InProgressEventListener.WEBR_AJAX_LISTENER="_WEBR_AJAX_LISTENER_";Webr.event.InProgressEventListener.get=function(){null==Webr.event.InProgressEventListener.instance&&(Webr.event.InProgressEventListener.instance=new Webr.event.InProgressEventListener,window[Webr.event.InProgressEventListener.WEBR_AJAX_LISTENER]=Webr.event.InProgressEventListener.instance);return Webr.event.InProgressEventListener.instance};
Webr.event.InProgressEventListener.toFullName=function(a){return a.eventSource+":"+a.eventName};

cr.setTemplateBind("IssueItemLight",function(a){cr.ach(a,"collapse","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_toggleExpandIssue",{},{preventDoubleSubmit:!0})})});

cr.setTemplateBind("EditWatchFolderDialog",function(a){cr.ach(a,"editWatchFolderDlg","keydown",function(a){return a.handleEnterEsc(function(){cr.serverMethodCallInHandler(a,".methodCall_save",{__param__overwrite:!1})},function(){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})})});cr.ach(a,"cancelWatchFolder","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ach(a,"deleteWatchFolder","click",function(a){window.confirm(l10n('Are you sure you want to delete \'{0}\'?',
cr.getTarget(a).getAttribute("p0")))&&(cr.findInHandler(a,".editWatchFolderDlg",[]).setVisible(!1),cr.serverMethodCallInHandler(a,".methodCall_delete",{}))});cr.ach(a,"closeEditWatchFolderDlg","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ach(a,"searchField","caretmove",function(a,b){charisma.RestMethods.$(cr.findInHandler(a,".searchField",[])).suggest(b.caretPos)});cr.ach(a,"searchField","valuechange",function(a,b){charisma.RestMethods.$(cr.findInHandler(a,".searchField",
[])).underlineAndSuggest(b.caretPos,4)});cr.ash(a,"ts.color","click",null);cr.ash(a,"saveWatchFolder","click",null);cr.ash(a,"visibleForGroup","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});cr.ash(a,"updateableForGroup","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});cr.forEach(a,"searchField",function(){this.attachWatcher(!1)});cr.forEach(a,"searchField",function(){this.attachWatcher(!1)});regCC(a,
"visibleForGroup");regCC(a,"updateableForGroup");regdlg(a,"editWatchFolderDlg")});

charisma.smartui.WatchFolderHighlighter=function(){};charisma.smartui.WatchFolderHighlighter.store=new Webr.util.Map;charisma.smartui.WatchFolderHighlighter.clickInterceptor=function(){Webr.event.PopupMessage.SYSTEM.show(l10n('This item is not opened in the search box because it\'s already selected as the context'),3E3);return!1};charisma.smartui.WatchFolderHighlighter.register=function(a,b){charisma.smartui.WatchFolderHighlighter.store.put(a,b)};
charisma.smartui.WatchFolderHighlighter.reset=function(){for(var a in charisma.smartui.WatchFolderHighlighter.store.getKeys())charisma.smartui.WatchFolderHighlighter.ac(a,!1)};
charisma.smartui.WatchFolderHighlighter.ac=function(a,b){var c=$(charisma.smartui.WatchFolderHighlighter.store.get(a)).find(".vert-list-value"),d=c.parent().parent().find(".vert-list-item-counter");b?(c.bind("click",charisma.smartui.WatchFolderHighlighter.clickInterceptor).addClass("vert-item_highlight"),d.addClass("vert-item_highlight")):(c.unbind("click",charisma.smartui.WatchFolderHighlighter.clickInterceptor).removeClass("vert-item_highlight"),d.removeClass("vert-item_highlight"))};
charisma.smartui.WatchFolderHighlighter.highlight=function(a){charisma.smartui.WatchFolderHighlighter.reset();charisma.smartui.WatchFolderHighlighter.ac(a,!0);charisma.smartui.WatchFolderHighlighter.active=a};charisma.smartui.WatchFolderHighlighter.highlightActive=function(){charisma.smartui.WatchFolderHighlighter.ac(charisma.smartui.WatchFolderHighlighter.active,!0)};

cr.setTemplateBind("StatusLine",function(a){cr.ash(a,"showReleaseNotes","click",null);cr.ash(a,"export","click",null);cr.ash(a,"saveSearchLink","click",null);regmn(a,"reports")});

cr.setTemplateBind("TextEditor",function(b){cr.ach(b,"textValue","keydown",function(a){return a.handleEnterEsc(function(){cr.findInHandler(a,".textContentInlineEditor",[]).submit()},function(){cr.findInHandler(a,".textContentInlineEditor",[]).abort()})});cr.ach(b,"textContentInlineEditor","createeditor",function(a){$(cr.findInHandler(a,".textEditorContainer",[])).addClass("cf-edit");$(cr.findInHandler(a,".textEditorContainer",[])).parent().addClass("cf-visible")});cr.ach(b,"textContentInlineEditor",
"abort",function(a){$(cr.findInHandler(a,".textEditorContainer",[])).removeClass("cf-edit");$(cr.findInHandler(a,".textEditorContainer",[])).parent().removeClass("cf-visible")});cr.ach(b,"textContentInlineEditor","submit",function(a){$(cr.findInHandler(a,".textEditorContainer",[])).removeClass("cf-edit");$(cr.findInHandler(a,".textEditorContainer",[])).parent().removeClass("cf-visible")});cr.ash(b,"textContentInlineEditor","createeditor",{preventDoubleSubmit:!0});cr.ash(b,"textContentInlineEditor",
"submit",{preventDoubleSubmit:!0});regic(b,"textContentInlineEditor")});

Webr.component.ClassToggler=function(){};Webr.component.ClassToggler.addRemoveClassOnOutClickHandler=function(a,b){window.setTimeout(function(){var d=function(c){for(c=c.target;null!=c;c=c.parentNode)if(c==a)return!0;$(a).removeClass(b);$(document).unbind("click",d)};$(document).click(d)},20)};Webr.component.ClassToggler.toggleClass=function(a,b,d){a=document.getElementById(a);$(a).hasClass(b)?$(a).removeClass(b):($(a).addClass(b),d&&Webr.component.ClassToggler.addRemoveClassOnOutClickHandler(a,b))};
Webr.component.ClassToggler.bind=function(a,b,d,c,e,f){$(document.getElementById(a)).click(function(){e&&e();Webr.component.ClassToggler.toggleClass(b,d,c);f&&f()});c&&(a=document.getElementById(b))&&$(a).hasClass(d)&&Webr.component.ClassToggler.addRemoveClassOnOutClickHandler(a,d)};

Webr.component.FontMetrics=function(){};Webr.component.FontMetrics.stringWidth=function(a,c){var b=a.meterDiv;null==b&&(b=Webr.component.FontMetrics.createMeterDiv(a),a.meterDiv=b);b.childNodes.item(0).nodeValue=c;return $(b).width()};
Webr.component.FontMetrics.createMeterDiv=function(a){var c=document.createElement("div");c.appendChild(document.createTextNode("empty"));c.style.whiteSpace="pre";c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";var b=$(c),a=$(a),d=a.css("font-size");a.after(c);b.css("font-family",a.css("font-family"));Webr.util.Util.isIE&&(d=a.parent().css("font-size")<d?a.parent().css("font-size"):"");b.css("font-size",d);b.css("font-style",a.css("font-style"));b.css("font-variant",a.css("font-variant"));
b.css("font-weight",a.css("font-weight"));return c};

cr.setTemplateBind("CommentControls",function(b){cr.ach(b,"reply","click",function(a){a.preventDefault();a.stopPropagation();cr.serverMethodCallInHandler(a,".methodCall_reply",{__param__repliedOnComment:cr.getTarget(a).getAttribute("p0")})})});

cr.setTemplateBind("UsersToolbarTags",function(a){cr.ash(a,"userTagsCombo","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});regCC(a,"userTagsCombo")});

cr.setTemplateBind("ViewModeSelect",function(a){regmn(a,"detailLevelSelect")});

var SmartUIShortCuts={},SmartUIShortCuts=function(){};SmartUIShortCuts.TakeScreenshot=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:83}}];SmartUIShortCuts.PasteFromClipboard=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:86}}];SmartUIShortCuts.PasteFromClipboardNoPreview=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!0,keyCode:86}}];SmartUIShortCuts.HTML5Paste=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!1,keyCode:86},os:["macintosh"]},{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:86}}];
SmartUIShortCuts.AddFile=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:65}}];SmartUIShortCuts.AddComment=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:67}}];SmartUIShortCuts.CancelEdit=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:27}}];SmartUIShortCuts.SubmitIssueEdit=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:13}}];SmartUIShortCuts.SubmitIssueEdit_Mac=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!1,keyCode:13}}];
SmartUIShortCuts.Submit=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:13}}];SmartUIShortCuts.Submit_Mac=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!1,keyCode:13}}];SmartUIShortCuts.Dismiss=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:27}}];SmartUIShortCuts.CollapseIssue=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:37}}];SmartUIShortCuts.CommandDialog=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:74}}];
SmartUIShortCuts.ExpandIssue=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:39}}];SmartUIShortCuts.RepeatLastCommand=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:75}}];SmartUIShortCuts.EditIssue=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:113}}];SmartUIShortCuts.DeleteIssue=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:46}}];SmartUIShortCuts.DeleteIssue_Backspace=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:8}}];
SmartUIShortCuts.GoToFirst=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:36}}];SmartUIShortCuts.GoToLast=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:35}}];SmartUIShortCuts.NewIssue=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:78},os:["macintosh"]},{keyStroke:{alt:!0,ctrl:!1,meta:!1,shift:!1,keyCode:45}}];SmartUIShortCuts.NewSubtask=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:78},os:["macintosh"]},{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:45}}];
SmartUIShortCuts.IncreaseIssueVisibility=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:61},browser:["firefox"]},{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:187}}];SmartUIShortCuts.DecreaseIssueVisibility=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:173},browser:["firefox"]},{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!1,keyCode:189}}];
SmartUIShortCuts.FirstPage=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!0,keyCode:37},os:["macintosh"]},{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:37}}];SmartUIShortCuts.NextPage=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!1,keyCode:39},os:["macintosh"]},{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:39}}];SmartUIShortCuts.PrevPage=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!1,keyCode:37},os:["macintosh"]},{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:37}}];
SmartUIShortCuts.PrevIssue=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!1,keyCode:37},os:["macintosh"]},{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:37}}];SmartUIShortCuts.NextIssue=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!1,keyCode:39},os:["macintosh"]},{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:39}}];SmartUIShortCuts.GoBack=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!1,keyCode:38},os:["macintosh"]},{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:38}}];
SmartUIShortCuts.LastPage=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!0,keyCode:39},os:["macintosh"]},{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:39}}];SmartUIShortCuts.ToggleSearchField=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:27}}];SmartUIShortCuts.SubmitSearchField=[{keyStroke:{alt:!1,meta:!1,shift:!1,keyCode:13}}];SmartUIShortCuts.ApplyCommand=[{keyStroke:{alt:!1,meta:!1,shift:!1,keyCode:13}}];
SmartUIShortCuts.SilentApplyCommand=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:13}}];SmartUIShortCuts.MoveToProjects=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!0,keyCode:9}}];SmartUIShortCuts.MoveToIssueListFromSearchField=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:40}}];SmartUIShortCuts.MoveToSearchFieldFromIssueList=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:38}}];SmartUIShortCuts.ForceComplete=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:32}}];
SmartUIShortCuts.SelectIssue=[{keyStroke:{alt:!1,ctrl:!1,meta:!1,shift:!1,keyCode:32}}];SmartUIShortCuts.SelectIssueIdSummary=[{keyStroke:{alt:!0,ctrl:!1,meta:!0,shift:!0,keyCode:67},os:["macintosh"]},{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!0,keyCode:67}}];SmartUIShortCuts.SelectIssueId=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!1,keyCode:67},os:["macintosh"]},{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:67}}];
SmartUIShortCuts.SwitchToCommentsTab=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:67}}];SmartUIShortCuts.SwitchToHistoryTab=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:72}}];SmartUIShortCuts.SwitchToLinksTab=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:76}}];SmartUIShortCuts.SelectAll=[{keyStroke:{alt:!1,ctrl:!1,meta:!0,shift:!1,keyCode:65},os:["macintosh"]},{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:65}}];
SmartUIShortCuts.SubmitErrorReport=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:13}}];SmartUIShortCuts.CollapseExpandSidebar=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:8}}];SmartUIShortCuts.StarIssue=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:48}}];SmartUIShortCuts.MyWatchFolder=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:49}}];SmartUIShortCuts.QuickHelp=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:191}}];
SmartUIShortCuts.ExpandCollapseExceptions_IDEA=[{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!0,keyCode:61},browser:["firefox"],os:["macintosh","linux"]},{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!0,keyCode:107},browser:["firefox"]},{keyStroke:{alt:!0,ctrl:!0,meta:!1,shift:!0,keyCode:187}}];SmartUIShortCuts.ChangeSwimlanesCollapsedState=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:220}}];SmartUIShortCuts.ExpandCollapseExceptions=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!0,keyCode:191}}];
SmartUIShortCuts.AssignToMe=[{keyStroke:{alt:!1,ctrl:!0,meta:!1,shift:!1,keyCode:77}}];

Webr.stateMachine.stateMachineRuntime=function(){};Webr.stateMachine.stateMachineRuntime.ON_ENTER="onenter";Webr.stateMachine.stateMachineRuntime.ON_EXIT="onexit";Webr.stateMachine.stateMachineRuntime.PARENT_STATE="parentState";Webr.stateMachine.stateMachineRuntime.CURRENT_STATE="current_state";Webr.stateMachine.stateMachineRuntime.LOG_FUNCTION="_log_";
Webr.stateMachine.stateMachineRuntime.handleEvent=function(a,b,c){var e=a[Webr.stateMachine.stateMachineRuntime.CURRENT_STATE];Webr.stateMachine.stateMachineRuntime.log(a,"{ on "+b);var d;do{Webr.stateMachine.stateMachineRuntime.log(a,"  ?"+Webr.stateMachine.stateMachineRuntime.getName(e));if(d=e[b])if(d=d.apply(a,c),!1!==d){null!=d&&(Webr.stateMachine.stateMachineRuntime.log(a,"  ->"+Webr.stateMachine.stateMachineRuntime.getName(d)),a[Webr.stateMachine.stateMachineRuntime.CURRENT_STATE]=d);break}e=
e[Webr.stateMachine.stateMachineRuntime.PARENT_STATE]}while(e);Webr.stateMachine.stateMachineRuntime.log(a,"}")};Webr.stateMachine.stateMachineRuntime.handleOnEnter=function(a,b){Webr.stateMachine.stateMachineRuntime.log(a,"  on enter "+Webr.stateMachine.stateMachineRuntime.getName(b));var c=b[Webr.stateMachine.stateMachineRuntime.ON_ENTER];c&&c.call(a)};
Webr.stateMachine.stateMachineRuntime.handleOnExit=function(a,b){Webr.stateMachine.stateMachineRuntime.log(a,"  on exit "+Webr.stateMachine.stateMachineRuntime.getName(b));var c=b[Webr.stateMachine.stateMachineRuntime.ON_EXIT];c&&c.call(a)};Webr.stateMachine.stateMachineRuntime.log=function(a,b){var c=a[Webr.stateMachine.stateMachineRuntime.LOG_FUNCTION];c&&c.call(a,[b])};Webr.stateMachine.stateMachineRuntime.getName=function(a){(a=a.name)||(a="<undef>");return a};

cr.setTemplateBind("EditBuildDialog",function(a){cr.ach(a,"editBuildDlg","keydown",function(a){return a.handleEnterEsc(function(){cr.serverMethodCallInHandler(a,".methodCall_save",{})},function(){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})})});cr.ach(a,"closeEditBuildDlg","click",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ach(a,"editBuildDlg","historychanged",function(a){cr.serverMethodCallInHandler(a,".methodCall_cancel",{})});cr.ash(a,"cancelBuild","click",
null);cr.ash(a,"saveBuild","click",null);cr.ash(a,"buildAssembleDate","DateSelected",null);regC(a,"buildAssembleDate");regdlg(a,"editBuildDlg")});

cr.setTemplateBind("FloatEditor",function(b){cr.ach(b,"floatValue","keydown",function(a){return a.handleEnterEsc(function(){var b=parseFloat(cr.findInHandler(a,".floatValue",[]).value);isNaN(b)?cr.findInHandler(a,".floatValue",[]).highlight(l10n('Float value expected!')):(cr.findInHandler(a,".floatValue",[]).value=b,cr.findInHandler(a,".floatContentInlineEditor",[]).submit())},function(){cr.findInHandler(a,".floatContentInlineEditor",[]).abort()})});cr.ach(b,"clearValue","click",
function(){return!1});cr.ach(b,"floatContentInlineEditor","createeditor",function(a){$(cr.findInHandler(a,".floatField",[])).addClass("cf-edit");$(cr.findInHandler(a,".floatField",[])).parent().addClass("cf-visible")});cr.ach(b,"floatContentInlineEditor","abort",function(a){$(cr.findInHandler(a,".floatField",[])).removeClass("cf-edit");$(cr.findInHandler(a,".floatField",[])).parent().removeClass("cf-visible")});cr.ach(b,"floatContentInlineEditor","submit",function(a){$(cr.findInHandler(a,".floatField",
[])).removeClass("cf-edit");$(cr.findInHandler(a,".floatField",[])).parent().removeClass("cf-visible")});cr.ash(b,"clearValue","click",null);cr.ash(b,"floatContentInlineEditor","createeditor",{preventDoubleSubmit:!0});cr.ash(b,"floatContentInlineEditor","submit",{preventDoubleSubmit:!0});regic(b,"floatContentInlineEditor")});

cr.setTemplateBind("Comment",function(a){cr.ach(a,"ctrl.deleteComment","click",function(a){window.confirm(l10n('Delete comment?'))&&cr.serverMethodCallInHandler(a,".methodCall_delete",{},{preventDoubleSubmit:!0})});cr.ach(a,"t.cc.permanentCommentDelete","click",function(a){window.confirm(l10n('Delete comment permanently?'))&&cr.serverMethodCallInHandler(a,".methodCall_deletePermanently",{},{preventDoubleSubmit:!0})});cr.ash(a,"ctrl.editCommentLink","click",{preventDoubleSubmit:!0});
cr.ash(a,"t.cc.restoreCommentLink","click",null)});

cr.setTemplateBind("Visibility",function(a){cr.ach(a,"close","click",function(a){cr.findInHandler(a,".visibilityPopup",[]).hide()});cr.ach(a,"visibilityPopup","show",function(a){var b=cr.findInHandler(a,".visibilityPopup",[]);commonController.newInlineIssue.one("click",function(){b.hide()});window.setTimeout(function(){b&&b.hide()},1E4)});cr.ash(a,"issueVisibilityCombo","change",null);cr.ash(a,"issueVisibilityCombo","Load",{collectFormElements:!1,hideLoadingPopup:!0,processRecentOnly:!0,preventDoubleSubmit:!1});
regPC(a,"visibilityPopup")});

cr.setTemplateBind("EditCommentContent",function(a){cr.ach(a,"commentTextEditor","keydown",function(a){return Webr.util.Key.isApplicable(a,SmartUIShortCuts.Submit)?(cr.serverMethodCallInHandler(a,".methodCall_submit",{}),!1):Webr.util.Key.isApplicable(a,SmartUIShortCuts.Dismiss)?(cr.serverMethodCallInHandler(a,".methodCall_cancel",{}),!1):!0});cr.ash(a,"submitButton","click",{preventDoubleSubmit:!0});cr.ash(a,"cancelButton","click",null);cr.ash(a,"textEditArea","valuechange",null);cr.ash(a,"markdownToggle",
"click",null);cr.forEach(a,"textEditArea",function(){this.attachWatcher(!1)});cr.forEach(a,"textEditArea",function(){Webr.component.ElementExpander.addExpandListener(this,400)})});


(function($){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};$.toJSON=typeof JSON==='object'&&JSON.stringify?JSON.stringify:function(o){if(o===null){return'null';}
var type=typeof o;if(type==='undefined'){return undefined;}
if(type==='number'||type==='boolean'){return''+o;}
if(type==='string'){return $.quoteString(o);}
if(type==='object'){if(typeof o.toJSON==='function'){return $.toJSON(o.toJSON());}
if(o.constructor===Date){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month='0'+month;}
if(day<10){day='0'+day;}
if(hours<10){hours='0'+hours;}
if(minutes<10){minutes='0'+minutes;}
if(seconds<10){seconds='0'+seconds;}
if(milli<100){milli='0'+milli;}
if(milli<10){milli='0'+milli;}
return'"'+year+'-'+month+'-'+day+'T'+
hours+':'+minutes+':'+seconds+'.'+milli+'Z"';}
if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||'null');}
return'['+ret.join(',')+']';}
var name,val,pairs=[];for(var k in o){type=typeof k;if(type==='number'){name='"'+k+'"';}else if(type==='string'){name=$.quoteString(k);}else{continue;}
type=typeof o[k];if(type==='function'||type==='undefined'){continue;}
val=$.toJSON(o[k]);pairs.push(name+':'+val);}
return'{'+pairs.join(',')+'}';}};$.evalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(src){return eval('('+src+')');};$.secureEvalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered)){return eval('('+src+')');}else{throw new SyntaxError('Error parsing JSON, source is not valid.');}};$.quoteString=function(string){if(string.match(escapeable)){return'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==='string'){return c;}
c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}
return'"'+string+'"';};})(jQuery);
